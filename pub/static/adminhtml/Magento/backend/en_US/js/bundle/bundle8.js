require.config({"config": {
        "jsbuild":{"Magento_PageBuilder/js/resource/jarallax/jarallax.js":"/*!\r\n * Jarallax v2.0.3 (https://github.com/nk-o/jarallax)\r\n * Copyright 2022 nK <https://nkdev.info>\r\n * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)\r\n */\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n      typeof define === 'function' && define.amd ? define(factory) :\r\n          (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.jarallax = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  function ready(callback) {\r\n    if ('complete' === document.readyState || 'interactive' === document.readyState) {\r\n      // Already ready or interactive, execute callback\r\n      callback();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', callback, {\r\n        capture: true,\r\n        once: true,\r\n        passive: true\r\n      });\r\n    }\r\n  }\r\n\r\n  /* eslint-disable import/no-mutable-exports */\r\n\r\n  /* eslint-disable no-restricted-globals */\r\n  let win;\r\n\r\n  if ('undefined' !== typeof window) {\r\n    win = window;\r\n  } else if ('undefined' !== typeof global) {\r\n    win = global;\r\n  } else if ('undefined' !== typeof self) {\r\n    win = self;\r\n  } else {\r\n    win = {};\r\n  }\r\n\r\n  var global$1 = win;\r\n\r\n  const {\r\n    navigator\r\n  } = global$1;\r\n  const isMobile = /*#__PURE__*/ /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n  let $deviceHelper;\r\n  /**\r\n   * The most popular mobile browsers changes height after page scroll and this generates image jumping.\r\n   * We can fix it using this workaround with vh units.\r\n   */\r\n\r\n  function getDeviceHeight() {\r\n    if (!$deviceHelper && document.body) {\r\n      $deviceHelper = document.createElement('div');\r\n      $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\r\n      document.body.appendChild($deviceHelper);\r\n    }\r\n\r\n    return ($deviceHelper ? $deviceHelper.clientHeight : 0) || global$1.innerHeight || document.documentElement.clientHeight;\r\n  } // Window height data\r\n\r\n\r\n  let wndH;\r\n\r\n  function updateWndVars() {\r\n    if (isMobile) {\r\n      wndH = getDeviceHeight();\r\n    } else {\r\n      wndH = global$1.innerHeight || document.documentElement.clientHeight;\r\n    }\r\n  }\r\n\r\n  updateWndVars();\r\n  global$1.addEventListener('resize', updateWndVars);\r\n  global$1.addEventListener('orientationchange', updateWndVars);\r\n  global$1.addEventListener('load', updateWndVars);\r\n  ready(() => {\r\n    updateWndVars();\r\n  }); // list with all jarallax instances\r\n  // need to render all in one scroll/resize event\r\n\r\n  const jarallaxList = []; // get all parents of the element.\r\n\r\n  function getParents(elem) {\r\n    const parents = [];\r\n\r\n    while (null !== elem.parentElement) {\r\n      elem = elem.parentElement;\r\n\r\n      if (1 === elem.nodeType) {\r\n        parents.push(elem);\r\n      }\r\n    }\r\n\r\n    return parents;\r\n  }\r\n\r\n  function updateParallax() {\r\n    if (!jarallaxList.length) {\r\n      return;\r\n    }\r\n\r\n    jarallaxList.forEach((data, k) => {\r\n      const {\r\n        instance,\r\n        oldData\r\n      } = data;\r\n      const clientRect = instance.$item.getBoundingClientRect();\r\n      const newData = {\r\n        width: clientRect.width,\r\n        height: clientRect.height,\r\n        top: clientRect.top,\r\n        bottom: clientRect.bottom,\r\n        wndW: global$1.innerWidth,\r\n        wndH\r\n      };\r\n      const isResized = !oldData || oldData.wndW !== newData.wndW || oldData.wndH !== newData.wndH || oldData.width !== newData.width || oldData.height !== newData.height;\r\n      const isScrolled = isResized || !oldData || oldData.top !== newData.top || oldData.bottom !== newData.bottom;\r\n      jarallaxList[k].oldData = newData;\r\n\r\n      if (isResized) {\r\n        instance.onResize();\r\n      }\r\n\r\n      if (isScrolled) {\r\n        instance.onScroll();\r\n      }\r\n    });\r\n    global$1.requestAnimationFrame(updateParallax);\r\n  }\r\n\r\n  let instanceID = 0; // Jarallax class\r\n\r\n  class Jarallax {\r\n    constructor(item, userOptions) {\r\n      const self = this;\r\n      self.instanceID = instanceID;\r\n      instanceID += 1;\r\n      self.$item = item;\r\n      self.defaults = {\r\n        type: 'scroll',\r\n        // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\r\n        speed: 0.5,\r\n        // supported value from -1 to 2\r\n        imgSrc: null,\r\n        imgElement: '.jarallax-img',\r\n        imgSize: 'cover',\r\n        imgPosition: '50% 50%',\r\n        imgRepeat: 'no-repeat',\r\n        // supported only for background, not for <img> tag\r\n        keepImg: false,\r\n        // keep <img> tag in it's default place\r\n        elementInViewport: null,\r\n        zIndex: -100,\r\n        disableParallax: false,\r\n        disableVideo: false,\r\n        // video\r\n        videoSrc: null,\r\n        videoStartTime: 0,\r\n        videoEndTime: 0,\r\n        videoVolume: 0,\r\n        videoLoop: true,\r\n        videoPlayOnlyVisible: true,\r\n        videoLazyLoading: true,\r\n        // events\r\n        onScroll: null,\r\n        // function(calculations) {}\r\n        onInit: null,\r\n        // function() {}\r\n        onDestroy: null,\r\n        // function() {}\r\n        onCoverImage: null // function() {}\r\n\r\n      }; // prepare data-options\r\n\r\n      const dataOptions = self.$item.dataset || {};\r\n      const pureDataOptions = {};\r\n      Object.keys(dataOptions).forEach(key => {\r\n        const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\r\n\r\n        if (loweCaseOption && 'undefined' !== typeof self.defaults[loweCaseOption]) {\r\n          pureDataOptions[loweCaseOption] = dataOptions[key];\r\n        }\r\n      });\r\n      self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\r\n      self.pureOptions = self.extend({}, self.options); // prepare 'true' and 'false' strings to boolean\r\n\r\n      Object.keys(self.options).forEach(key => {\r\n        if ('true' === self.options[key]) {\r\n          self.options[key] = true;\r\n        } else if ('false' === self.options[key]) {\r\n          self.options[key] = false;\r\n        }\r\n      }); // fix speed option [-1.0, 2.0]\r\n\r\n      self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed))); // prepare disableParallax callback\r\n\r\n      if ('string' === typeof self.options.disableParallax) {\r\n        self.options.disableParallax = new RegExp(self.options.disableParallax);\r\n      }\r\n\r\n      if (self.options.disableParallax instanceof RegExp) {\r\n        const disableParallaxRegexp = self.options.disableParallax;\r\n\r\n        self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableParallax) {\r\n        self.options.disableParallax = () => false;\r\n      } // prepare disableVideo callback\r\n\r\n\r\n      if ('string' === typeof self.options.disableVideo) {\r\n        self.options.disableVideo = new RegExp(self.options.disableVideo);\r\n      }\r\n\r\n      if (self.options.disableVideo instanceof RegExp) {\r\n        const disableVideoRegexp = self.options.disableVideo;\r\n\r\n        self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\r\n      }\r\n\r\n      if ('function' !== typeof self.options.disableVideo) {\r\n        self.options.disableVideo = () => false;\r\n      } // custom element to check if parallax in viewport\r\n\r\n\r\n      let elementInVP = self.options.elementInViewport; // get first item from array\r\n\r\n      if (elementInVP && 'object' === typeof elementInVP && 'undefined' !== typeof elementInVP.length) {\r\n        [elementInVP] = elementInVP;\r\n      } // check if dom element\r\n\r\n\r\n      if (!(elementInVP instanceof Element)) {\r\n        elementInVP = null;\r\n      }\r\n\r\n      self.options.elementInViewport = elementInVP;\r\n      self.image = {\r\n        src: self.options.imgSrc || null,\r\n        $container: null,\r\n        useImgTag: false,\r\n        // 1. Position fixed is needed for the most of browsers because absolute position have glitches\r\n        // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\r\n        // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\r\n        position: 'fixed'\r\n      };\r\n\r\n      if (self.initImg() && self.canInitParallax()) {\r\n        self.init();\r\n      }\r\n    } // add styles to element\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    css(el, styles) {\r\n      if ('string' === typeof styles) {\r\n        return global$1.getComputedStyle(el).getPropertyValue(styles);\r\n      }\r\n\r\n      Object.keys(styles).forEach(key => {\r\n        el.style[key] = styles[key];\r\n      });\r\n      return el;\r\n    } // Extend like jQuery.extend\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    extend(out, ...args) {\r\n      out = out || {};\r\n      Object.keys(args).forEach(i => {\r\n        if (!args[i]) {\r\n          return;\r\n        }\r\n\r\n        Object.keys(args[i]).forEach(key => {\r\n          out[key] = args[i][key];\r\n        });\r\n      });\r\n      return out;\r\n    } // get window size and scroll position. Useful for extensions\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    getWindowData() {\r\n      return {\r\n        width: global$1.innerWidth || document.documentElement.clientWidth,\r\n        height: wndH,\r\n        y: document.documentElement.scrollTop\r\n      };\r\n    } // Jarallax functions\r\n\r\n\r\n    initImg() {\r\n      const self = this; // find image element\r\n\r\n      let $imgElement = self.options.imgElement;\r\n\r\n      if ($imgElement && 'string' === typeof $imgElement) {\r\n        $imgElement = self.$item.querySelector($imgElement);\r\n      } // check if dom element\r\n\r\n\r\n      if (!($imgElement instanceof Element)) {\r\n        if (self.options.imgSrc) {\r\n          $imgElement = new Image();\r\n          $imgElement.src = self.options.imgSrc;\r\n        } else {\r\n          $imgElement = null;\r\n        }\r\n      }\r\n\r\n      if ($imgElement) {\r\n        if (self.options.keepImg) {\r\n          self.image.$item = $imgElement.cloneNode(true);\r\n        } else {\r\n          self.image.$item = $imgElement;\r\n          self.image.$itemParent = $imgElement.parentNode;\r\n        }\r\n\r\n        self.image.useImgTag = true;\r\n      } // true if there is img tag\r\n\r\n\r\n      if (self.image.$item) {\r\n        return true;\r\n      } // get image src\r\n\r\n\r\n      if (null === self.image.src) {\r\n        self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n        self.image.bgImage = self.css(self.$item, 'background-image');\r\n      }\r\n\r\n      return !(!self.image.bgImage || 'none' === self.image.bgImage);\r\n    }\r\n\r\n    canInitParallax() {\r\n      return !this.options.disableParallax();\r\n    }\r\n\r\n    init() {\r\n      const self = this;\r\n      const containerStyles = {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n      };\r\n      let imageStyles = {\r\n        pointerEvents: 'none',\r\n        transformStyle: 'preserve-3d',\r\n        backfaceVisibility: 'hidden',\r\n        willChange: 'transform,opacity'\r\n      };\r\n\r\n      if (!self.options.keepImg) {\r\n        // save default user styles\r\n        const curStyle = self.$item.getAttribute('style');\r\n\r\n        if (curStyle) {\r\n          self.$item.setAttribute('data-jarallax-original-styles', curStyle);\r\n        }\r\n\r\n        if (self.image.useImgTag) {\r\n          const curImgStyle = self.image.$item.getAttribute('style');\r\n\r\n          if (curImgStyle) {\r\n            self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\r\n          }\r\n        }\r\n      } // set relative position and z-index to the parent\r\n\r\n\r\n      if ('static' === self.css(self.$item, 'position')) {\r\n        self.css(self.$item, {\r\n          position: 'relative'\r\n        });\r\n      }\r\n\r\n      if ('auto' === self.css(self.$item, 'z-index')) {\r\n        self.css(self.$item, {\r\n          zIndex: 0\r\n        });\r\n      } // container for parallax image\r\n\r\n\r\n      self.image.$container = document.createElement('div');\r\n      self.css(self.image.$container, containerStyles);\r\n      self.css(self.image.$container, {\r\n        'z-index': self.options.zIndex\r\n      }); // it will remove some image overlapping\r\n      // overlapping occur due to an image position fixed inside absolute position element\r\n      // needed only when background in fixed position\r\n\r\n      if ('fixed' === this.image.position) {\r\n        self.css(self.image.$container, {\r\n          '-webkit-clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)',\r\n          'clip-path': 'polygon(0 0, 100% 0, 100% 100%, 0 100%)'\r\n        });\r\n      }\r\n\r\n      self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\r\n      self.$item.appendChild(self.image.$container); // use img tag\r\n\r\n      if (self.image.useImgTag) {\r\n        imageStyles = self.extend({\r\n          'object-fit': self.options.imgSize,\r\n          'object-position': self.options.imgPosition,\r\n          'max-width': 'none'\r\n        }, containerStyles, imageStyles); // use div with background image\r\n      } else {\r\n        self.image.$item = document.createElement('div');\r\n\r\n        if (self.image.src) {\r\n          imageStyles = self.extend({\r\n            'background-position': self.options.imgPosition,\r\n            'background-size': self.options.imgSize,\r\n            'background-repeat': self.options.imgRepeat,\r\n            'background-image': self.image.bgImage || `url(\"${self.image.src}\")`\r\n          }, containerStyles, imageStyles);\r\n        }\r\n      }\r\n\r\n      if ('opacity' === self.options.type || 'scale' === self.options.type || 'scale-opacity' === self.options.type || 1 === self.options.speed) {\r\n        self.image.position = 'absolute';\r\n      } // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\r\n      //    discussion - https://github.com/nk-o/jarallax/issues/9\r\n      // 2. Check if parents have overflow scroll\r\n\r\n\r\n      if ('fixed' === self.image.position) {\r\n        const $parents = getParents(self.$item).filter(el => {\r\n          const styles = global$1.getComputedStyle(el);\r\n          const parentTransform = styles['-webkit-transform'] || styles['-moz-transform'] || styles.transform;\r\n          const overflowRegex = /(auto|scroll)/;\r\n          return parentTransform && 'none' !== parentTransform || overflowRegex.test(styles.overflow + styles['overflow-y'] + styles['overflow-x']);\r\n        });\r\n        self.image.position = $parents.length ? 'absolute' : 'fixed';\r\n      } // add position to parallax block\r\n\r\n\r\n      imageStyles.position = self.image.position; // insert parallax image\r\n\r\n      self.css(self.image.$item, imageStyles);\r\n      self.image.$container.appendChild(self.image.$item); // set initial position and size\r\n\r\n      self.onResize();\r\n      self.onScroll(true); // call onInit event\r\n\r\n      if (self.options.onInit) {\r\n        self.options.onInit.call(self);\r\n      } // remove default user background\r\n\r\n\r\n      if ('none' !== self.css(self.$item, 'background-image')) {\r\n        self.css(self.$item, {\r\n          'background-image': 'none'\r\n        });\r\n      }\r\n\r\n      self.addToParallaxList();\r\n    } // add to parallax instances list\r\n\r\n\r\n    addToParallaxList() {\r\n      jarallaxList.push({\r\n        instance: this\r\n      });\r\n\r\n      if (1 === jarallaxList.length) {\r\n        global$1.requestAnimationFrame(updateParallax);\r\n      }\r\n    } // remove from parallax instances list\r\n\r\n\r\n    removeFromParallaxList() {\r\n      const self = this;\r\n      jarallaxList.forEach((data, key) => {\r\n        if (data.instance.instanceID === self.instanceID) {\r\n          jarallaxList.splice(key, 1);\r\n        }\r\n      });\r\n    }\r\n\r\n    destroy() {\r\n      const self = this;\r\n      self.removeFromParallaxList(); // return styles on container as before jarallax init\r\n\r\n      const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\r\n      self.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n      if (!originalStylesTag) {\r\n        self.$item.removeAttribute('style');\r\n      } else {\r\n        self.$item.setAttribute('style', originalStylesTag);\r\n      }\r\n\r\n      if (self.image.useImgTag) {\r\n        // return styles on img tag as before jarallax init\r\n        const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\r\n        self.image.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\r\n\r\n        if (!originalStylesImgTag) {\r\n          self.image.$item.removeAttribute('style');\r\n        } else {\r\n          self.image.$item.setAttribute('style', originalStylesTag);\r\n        } // move img tag to its default position\r\n\r\n\r\n        if (self.image.$itemParent) {\r\n          self.image.$itemParent.appendChild(self.image.$item);\r\n        }\r\n      } // remove additional dom elements\r\n\r\n\r\n      if (self.image.$container) {\r\n        self.image.$container.parentNode.removeChild(self.image.$container);\r\n      } // call onDestroy event\r\n\r\n\r\n      if (self.options.onDestroy) {\r\n        self.options.onDestroy.call(self);\r\n      } // delete jarallax from item\r\n\r\n\r\n      delete self.$item.jarallax;\r\n    } // Fallback for removed function.\r\n    // Does nothing now.\r\n    // eslint-disable-next-line class-methods-use-this\r\n\r\n\r\n    clipContainer() {}\r\n\r\n    coverImage() {\r\n      const self = this;\r\n      const rect = self.image.$container.getBoundingClientRect();\r\n      const contH = rect.height;\r\n      const {\r\n        speed\r\n      } = self.options;\r\n      const isScroll = 'scroll' === self.options.type || 'scroll-opacity' === self.options.type;\r\n      let scrollDist = 0;\r\n      let resultH = contH;\r\n      let resultMT = 0; // scroll parallax\r\n\r\n      if (isScroll) {\r\n        // scroll distance and height for image\r\n        if (0 > speed) {\r\n          scrollDist = speed * Math.max(contH, wndH);\r\n\r\n          if (wndH < contH) {\r\n            scrollDist -= speed * (contH - wndH);\r\n          }\r\n        } else {\r\n          scrollDist = speed * (contH + wndH);\r\n        } // size for scroll parallax\r\n\r\n\r\n        if (1 < speed) {\r\n          resultH = Math.abs(scrollDist - wndH);\r\n        } else if (0 > speed) {\r\n          resultH = scrollDist / speed + Math.abs(scrollDist);\r\n        } else {\r\n          resultH += (wndH - contH) * (1 - speed);\r\n        }\r\n\r\n        scrollDist /= 2;\r\n      } // store scroll distance\r\n\r\n\r\n      self.parallaxScrollDistance = scrollDist; // vertical center\r\n\r\n      if (isScroll) {\r\n        resultMT = (wndH - resultH) / 2;\r\n      } else {\r\n        resultMT = (contH - resultH) / 2;\r\n      } // apply result to item\r\n\r\n\r\n      self.css(self.image.$item, {\r\n        height: `${resultH}px`,\r\n        marginTop: `${resultMT}px`,\r\n        left: 'fixed' === self.image.position ? `${rect.left}px` : '0',\r\n        width: `${rect.width}px`\r\n      }); // call onCoverImage event\r\n\r\n      if (self.options.onCoverImage) {\r\n        self.options.onCoverImage.call(self);\r\n      } // return some useful data. Used in the video cover function\r\n\r\n\r\n      return {\r\n        image: {\r\n          height: resultH,\r\n          marginTop: resultMT\r\n        },\r\n        container: rect\r\n      };\r\n    }\r\n\r\n    isVisible() {\r\n      return this.isElementInViewport || false;\r\n    }\r\n\r\n    onScroll(force) {\r\n      const self = this;\r\n      const rect = self.$item.getBoundingClientRect();\r\n      const contT = rect.top;\r\n      const contH = rect.height;\r\n      const styles = {}; // check if in viewport\r\n\r\n      let viewportRect = rect;\r\n\r\n      if (self.options.elementInViewport) {\r\n        viewportRect = self.options.elementInViewport.getBoundingClientRect();\r\n      }\r\n\r\n      self.isElementInViewport = 0 <= viewportRect.bottom && 0 <= viewportRect.right && viewportRect.top <= wndH && viewportRect.left <= global$1.innerWidth; // stop calculations if item is not in viewport\r\n\r\n      if (force ? false : !self.isElementInViewport) {\r\n        return;\r\n      } // calculate parallax helping variables\r\n\r\n\r\n      const beforeTop = Math.max(0, contT);\r\n      const beforeTopEnd = Math.max(0, contH + contT);\r\n      const afterTop = Math.max(0, -contT);\r\n      const beforeBottom = Math.max(0, contT + contH - wndH);\r\n      const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\r\n      const afterBottom = Math.max(0, -contT + wndH - contH);\r\n      const fromViewportCenter = 1 - 2 * ((wndH - contT) / (wndH + contH)); // calculate on how percent of section is visible\r\n\r\n      let visiblePercent = 1;\r\n\r\n      if (contH < wndH) {\r\n        visiblePercent = 1 - (afterTop || beforeBottom) / contH;\r\n      } else if (beforeTopEnd <= wndH) {\r\n        visiblePercent = beforeTopEnd / wndH;\r\n      } else if (beforeBottomEnd <= wndH) {\r\n        visiblePercent = beforeBottomEnd / wndH;\r\n      } // opacity\r\n\r\n\r\n      if ('opacity' === self.options.type || 'scale-opacity' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        styles.transform = 'translate3d(0,0,0)';\r\n        styles.opacity = visiblePercent;\r\n      } // scale\r\n\r\n\r\n      if ('scale' === self.options.type || 'scale-opacity' === self.options.type) {\r\n        let scale = 1;\r\n\r\n        if (0 > self.options.speed) {\r\n          scale -= self.options.speed * visiblePercent;\r\n        } else {\r\n          scale += self.options.speed * (1 - visiblePercent);\r\n        }\r\n\r\n        styles.transform = `scale(${scale}) translate3d(0,0,0)`;\r\n      } // scroll\r\n\r\n\r\n      if ('scroll' === self.options.type || 'scroll-opacity' === self.options.type) {\r\n        let positionY = self.parallaxScrollDistance * fromViewportCenter; // fix if parallax block in absolute position\r\n\r\n        if ('absolute' === self.image.position) {\r\n          positionY -= contT;\r\n        }\r\n\r\n        styles.transform = `translate3d(0,${positionY}px,0)`;\r\n      }\r\n\r\n      self.css(self.image.$item, styles); // call onScroll event\r\n\r\n      if (self.options.onScroll) {\r\n        self.options.onScroll.call(self, {\r\n          section: rect,\r\n          beforeTop,\r\n          beforeTopEnd,\r\n          afterTop,\r\n          beforeBottom,\r\n          beforeBottomEnd,\r\n          afterBottom,\r\n          visiblePercent,\r\n          fromViewportCenter\r\n        });\r\n      }\r\n    }\r\n\r\n    onResize() {\r\n      this.coverImage();\r\n    }\r\n\r\n  } // global definition\r\n\r\n\r\n  const jarallax = function (items, options, ...args) {\r\n    // check for dom element\r\n    // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\r\n    if ('object' === typeof HTMLElement ? items instanceof HTMLElement : items && 'object' === typeof items && null !== items && 1 === items.nodeType && 'string' === typeof items.nodeName) {\r\n      items = [items];\r\n    }\r\n\r\n    const len = items.length;\r\n    let k = 0;\r\n    let ret;\r\n\r\n    for (k; k < len; k += 1) {\r\n      if ('object' === typeof options || 'undefined' === typeof options) {\r\n        if (!items[k].jarallax) {\r\n          items[k].jarallax = new Jarallax(items[k], options);\r\n        }\r\n      } else if (items[k].jarallax) {\r\n        // eslint-disable-next-line prefer-spread\r\n        ret = items[k].jarallax[options].apply(items[k].jarallax, args);\r\n      }\r\n\r\n      if ('undefined' !== typeof ret) {\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  jarallax.constructor = Jarallax;\r\n\r\n  const $ = global$1.jQuery; // jQuery support\r\n\r\n  if ('undefined' !== typeof $) {\r\n    const $Plugin = function (...args) {\r\n      Array.prototype.unshift.call(args, this);\r\n      const res = jarallax.apply(global$1, args);\r\n      return 'object' !== typeof res ? res : this;\r\n    };\r\n\r\n    $Plugin.constructor = jarallax.constructor; // no conflict\r\n\r\n    const old$Plugin = $.fn.jarallax;\r\n    $.fn.jarallax = $Plugin;\r\n\r\n    $.fn.jarallax.noConflict = function () {\r\n      $.fn.jarallax = old$Plugin;\r\n      return this;\r\n    };\r\n  } // data-jarallax initialization\r\n\r\n\r\n  ready(() => {\r\n    jarallax(document.querySelectorAll('[data-jarallax]'));\r\n  });\r\n\r\n  return jarallax;\r\n\r\n}));\r\n//# sourceMappingURL=jarallax.js.map\r\n","Magento_PageBuilder/js/resource/jquery/ui/jquery.ui.touch-punch.js":"/*!\r\n * jQuery UI Touch Punch 0.2.3\r\n *\r\n * Copyright 2011\u20132014, Dave Furfero\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Depends:\r\n *  jquery.ui.widget.js\r\n *  jquery.ui.mouse.js\r\n */\r\n(function ($) {\r\n\r\n    // Detect touch support\r\n    $.support.touch = 'ontouchend' in document;\r\n\r\n    // Ignore browsers without touch support\r\n    if (!$.support.touch) {\r\n        return;\r\n    }\r\n\r\n    var mouseProto = $.ui.mouse.prototype,\r\n        _mouseInit = mouseProto._mouseInit,\r\n        _mouseDestroy = mouseProto._mouseDestroy,\r\n        touchHandled;\r\n\r\n    /**\r\n     * Simulate a mouse event based on a corresponding touch event\r\n     * @param {Object} event A touch event\r\n     * @param {String} simulatedType The corresponding mouse event\r\n     */\r\n    function simulateMouseEvent (event, simulatedType) {\r\n\r\n        // Ignore multi-touch events\r\n        if (event.originalEvent.touches.length > 1) {\r\n            return;\r\n        }\r\n\r\n        event.preventDefault();\r\n\r\n        var touch = event.originalEvent.changedTouches[0],\r\n            simulatedEvent = document.createEvent('MouseEvents');\r\n\r\n        // Initialize the simulated mouse event using the touch event's coordinates\r\n        simulatedEvent.initMouseEvent(\r\n            simulatedType,    // type\r\n            true,             // bubbles\r\n            true,             // cancelable\r\n            window,           // view\r\n            1,                // detail\r\n            touch.screenX,    // screenX\r\n            touch.screenY,    // screenY\r\n            touch.clientX,    // clientX\r\n            touch.clientY,    // clientY\r\n            false,            // ctrlKey\r\n            false,            // altKey\r\n            false,            // shiftKey\r\n            false,            // metaKey\r\n            0,                // button\r\n            null              // relatedTarget\r\n        );\r\n\r\n        // Dispatch the simulated event to the target element\r\n        event.target.dispatchEvent(simulatedEvent);\r\n    }\r\n\r\n    /**\r\n     * Handle the jQuery UI widget's touchstart events\r\n     * @param {Object} event The widget element's touchstart event\r\n     */\r\n    mouseProto._touchStart = function (event) {\r\n\r\n        var self = this;\r\n\r\n        // Ignore the event if another widget is already being handled\r\n        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\r\n            return;\r\n        }\r\n\r\n        // Set the flag to prevent other widgets from inheriting the touch event\r\n        touchHandled = true;\r\n\r\n        // Track movement to determine if interaction was a click\r\n        self._touchMoved = false;\r\n\r\n        // Simulate the mouseover event\r\n        simulateMouseEvent(event, 'mouseover');\r\n\r\n        // Simulate the mousemove event\r\n        simulateMouseEvent(event, 'mousemove');\r\n\r\n        // Simulate the mousedown event\r\n        simulateMouseEvent(event, 'mousedown');\r\n    };\r\n\r\n    /**\r\n     * Handle the jQuery UI widget's touchmove events\r\n     * @param {Object} event The document's touchmove event\r\n     */\r\n    mouseProto._touchMove = function (event) {\r\n\r\n        // Ignore event if not handled\r\n        if (!touchHandled) {\r\n            return;\r\n        }\r\n\r\n        // Interaction was not a click\r\n        this._touchMoved = true;\r\n\r\n        // Simulate the mousemove event\r\n        simulateMouseEvent(event, 'mousemove');\r\n    };\r\n\r\n    /**\r\n     * Handle the jQuery UI widget's touchend events\r\n     * @param {Object} event The document's touchend event\r\n     */\r\n    mouseProto._touchEnd = function (event) {\r\n\r\n        // Ignore event if not handled\r\n        if (!touchHandled) {\r\n            return;\r\n        }\r\n\r\n        // Simulate the mouseup event\r\n        simulateMouseEvent(event, 'mouseup');\r\n\r\n        // Simulate the mouseout event\r\n        simulateMouseEvent(event, 'mouseout');\r\n\r\n        // If the touch interaction did not move, it should trigger a click\r\n        if (!this._touchMoved) {\r\n\r\n            // Simulate the click event\r\n            simulateMouseEvent(event, 'click');\r\n        }\r\n\r\n        // Unset the flag to allow other widgets to inherit the touch event\r\n        touchHandled = false;\r\n    };\r\n\r\n    /**\r\n     * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\r\n     * This method extends the widget with bound touch event handlers that\r\n     * translate touch events to mouse events and pass them to the widget's\r\n     * original mouse event handling methods.\r\n     */\r\n    mouseProto._mouseInit = function () {\r\n\r\n        var self = this;\r\n\r\n        // Delegate the touch handlers to the widget's element\r\n        self.element.bind({\r\n            touchstart: $.proxy(self, '_touchStart'),\r\n            touchmove: $.proxy(self, '_touchMove'),\r\n            touchend: $.proxy(self, '_touchEnd')\r\n        });\r\n\r\n        // Call the original $.ui.mouse init method\r\n        _mouseInit.call(self);\r\n    };\r\n\r\n    /**\r\n     * Remove the touch event handlers\r\n     */\r\n    mouseProto._mouseDestroy = function () {\r\n\r\n        var self = this;\r\n\r\n        // Delegate the touch handlers to the widget's element\r\n        self.element.unbind({\r\n            touchstart: $.proxy(self, '_touchStart'),\r\n            touchmove: $.proxy(self, '_touchMove'),\r\n            touchend: $.proxy(self, '_touchEnd')\r\n        });\r\n\r\n        // Call the original $.ui.mouse destroy method\r\n        _mouseDestroy.call(self);\r\n    };\r\n\r\n})(jQuery);","Magento_PageBuilder/js/resource/jquery/ui/jquery.ui.touch-punch.min.js":"/*!\r\n * jQuery UI Touch Punch 0.2.3\r\n *\r\n * Copyright 2011\u20132014, Dave Furfero\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Depends:\r\n *  jquery.ui.widget.js\r\n *  jquery.ui.mouse.js\r\n */\r\n!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent(\"MouseEvents\");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch=\"ontouchend\"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,\"mouseover\"),f(a,\"mousemove\"),f(a,\"mousedown\"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,\"mousemove\"))},b._touchEnd=function(a){e&&(f(a,\"mouseup\"),f(a,\"mouseout\"),this._touchMoved||f(a,\"click\"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),d.call(b)}}}(jQuery);\r\n","Magento_PageBuilder/js/resource/resize-observer/ResizeObserver.js":"(function (global, factory) {\r\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? define(factory) :\r\n            (global.ResizeObserver = factory());\r\n}(this, (function () { 'use strict';\r\n\r\n    /**\r\n     * A collection of shims that provide minimal functionality of the ES6 collections.\r\n     *\r\n     * These implementations are not meant to be used outside of the ResizeObserver\r\n     * modules as they cover only a limited range of use cases.\r\n     */\r\n    /* eslint-disable require-jsdoc, valid-jsdoc */\r\n    var MapShim = (function () {\r\n        if (typeof Map !== 'undefined') {\r\n            return Map;\r\n        }\r\n\r\n        /**\r\n         * Returns index in provided array that matches the specified key.\r\n         *\r\n         * @param {Array<Array>} arr\r\n         * @param {*} key\r\n         * @returns {number}\r\n         */\r\n        function getIndex(arr, key) {\r\n            var result = -1;\r\n\r\n            arr.some(function (entry, index) {\r\n                if (entry[0] === key) {\r\n                    result = index;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            return result;\r\n        }\r\n\r\n        return (function () {\r\n            function anonymous() {\r\n                this.__entries__ = [];\r\n            }\r\n\r\n            var prototypeAccessors = { size: { configurable: true } };\r\n\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            prototypeAccessors.size.get = function () {\r\n                return this.__entries__.length;\r\n            };\r\n\r\n            /**\r\n             * @param {*} key\r\n             * @returns {*}\r\n             */\r\n            anonymous.prototype.get = function (key) {\r\n                var index = getIndex(this.__entries__, key);\r\n                var entry = this.__entries__[index];\r\n\r\n                return entry && entry[1];\r\n            };\r\n\r\n            /**\r\n             * @param {*} key\r\n             * @param {*} value\r\n             * @returns {void}\r\n             */\r\n            anonymous.prototype.set = function (key, value) {\r\n                var index = getIndex(this.__entries__, key);\r\n\r\n                if (~index) {\r\n                    this.__entries__[index][1] = value;\r\n                } else {\r\n                    this.__entries__.push([key, value]);\r\n                }\r\n            };\r\n\r\n            /**\r\n             * @param {*} key\r\n             * @returns {void}\r\n             */\r\n            anonymous.prototype.delete = function (key) {\r\n                var entries = this.__entries__;\r\n                var index = getIndex(entries, key);\r\n\r\n                if (~index) {\r\n                    entries.splice(index, 1);\r\n                }\r\n            };\r\n\r\n            /**\r\n             * @param {*} key\r\n             * @returns {void}\r\n             */\r\n            anonymous.prototype.has = function (key) {\r\n                return !!~getIndex(this.__entries__, key);\r\n            };\r\n\r\n            /**\r\n             * @returns {void}\r\n             */\r\n            anonymous.prototype.clear = function () {\r\n                this.__entries__.splice(0);\r\n            };\r\n\r\n            /**\r\n             * @param {Function} callback\r\n             * @param {*} [ctx=null]\r\n             * @returns {void}\r\n             */\r\n            anonymous.prototype.forEach = function (callback, ctx) {\r\n                var this$1 = this;\r\n                if ( ctx === void 0 ) ctx = null;\r\n\r\n                for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\r\n                    var entry = list[i];\r\n\r\n                    callback.call(ctx, entry[1], entry[0]);\r\n                }\r\n            };\r\n\r\n            Object.defineProperties( anonymous.prototype, prototypeAccessors );\r\n\r\n            return anonymous;\r\n        }());\r\n    })();\r\n\r\n    /**\r\n     * Detects whether window and document objects are available in current environment.\r\n     */\r\n    var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\r\n\r\n// Returns global object of a current environment.\r\n    var global$1 = (function () {\r\n        if (typeof global !== 'undefined' && global.Math === Math) {\r\n            return global;\r\n        }\r\n\r\n        if (typeof self !== 'undefined' && self.Math === Math) {\r\n            return self;\r\n        }\r\n\r\n        if (typeof window !== 'undefined' && window.Math === Math) {\r\n            return window;\r\n        }\r\n\r\n        // eslint-disable-next-line no-new-func\r\n        return Function('return this')();\r\n    })();\r\n\r\n    /**\r\n     * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n     * first one is not supported.\r\n     *\r\n     * @returns {number} Requests' identifier.\r\n     */\r\n    var requestAnimationFrame$1 = (function () {\r\n        if (typeof requestAnimationFrame === 'function') {\r\n            // It's required to use a bounded function because IE sometimes throws\r\n            // an \"Invalid calling object\" error if rAF is invoked without the global\r\n            // object on the left hand side.\r\n            return requestAnimationFrame.bind(global$1);\r\n        }\r\n\r\n        return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n    })();\r\n\r\n// Defines minimum timeout before adding a trailing call.\r\n    var trailingTimeout = 2;\r\n\r\n    /**\r\n     * Creates a wrapper function which ensures that provided callback will be\r\n     * invoked only once during the specified delay period.\r\n     *\r\n     * @param {Function} callback - Function to be invoked after the delay period.\r\n     * @param {number} delay - Delay after which to invoke callback.\r\n     * @returns {Function}\r\n     */\r\n    var throttle = function (callback, delay) {\r\n        var leadingCall = false,\r\n            trailingCall = false,\r\n            lastCallTime = 0;\r\n\r\n        /**\r\n         * Invokes the original callback function and schedules new invocation if\r\n         * the \"proxy\" was called during current request.\r\n         *\r\n         * @returns {void}\r\n         */\r\n        function resolvePending() {\r\n            if (leadingCall) {\r\n                leadingCall = false;\r\n\r\n                callback();\r\n            }\r\n\r\n            if (trailingCall) {\r\n                proxy();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Callback invoked after the specified delay. It will further postpone\r\n         * invocation of the original function delegating it to the\r\n         * requestAnimationFrame.\r\n         *\r\n         * @returns {void}\r\n         */\r\n        function timeoutCallback() {\r\n            requestAnimationFrame$1(resolvePending);\r\n        }\r\n\r\n        /**\r\n         * Schedules invocation of the original function.\r\n         *\r\n         * @returns {void}\r\n         */\r\n        function proxy() {\r\n            var timeStamp = Date.now();\r\n\r\n            if (leadingCall) {\r\n                // Reject immediately following calls.\r\n                if (timeStamp - lastCallTime < trailingTimeout) {\r\n                    return;\r\n                }\r\n\r\n                // Schedule new call to be in invoked when the pending one is resolved.\r\n                // This is important for \"transitions\" which never actually start\r\n                // immediately so there is a chance that we might miss one if change\r\n                // happens amids the pending invocation.\r\n                trailingCall = true;\r\n            } else {\r\n                leadingCall = true;\r\n                trailingCall = false;\r\n\r\n                setTimeout(timeoutCallback, delay);\r\n            }\r\n\r\n            lastCallTime = timeStamp;\r\n        }\r\n\r\n        return proxy;\r\n    };\r\n\r\n// Minimum delay before invoking the update of observers.\r\n    var REFRESH_DELAY = 20;\r\n\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\n    var transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n\r\n// Check if MutationObserver is available.\r\n    var mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n\r\n    /**\r\n     * Singleton controller class which handles updates of ResizeObserver instances.\r\n     */\r\n    var ResizeObserverController = function() {\r\n        this.connected_ = false;\r\n        this.mutationEventsAdded_ = false;\r\n        this.mutationsObserver_ = null;\r\n        this.observers_ = [];\r\n\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    };\r\n\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n\r\n\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n\r\n\r\n    /**\r\n     * Keeps reference to the instance of MutationObserver.\r\n     *\r\n     * @private {MutationObserver}\r\n     */\r\n\r\n    /**\r\n     * Indicates whether DOM listeners have been added.\r\n     *\r\n     * @private {boolean}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *  dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n\r\n        return activeObservers.length > 0;\r\n    };\r\n\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n\r\n        window.addEventListener('resize', this.refresh);\r\n\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        } else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n\r\n        this.connected_ = true;\r\n    };\r\n\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\r\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\r\n\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n\r\n        return this.instance_;\r\n    };\r\n\r\n    ResizeObserverController.instance_ = null;\r\n\r\n    /**\r\n     * Defines non-writable/enumerable properties of the provided target object.\r\n     *\r\n     * @param {Object} target - Object for which to define properties.\r\n     * @param {Object} props - Properties to be defined.\r\n     * @returns {Object} Target object.\r\n     */\r\n    var defineConfigurable = (function (target, props) {\r\n        for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\r\n            var key = list[i];\r\n\r\n            Object.defineProperty(target, key, {\r\n                value: props[key],\r\n                enumerable: false,\r\n                writable: false,\r\n                configurable: true\r\n            });\r\n        }\r\n\r\n        return target;\r\n    });\r\n\r\n    /**\r\n     * Returns the global object associated with provided element.\r\n     *\r\n     * @param {Object} target\r\n     * @returns {Object}\r\n     */\r\n    var getWindowOf = (function (target) {\r\n        // Assume that the element is an instance of Node, which means that it\r\n        // has the \"ownerDocument\" property from which we can retrieve a\r\n        // corresponding global object.\r\n        var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n\r\n        // Return the local global object if it's not possible extract one from\r\n        // provided element.\r\n        return ownerGlobal || global$1;\r\n    });\r\n\r\n// Placeholder of an empty content rectangle.\r\n    var emptyRect = createRectInit(0, 0, 0, 0);\r\n\r\n    /**\r\n     * Converts provided string to a number.\r\n     *\r\n     * @param {number|string} value\r\n     * @returns {number}\r\n     */\r\n    function toFloat(value) {\r\n        return parseFloat(value) || 0;\r\n    }\r\n\r\n    /**\r\n     * Extracts borders size from provided styles.\r\n     *\r\n     * @param {CSSStyleDeclaration} styles\r\n     * @param {...string} positions - Borders positions (top, right, ...)\r\n     * @returns {number}\r\n     */\r\n    function getBordersSize(styles) {\r\n        var positions = [], len = arguments.length - 1;\r\n        while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\r\n\r\n        return positions.reduce(function (size, position) {\r\n            var value = styles['border-' + position + '-width'];\r\n\r\n            return size + toFloat(value);\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * Extracts paddings sizes from provided styles.\r\n     *\r\n     * @param {CSSStyleDeclaration} styles\r\n     * @returns {Object} Paddings box.\r\n     */\r\n    function getPaddings(styles) {\r\n        var positions = ['top', 'right', 'bottom', 'left'];\r\n        var paddings = {};\r\n\r\n        for (var i = 0, list = positions; i < list.length; i += 1) {\r\n            var position = list[i];\r\n\r\n            var value = styles['padding-' + position];\r\n\r\n            paddings[position] = toFloat(value);\r\n        }\r\n\r\n        return paddings;\r\n    }\r\n\r\n    /**\r\n     * Calculates content rectangle of provided SVG element.\r\n     *\r\n     * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n     *      to be calculated.\r\n     * @returns {DOMRectInit}\r\n     */\r\n    function getSVGContentRect(target) {\r\n        var bbox = target.getBBox();\r\n\r\n        return createRectInit(0, 0, bbox.width, bbox.height);\r\n    }\r\n\r\n    /**\r\n     * Calculates content rectangle of provided HTMLElement.\r\n     *\r\n     * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n     * @returns {DOMRectInit}\r\n     */\r\n    function getHTMLElementContentRect(target) {\r\n        // Client width & height properties can't be\r\n        // used exclusively as they provide rounded values.\r\n        var clientWidth = target.clientWidth;\r\n        var clientHeight = target.clientHeight;\r\n\r\n        // By this condition we can catch all non-replaced inline, hidden and\r\n        // detached elements. Though elements with width & height properties less\r\n        // than 0.5 will be discarded as well.\r\n        //\r\n        // Without it we would need to implement separate methods for each of\r\n        // those cases and it's not possible to perform a precise and performance\r\n        // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n        // gives wrong results for elements with width & height less than 0.5.\r\n        if (!clientWidth && !clientHeight) {\r\n            return emptyRect;\r\n        }\r\n\r\n        var styles = getWindowOf(target).getComputedStyle(target);\r\n        var paddings = getPaddings(styles);\r\n        var horizPad = paddings.left + paddings.right;\r\n        var vertPad = paddings.top + paddings.bottom;\r\n\r\n        // Computed styles of width & height are being used because they are the\r\n        // only dimensions available to JS that contain non-rounded values. It could\r\n        // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n        // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n        var width = toFloat(styles.width),\r\n            height = toFloat(styles.height);\r\n\r\n        // Width & height include paddings and borders when the 'border-box' box\r\n        // model is applied (except for IE).\r\n        if (styles.boxSizing === 'border-box') {\r\n            // Following conditions are required to handle Internet Explorer which\r\n            // doesn't include paddings and borders to computed CSS dimensions.\r\n            //\r\n            // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n            // properties then it's either IE, and thus we don't need to subtract\r\n            // anything, or an element merely doesn't have paddings/borders styles.\r\n            if (Math.round(width + horizPad) !== clientWidth) {\r\n                width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n            }\r\n\r\n            if (Math.round(height + vertPad) !== clientHeight) {\r\n                height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n            }\r\n        }\r\n\r\n        // Following steps can't be applied to the document's root element as its\r\n        // client[Width/Height] properties represent viewport area of the window.\r\n        // Besides, it's as well not necessary as the <html> itself neither has\r\n        // rendered scroll bars nor it can be clipped.\r\n        if (!isDocumentElement(target)) {\r\n            // In some browsers (only in Firefox, actually) CSS width & height\r\n            // include scroll bars size which can be removed at this step as scroll\r\n            // bars are the only difference between rounded dimensions + paddings\r\n            // and \"client\" properties, though that is not always true in Chrome.\r\n            var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n            var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n\r\n            // Chrome has a rather weird rounding of \"client\" properties.\r\n            // E.g. for an element with content width of 314.2px it sometimes gives\r\n            // the client width of 315px and for the width of 314.7px it may give\r\n            // 314px. And it doesn't happen all the time. So just ignore this delta\r\n            // as a non-relevant.\r\n            if (Math.abs(vertScrollbar) !== 1) {\r\n                width -= vertScrollbar;\r\n            }\r\n\r\n            if (Math.abs(horizScrollbar) !== 1) {\r\n                height -= horizScrollbar;\r\n            }\r\n        }\r\n\r\n        return createRectInit(paddings.left, paddings.top, width, height);\r\n    }\r\n\r\n    /**\r\n     * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n     *\r\n     * @param {Element} target - Element to be checked.\r\n     * @returns {boolean}\r\n     */\r\n    var isSVGGraphicsElement = (function () {\r\n        // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n        // interface.\r\n        if (typeof SVGGraphicsElement !== 'undefined') {\r\n            return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n        }\r\n\r\n        // If it's so, then check that element is at least an instance of the\r\n        // SVGElement and that it has the \"getBBox\" method.\r\n        // eslint-disable-next-line no-extra-parens\r\n        return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\r\n    })();\r\n\r\n    /**\r\n     * Checks whether provided element is a document element (<html>).\r\n     *\r\n     * @param {Element} target - Element to be checked.\r\n     * @returns {boolean}\r\n     */\r\n    function isDocumentElement(target) {\r\n        return target === getWindowOf(target).document.documentElement;\r\n    }\r\n\r\n    /**\r\n     * Calculates an appropriate content rectangle for provided html or svg element.\r\n     *\r\n     * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n     * @returns {DOMRectInit}\r\n     */\r\n    function getContentRect(target) {\r\n        if (!isBrowser) {\r\n            return emptyRect;\r\n        }\r\n\r\n        if (isSVGGraphicsElement(target)) {\r\n            return getSVGContentRect(target);\r\n        }\r\n\r\n        return getHTMLElementContentRect(target);\r\n    }\r\n\r\n    /**\r\n     * Creates rectangle with an interface of the DOMRectReadOnly.\r\n     * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n     *\r\n     * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n     * @returns {DOMRectReadOnly}\r\n     */\r\n    function createReadOnlyRect(ref) {\r\n        var x = ref.x;\r\n        var y = ref.y;\r\n        var width = ref.width;\r\n        var height = ref.height;\r\n\r\n        // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n        var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n        var rect = Object.create(Constr.prototype);\r\n\r\n        // Rectangle's properties are not writable and non-enumerable.\r\n        defineConfigurable(rect, {\r\n            x: x, y: y, width: width, height: height,\r\n            top: y,\r\n            right: x + width,\r\n            bottom: height + y,\r\n            left: x\r\n        });\r\n\r\n        return rect;\r\n    }\r\n\r\n    /**\r\n     * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n     * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n     *\r\n     * @param {number} x - X coordinate.\r\n     * @param {number} y - Y coordinate.\r\n     * @param {number} width - Rectangle's width.\r\n     * @param {number} height - Rectangle's height.\r\n     * @returns {DOMRectInit}\r\n     */\r\n    function createRectInit(x, y, width, height) {\r\n        return { x: x, y: y, width: width, height: height };\r\n    }\r\n\r\n    /**\r\n     * Class that is responsible for computations of the content rectangle of\r\n     * provided DOM element and for keeping track of it's changes.\r\n     */\r\n    var ResizeObservation = function(target) {\r\n        this.broadcastWidth = 0;\r\n        this.broadcastHeight = 0;\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n\r\n        this.target = target;\r\n    };\r\n\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n\r\n\r\n    /**\r\n     * Reference to the last observed content rectangle.\r\n     *\r\n     * @private {DOMRectInit}\r\n     */\r\n\r\n\r\n    /**\r\n     * Broadcasted width of content rectangle.\r\n     *\r\n     * @type {number}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n\r\n        this.contentRect_ = rect;\r\n\r\n        return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\r\n    };\r\n\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n\r\n        return rect;\r\n    };\r\n\r\n    var ResizeObserverEntry = function(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    };\r\n\r\n    var ResizeObserverSPI = function(callback, controller, callbackCtx) {\r\n        this.activeObservations_ = [];\r\n        this.observations_ = new MapShim();\r\n\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    };\r\n\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n\r\n\r\n    /**\r\n     * Registry of the ResizeObservation instances.\r\n     *\r\n     * @private {Map<Element, ResizeObservation>}\r\n     */\r\n\r\n\r\n    /**\r\n     * Public ResizeObserver instance which will be passed to the callback\r\n     * function and used as a value of it's \"this\" binding.\r\n     *\r\n     * @private {ResizeObserver}\r\n     */\r\n\r\n    /**\r\n     * Collection of resize observations that have detected changes in dimensions\r\n     * of elements.\r\n     *\r\n     * @private {Array<ResizeObservation>}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n\r\n        var observations = this.observations_;\r\n\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n\r\n        observations.set(target, new ResizeObservation(target));\r\n\r\n        this.controller_.addObserver(this);\r\n\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n\r\n        var observations = this.observations_;\r\n\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n\r\n        observations.delete(target);\r\n\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var this$1 = this;\r\n\r\n        this.clearActive();\r\n\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                this$1.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n\r\n        var ctx = this.callbackCtx_;\r\n\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n\r\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\n    var observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n\r\n    /**\r\n     * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n     * exposing only those methods and properties that are defined in the spec.\r\n     */\r\n    var ResizeObserver = function(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n\r\n        observers.set(this, observer);\r\n    };\r\n\r\n// Expose public methods of ResizeObserver.\r\n    ['observe', 'unobserve', 'disconnect'].forEach(function (method) {\r\n        ResizeObserver.prototype[method] = function () {\r\n            return (ref = observers.get(this))[method].apply(ref, arguments);\r\n            var ref;\r\n        };\r\n    });\r\n\r\n    var index = (function () {\r\n        // Export existing implementation if available.\r\n        if (typeof global$1.ResizeObserver !== 'undefined') {\r\n            return global$1.ResizeObserver;\r\n        }\r\n\r\n        return ResizeObserver;\r\n    })();\r\n\r\n    return index;\r\n\r\n})));","Magento_PageBuilder/js/resource/resize-observer/ResizeObserver.min.js":"!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.ResizeObserver=e()}(this,function(){\"use strict\";var i=function(){if(\"undefined\"!=typeof Map)return Map;function i(t,n){var i=-1;return t.some(function(t,e){return t[0]===n&&(i=e,!0)}),i}return function(){function t(){this.__entries__=[]}var e={size:{configurable:!0}};return e.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var e=i(this.__entries__,t),n=this.__entries__[e];return n&&n[1]},t.prototype.set=function(t,e){var n=i(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},t.prototype.delete=function(t){var e=this.__entries__,n=i(e,t);~n&&e.splice(n,1)},t.prototype.has=function(t){return!!~i(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n+=1){var r=i[n];t.call(e,r[1],r[0])}},Object.defineProperties(t.prototype,e),t}()}(),n=\"undefined\"!=typeof window&&\"undefined\"!=typeof document&&window.document===document,e=\"undefined\"!=typeof global&&global.Math===Math?global:\"undefined\"!=typeof self&&self.Math===Math?self:\"undefined\"!=typeof window&&window.Math===Math?window:Function(\"return this\")(),c=\"function\"==typeof requestAnimationFrame?requestAnimationFrame.bind(e):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},r=[\"top\",\"right\",\"bottom\",\"left\",\"width\",\"height\",\"size\",\"weight\"],t=\"undefined\"!=typeof MutationObserver,o=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&a()}function s(){c(o)}function a(){var t=Date.now();if(n){if(t-r<2)return;i=!0}else i=!(n=!0),setTimeout(s,e);r=t}return a}(this.refresh.bind(this),20)};o.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},o.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},o.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},o.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},o.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener(\"transitionend\",this.onTransitionEnd_),window.addEventListener(\"resize\",this.refresh),t?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener(\"DOMSubtreeModified\",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},o.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener(\"transitionend\",this.onTransitionEnd_),window.removeEventListener(\"resize\",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener(\"DOMSubtreeModified\",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},o.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=\"\"),r.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},o.getInstance=function(){return this.instance_||(this.instance_=new o),this.instance_},o.instance_=null;var u=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n+=1){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||e},p=_(0,0,0,0);function v(t){return parseFloat(t)||0}function l(n){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];return t.reduce(function(t,e){return t+v(n[\"border-\"+e+\"-width\"])},0)}function s(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return p;var i,r=d(t).getComputedStyle(t),o=function(t){for(var e={},n=0,i=[\"top\",\"right\",\"bottom\",\"left\"];n<i.length;n+=1){var r=i[n],o=t[\"padding-\"+r];e[r]=v(o)}return e}(r),s=o.left+o.right,a=o.top+o.bottom,c=v(r.width),h=v(r.height);if(\"border-box\"===r.boxSizing&&(Math.round(c+s)!==e&&(c-=l(r,\"left\",\"right\")+s),Math.round(h+a)!==n&&(h-=l(r,\"top\",\"bottom\")+a)),(i=t)!==d(i).document.documentElement){var u=Math.round(c+s)-e,f=Math.round(h+a)-n;1!==Math.abs(u)&&(c-=u),1!==Math.abs(f)&&(h-=f)}return _(o.left,o.top,c,h)}var a=\"undefined\"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&\"function\"==typeof t.getBBox};function h(t){return n?a(t)?_(0,0,(e=t.getBBox()).width,e.height):s(t):p;var e}function _(t,e,n,i){return{x:t,y:e,width:n,height:i}}var f=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=t};f.prototype.isActive=function(){var t=h(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},f.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var b=function(t,e){var n,i,r,o,s,a,c,h=(i=(n=e).x,r=n.y,o=n.width,s=n.height,a=\"undefined\"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),u(c,{x:i,y:r,width:o,height:s,top:r,right:i+o,bottom:s+r,left:i}),c);u(this,{target:t,contentRect:h})},m=function(t,e,n){if(this.activeObservations_=[],this.observations_=new i,\"function\"!=typeof t)throw new TypeError(\"The callback provided as parameter 1 is not a function.\");this.callback_=t,this.controller_=e,this.callbackCtx_=n};m.prototype.observe=function(t){if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");if(\"undefined\"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type \"Element\".');var e=this.observations_;e.has(t)||(e.set(t,new f(t)),this.controller_.addObserver(this),this.controller_.refresh())}},m.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");if(\"undefined\"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type \"Element\".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},m.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},m.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},m.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new b(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},m.prototype.clearActive=function(){this.activeObservations_.splice(0)},m.prototype.hasActive=function(){return 0<this.activeObservations_.length};var y=\"undefined\"!=typeof WeakMap?new WeakMap:new i,g=function(t){if(!(this instanceof g))throw new TypeError(\"Cannot call a class as a function.\");if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");var e=o.getInstance(),n=new m(t,e,this);y.set(this,n)};return[\"observe\",\"unobserve\",\"disconnect\"].forEach(function(e){g.prototype[e]=function(){return(t=y.get(this))[e].apply(t,arguments);var t}}),void 0!==e.ResizeObserver?e.ResizeObserver:g});\r\n","Magento_PageBuilder/js/resource/slick/slick.min.js":"/*\r\n     _ _      _       _\r\n ___| (_) ___| | __  (_)___\r\n/ __| | |/ __| |/ /  | / __|\r\n\\__ \\ | | (__|   < _ | \\__ \\\r\n|___/_|_|\\___|_|\\_(_)/ |___/\r\n                   |__/\r\n\r\n Version: 1.9.0\r\n  Author: Ken Wheeler\r\n Website: http://kenwheeler.github.io\r\n    Docs: http://kenwheeler.github.io/slick\r\n    Repo: http://github.com/kenwheeler/slick\r\n  Issues: http://github.com/kenwheeler/slick/issues\r\n\r\n */\r\n(function(i){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],i):\"undefined\"!=typeof exports?module.exports=i(require(\"jquery\")):i(jQuery)})(function(i){\"use strict\";var e=window.Slick||{};e=function(){function e(e,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button class=\"slick-prev\" aria-label=\"Previous\" type=\"button\">Previous</button>',nextArrow:'<button class=\"slick-next\" aria-label=\"Next\" type=\"button\">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:\"50px\",cssEase:\"ease\",customPaging:function(e,t){return i('<button type=\"button\" />').text(t+1)},dots:!1,dotsClass:\"slick-dots\",draggable:!0,easing:\"linear\",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:\"ondemand\",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:\"window\",responsive:null,rows:1,rtl:!1,slide:\"\",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden=\"hidden\",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange=\"visibilitychange\",n.windowWidth=0,n.windowTimer=null,s=i(e).data(\"slick\")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,\"undefined\"!=typeof document.mozHidden?(n.hidden=\"mozHidden\",n.visibilityChange=\"mozvisibilitychange\"):\"undefined\"!=typeof document.webkitHidden&&(n.hidden=\"webkitHidden\",n.visibilityChange=\"webkitvisibilitychange\"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=t++,n.htmlExpr=/^(?:\\s*(<[\\w\\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}var t=0;return e}(),e.prototype.activateADA=function(){var i=this;i.$slideTrack.find(\".slick-active\").attr({\"aria-hidden\":\"false\"}).find(\"a, input, button, select\").attr({tabindex:\"0\"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if(\"boolean\"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),\"number\"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):o===!0?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),s.options.vertical===!1?(o[s.animType]=\"translate(\"+i+\"px, 0px)\",s.$slideTrack.css(o)):(o[s.animType]=\"translate(0px,\"+i+\"px)\",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?o[s.animType]=\"translate3d(\"+e+\"px, 0px, 0px)\":o[s.animType]=\"translate3d(0px,\"+e+\"px, 0px)\",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this,o=t.getNavTarget();null!==o&&\"object\"==typeof o&&o.each(function(){var t=i(this).slick(\"getSlick\");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};e.options.fade===!1?t[e.transitionType]=e.transformType+\" \"+e.options.speed+\"ms \"+e.options.cssEase:t[e.transitionType]=\"opacity \"+e.options.speed+\"ms \"+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(i.options.infinite===!1&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1===0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=i(e.options.prevArrow).addClass(\"slick-arrow\"),e.$nextArrow=i(e.options.nextArrow).addClass(\"slick-arrow\"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.$nextArrow.removeClass(\"slick-hidden\").removeAttr(\"aria-hidden tabindex\"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\")):e.$prevArrow.add(e.$nextArrow).addClass(\"slick-hidden\").attr({\"aria-disabled\":\"true\",tabindex:\"-1\"}))},e.prototype.buildDots=function(){var e,t,o=this;if(o.options.dots===!0&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass(\"slick-dotted\"),t=i(\"<ul />\").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i(\"<li />\").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find(\"li\").first().addClass(\"slick-active\")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+\":not(.slick-cloned)\").addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr(\"data-slick-index\",e).data(\"originalStyling\",i(t).attr(\"style\")||\"\")}),e.$slider.addClass(\"slick-slider\"),e.$slideTrack=0===e.slideCount?i('<div class=\"slick-track\"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class=\"slick-track\"/>').parent(),e.$list=e.$slideTrack.wrap('<div class=\"slick-list\"/>').parent(),e.$slideTrack.css(\"opacity\",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),i(\"img[data-lazy]\",e.$slider).not(\"[src]\").addClass(\"slick-loading\"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass(\"draggable\")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>0){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement(\"div\");for(e=0;e<l.options.rows;e++){var a=document.createElement(\"div\");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+\"%\",display:\"inline-block\"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if(\"window\"===r.respondTo?n=a:\"slider\"===r.respondTo?n=d:\"min\"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(r.originalSettings.mobileFirst===!1?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,\"unslick\"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||l===!1||r.$slider.trigger(\"breakpoint\",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is(\"a\")&&e.preventDefault(),l.is(\"li\")||(l=l.closest(\"li\")),n=r.slideCount%r.options.slidesToScroll!==0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case\"previous\":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case\"next\":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case\"index\":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger(\"focus\");break;default:return}},e.prototype.checkNavigable=function(i){var e,t,o=this;if(e=o.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var s in e){if(i<e[s]){i=t;break}t=e[s]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i(\"li\",e.$dots).off(\"click.slick\",e.changeSlide).off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off(\"keydown.slick\",e.keyHandler)),e.$slider.off(\"focus.slick blur.slick\"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off(\"click.slick\",e.changeSlide),e.$nextArrow&&e.$nextArrow.off(\"click.slick\",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off(\"keydown.slick\",e.keyHandler),e.$nextArrow&&e.$nextArrow.off(\"keydown.slick\",e.keyHandler))),e.$list.off(\"touchstart.slick mousedown.slick\",e.swipeHandler),e.$list.off(\"touchmove.slick mousemove.slick\",e.swipeHandler),e.$list.off(\"touchend.slick mouseup.slick\",e.swipeHandler),e.$list.off(\"touchcancel.slick mouseleave.slick\",e.swipeHandler),e.$list.off(\"click.slick\",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().off(\"click.slick\",e.selectHandler),i(window).off(\"orientationchange.slick.slick-\"+e.instanceUid,e.orientationChange),i(window).off(\"resize.slick.slick-\"+e.instanceUid,e.resize),i(\"[draggable!=true]\",e.$slideTrack).off(\"dragstart\",e.preventDefault),i(window).off(\"load.slick.slick-\"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.off(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>0&&(i=e.$slides.children().children(),i.removeAttr(\"style\"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){var e=this;e.shouldClick===!1&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(\".slick-cloned\",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass(\"slick-disabled slick-arrow slick-hidden\").removeAttr(\"aria-hidden aria-disabled tabindex\").css(\"display\",\"\"),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass(\"slick-slide slick-active slick-center slick-visible slick-current\").removeAttr(\"aria-hidden\").removeAttr(\"data-slick-index\").each(function(){i(this).attr(\"style\",i(this).data(\"originalStyling\"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass(\"slick-slider\"),t.$slider.removeClass(\"slick-initialized\"),t.$slider.removeClass(\"slick-dotted\"),t.unslicked=!0,e||t.$slider.trigger(\"destroy\",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]=\"\",e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;t.cssTransitions===!1?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;e.cssTransitions===!1?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off(\"focus.slick blur.slick\").on(\"focus.slick\",\"*\",function(t){var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&o.is(\":focus\")&&(e.focussed=!0,e.autoPlay())},0)}).on(\"blur.slick\",\"*\",function(t){i(this);e.options.pauseOnFocus&&(e.focussed=!1,e.autoPlay())})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var i=this;return i.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(i.options.infinite===!0)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(i.options.centerMode===!0)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),n.options.infinite===!0?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,n.options.vertical===!0&&n.options.centerMode===!0&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!==0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),n.options.centerMode===!0&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:n.options.centerMode===!0&&n.options.infinite===!0?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:n.options.centerMode===!0&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=n.options.vertical===!1?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,n.options.variableWidth===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,n.options.centerMode===!0&&(o=n.slideCount<=n.options.slidesToShow||n.options.infinite===!1?n.$slideTrack.children(\".slick-slide\").eq(i):n.$slideTrack.children(\".slick-slide\").eq(i+n.options.slidesToShow+1),e=n.options.rtl===!0?o[0]?(n.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:0:o[0]?o[0].offsetLeft*-1:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){var e=this;return e.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(e.options.infinite===!1?i=e.slideCount:(t=e.options.slidesToScroll*-1,o=e.options.slidesToScroll*-1,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o,s,n=this;return s=n.options.centerMode===!0?Math.floor(n.$list.width()/2):0,o=n.swipeLeft*-1+s,n.options.swipeToSlide===!0?(n.$slideTrack.find(\".slick-slide\").each(function(e,s){var r,l,d;if(r=i(s).outerWidth(),l=s.offsetLeft,n.options.centerMode!==!0&&(l+=r/2),d=l+r,o<d)return t=s,!1}),e=Math.abs(i(t).attr(\"data-slick-index\")-n.currentSlide)||1):n.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){var t=this;t.changeSlide({data:{message:\"index\",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass(\"slick-initialized\")||(i(t.$slider).addClass(\"slick-initialized\"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger(\"init\",[t]),t.options.accessibility===!0&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(\".slick-cloned\")).attr({\"aria-hidden\":\"true\",tabindex:\"-1\"}).find(\"a, input, button, select\").attr({tabindex:\"-1\"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(\".slick-cloned\")).each(function(t){var s=o.indexOf(t);if(i(this).attr({role:\"tabpanel\",id:\"slick-slide\"+e.instanceUid+t,tabindex:-1}),s!==-1){var n=\"slick-slide-control\"+e.instanceUid+s;i(\"#\"+n).length&&i(this).attr({\"aria-describedby\":n})}}),e.$dots.attr(\"role\",\"tablist\").find(\"li\").each(function(s){var n=o[s];i(this).attr({role:\"presentation\"}),i(this).find(\"button\").first().attr({role:\"tab\",id:\"slick-slide-control\"+e.instanceUid+s,\"aria-controls\":\"slick-slide\"+e.instanceUid+n,\"aria-label\":s+1+\" of \"+t,\"aria-selected\":null,tabindex:\"-1\"})}).eq(e.currentSlide).find(\"button\").attr({\"aria-selected\":\"true\",tabindex:\"0\"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.options.focusOnChange?e.$slides.eq(s).attr({tabindex:\"0\"}):e.$slides.eq(s).removeAttr(\"tabindex\");e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off(\"click.slick\").on(\"click.slick\",{message:\"previous\"},i.changeSlide),i.$nextArrow.off(\"click.slick\").on(\"click.slick\",{message:\"next\"},i.changeSlide),i.options.accessibility===!0&&(i.$prevArrow.on(\"keydown.slick\",i.keyHandler),i.$nextArrow.on(\"keydown.slick\",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&(i(\"li\",e.$dots).on(\"click.slick\",{message:\"index\"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on(\"keydown.slick\",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.slideCount>e.options.slidesToShow&&i(\"li\",e.$dots).on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)).on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on(\"mouseenter.slick\",i.proxy(e.interrupt,e,!0)),e.$list.on(\"mouseleave.slick\",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on(\"touchstart.slick mousedown.slick\",{action:\"start\"},e.swipeHandler),e.$list.on(\"touchmove.slick mousemove.slick\",{action:\"move\"},e.swipeHandler),e.$list.on(\"touchend.slick mouseup.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"touchcancel.slick mouseleave.slick\",{action:\"end\"},e.swipeHandler),e.$list.on(\"click.slick\",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on(\"keydown.slick\",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),i(window).on(\"orientationchange.slick.slick-\"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on(\"resize.slick.slick-\"+e.instanceUid,i.proxy(e.resize,e)),i(\"[draggable!=true]\",e.$slideTrack).on(\"dragstart\",e.preventDefault),i(window).on(\"load.slick.slick-\"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match(\"TEXTAREA|INPUT|SELECT\")||(37===i.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:e.options.rtl===!0?\"next\":\"previous\"}}):39===i.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:e.options.rtl===!0?\"previous\":\"next\"}}))},e.prototype.lazyLoad=function(){function e(e){i(\"img[data-lazy]\",e).each(function(){var e=i(this),t=i(this).attr(\"data-lazy\"),o=i(this).attr(\"data-srcset\"),s=i(this).attr(\"data-sizes\")||r.$slider.attr(\"data-sizes\"),n=document.createElement(\"img\");n.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr(\"srcset\",o),s&&e.attr(\"sizes\",s)),e.attr(\"src\",t).animate({opacity:1},200,function(){e.removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\")}),r.$slider.trigger(\"lazyLoaded\",[r,e,t])})},n.onerror=function(){e.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),r.$slider.trigger(\"lazyLoadError\",[r,e,t])},n.src=t})}var t,o,s,n,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),n=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),n=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,n=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,n<=r.slideCount&&n++)),t=r.$slider.find(\".slick-slide\").slice(s,n),\"anticipated\"===r.options.lazyLoad)for(var l=s-1,d=n,a=r.$slider.find(\".slick-slide\"),c=0;c<r.options.slidesToScroll;c++)l<0&&(l=r.slideCount-1),t=t.add(a.eq(l)),t=t.add(a.eq(d)),l--,d++;e(t),r.slideCount<=r.options.slidesToShow?(o=r.$slider.find(\".slick-slide\"),e(o)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(o=r.$slider.find(\".slick-cloned\").slice(0,r.options.slidesToShow),e(o)):0===r.currentSlide&&(o=r.$slider.find(\".slick-cloned\").slice(r.options.slidesToShow*-1),e(o))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass(\"slick-loading\"),i.initUI(),\"progressive\"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var i=this;i.changeSlide({data:{message:\"next\"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;if(!t.unslicked&&(t.$slider.trigger(\"afterChange\",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&(t.initADA(),t.options.focusOnChange))){var o=i(t.$slides.get(t.currentSlide));o.attr(\"tabindex\",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var i=this;i.changeSlide({data:{message:\"previous\"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i(\"img[data-lazy]\",l.$slider);d.length?(t=d.first(),o=t.attr(\"data-lazy\"),s=t.attr(\"data-srcset\"),n=t.attr(\"data-sizes\")||l.$slider.attr(\"data-sizes\"),r=document.createElement(\"img\"),r.onload=function(){s&&(t.attr(\"srcset\",s),n&&t.attr(\"sizes\",n)),t.attr(\"src\",o).removeAttr(\"data-lazy data-srcset data-sizes\").removeClass(\"slick-loading\"),l.options.adaptiveHeight===!0&&l.setPosition(),l.$slider.trigger(\"lazyLoaded\",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr(\"data-lazy\").removeClass(\"slick-loading\").addClass(\"slick-lazyload-error\"),l.$slider.trigger(\"lazyLoadError\",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger(\"allImagesLoaded\",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:\"index\",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if(\"array\"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||\"window\";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass(\"slick-slide\"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on(\"click.slick\",e.selectHandler),e.setSlideClasses(\"number\"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger(\"reInit\",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return\"boolean\"==typeof i?(e=i,i=e===!0?0:o.slideCount-1):i=e===!0?--i:i,!(o.slideCount<1||i<0||i>o.slideCount-1)&&(o.unload(),t===!0?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};o.options.rtl===!0&&(i=-i),e=\"left\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",t=\"top\"==o.positionProp?Math.ceil(i)+\"px\":\"0px\",s[o.positionProp]=i,o.transformsEnabled===!1?o.$slideTrack.css(s):(s={},o.cssTransitions===!1?(s[o.animType]=\"translate(\"+e+\", \"+t+\")\",o.$slideTrack.css(s)):(s[o.animType]=\"translate3d(\"+e+\", \"+t+\", 0px)\",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;i.options.vertical===!1?i.options.centerMode===!0&&i.$list.css({padding:\"0px \"+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),i.options.centerMode===!0&&i.$list.css({padding:i.options.centerPadding+\" 0px\"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),i.options.vertical===!1&&i.options.variableWidth===!1?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(\".slick-slide\").length))):i.options.variableWidth===!0?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(\".slick-slide\").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();i.options.variableWidth===!1&&i.$slideTrack.children(\".slick-slide\").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,t.options.rtl===!0?i(s).css({position:\"relative\",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:\"relative\",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css(\"height\",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if(\"object\"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n=\"multiple\"):\"string\"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],\"responsive\"===arguments[0]&&\"array\"===i.type(arguments[1])?n=\"responsive\":\"undefined\"!=typeof arguments[1]&&(n=\"single\")),\"single\"===n)r.options[o]=s;else if(\"multiple\"===n)i.each(o,function(i,e){r.options[i]=e});else if(\"responsive\"===n)for(t in s)if(\"array\"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),i.options.fade===!1?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger(\"setPosition\",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=i.options.vertical===!0?\"top\":\"left\",\r\n\"top\"===i.positionProp?i.$slider.addClass(\"slick-vertical\"):i.$slider.removeClass(\"slick-vertical\"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||i.options.useCSS===!0&&(i.cssTransitions=!0),i.options.fade&&(\"number\"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType=\"OTransform\",i.transformType=\"-o-transform\",i.transitionType=\"OTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType=\"MozTransform\",i.transformType=\"-moz-transform\",i.transitionType=\"MozTransition\",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType=\"webkitTransform\",i.transformType=\"-webkit-transform\",i.transitionType=\"webkitTransition\",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType=\"msTransform\",i.transformType=\"-ms-transform\",i.transitionType=\"msTransition\",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&i.animType!==!1&&(i.animType=\"transform\",i.transformType=\"transform\",i.transitionType=\"transition\"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&i.animType!==!1},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(\".slick-slide\").removeClass(\"slick-active slick-center slick-current\").attr(\"aria-hidden\",\"true\"),n.$slides.eq(i).addClass(\"slick-current\"),n.options.centerMode===!0){var r=n.options.slidesToShow%2===0?1:0;e=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass(\"slick-center\"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass(\"slick-center\")),n.$slides.eq(i).addClass(\"slick-center\")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.length<=n.options.slidesToShow?t.addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):(s=n.slideCount%n.options.slidesToShow,o=n.options.infinite===!0?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"):t.slice(o,o+n.options.slidesToShow).addClass(\"slick-active\").attr(\"aria-hidden\",\"false\"));\"ondemand\"!==n.options.lazyLoad&&\"anticipated\"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t-s.slideCount).prependTo(s.$slideTrack).addClass(\"slick-cloned\");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr(\"id\",\"\").attr(\"data-slick-index\",t+s.slideCount).appendTo(s.$slideTrack).addClass(\"slick-cloned\");s.$slideTrack.find(\".slick-cloned\").find(\"[id]\").each(function(){i(this).attr(\"id\",\"\")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(\".slick-slide\")?i(e.target):i(e.target).parents(\".slick-slide\"),s=parseInt(o.attr(\"data-slick-index\"));return s||(s=0),t.slideCount<=t.options.slidesToShow?void t.slideHandler(s,!1,!0):void t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(a.animating===!0&&a.options.waitForAnimate===!0||a.options.fade===!0&&a.currentSlide===i))return e===!1&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,a.options.infinite===!1&&a.options.centerMode===!1&&(i<0||i>a.getDotCount()*a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):a.options.infinite===!1&&a.options.centerMode===!0&&(i<0||i>a.slideCount-a.options.slidesToScroll)?void(a.options.fade===!1&&(o=a.currentSlide,t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o))):(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!==0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger(\"beforeChange\",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=a.getNavTarget(),l=l.slick(\"getSlick\"),l.slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide)),a.updateDots(),a.updateArrows(),a.options.fade===!0?(t!==!0?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight()):void(t!==!0&&a.slideCount>a.options.slidesToShow?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)))},e.prototype.startLoad=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass(\"slick-loading\")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),o=Math.round(180*t/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0?s.options.rtl===!1?\"left\":\"right\":o<=360&&o>=315?s.options.rtl===!1?\"left\":\"right\":o>=135&&o<=225?s.options.rtl===!1?\"right\":\"left\":s.options.verticalSwiping===!0?o>=35&&o<=135?\"down\":\"up\":\"vertical\"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(o.touchObject.edgeHit===!0&&o.$slider.trigger(\"edge\",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case\"left\":case\"down\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case\"right\":case\"up\":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}\"vertical\"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger(\"swipe\",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(e.options.swipe===!1||\"ontouchend\"in document&&e.options.swipe===!1||e.options.draggable===!1&&i.type.indexOf(\"mouse\")!==-1))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case\"start\":e.swipeStart(i);break;case\"move\":e.swipeMove(i);break;case\"end\":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(l.options.verticalSwiping===!0&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(l.options.rtl===!1?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),l.options.verticalSwiping===!0&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,l.options.infinite===!1&&(0===l.currentSlide&&\"right\"===t||l.currentSlide>=l.getDotCount()&&\"left\"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),l.options.vertical===!1?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,l.options.verticalSwiping===!0&&(l.swipeLeft=e+o*s),l.options.fade!==!0&&l.options.touchMove!==!1&&(l.animating===!0?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;return t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(\".slick-cloned\",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass(\"slick-slide slick-active slick-visible slick-current\").attr(\"aria-hidden\",\"true\").css(\"width\",\"\")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger(\"unslick\",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\"),0===e.currentSlide?(e.$prevArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$nextArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass(\"slick-disabled\").attr(\"aria-disabled\",\"true\"),e.$prevArrow.removeClass(\"slick-disabled\").attr(\"aria-disabled\",\"false\")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find(\"li\").removeClass(\"slick-active\").end(),i.$dots.find(\"li\").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass(\"slick-active\"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if(\"object\"==typeof s||\"undefined\"==typeof s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),\"undefined\"!=typeof t)return t;return o}});\r\n","Magento_PageBuilder/js/system/config/enable-field.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'domReady!'\r\n], function ($, $t, confirm) {\r\n    'use strict';\r\n\r\n    return function (config, enableSelectEl) {\r\n\r\n        var $enableSelectEl = $(enableSelectEl),\r\n            isEnabledInDatabase = !!parseInt($enableSelectEl.val(), 10);\r\n\r\n        $enableSelectEl.on('change', function () {\r\n            var userIsDisabling = !parseInt($enableSelectEl.val(), 10);\r\n\r\n            if (!isEnabledInDatabase || !userIsDisabling) {\r\n                return;\r\n            }\r\n\r\n            confirm({\r\n                title: $t(config.modalTitleText),\r\n                content: $t(config.modalContentBody),\r\n                buttons: [{\r\n                    text: $t('Cancel'),\r\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'cancel' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        this.closeModal(event);\r\n                    }\r\n                }, {\r\n                    text: $t('Turn Off'),\r\n                    class: 'action-primary action-accept',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'confirm' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        this.closeModal(event, true);\r\n                    }\r\n                }],\r\n                actions: {\r\n\r\n                    /**\r\n                     * Revert back to original Enabled setting\r\n                     */\r\n                    cancel: function () {\r\n                        $enableSelectEl.val(Number(true));\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/system/config/google-maps-api-key-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Initialize click and input events to handle validation\r\n     *\r\n     * @param {Object} config\r\n     * @param {HTMLElement} el\r\n     */\r\n    var GoogleMapsApiKeyValidator = function (config, el) {\r\n        var sourceElement = $('#' + config.sourceField),\r\n            initialValue = sourceElement.val(),\r\n            resultElement = $('#' + config.elementId + ' > .result');\r\n\r\n        if (initialValue) {\r\n            $(el).attr('disabled', false);\r\n        }\r\n\r\n        $(el).on('click', function () {\r\n            var resultText = config.invalidLabel,\r\n                resultIcon = 'icon-admin-pagebuilder-error',\r\n                resultHtml;\r\n\r\n            $.ajax({\r\n                url: config.validateUrl,\r\n                showLoader: true,\r\n                data: {\r\n                    googleMapsApiKey: sourceElement.val()\r\n                }\r\n            }).done(function (data) {\r\n                if (data.success) {\r\n                    resultText = config.validLabel;\r\n                    resultIcon = 'icon-admin-pagebuilder-success';\r\n                }\r\n\r\n                resultHtml = '<i class=\"' + resultIcon + '\"></i> ' + resultText;\r\n                resultElement.html(resultHtml);\r\n            });\r\n        });\r\n\r\n        sourceElement.on('keyup', function (event) {\r\n            var elementValue = event.currentTarget.value,\r\n                buttonText = config.buttonLabel;\r\n\r\n            $(el).attr('disabled', !elementValue);\r\n            resultElement.html(buttonText);\r\n        });\r\n    };\r\n\r\n    return GoogleMapsApiKeyValidator;\r\n});\r\n","Magento_PageBuilder/js/system/config/switch-attribute-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'domReady!'\r\n], function ($, $t, confirm) {\r\n    'use strict';\r\n\r\n    return function (config, attributeDropDownEl) {\r\n\r\n        var $attributeDropDownEl = $(attributeDropDownEl),\r\n            previousOption = '';\r\n\r\n        $attributeDropDownEl.on('focus', function () {\r\n            // Store the current value on focus and on change\r\n            previousOption = this.value;\r\n        });\r\n\r\n        $attributeDropDownEl.on('change', function () {\r\n\r\n            if (attributeDropDownEl.options.length > 3 ||\r\n                this.value === 'pagebuilder' ||\r\n                previousOption !== 'pagebuilder'\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            confirm({\r\n                title: $t(config.modalTitleText),\r\n                content: $t(config.modalContentBody),\r\n                buttons: [{\r\n                    text: $t('Cancel'),\r\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'cancel' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        this.closeModal(event);\r\n                    }\r\n                }, {\r\n                    text: $t('Change Input Type'),\r\n                    class: 'action-primary action-accept',\r\n\r\n                    /**\r\n                     * Close modal and trigger 'confirm' action on click\r\n                     */\r\n                    click: function (event) {\r\n                        this.closeModal(event, true);\r\n                    }\r\n                }],\r\n                actions: {\r\n\r\n                    /**\r\n                     * Revert back to 'pagebuilder' setting\r\n                     */\r\n                    cancel: function () {\r\n                        $attributeDropDownEl.val('pagebuilder');\r\n                        $attributeDropDownEl.trigger('change');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/system/config/validator-rules-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (target) {\r\n        $.validator.addMethod(\r\n            'validate-google-map-style',\r\n            function (value) {\r\n                if ($.mage.isEmptyNoTrim(value)) {\r\n                    return true;\r\n                }\r\n\r\n                try {\r\n                    JSON.parse(value);\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            },\r\n            $.mage.__('Google Maps Style JSON is invalid. Please paste the valid JSON style.')\r\n        );\r\n\r\n        $.validator.addMethod(\r\n            'validate-greater-than-one',\r\n            function (value) {\r\n                return !(value <= 1);\r\n            },\r\n            $.mage.__('Please enter a number 2 or greater in this field.')\r\n        );\r\n\r\n        $.validator.addMethod(\r\n            'validate-default-grid-size',\r\n            function (value) {\r\n                return !(parseInt(value, 10) >\r\n                    parseInt($('[name=\"groups[pagebuilder][fields][column_grid_max][value]\"]').val(), 10)\r\n                );\r\n            },\r\n            $.mage.__('Default grid size must be less than the maximum grid size.')\r\n        );\r\n\r\n        return target;\r\n    };\r\n});\r\n","Magento_PageBuilder/js/types/text.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=text.js.map","Magento_PageBuilder/js/utils/array.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Move an array item within the current array\r\n   *\r\n   * @param array\r\n   * @param fromIndex\r\n   * @param toIndex\r\n   * @returns {Array<any>}\r\n   */\r\n  function moveArrayItem(array, fromIndex, toIndex) {\r\n    array.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\r\n    return array;\r\n  }\r\n  /**\r\n   * Move an array item from one array into another\r\n   *\r\n   * @param item\r\n   * @param array\r\n   * @param toIndex\r\n   * @returns {Array<any>}\r\n   */\r\n\r\n\r\n  function moveArrayItemIntoArray(item, array, toIndex) {\r\n    array.splice(toIndex, 0, item);\r\n    return array;\r\n  }\r\n  /**\r\n   * Remove an array item\r\n   *\r\n   * @param array\r\n   * @param item\r\n   * @returns {Array<any>}\r\n   */\r\n\r\n\r\n  function removeArrayItem(array, item) {\r\n    var index = array.indexOf(item);\r\n\r\n    if (index > -1) {\r\n      array.splice(index, 1);\r\n    }\r\n\r\n    return array;\r\n  }\r\n  /**\r\n   * Search outwards from an array item until a callback matches\r\n   *\r\n   * @author https://github.com/thejameskyle/outward-search\r\n   *\r\n   * @param {any[]} items\r\n   * @param {number} start\r\n   * @param {(item: any, index: number) => boolean} callback\r\n   * @returns {any}\r\n   * @api\r\n   */\r\n\r\n\r\n  function outwardSearch(items, start, callback) {\r\n    if (!items.length) {\r\n      return null;\r\n    }\r\n\r\n    if (start < 0 || start > items.length - 1) {\r\n      throw new TypeError(\"starting index must be within bounds of array\");\r\n    }\r\n\r\n    var max = items.length - 1;\r\n    var low = start;\r\n    var high = start + 1;\r\n\r\n    while (true) {\r\n      var hitMin = low < 0;\r\n      var hitMax = high > max;\r\n\r\n      if (hitMin && hitMax) {\r\n        break;\r\n      }\r\n\r\n      if (!hitMin) {\r\n        var _item = items[low];\r\n        var result = callback(_item, low);\r\n\r\n        if (!!result) {\r\n          return _item;\r\n        }\r\n\r\n        low--;\r\n      }\r\n\r\n      if (!hitMax) {\r\n        var _item2 = items[high];\r\n\r\n        var _result = callback(_item2, high);\r\n\r\n        if (!!_result) {\r\n          return _item2;\r\n        }\r\n\r\n        high++;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    moveArrayItem: moveArrayItem,\r\n    moveArrayItemIntoArray: moveArrayItemIntoArray,\r\n    removeArrayItem: removeArrayItem,\r\n    outwardSearch: outwardSearch\r\n  };\r\n});\r\n//# sourceMappingURL=array.js.map","Magento_PageBuilder/js/utils/breakpoints.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Build media query.\r\n         *\r\n         * @param {Object} conditions\r\n         * @returns {String}\r\n         */\r\n        buildMedia: function (conditions) {\r\n            var result = _.map(_.pairs(conditions), function (condition) {\r\n                return '(' + condition.join(': ') + ')';\r\n            });\r\n\r\n            return result.join(' and ');\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilder/js/utils/check-stage-full-screen.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\"], function (_jquery) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Check if stage full screen mode is active\r\n   *\r\n   * @param {string} stageId\r\n   * @returns {boolean}\r\n   */\r\n  function checkStageFullScreen(stageId) {\r\n    var $stage = (0, _jquery)(\"#\" + stageId);\r\n    var $fullScreenStageWrapper = $stage.closest(\".stage-full-screen\");\r\n    return !!$fullScreenStageWrapper.length;\r\n  }\r\n\r\n  return checkStageFullScreen;\r\n});\r\n//# sourceMappingURL=check-stage-full-screen.js.map","Magento_PageBuilder/js/utils/create-stylesheet.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Create a stylesheet DOM object from a style block declaration\r\n   *\r\n   * @param {StyleBlocks} blocks\r\n   * @returns {HTMLStyleElement}\r\n   * @api\r\n   */\r\n  function createStyleSheet(blocks) {\r\n    var style = document.createElement(\"style\");\r\n    var text = Object.keys(blocks).map(function (selector) {\r\n      return selector + (\" {\\n\" + processDeclarationBlock(blocks[selector]) + \"\\n}\");\r\n    }).join(\"\\n\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.appendChild(document.createTextNode(text));\r\n    return style;\r\n  }\r\n  /**\r\n   * Process a declaration block from the rule set\r\n   *\r\n   * @param {StyleBlock} block\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function processDeclarationBlock(block) {\r\n    return Object.keys(block).map(function (property) {\r\n      return processDeclaration(property, block[property]);\r\n    }).join(\"\\n\");\r\n  }\r\n  /**\r\n   * Process a declaration, creating the property: value syntax\r\n   *\r\n   * @param {string} property\r\n   * @param {string | number} value\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function processDeclaration(property, value) {\r\n    return hyphenate(property) + (\": \" + value + \";\");\r\n  }\r\n  /**\r\n   * Hyphenate style property, from textAlign to text-align\r\n   *\r\n   * @param {string} property\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function hyphenate(property) {\r\n    return property.replace(/[A-Z]/g, function (match) {\r\n      return \"-\" + match.toLowerCase();\r\n    });\r\n  }\r\n\r\n  return {\r\n    createStyleSheet: createStyleSheet\r\n  };\r\n});\r\n//# sourceMappingURL=create-stylesheet.js.map","Magento_PageBuilder/js/utils/delay-until.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Delay until a condition is met\r\n   *\r\n   * @param {() => void} callback\r\n   * @param {() => boolean} condition\r\n   * @param {number} interval\r\n   */\r\n  function delayUntil(callback, condition, interval) {\r\n    if (interval === void 0) {\r\n      interval = 50;\r\n    }\r\n\r\n    var delayInterval = setInterval(function () {\r\n      if (condition()) {\r\n        clearInterval(delayInterval);\r\n        callback();\r\n      }\r\n    }, interval);\r\n  }\r\n\r\n  return delayUntil;\r\n});\r\n//# sourceMappingURL=delay-until.js.map","Magento_PageBuilder/js/utils/directives.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * MIME type to use in place of the image\r\n   *\r\n   * @type {string}\r\n   */\r\n  var mimeType = \"text/magento-directive\";\r\n  /**\r\n   * Determine if a URL is a directive of our type\r\n   *\r\n   * @param {string} url\r\n   * @returns {boolean}\r\n   * @api\r\n   */\r\n\r\n  function isDirectiveDataUrl(url) {\r\n    return url.indexOf(\"data:\" + mimeType) === 0;\r\n  }\r\n  /**\r\n   * Convert a directive into our data URI\r\n   *\r\n   * @param {string} directive\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function toDataUrl(directive) {\r\n    return \"data:\" + mimeType + \",\" + encodeURIComponent(directive);\r\n  }\r\n  /**\r\n   * Convert a URI to it's directive equivalent\r\n   *\r\n   * @param {string} url\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function fromDataUrl(url) {\r\n    if (!isDirectiveDataUrl(url)) {\r\n      throw Error(url + \" is not a magento directive data url\");\r\n    }\r\n\r\n    return decodeURIComponent(url.split(mimeType + \",\")[1]);\r\n  }\r\n  /**\r\n   * Decode all data URIs present in a string\r\n   *\r\n   * @param {string} str\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function decodeAllDataUrlsInString(str) {\r\n    return str.replace(new RegExp(\"url\\\\s*\\\\(\\\\s*(?:&quot;|\\'|\\\")?(data:\" + mimeType + \",.+?)(?:&quot;|\\'|\\\")?\\\\s*\\\\)\", \"g\"), function (match, url) {\r\n      return \"url(\\'\" + fromDataUrl(url) + \"\\')\";\r\n    });\r\n  }\r\n  /**\r\n   * Retrieve the image URL with directive\r\n   *\r\n   * @param {Array} image\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function getImageUrl(image) {\r\n    var imageUrl = image[0].url;\r\n    var mediaPath = imageUrl.split(_config.getConfig(\"media_url\"));\r\n    return \"{{media url=\" + mediaPath[1] + \"}}\";\r\n  }\r\n  /**\r\n   * Remove quotes in media directives, {{media url=\"wysiwyg/image.png\"}} convert to {{media url=wysiwyg/image.png}}\r\n   *\r\n   * @param {string} html\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function removeQuotesInMediaDirectives(html) {\r\n    if (!html) {\r\n      return \"\";\r\n    }\r\n\r\n    var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(.*?)\\s*\\}\\}/g;\r\n    var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(.*)\\s*\\}\\}/;\r\n    var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\r\n\r\n    if (mediaDirectiveMatches) {\r\n      mediaDirectiveMatches.forEach(function (mediaDirective) {\r\n        var urlMatches = mediaDirective.match(urlRegExp);\r\n\r\n        if (urlMatches && urlMatches[1] !== undefined) {\r\n          var directiveWithOutQuotes = \"{{media url=\" + urlMatches[1].replace(/(\"|&quot;|\\s)/g, \"\") + \"}}\";\r\n          html = html.replace(mediaDirective, directiveWithOutQuotes);\r\n        }\r\n      });\r\n    }\r\n\r\n    return html;\r\n  }\r\n  /**\r\n   * Replace media directives with actual media URLs\r\n   *\r\n   * @param {string} html\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function convertMediaDirectivesToUrls(html) {\r\n    if (!html) {\r\n      return \"\";\r\n    }\r\n\r\n    var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*\"?[^\"\\s\\}]+\"?\\s*\\}\\}/g;\r\n    var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\r\n\r\n    if (mediaDirectiveMatches) {\r\n      mediaDirectiveMatches.forEach(function (mediaDirective) {\r\n        var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(?:\"|&quot;)?(.+)(?=}})\\s*\\}\\}/;\r\n        var urlMatches = mediaDirective.match(urlRegExp);\r\n\r\n        if (urlMatches && typeof urlMatches[1] !== \"undefined\") {\r\n          html = html.replace(mediaDirective, _config.getConfig(\"media_url\") + urlMatches[1].replace(/\"$/, \"\").replace(/&quot;$/, \"\"));\r\n        }\r\n      });\r\n    }\r\n\r\n    return html;\r\n  }\r\n  /**\r\n   * Replace data-src attribute with src.\r\n   *\r\n   * @param {string} html\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function replaceWithSrc(html) {\r\n    return html.replace(new RegExp(\"data-tmp-src=\\\"\\{\\{\", \"g\"), \"src=\\\"{{\");\r\n  }\r\n  /**\r\n   * Replace src attribute with data-tmp-src.\r\n   *\r\n   * @param {string} html\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function replaceWithDataSrc(html) {\r\n    return html.replace(new RegExp(\"src=\\\"\\{\\{\", \"g\"), \"data-tmp-src=\\\"{{\");\r\n  }\r\n\r\n  return Object.assign(decodeAllDataUrlsInString, {\r\n    toDataUrl: toDataUrl,\r\n    fromDataUrl: fromDataUrl,\r\n    getImageUrl: getImageUrl,\r\n    removeQuotesInMediaDirectives: removeQuotesInMediaDirectives,\r\n    convertMediaDirectivesToUrls: convertMediaDirectivesToUrls,\r\n    replaceWithSrc: replaceWithSrc,\r\n    replaceWithDataSrc: replaceWithDataSrc\r\n  });\r\n});\r\n//# sourceMappingURL=directives.js.map","Magento_PageBuilder/js/utils/editor.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/adminhtml/tools\", \"mage/translate\", \"mageUtils\", \"Magento_PageBuilder/js/config\"], function (_jquery, _tools, _translate, _mageUtils, _config) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Is the inline WYSIWYG supported?\r\n   */\r\n  function isWysiwygSupported() {\r\n    return _config.getConfig(\"can_use_inline_editing_on_stage\");\r\n  }\r\n  /**\r\n   * Encode content for TinyMCE\r\n   *\r\n   * @param content\r\n   */\r\n\r\n\r\n  function encodeContent(content) {\r\n    if (isWysiwygSupported()) {\r\n      return convertVariablesToHtmlPreview(convertWidgetsToHtmlPreview(unescapeDoubleQuoteWithinWidgetDirective(removeInvalidPlaceholders(content))));\r\n    }\r\n\r\n    return content;\r\n  }\r\n  /**\r\n   * Prior to parsing the content remove any invalid placeholders within the content\r\n   *\r\n   * @param content\r\n   */\r\n\r\n\r\n  function removeInvalidPlaceholders(content) {\r\n    if (content.indexOf(\"magento-placeholder\") !== -1) {\r\n      var html = new DOMParser().parseFromString(content, \"text/html\");\r\n      var placeholders = html.querySelectorAll(\"span.magento-placeholder\");\r\n\r\n      if (placeholders.length > 0) {\r\n        [].slice.call(placeholders).forEach(function (placeholder) {\r\n          // If the invalid placeholder contains a directive, let's insert it back where it belongs\r\n          if (placeholder.innerText.indexOf(\"{{\") !== -1) {\r\n            placeholder.parentNode.insertBefore(document.createTextNode(placeholder.innerText), placeholder);\r\n          }\r\n\r\n          placeholder.remove();\r\n        });\r\n      }\r\n\r\n      return html.body.innerHTML;\r\n    }\r\n\r\n    return content;\r\n  }\r\n  /**\r\n   * Convert all variables to their HTML preview counterparts\r\n   *\r\n   * Re-implements logic from lib/web/mage/adminhtml/wysiwyg/tiny_mce/plugins/magentovariable/editor_plugin.js to parse\r\n   * and replace the variables within the content.\r\n   *\r\n   * @param content\r\n   */\r\n\r\n\r\n  function convertVariablesToHtmlPreview(content) {\r\n    var config = _config.getConfig(\"tinymce\").variables;\r\n\r\n    var magentoVariables = JSON.parse(config.placeholders);\r\n    return content.replace(/{\\{\\s?(?:customVar code=|config path=\\\")([^\\}\\\"]+)[\\\"]?\\s?\\}\\}/ig, function (match, path) {\r\n      var id = btoa(path).replace(/\\+/g, \":\").replace(/\\//g, \"_\").replace(/=/g, \"-\");\r\n      var placeholder = (0, _jquery)(\"<span />\").addClass(\"magento-variable\").addClass(\"magento-placeholder\").addClass(\"mceNonEditable\").prop(\"id\", id).prop(\"contentEditable\", \"false\");\r\n\r\n      if (magentoVariables[path].variable_type === \"custom\") {\r\n        placeholder.addClass(\"magento-custom-var\");\r\n      }\r\n\r\n      var variableType = magentoVariables[path].variable_type;\r\n\r\n      if (magentoVariables[path] && (variableType === \"default\" || variableType === \"custom\")) {\r\n        placeholder.text(magentoVariables[path].variable_name);\r\n      } else {\r\n        // If we're unable to find the placeholder we need to attach an error class\r\n        placeholder.addClass(\"magento-placeholder-error\");\r\n        placeholder.text(variableType === \"custom\" ? path : (0, _translate)(\"Not Found\"));\r\n      }\r\n\r\n      return placeholder[0].outerHTML;\r\n    });\r\n  }\r\n  /**\r\n   * Convert widgets within content to their HTML counterparts\r\n   *\r\n   * @param content\r\n   */\r\n\r\n\r\n  function convertWidgetsToHtmlPreview(content) {\r\n    var config = _config.getConfig(\"tinymce\").widgets;\r\n\r\n    return content.replace(/\\{\\{widget([\\S\\s]*?)\\}\\}/ig, function (match, widgetBody) {\r\n      var attributes = parseAttributesString(widgetBody);\r\n      var imageSrc;\r\n\r\n      if (attributes.type) {\r\n        var placeholder = (0, _jquery)(\"<span />\").addClass(\"magento-placeholder\").addClass(\"magento-widget\").addClass(\"mceNonEditable\").prop(\"id\", _mageUtils.uniqueid()).prop(\"contentEditable\", \"false\");\r\n        attributes.type = attributes.type.replace(/\\\\\\\\/g, \"\\\\\");\r\n        imageSrc = config.placeholders[attributes.type];\r\n\r\n        if (!imageSrc) {\r\n          imageSrc = config.error_image_url;\r\n          placeholder.addClass(\"magento-placeholder-error\");\r\n        }\r\n\r\n        var image = (0, _jquery)(\"<img />\").prop(\"id\", window.Base64.idEncode(match)).prop(\"src\", imageSrc);\r\n        placeholder.append(image);\r\n        var widgetType = \"\";\r\n\r\n        if (config.types[attributes.type]) {\r\n          widgetType += config.types[attributes.type];\r\n        }\r\n\r\n        placeholder.append((0, _jquery)(document.createTextNode(widgetType)));\r\n        return placeholder[0].outerHTML;\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Parse attributes into a string\r\n   *\r\n   * @param attributes\r\n   */\r\n\r\n\r\n  function parseAttributesString(attributes) {\r\n    var result = {};\r\n    attributes.replace(/(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g, function (match, key, value) {\r\n      result[key] = value ? value.replace(/&quote;/g, \"\\\"\") : value;\r\n      return \"\";\r\n    });\r\n    return result;\r\n  }\r\n  /**\r\n   * Lock all image sizes before initializing TinyMCE to avoid content jumps\r\n   *\r\n   * @param element\r\n   */\r\n\r\n\r\n  function lockImageSize(element) {\r\n    [].slice.call(element.querySelectorAll(\"img\")).forEach(function (image) {\r\n      if (image.style.width.length === 0) {\r\n        image.style.width = /^\\d+$/.test(image.getAttribute(\"width\")) ? image.getAttribute(\"width\") + \"px\" : image.getAttribute(\"width\");\r\n        image.setAttribute(\"data-width-locked\", \"true\");\r\n      }\r\n\r\n      if (image.style.height.length === 0) {\r\n        image.style.height = /^\\d+$/.test(image.getAttribute(\"height\")) ? image.getAttribute(\"height\") + \"px\" : image.getAttribute(\"height\");\r\n        image.setAttribute(\"data-height-locked\", \"true\");\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Reverse forced image size after TinyMCE is finished initializing\r\n   *\r\n   * @param element\r\n   */\r\n\r\n\r\n  function unlockImageSize(element) {\r\n    [].slice.call(element.querySelectorAll(\"img\")).forEach(function (image) {\r\n      if (image.getAttribute(\"data-width-locked\")) {\r\n        image.style.width = null;\r\n        image.removeAttribute(\"data-width-locked\");\r\n      }\r\n\r\n      if (image.getAttribute(\"data-height-locked\")) {\r\n        image.style.height = null;\r\n        image.removeAttribute(\"data-height-locked\");\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Create a bookmark within the content to be restored later\r\n   */\r\n\r\n\r\n  function createBookmark(event) {\r\n    var wrapperElement = (0, _jquery)(event.target).parents(\".inline-wysiwyg\");\r\n    /**\r\n     * Create an element bookmark\r\n     *\r\n     * @param element\r\n     */\r\n\r\n    var createElementBookmark = function createElementBookmark(element) {\r\n      return {\r\n        name: element.nodeName,\r\n        index: findNodeIndex(wrapperElement[0], element.nodeName, element)\r\n      };\r\n    }; // Handle direct clicks onto an IMG\r\n\r\n\r\n    if (event.target.nodeName === \"IMG\") {\r\n      return createElementBookmark(event.target);\r\n    }\r\n\r\n    if (window.getSelection) {\r\n      var selection = window.getSelection();\r\n\r\n      var id = _mageUtils.uniqueid();\r\n\r\n      if (selection.getRangeAt && selection.rangeCount) {\r\n        var range = normalizeTableCellSelection(selection.getRangeAt(0).cloneRange()); // Determine if the current node is an image or span that we want to select instead of text\r\n\r\n        var currentNode = range.startContainer;\r\n\r\n        if (currentNode.nodeType === Node.ELEMENT_NODE && (currentNode.nodeName === \"IMG\" || currentNode.nodeName === \"SPAN\" && currentNode.classList.contains(\"magento-placeholder\"))) {\r\n          return createElementBookmark(currentNode);\r\n        } // Also check if the direct parent is either of these\r\n\r\n\r\n        var parentNode = range.startContainer.parentNode;\r\n\r\n        if (parentNode.nodeName === \"IMG\" || parentNode.nodeName === \"SPAN\" && parentNode.classList.contains(\"magento-placeholder\")) {\r\n          return createElementBookmark(parentNode);\r\n        }\r\n\r\n        if (!range.collapsed) {\r\n          range.collapse(false);\r\n          var endBookmarkNode = createBookmarkSpan(id + \"_end\");\r\n          range.insertNode(endBookmarkNode);\r\n        }\r\n\r\n        var range2 = normalizeTableCellSelection(selection.getRangeAt(0));\r\n        range2.collapse(true);\r\n        var startBookmarkNode = createBookmarkSpan(id + \"_start\");\r\n        range2.insertNode(startBookmarkNode);\r\n        return {\r\n          id: id\r\n        };\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n  /**\r\n   * Move the cursor to our new bookmark\r\n   *\r\n   * @param bookmark\r\n   */\r\n\r\n\r\n  function moveToBookmark(bookmark) {\r\n    window.tinymce.activeEditor.selection.moveToBookmark(bookmark);\r\n  }\r\n  /**\r\n   * Retrieve active editor from TinyMCE\r\n   */\r\n\r\n\r\n  function getActiveEditor() {\r\n    return window.tinymce.activeEditor;\r\n  }\r\n  /**\r\n   * Create a bookmark span for the selection\r\n   *\r\n   * @param id\r\n   */\r\n\r\n\r\n  function createBookmarkSpan(id) {\r\n    var bookmark = document.createElement(\"span\");\r\n    bookmark.setAttribute(\"data-mce-type\", \"bookmark\");\r\n    bookmark.id = id;\r\n    bookmark.style.overflow = \"hidden\";\r\n    bookmark.style.lineHeight = \"0px\";\r\n    return bookmark;\r\n  }\r\n  /**\r\n   * Find the index of an element within a wrapper\r\n   *\r\n   * @param wrapperElement\r\n   * @param name\r\n   * @param element\r\n   */\r\n\r\n\r\n  function findNodeIndex(wrapperElement, name, element) {\r\n    var selector = name.toLowerCase() + ':not([data-mce-bogus=\"all\"])'; // If there is no ID on the element add a unique ID so we can efficiently find it\r\n\r\n    if (!element.id) {\r\n      element.id = _mageUtils.uniqueid();\r\n    }\r\n\r\n    return (0, _jquery)(wrapperElement).find(selector).toArray().findIndex(function (node) {\r\n      return node.id === element.id;\r\n    });\r\n  }\r\n  /**\r\n   * Get a node by index within a wrapper\r\n   *\r\n   * @param wrapperElement\r\n   * @param name\r\n   * @param index\r\n   */\r\n\r\n\r\n  function getNodeByIndex(wrapperElement, name, index) {\r\n    var selector = name.toLowerCase() + ':not([data-mce-bogus=\"all\"])';\r\n    return (0, _jquery)(wrapperElement).find(selector).get(index);\r\n  }\r\n  /**\r\n   * Create a double click event that works in all browsers\r\n   */\r\n\r\n\r\n  function createDoubleClickEvent() {\r\n    try {\r\n      return new MouseEvent(\"dblclick\", {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n    } catch (e) {\r\n      var dblClickEvent = document.createEvent(\"MouseEvent\");\r\n      dblClickEvent.initMouseEvent(\"dblclick\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n      return dblClickEvent;\r\n    }\r\n  }\r\n  /**\r\n   * Replace all desktop styles that left unprocessed back to style element to prevent data corruption.\r\n   */\r\n\r\n\r\n  function processInlineStyles(html) {\r\n    var name = _config.getConfig(\"defaultViewport\");\r\n\r\n    var searchPattern = new RegExp(\"data-\" + name + \"-style=\", \"g\");\r\n    return html.replace(searchPattern, \"style=\");\r\n  }\r\n  /**\r\n   * Move the end point of a range to handle tables\r\n   *\r\n   * @param range\r\n   * @param start\r\n   */\r\n\r\n\r\n  function moveEndPoint(range, start) {\r\n    var container;\r\n    var offset;\r\n    var childNodes;\r\n\r\n    if (start) {\r\n      container = range.startContainer;\r\n      offset = range.startOffset;\r\n    } else {\r\n      container = range.endContainer;\r\n      offset = range.endOffset;\r\n    }\r\n\r\n    if (container.nodeType === Node.ELEMENT_NODE && container.nodeName === \"TR\") {\r\n      childNodes = container.childNodes;\r\n      container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\r\n\r\n      if (container) {\r\n        offset = start ? 0 : container.childNodes.length;\r\n\r\n        if (start) {\r\n          range.setStart(container, offset);\r\n        } else {\r\n          range.setEnd(container, offset);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Normalize the table sell selection within a range to better handle selections being inside of tables\r\n   *\r\n   * @param range\r\n   */\r\n\r\n\r\n  function normalizeTableCellSelection(range) {\r\n    moveEndPoint(range, true);\r\n    moveEndPoint(range, false);\r\n    return range;\r\n  }\r\n  /**\r\n   * Convert HTML encoded double quote to double quote with backslash within widget directives\r\n   *\r\n   * @param {string} content\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function escapeDoubleQuoteWithinWidgetDirective(content) {\r\n    return content.replace(/\\{\\{widget[\\S\\s]*?\\}\\}/ig, function (match) {\r\n      return match.replace(/&quot;/g, \"\\\\\\\"\");\r\n    });\r\n  }\r\n  /**\r\n   * Convert double quote with backslash to HTML encoded double quote within widget directives\r\n   *\r\n   * @param {string} content\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function unescapeDoubleQuoteWithinWidgetDirective(content) {\r\n    return content.replace(/\\{\\{widget[\\S\\s]*?\\}\\}/ig, function (match) {\r\n      return match.replace(/\\\\+\"/g, \"&quot;\");\r\n    });\r\n  }\r\n  /**\r\n   * Convert double quote to single quote within magento variable directives\r\n   *\r\n   * @param {string} content\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function replaceDoubleQuoteWithSingleQuoteWithinVariableDirective(content) {\r\n    // Find html elements which attributes contain magento variables directives\r\n    return content.replace(/<([a-z0-9\\-\\_]+)([^>]+?[a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/gi, function (match1, tag, attributes) {\r\n      // Replace double quote with single quote within magento variable directive\r\n      var sanitizedAttributes = attributes.replace(/\\{\\{[^\\{\\}]+\\}\\}/gi, function (match2) {\r\n        return match2.replace(/\"/g, \"'\");\r\n      });\r\n      return \"<\" + tag + sanitizedAttributes + \">\";\r\n    });\r\n  }\r\n  /**\r\n   * Remove Page Builder reserved html tag attributes from the content\r\n   *\r\n   * @param {string} content\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function removeReservedHtmlAttributes(content) {\r\n    var attributes = _config.getConfig(\"stage_config\").reserved_html_attributes || {};\r\n\r\n    for (var _i = 0, _Object$keys = Object.keys(attributes); _i < _Object$keys.length; _i++) {\r\n      var attribute = _Object$keys[_i];\r\n      content = removeHtmlTagAttribute(content, attribute);\r\n    }\r\n\r\n    return content;\r\n  }\r\n  /**\r\n   * Remove attribute from html tags\r\n   *\r\n   * @param {string} content\r\n   * @param {string} name\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function removeHtmlTagAttribute(content, name) {\r\n    if (typeof content === \"string\" && content.indexOf(name + \"=\") !== -1) {\r\n      var html = new DOMParser().parseFromString(content, \"text/html\");\r\n      html.querySelectorAll(\"[\" + name + \"]\").forEach(function (child) {\r\n        child.removeAttribute(name);\r\n      });\r\n      content = html.body.innerHTML;\r\n    }\r\n\r\n    return content;\r\n  }\r\n\r\n  return {\r\n    isWysiwygSupported: isWysiwygSupported,\r\n    encodeContent: encodeContent,\r\n    parseAttributesString: parseAttributesString,\r\n    lockImageSize: lockImageSize,\r\n    unlockImageSize: unlockImageSize,\r\n    createBookmark: createBookmark,\r\n    moveToBookmark: moveToBookmark,\r\n    getActiveEditor: getActiveEditor,\r\n    findNodeIndex: findNodeIndex,\r\n    getNodeByIndex: getNodeByIndex,\r\n    createDoubleClickEvent: createDoubleClickEvent,\r\n    processInlineStyles: processInlineStyles,\r\n    escapeDoubleQuoteWithinWidgetDirective: escapeDoubleQuoteWithinWidgetDirective,\r\n    unescapeDoubleQuoteWithinWidgetDirective: unescapeDoubleQuoteWithinWidgetDirective,\r\n    replaceDoubleQuoteWithSingleQuoteWithinVariableDirective: replaceDoubleQuoteWithSingleQuoteWithinVariableDirective,\r\n    removeReservedHtmlAttributes: removeReservedHtmlAttributes\r\n  };\r\n});\r\n//# sourceMappingURL=editor.js.map","Magento_PageBuilder/js/utils/image.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/url\"], function (_config, _directives, _url) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Decode image background URL to object\r\n   *\r\n   * @param value\r\n   * @returns {Object}\r\n   * @api\r\n   */\r\n  function decodeUrl(value) {\r\n    var result = \"\";\r\n    value = decodeURIComponent(value.replace(window.location.href, \"\"));\r\n    var regexp = /{{.*\\s*url=\"?(.*\\.([a-z|A-Z]*))\"?\\s*}}/;\r\n\r\n    if (regexp.test(value)) {\r\n      var _regexp$exec = regexp.exec(value),\r\n          url = _regexp$exec[1],\r\n          type = _regexp$exec[2];\r\n\r\n      var image = {\r\n        name: url.split(\"/\").pop(),\r\n        size: 0,\r\n        type: \"image/\" + type,\r\n        url: _config.getConfig(\"media_url\") + url\r\n      };\r\n      result = [image];\r\n    }\r\n\r\n    return result;\r\n  }\r\n  /**\r\n   * Convert a URL to an image directive\r\n   *\r\n   * @param {string} imageUrl\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function urlToDirective(imageUrl) {\r\n    var mediaUrl = (0, _url.convertUrlToPathIfOtherUrlIsOnlyAPath)(_config.getConfig(\"media_url\"), imageUrl);\r\n    var mediaPath = imageUrl.split(mediaUrl);\r\n    return \"{{media url=\" + mediaPath[1] + \"}}\";\r\n  }\r\n  /**\r\n   * Convert an image URL to a background image data uri\r\n   *\r\n   * @param {string} imageUrl\r\n   * @returns {string}\r\n   */\r\n\r\n\r\n  function imageToBackgroundImageDataUrl(imageUrl) {\r\n    return \"url(\\'\" + (0, _directives.toDataUrl)(urlToDirective(imageUrl)) + \"\\')\";\r\n  }\r\n\r\n  return {\r\n    decodeUrl: decodeUrl,\r\n    urlToDirective: urlToDirective,\r\n    imageToBackgroundImageDataUrl: imageToBackgroundImageDataUrl\r\n  };\r\n});\r\n//# sourceMappingURL=image.js.map","Magento_PageBuilder/js/utils/loader.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n  function load(dependencies, factory, onError) {\r\n    require(dependencies, factory, onError);\r\n  }\r\n\r\n  return load;\r\n});\r\n//# sourceMappingURL=loader.js.map","Magento_PageBuilder/js/utils/map.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * googleMaps dependency is added within googlemaps.phtml through shim based on API key being set\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'module',\r\n    'Magento_PageBuilder/js/events'\r\n], function (_, module, events) {\r\n    'use strict';\r\n\r\n    var google = window.google || {},\r\n\r\n        /**\r\n         * Generates a google map usable latitude and longitude object\r\n         *\r\n         * @param {Object} position\r\n         * @return {google.maps.LatLng}\r\n         */\r\n        getGoogleLatitudeLongitude = function (position) {\r\n            return new google.maps.LatLng(position.latitude, position.longitude);\r\n        },\r\n        gmAuthFailure = false;\r\n\r\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n    /**\r\n     * Google's error listener for map loader failures\r\n     */\r\n    window.gm_authFailure = function () {\r\n        events.trigger('googleMaps:authFailure');\r\n        gmAuthFailure = true;\r\n    };\r\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n    return function (element, markers, additionalOptions) {\r\n        var options,\r\n            style;\r\n\r\n        // If we've previously had an API key error, throw the error even again\r\n        if (gmAuthFailure) {\r\n            events.trigger('googleMaps:authFailure');\r\n\r\n            return;\r\n        }\r\n\r\n        // If Google Maps isn't loaded don't try init the map, it won't work\r\n        if (typeof google.maps === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Just in case of a bad JSON that bypassed validation\r\n         */\r\n        try {\r\n            style = module.config().style ? JSON.parse(module.config().style) : [];\r\n        }\r\n        catch (error) {\r\n            style = [];\r\n        }\r\n        options = _.extend({\r\n            zoom: 8,\r\n            center: getGoogleLatitudeLongitude({\r\n                latitude: 30.2672,\r\n                longitude: -97.7431\r\n            }),\r\n            scrollwheel: false,\r\n            disableDoubleClickZoom: false,\r\n            disableDefaultUI: false,\r\n            mapTypeControl: true,\r\n            mapTypeControlOptions: {\r\n                style: google.maps.MapTypeControlStyle.DEFAULT\r\n            },\r\n            styles: style\r\n        }, additionalOptions);\r\n\r\n        /* Create the map */\r\n        this.map = new google.maps.Map(element, options);\r\n        this.markers = [];\r\n\r\n        /**\r\n         * Callback function on map config update\r\n         * @param {Array} newMarkers\r\n         * @param {Object} updateOptions\r\n         */\r\n        this.onUpdate = function (newMarkers, updateOptions) {\r\n            this.map.setOptions(updateOptions);\r\n            this.setMarkers(newMarkers);\r\n        };\r\n\r\n        /**\r\n         * Sets the markers to selected map\r\n         * @param {Object} newMarkers\r\n         */\r\n        this.setMarkers = function (newMarkers) {\r\n            var activeInfoWindow,\r\n                latitudeLongitudeBounds = new google.maps.LatLngBounds();\r\n\r\n            this.markers.forEach(function (marker) {\r\n                marker.setMap(null);\r\n            }, this);\r\n\r\n            this.markers = [];\r\n            this.bounds = [];\r\n\r\n            /**\r\n             * Creates and set listener for markers\r\n             */\r\n            if (newMarkers && newMarkers.length) {\r\n                newMarkers.forEach(function (newMarker) {\r\n                    var location = _.escape(newMarker['location_name']) || '',\r\n                    comment = newMarker.comment ?\r\n                        '<p>' + _.escape(newMarker.comment).replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>') + '</p>'\r\n                        : '',\r\n                    phone = newMarker.phone ? '<p>Phone: ' + _.escape(newMarker.phone) + '</p>' : '',\r\n                    address = newMarker.address ? _.escape(newMarker.address) + '<br/>' : '',\r\n                    city = _.escape(newMarker.city) || '',\r\n                    country = newMarker.country ? _.escape(newMarker.country) : '',\r\n                    state = newMarker.state ? _.escape(newMarker.state) + ' ' : '',\r\n                    zipCode = newMarker.zipcode ? _.escape(newMarker.zipcode) : '',\r\n                    cityComma = city !== '' && (zipCode !== '' || state !== '') ? ', ' : '',\r\n                    lineBreak = city !== '' || zipCode !== '' ? '<br/>' : '',\r\n                    contentString =\r\n                        '<div>' +\r\n                        '<h3><b>' + location + '</b></h3>' +\r\n                        comment +\r\n                        phone +\r\n                        '<p><span>' + address +\r\n                        city + cityComma + state + zipCode + lineBreak +\r\n                        country + '</span></p>' +\r\n                        '</div>',\r\n                    infowindow = new google.maps.InfoWindow({\r\n                        content: contentString,\r\n                        maxWidth: 350\r\n                    }),\r\n                    newCreatedMarker = new google.maps.Marker({\r\n                        map: this.map,\r\n                        position: getGoogleLatitudeLongitude(newMarker.position),\r\n                        title: location\r\n                    });\r\n\r\n                    if (location) {\r\n                        newCreatedMarker.addListener('click', function () {\r\n                            if (activeInfoWindow) {\r\n                                activeInfoWindow.close();\r\n                            }\r\n\r\n                            infowindow.open(this.map, newCreatedMarker);\r\n                            activeInfoWindow = infowindow;\r\n                        }, this);\r\n                    }\r\n\r\n                    this.markers.push(newCreatedMarker);\r\n                    this.bounds.push(getGoogleLatitudeLongitude(newMarker.position));\r\n                }, this);\r\n            }\r\n\r\n            /**\r\n             * This sets the bounds of the map for multiple locations\r\n             */\r\n            if (this.bounds.length > 1) {\r\n                this.bounds.forEach(function (bound) {\r\n                    latitudeLongitudeBounds.extend(bound);\r\n                });\r\n                this.map.fitBounds(latitudeLongitudeBounds);\r\n            }\r\n\r\n            /**\r\n             * Zoom to 8 if there is only a single location\r\n             */\r\n            if (this.bounds.length === 1) {\r\n                this.map.setCenter(this.bounds[0]);\r\n                this.map.setZoom(8);\r\n            }\r\n        };\r\n\r\n        this.setMarkers(markers);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/utils/nesting-link-dialog.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/translate\", \"Magento_PageBuilder/js/modal/dismissible-confirm\"], function (_jquery, _translate, _dismissibleConfirm) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Validate inline editor for having nested link\r\n   * Creates a dialog and removes inline editor link if present\r\n   *\r\n   * @param {DataStore} dataStore\r\n   * @param {WysiwygInterface} wysiwyg\r\n   * @param {string} inlineMessageField\r\n   * @param {string} linkUrlField\r\n   */\r\n  function nestingLinkDialog(dataStore, wysiwyg, inlineMessageField, linkUrlField) {\r\n    var dataStoreContent = dataStore.getState();\r\n    var inlineMessage = dataStoreContent[inlineMessageField];\r\n    var linkUrl = dataStoreContent[linkUrlField];\r\n    var aLinkRegex = /(<a[\\s]+[^>]+).+(?=<\\/a>)<\\/a>/igm;\r\n\r\n    if (wysiwyg && inlineMessage.match(aLinkRegex) && linkUrl && [\"page\", \"product\", \"category\", \"default\"].indexOf(linkUrl.type) !== -1 && linkUrl[linkUrl.type] && linkUrl[linkUrl.type].length !== 0) {\r\n      var inlineEditor = (0, _jquery)(\"#\" + wysiwyg.elementId);\r\n      inlineEditor.trigger(\"blur\");\r\n      (0, _dismissibleConfirm)({\r\n        actions: {\r\n          always: function always() {\r\n            var anchorLessDataStoreMessage = inlineMessage.replace(aLinkRegex, \"\");\r\n            var anchorLessInlineMessage = inlineEditor.html().replace(aLinkRegex, \"\");\r\n            dataStore.set(inlineMessageField, anchorLessDataStoreMessage);\r\n            inlineEditor.html(anchorLessInlineMessage);\r\n          }\r\n        },\r\n        content: (0, _translate)(\"We are unable to support links within the content field whilst having a link set on the content type. Please remove the content type link if you'd like to set a link within the content. We will automatically remove the links within the content field.\"),\r\n        // tslint:disable-line:max-line-length\r\n        title: (0, _translate)(\"Nested links are not allowed\"),\r\n        haveCancelButton: false\r\n      });\r\n    }\r\n  }\r\n\r\n  return nestingLinkDialog;\r\n});\r\n//# sourceMappingURL=nesting-link-dialog.js.map","Magento_PageBuilder/js/utils/nesting-widget-dialog.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"mage/translate\", \"Magento_PageBuilder/js/modal/dismissible-confirm\"], function (_jquery, _translate, _dismissibleConfirm) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Validate inline editor for having nested widget\r\n   * Creates a dialog and removes inline editor widget if present\r\n   *\r\n   * @param {DataStore} dataStore\r\n   * @param {WysiwygInterface} wysiwyg\r\n   * @param {string} inlineMessageField\r\n   * @param {string} linkUrlField\r\n   */\r\n  function nestingWidgetDialog(dataStore, wysiwyg, inlineMessageField, linkUrlField) {\r\n    var dataStoreContent = dataStore.getState();\r\n    var inlineMessage = dataStoreContent[inlineMessageField];\r\n    var linkUrl = dataStoreContent[linkUrlField];\r\n    var widgetRegex = /\\{\\{widget([\\S\\s]*?)\\}\\}/ig;\r\n    var widgetPlaceholderRegex = /<span.*(class=)(\\\"|\\').*((magento-placeholder).*(magento-widget)|(magento-widget).*(magento-placeholder)).*<\\/span>/igm;\r\n\r\n    if (wysiwyg && inlineMessage.match(widgetRegex) && linkUrl && [\"page\", \"product\", \"category\", \"default\"].indexOf(linkUrl.type) !== -1 && linkUrl[linkUrl.type] && linkUrl[linkUrl.type].length !== 0) {\r\n      var inlineEditor = (0, _jquery)(\"#\" + wysiwyg.elementId);\r\n      inlineEditor.trigger(\"blur\");\r\n      (0, _dismissibleConfirm)({\r\n        actions: {\r\n          always: function always() {\r\n            var widgetLessDataStoreMessage = inlineMessage.replace(widgetRegex, \"\");\r\n            var widgetLessInlineMessage = inlineEditor.html().replace(widgetPlaceholderRegex, \"\");\r\n            dataStore.set(inlineMessageField, widgetLessDataStoreMessage);\r\n            inlineEditor.html(widgetLessInlineMessage);\r\n          }\r\n        },\r\n        content: (0, _translate)(\"We are unable to support widget within the content field whilst having a link set on the content type. Please remove the content type link if you'd like to set a widget within the content. We will automatically remove the widget within the content field.\"),\r\n        // tslint:disable-line:max-line-length\r\n        title: (0, _translate)(\"Nested widgets are not allowed\"),\r\n        haveCancelButton: false\r\n      });\r\n    }\r\n  }\r\n\r\n  return nestingWidgetDialog;\r\n});\r\n//# sourceMappingURL=nesting-widget-dialog.js.map","Magento_PageBuilder/js/utils/object.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"object-path\"], function (_objectPath) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Retrieve a value from an object via a path\r\n   *\r\n   * @param {object} object\r\n   * @param {string} path\r\n   * @param {TResult} defaultValue\r\n   * @returns {TResult}\r\n   */\r\n  function get(object, path, defaultValue) {\r\n    return _objectPath.get(object, path, defaultValue);\r\n  }\r\n  /**\r\n   * Set a value within an object via a path\r\n   *\r\n   * @param {object} object\r\n   * @param {string} path\r\n   * @param {TResult} value\r\n   * @returns {TResult | undefined}\r\n   */\r\n\r\n\r\n  function set(object, path, value) {\r\n    return _objectPath.set(object, path, value);\r\n  }\r\n\r\n  return {\r\n    get: get,\r\n    set: set\r\n  };\r\n});\r\n//# sourceMappingURL=object.js.map","Magento_PageBuilder/js/utils/pagebuilder-header-height.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\"], function (_jquery) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Checks if PageBuilder has header and returns it's height\r\n   *\r\n   * @param {string} stageId\r\n   * @param {string} stageWrapper\r\n   * @param {string} pageBuilderHeader\r\n   * @returns {number}\r\n   */\r\n  function pageBuilderHeaderHeight(stageId, stageWrapper, pageBuilderHeader) {\r\n    if (stageWrapper === void 0) {\r\n      stageWrapper = \".pagebuilder-stage-wrapper\";\r\n    }\r\n\r\n    if (pageBuilderHeader === void 0) {\r\n      pageBuilderHeader = \".pagebuilder-header\";\r\n    }\r\n\r\n    var $stageWrapper = (0, _jquery)(\"#\" + stageId).closest(stageWrapper);\r\n    var $pageBuilderHeader = $stageWrapper.find(pageBuilderHeader);\r\n    return !!$pageBuilderHeader.length ? $pageBuilderHeader.height() : 0;\r\n  }\r\n\r\n  return pageBuilderHeaderHeight;\r\n});\r\n//# sourceMappingURL=pagebuilder-header-height.js.map","Magento_PageBuilder/js/utils/position-sticky.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Determine if the current browser supports position sticky\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  function supportsPositionSticky() {\r\n    if (!window.getComputedStyle) {\r\n      return false;\r\n    }\r\n\r\n    var testNode = document.createElement(\"div\");\r\n    return [\"\", \"-webkit-\", \"-moz-\", \"-ms-\"].some(function (prefix) {\r\n      try {\r\n        testNode.style.position = prefix + \"sticky\";\r\n      } catch (e) {// Fail silently\r\n      }\r\n\r\n      return testNode.style.position !== \"\";\r\n    });\r\n  }\r\n\r\n  return {\r\n    supportsPositionSticky: supportsPositionSticky\r\n  };\r\n});\r\n//# sourceMappingURL=position-sticky.js.map","Magento_PageBuilder/js/utils/promise-deferred.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Returns a deferred promise\r\n   *\r\n   * @returns {DeferredInterface}\r\n   * @api\r\n   */\r\n  function deferred() {\r\n    var resolve;\r\n    var reject;\r\n    var promise = new Promise(function (promiseResolve, promiseReject) {\r\n      resolve = promiseResolve;\r\n      reject = promiseReject;\r\n    });\r\n    return {\r\n      resolve: resolve,\r\n      reject: reject,\r\n      promise: promise\r\n    };\r\n  }\r\n\r\n  return deferred;\r\n});\r\n//# sourceMappingURL=promise-deferred.js.map","Magento_PageBuilder/js/utils/string.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Convert from snake case to camel case\r\n   *\r\n   * @param {string} currentString\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n  function fromSnakeToCamelCase(currentString) {\r\n    var parts = currentString.split(/[_-]/);\r\n    var newString = \"\";\r\n\r\n    for (var i = 1; i < parts.length; i++) {\r\n      newString += parts[i].charAt(0).toUpperCase() + parts[i].slice(1);\r\n    }\r\n\r\n    return parts[0] + newString;\r\n  }\r\n  /**\r\n   * Convert a camel case string to snake case\r\n   *\r\n   * @param currentString\r\n   */\r\n\r\n\r\n  function fromCamelCaseToDash(currentString) {\r\n    return currentString.replace(/[A-Z]/g, function (m) {\r\n      return \"-\" + m.toLowerCase();\r\n    });\r\n  }\r\n\r\n  return {\r\n    fromSnakeToCamelCase: fromSnakeToCamelCase,\r\n    fromCamelCaseToDash: fromCamelCaseToDash\r\n  };\r\n});\r\n//# sourceMappingURL=string.js.map","Magento_PageBuilder/js/utils/text.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=text.js.map","Magento_PageBuilder/js/utils/url.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Check for whether url string contains only a path\r\n   *\r\n   * @param {String} url\r\n   * @returns {Boolean}\r\n   */\r\n  function isPathOnly(url) {\r\n    return url.indexOf(\"/\") === 0;\r\n  }\r\n  /**\r\n   * Get the path from a URL\r\n   *\r\n   * @param {String} url\r\n   * @returns {String}\r\n   */\r\n\r\n\r\n  function getPathFromUrl(url) {\r\n    var a = document.createElement(\"a\");\r\n    a.href = url;\r\n    return a.pathname;\r\n  }\r\n  /**\r\n   * Convert url to path if other url is only a path\r\n   *\r\n   * @param {string} url\r\n   * @param {string} otherUrl\r\n   * @returns {string}\r\n   * @api\r\n   */\r\n\r\n\r\n  function convertUrlToPathIfOtherUrlIsOnlyAPath(url, otherUrl) {\r\n    return isPathOnly(otherUrl) ? getPathFromUrl(url) : url;\r\n  }\r\n\r\n  return {\r\n    convertUrlToPathIfOtherUrlIsOnlyAPath: convertUrlToPathIfOtherUrlIsOnlyAPath\r\n  };\r\n});\r\n//# sourceMappingURL=url.js.map","Magento_PageBuilder/js/widget/show-on-hover.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Show the overlay on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     */\r\n    function showOverlayOnHover($elements) {\r\n        $elements.each(function (index, element) {\r\n            var overlayEl = $(element).find('.pagebuilder-overlay'),\r\n                overlayColor = overlayEl.attr('data-overlay-color');\r\n\r\n            $(element).on('mouseenter', function () {\r\n                overlayEl.css('background-color', overlayColor);\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                overlayEl.css('background-color', 'transparent');\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show button on hover of specific elements\r\n     *\r\n     * @param {JQuery<Element>[]} $elements\r\n     * @param {String} buttonClass\r\n     */\r\n    function showButtonOnHover($elements, buttonClass) {\r\n        $elements.each(function (index, element) {\r\n            var buttonEl = $(element).find(buttonClass);\r\n\r\n            $(element).on('mouseenter', function () {\r\n                buttonEl.css({\r\n                    'opacity': '1',\r\n                    'visibility': 'visible'\r\n                });\r\n            });\r\n\r\n            $(element).on('mouseleave', function () {\r\n                buttonEl.css({\r\n                    'opacity': '0',\r\n                    'visibility': 'hidden'\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n\r\n        var buttonSelector = config.buttonSelector,\r\n            overlayHoverSelector = 'div[data-content-type=\"%s\"][data-show-overlay=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay),\r\n            overlayButtonSelector = 'div[data-content-type=\"%s\"][data-show-button=\"%s\"]'\r\n                .replace('%s', config.dataRole)\r\n                .replace('%s', config.showOverlay);\r\n\r\n        showOverlayOnHover($(overlayHoverSelector));\r\n        showButtonOnHover($(overlayButtonSelector), buttonSelector);\r\n    };\r\n});\r\n","Magento_PageBuilder/js/widget/video-background.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jarallax',\r\n    'jarallaxVideo',\r\n    'vimeoWrapper'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        var $element = $(element),\r\n            parallaxSpeed = $element.data('enableParallax') !== 1 ? 1 : parseFloat($element.data('parallaxSpeed'));\r\n\r\n        if ($element.data('background-type') !== 'video') {\r\n            return;\r\n        }\r\n\r\n        $element.addClass('jarallax');\r\n        $element.attr('data-jarallax', '');\r\n\r\n        window.jarallax($element[0], {\r\n            imgSrc: $element.data('videoFallbackSrc'),\r\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\r\n            videoLoop: $element.data('videoLoop'),\r\n            videoPlayOnlyVisible: $element.data('videoPlayOnlyVisible'),\r\n            videoLazyLoading: $element.data('videoLazyLoad'),\r\n            disableVideo: false,\r\n            elementInViewport: $element.data('elementInViewport') &&\r\n                $element[0].querySelector($element.data('elementInViewport'))\r\n        });\r\n        $element[0].jarallax.video && $element[0].jarallax.video.on('started', function () {\r\n            if ($element[0].jarallax.$video) {\r\n                $element[0].jarallax.$video.style.visibility = 'visible';\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_PageBuilder/js/wysiwyg/component-initializer-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=component-initializer-interface.js.map","Magento_PageBuilder/js/wysiwyg/config-modifier-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=config-modifier-interface.js.map","Magento_PageBuilder/js/wysiwyg/factory.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([\"jquery\", \"Magento_PageBuilder/js/utils/loader\"], function (_jquery, _loader) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * @param {String} contentTypeId The ID in the registry of the content type.\r\n   * @param {String} elementId The ID of the editor element in the DOM.\r\n   * @param {String} contentTypeName The type of content type this editor will be used in. E.g. \"banner\".\r\n   * @param {AdditionalDataConfigInterface} config The configuration for the wysiwyg.\r\n   * @param {DataStore} dataStore The datastore to store the content in.\r\n   * @param {String} fieldName The key in the provided datastore to set the data.\r\n   * @param {String} stageId The ID in the registry of the stage containing the content type.\r\n   * @returns {Wysiwyg}\r\n   */\r\n  function create(contentTypeId, elementId, contentTypeName, config, dataStore, fieldName, stageId) {\r\n    config = _jquery.extend(true, {}, config);\r\n    return new Promise(function (resolve) {\r\n      (0, _loader)([config.adapter_config.component], function (WysiwygInstance) {\r\n        new Promise(function (configResolve) {\r\n          if (config.adapter_config.config_modifiers && config.adapter_config.config_modifiers[contentTypeName]) {\r\n            (0, _loader)([config.adapter_config.config_modifiers[contentTypeName]], function (ConfigModifierType) {\r\n              var modifier = new ConfigModifierType(); // Allow dynamic settings to be set before editor is initialized\r\n\r\n              modifier.modify(contentTypeId, config);\r\n              configResolve();\r\n            });\r\n          } else {\r\n            configResolve();\r\n          }\r\n        }).then(function () {\r\n          // Instantiate the component\r\n          var wysiwyg = new WysiwygInstance(contentTypeId, elementId, config, dataStore, fieldName, stageId);\r\n\r\n          if (config.adapter_config.component_initializers && config.adapter_config.component_initializers[contentTypeName]) {\r\n            (0, _loader)([config.adapter_config.component_initializers[contentTypeName]], function (InitializerType) {\r\n              var initializer = new InitializerType(); // Allow dynamic bindings from configuration such as events from the editor\r\n\r\n              initializer.initialize(wysiwyg);\r\n              resolve(wysiwyg);\r\n            });\r\n          } else {\r\n            resolve(wysiwyg);\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return create;\r\n});\r\n//# sourceMappingURL=factory.js.map","Magento_PageBuilder/js/wysiwyg/tinymce.js":"/*eslint-disable */\r\n/* jscs:disable */\r\n\r\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\", \"mage/adminhtml/wysiwyg/tiny_mce/setup\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/utils/check-stage-full-screen\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/pagebuilder-header-height\"], function (_jquery, _events, _setup, _events2, _underscore, _checkStageFullScreen, _delayUntil, _pagebuilderHeaderHeight) {\r\n  /**\r\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n   * See COPYING.txt for license details.\r\n   */\r\n\r\n  /**\r\n   * Inline editing wysiwyg component\r\n   *\r\n   * @api\r\n   */\r\n  var Wysiwyg = /*#__PURE__*/function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * The id of the editor element\r\n     */\r\n\r\n    /**\r\n     * The supplied wysiwyg configuration\r\n     */\r\n\r\n    /**\r\n     * Id of content type\r\n     */\r\n\r\n    /**\r\n     * Id of the stage\r\n     */\r\n\r\n    /**\r\n     * Wysiwyg adapter instance\r\n     */\r\n\r\n    /**\r\n     * Content type's data store\r\n     */\r\n\r\n    /**\r\n     * Field name in data store reflecting value held in wysiwyg\r\n     */\r\n\r\n    /**\r\n     * Create a debounce to save the content into the data store\r\n     */\r\n\r\n    /**\r\n     * @param {String} contentTypeId The ID in the registry of the content type.\r\n     * @param {String} elementId The ID of the editor element in the DOM.\r\n     * @param {AdditionalDataConfigInterface} config The configuration for the wysiwyg.\r\n     * @param {DataStore} dataStore The datastore to store the content in.\r\n     * @param {String} fieldName The key in the provided datastore to set the data.\r\n     * @param {String} stageId The ID in the registry of the stage containing the content type.\r\n     */\r\n    function Wysiwyg(contentTypeId, elementId, config, dataStore, fieldName, stageId) {\r\n      this.saveContentDebounce = _underscore.debounce(this.saveContentFromWysiwygToDataStore.bind(this), 500);\r\n      this.contentTypeId = contentTypeId;\r\n      this.elementId = elementId;\r\n      this.fieldName = fieldName;\r\n      this.config = config;\r\n      this.dataStore = dataStore;\r\n      this.stageId = stageId;\r\n\r\n      if (this.config.adapter_config.mode === \"inline\") {\r\n        /**\r\n         * Don't include content_css within the inline mode of TinyMCE, if any stylesheets are included here they're\r\n         * appended to the head of the main page, and thus cause other styles to be modified.\r\n         *\r\n         * The styles for typography in the inline editor are scoped within _typography.less\r\n         */\r\n        this.config.adapter.tinymce.content_css = [];\r\n      }\r\n\r\n      var wysiwygSetup = new _setup(this.elementId, this.config.adapter);\r\n      wysiwygSetup.setup(this.config.adapter_config.mode);\r\n      this.wysiwygAdapter = wysiwygSetup.wysiwygInstance;\r\n\r\n      if (this.config.adapter_config.mode === \"inline\") {\r\n        this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\r\n        this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this));\r\n      } // Update content in our data store after our stage preview wysiwyg gets updated\r\n\r\n\r\n      this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterChangeContent, this.onChangeContent.bind(this)); // Update content in our stage preview wysiwyg after its slideout counterpart gets updated\r\n\r\n      _events2.on(\"form:\" + this.contentTypeId + \":saveAfter\", this.setContentFromDataStoreToWysiwyg.bind(this));\r\n\r\n      _events2.on(\"stage:\" + this.stageId + \":fullScreenModeChangeAfter\", this.toggleFullScreen.bind(this));\r\n    }\r\n    /**\r\n     * Hide TinyMce inline toolbar options after fullscreen exit\r\n     */\r\n\r\n\r\n    var _proto = Wysiwyg.prototype;\r\n\r\n    _proto.toggleFullScreen = function toggleFullScreen() {\r\n      var _this = this;\r\n\r\n      var $editor = (0, _jquery)(\"#\" + this.elementId); // wait for fullscreen to close\r\n\r\n      _underscore.defer(function () {\r\n        if (!(0, _checkStageFullScreen)(_this.stageId) && _this.config.adapter_config.mode === \"inline\" && $editor.hasClass(\"mce-edit-focus\")) {\r\n          $editor.removeClass(\"mce-edit-focus\");\r\n\r\n          _this.onBlur();\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * @returns {WysiwygInstanceInterface}\r\n     */\r\n    ;\r\n\r\n    _proto.getAdapter = function getAdapter() {\r\n      return this.wysiwygAdapter;\r\n    }\r\n    /**\r\n     * Called for the onFocus event\r\n     */\r\n    ;\r\n\r\n    _proto.onFocus = function onFocus() {\r\n      var _this2 = this;\r\n\r\n      this.getFixedToolbarContainer().addClass(\"pagebuilder-toolbar-active\");\r\n\r\n      _events2.trigger(\"stage:interactionStart\");\r\n\r\n      var element = document.querySelector(\"#\" + this.elementId);\r\n\r\n      if (!element) {\r\n        return;\r\n      } // Wait for everything else to finish\r\n\r\n\r\n      _underscore.defer(function () {\r\n        return (0, _delayUntil)(function () {\r\n          var $inlineToolbar = _this2.getFixedToolbarContainer().find(\".tox-tinymce-inline\");\r\n\r\n          var self = _this2;\r\n          $inlineToolbar.css(\"min-width\", _this2.config.adapter_config.minToolbarWidth + \"px\");\r\n\r\n          _this2.invertInlineEditorToAccommodateOffscreenToolbar(); // Update toolbar when the height changes\r\n\r\n\r\n          _this2.toolbarHeight = $inlineToolbar.height();\r\n\r\n          if ($inlineToolbar.length) {\r\n            _this2.resizeObserver = new ResizeObserver(function (entries) {\r\n              for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\r\n                var entry = _step.value;\r\n\r\n                if (entry.target === $inlineToolbar.get(0) && entry.target.clientHeight !== self.toolbarHeight) {\r\n                  self.invertInlineEditorToAccommodateOffscreenToolbar();\r\n                  self.toolbarHeight = entry.target.clientHeight;\r\n                }\r\n              }\r\n            });\r\n\r\n            _this2.resizeObserver.observe($inlineToolbar.get(0));\r\n          }\r\n\r\n          var dialogContainer = document.querySelector(\"#\" + _this2.elementId + \" ~ .tox-tinymce-aux\");\r\n\r\n          if (!!dialogContainer) {\r\n            dialogContainer.setAttribute(\"data-editor-aux\", _this2.elementId);\r\n            document.body.appendChild(dialogContainer);\r\n          }\r\n        }, function () {\r\n          return element.classList.contains(\"mce-edit-focus\");\r\n        }, 10);\r\n      });\r\n    }\r\n    /**\r\n     * Called for the onChangeContent event\r\n     */\r\n    ;\r\n\r\n    _proto.onChangeContent = function onChangeContent() {\r\n      this.saveContentDebounce();\r\n      this.invertInlineEditorToAccommodateOffscreenToolbar();\r\n    }\r\n    /**\r\n     * Called for the onBlur events\r\n     */\r\n    ;\r\n\r\n    _proto.onBlur = function onBlur() {\r\n      this.getFixedToolbarContainer().removeClass(\"pagebuilder-toolbar-active\").find(\".tox-tinymce-inline\").css(\"top\", \"\");\r\n\r\n      if (this.resizeObserver) {\r\n        this.resizeObserver.unobserve(this.getFixedToolbarContainer().find(\".tox-tinymce-inline\").get(0));\r\n      }\r\n\r\n      this.toolbarHeight = 0;\r\n      var dialogContainer = document.querySelector(\"[data-editor-aux=\" + this.elementId + \"]\");\r\n\r\n      if (!!dialogContainer) {\r\n        dialogContainer.removeAttribute(\"data-editor-aux\");\r\n        document.querySelector(\"#\" + this.elementId).parentNode.appendChild(dialogContainer);\r\n      }\r\n\r\n      _events2.trigger(\"stage:interactionStop\");\r\n    }\r\n    /**\r\n     * Update content in our data store after our stage preview wysiwyg gets updated\r\n     */\r\n    ;\r\n\r\n    _proto.saveContentFromWysiwygToDataStore = function saveContentFromWysiwygToDataStore() {\r\n      this.dataStore.set(this.fieldName, this.getAdapter().getContent());\r\n    }\r\n    /**\r\n     * Update content in our stage wysiwyg after our data store gets updated\r\n     */\r\n    ;\r\n\r\n    _proto.setContentFromDataStoreToWysiwyg = function setContentFromDataStoreToWysiwyg() {\r\n      this.getAdapter().setContent(this.dataStore.get(this.fieldName));\r\n    }\r\n    /**\r\n     * Adjust padding on stage if in fullscreen mode to accommodate inline wysiwyg toolbar overflowing fixed viewport\r\n     */\r\n    ;\r\n\r\n    _proto.invertInlineEditorToAccommodateOffscreenToolbar = function invertInlineEditorToAccommodateOffscreenToolbar() {\r\n      if (this.config.adapter_config.mode !== \"inline\") {\r\n        return;\r\n      }\r\n\r\n      var $inlineToolbar = this.getFixedToolbarContainer().find(\".tox-tinymce-inline\");\r\n\r\n      if (!$inlineToolbar.length) {\r\n        return;\r\n      }\r\n\r\n      var inlineWysiwygClientRectTop = this.getFixedToolbarContainer().get(0).getBoundingClientRect().top - (0, _pagebuilderHeaderHeight)(this.stageId);\r\n\r\n      if (!(0, _checkStageFullScreen)(this.stageId) || $inlineToolbar.height() < inlineWysiwygClientRectTop) {\r\n        var extraHeight = 0;\r\n\r\n        if ($inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-left']\").length || $inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-right']\").length || $inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-centered']\").length) {\r\n          extraHeight = 29;\r\n        }\r\n\r\n        $inlineToolbar.css(\"top\", ($inlineToolbar.height() - extraHeight) * -1);\r\n        return;\r\n      }\r\n\r\n      $inlineToolbar.css(\"top\", \"\");\r\n    }\r\n    /**\r\n     * Get fixed toolbar container element referenced as selector in wysiwyg adapter settings\r\n     *\r\n     * @returns {jQuery}\r\n     */\r\n    ;\r\n\r\n    _proto.getFixedToolbarContainer = function getFixedToolbarContainer() {\r\n      return (0, _jquery)(\"#\" + this.elementId).closest(\"\" + this.config.adapter.settings.fixed_toolbar_container);\r\n    };\r\n\r\n    return Wysiwyg;\r\n  }();\r\n\r\n  return Wysiwyg;\r\n});\r\n//# sourceMappingURL=tinymce.js.map","Magento_PageBuilder/js/wysiwyg/wysiwyg-interface.js":"/*eslint-disable */\r\n/* jscs:disable */\r\ndefine([], function () {\r\n  \"use strict\";\r\n});\r\n//# sourceMappingURL=wysiwyg-interface.js.map","Magento_PageBuilder/ts/babel/plugin-amd-to-magento-amd/ast-utils.js":"/* jscs:disable */\r\n/* eslint-disable */\r\n\r\n/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexports.__esModule = true;\r\nexports.extractDependencyAndFactory = extractDependencyAndFactory;\r\nexports.findAmdModule = findAmdModule;\r\nexports.extractDependencyMap = extractDependencyMap;\r\nexports.removeExportsDependency = removeExportsDependency;\r\nexports.isEsModulePropertyDefinition = isEsModulePropertyDefinition;\r\nexports.isObjectAssignment = isObjectAssignment;\r\nexports.isVoidExpression = isVoidExpression;\r\nexports.isInteropRequireCall = isInteropRequireCall;\r\nexports.isInteropRequireDefinition = isInteropRequireDefinition;\r\n\r\nvar t = _interopRequireWildcard(require(\"@babel/types\"));\r\n\r\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n\r\nvar INTEROP_FUNCTION_NAME = '_interopRequire';\r\n\r\nvar findExpression = function findExpression(path) {\r\n    if (!t.isExpressionStatement(path.node)) {\r\n        return false;\r\n    }\r\n\r\n    return path.get('expression');\r\n};\r\n\r\nvar isObjectProperty = function isObjectProperty(path, objectName, propertyName) {\r\n    return t.isMemberExpression(path) && path.get('object').isIdentifier(t.identifier(objectName)) && path.get('property').isIdentifier(t.identifier(propertyName));\r\n};\r\n\r\nfunction extractDependencyAndFactory(path) {\r\n    var args = path.node.arguments;\r\n    var dependencies = path.get(\"arguments.\" + (args.length - 2));\r\n    var factory = path.get(\"arguments.\" + (args.length - 1));\r\n    return {\r\n        dependencies: dependencies,\r\n        factory: factory\r\n    };\r\n}\r\n\r\nfunction findAmdModule(path) {\r\n    if (!path.parentPath.isProgram()) {\r\n        return false;\r\n    }\r\n\r\n    var expression = findExpression(path);\r\n\r\n    if (!expression || !t.isCallExpression(expression) || !t.isIdentifier(expression.node.callee, {\r\n        name: 'define'\r\n    })) {\r\n        return false;\r\n    }\r\n\r\n    var _extractDependencyAnd = extractDependencyAndFactory(expression),\r\n        dependencies = _extractDependencyAnd.dependencies,\r\n        factory = _extractDependencyAnd.factory;\r\n\r\n    if (dependencies && factory) {\r\n        return expression;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction extractDependencyMap(path) {\r\n    var dependencyMap = {};\r\n\r\n    var _extractDependencyAnd2 = extractDependencyAndFactory(path),\r\n        dependencies = _extractDependencyAnd2.dependencies,\r\n        factory = _extractDependencyAnd2.factory;\r\n\r\n    var dependencyList = dependencies.node.elements;\r\n    var factoryParams = factory.node.params;\r\n    dependencyList.forEach(function (dependency, index) {\r\n        if (factoryParams[index]) {\r\n            dependencyMap[dependency.value] = factoryParams[index];\r\n        }\r\n    });\r\n    return dependencyMap;\r\n}\r\n\r\nfunction removeExportsDependency(path) {\r\n    var _extractDependencyAnd3 = extractDependencyAndFactory(path),\r\n        dependencies = _extractDependencyAnd3.dependencies,\r\n        factory = _extractDependencyAnd3.factory;\r\n\r\n    var dependencyMap = extractDependencyMap(path);\r\n\r\n    if (!dependencyMap.exports) {\r\n        return;\r\n    }\r\n\r\n    dependencies.node.elements = dependencies.node.elements.filter(function (item) {\r\n        return !t.isStringLiteral(item, {\r\n            value: 'exports'\r\n        });\r\n    });\r\n    factory.node.params = factory.node.params.filter(function (item) {\r\n        return !t.isIdentifier(item, dependencyMap.exports);\r\n    });\r\n}\r\n\r\nfunction isEsModulePropertyDefinition(path, scope) {\r\n    var callExpression = findExpression(path);\r\n    var callee = callExpression.get('callee');\r\n    var callArguments = callExpression.node.arguments;\r\n    var isObjectDefinePropertyCall = isObjectProperty(callee, 'Object', 'defineProperty');\r\n\r\n    if (isObjectDefinePropertyCall) {\r\n        var isEsModulePropertyInArguments = t.isStringLiteral(callArguments[1], {\r\n            value: '__esModule'\r\n        });\r\n        var isInScope = t.isIdentifier(callArguments[0], scope);\r\n        return isEsModulePropertyInArguments && isInScope;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isObjectAssignment(path, objectId) {\r\n    var expression = t.isAssignmentExpression(path) ? path : findExpression(path);\r\n    var isMemberAssignment = t.isAssignmentExpression(expression) && t.isMemberExpression(expression.get('left'));\r\n\r\n    if (isMemberAssignment) {\r\n        return t.isNodesEquivalent(expression.get('left.object').node, objectId);\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isVoidExpression(path) {\r\n    return t.isUnaryExpression(path) && path.node.operator === 'void';\r\n}\r\n\r\nfunction isInteropRequireCall(path) {\r\n    var expression = findExpression(path);\r\n    var isAssignmentCall = t.isAssignmentExpression(expression) && t.isCallExpression(expression.get('right'));\r\n\r\n    if (isAssignmentCall) {\r\n        var callee = expression.get('right.callee');\r\n        return callee.isIdentifier() && callee.node.name.indexOf(INTEROP_FUNCTION_NAME) === 0;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isInteropRequireDefinition(path) {\r\n    if (t.isFunction(path) && path.node.id) {\r\n        return path.node.id.name.indexOf(INTEROP_FUNCTION_NAME) === 0;\r\n    }\r\n\r\n    return false;\r\n}","Magento_PageBuilder/ts/babel/plugin-amd-to-magento-amd/index.js":"/* jscs:disable */\r\n/* eslint-disable */\r\n\r\n/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n\"use strict\";\r\n\r\nexports.__esModule = true;\r\nexports.default = _default;\r\n\r\nvar _astUtils = require(\"./ast-utils\");\r\n\r\nvar t = _interopRequireWildcard(require(\"@babel/types\"));\r\n\r\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\r\n\r\nvar replaceExportAssignment = function replaceExportAssignment(path, state) {\r\n    var property = path.get('left.property');\r\n    var expression = path.get('right');\r\n    path.remove();\r\n\r\n    if ((0, _astUtils.isVoidExpression)(expression)) {\r\n        return;\r\n    }\r\n\r\n    if (property.isIdentifier({\r\n        name: 'default'\r\n    })) {\r\n        state.defaultExport = expression.node;\r\n        return;\r\n    }\r\n\r\n    state.exports.push(t.objectProperty(property.node, expression.node));\r\n};\r\n\r\nvar memberExpressionVisitor = {\r\n    MemberExpression: function MemberExpression(path, state) {\r\n        var matchedDependencies = state.dependencies.filter(function (item) {\r\n            return path.get('object').isIdentifier({\r\n                name: item.name\r\n            });\r\n        });\r\n        var isDefaultDependency = matchedDependencies.length === 1 && path.get('property').isIdentifier({\r\n            name: 'default'\r\n        });\r\n\r\n        if (isDefaultDependency) {\r\n            path.replaceWith(matchedDependencies[0]);\r\n        }\r\n    }\r\n};\r\nvar functionBodyVisitor = {\r\n    ExpressionStatement: function ExpressionStatement(path, state) {\r\n        if ((0, _astUtils.isEsModulePropertyDefinition)(path, state.scope)) {\r\n            path.remove();\r\n        }\r\n\r\n        if ((0, _astUtils.isObjectAssignment)(path, state.scope)) {\r\n            replaceExportAssignment(path.get('expression'), state);\r\n        }\r\n\r\n        if ((0, _astUtils.isInteropRequireCall)(path)) {\r\n            path.remove();\r\n        }\r\n    },\r\n    Function: function Function(path, state) {\r\n        if ((0, _astUtils.isInteropRequireDefinition)(path)) {\r\n            path.remove();\r\n        }\r\n\r\n        path.traverse(memberExpressionVisitor, state);\r\n    },\r\n    ClassMethod: function ClassMethod(path, state) {\r\n        path.traverse(memberExpressionVisitor, state);\r\n    },\r\n    DirectiveLiteral: function DirectiveLiteral(path) {\r\n        if (path.node.value === 'use strict') {\r\n            path.parentPath.remove();\r\n        }\r\n    },\r\n    MemberExpression: memberExpressionVisitor.MemberExpression\r\n};\r\n\r\nvar processAmdDefinition = function processAmdDefinition(path) {\r\n    var _extractDependencyAnd = (0, _astUtils.extractDependencyAndFactory)(path),\r\n        factory = _extractDependencyAnd.factory;\r\n\r\n    var dependencyMap = (0, _astUtils.extractDependencyMap)(path);\r\n\r\n    if (dependencyMap.exports) {\r\n        (0, _astUtils.removeExportsDependency)(path);\r\n        var state = {\r\n            scope: dependencyMap.exports,\r\n            dependencies: Object.values(dependencyMap),\r\n            exports: []\r\n        };\r\n        factory.traverse(functionBodyVisitor, state);\r\n        var returnStatement = t.objectExpression(state.exports);\r\n\r\n        if (state.defaultExport) {\r\n            returnStatement = state.defaultExport;\r\n\r\n            if (state.exports.length > 0) {\r\n                returnStatement = t.callExpression(t.memberExpression(t.identifier('Object'), t.identifier('assign')), [state.defaultExport, t.objectExpression(state.exports)]);\r\n            }\r\n        }\r\n\r\n        factory.get('body').pushContainer('body', t.returnStatement(returnStatement));\r\n    }\r\n};\r\n\r\nvar programVisitor = {\r\n    ExpressionStatement: function ExpressionStatement(path) {\r\n        var amdModule = (0, _astUtils.findAmdModule)(path);\r\n\r\n        if (amdModule) {\r\n            processAmdDefinition(amdModule);\r\n        }\r\n    }\r\n};\r\n\r\nfunction _default() {\r\n    return {\r\n        visitor: {\r\n            Program: {\r\n                exit: function exit(path) {\r\n                    path.traverse(programVisitor);\r\n                }\r\n            }\r\n        }\r\n    };\r\n}","Magento_PageBuilder/ts/babel/plugin-resolve-magento-imports/index.js":"/* jscs:disable */\r\n/* eslint-disable */\r\n\r\n/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nvar path = require('path');\r\n\r\n/**\r\n * Convert the relative path imports within TypeScript into absolute paths with pre-fixed module name\r\n *\r\n * @returns {{visitor: {ImportDeclaration: visitor.ImportDeclaration}}}\r\n */\r\nmodule.exports = function () {\r\n    'use strict';\r\n\r\n    return {\r\n        visitor: {\r\n            /**\r\n             * Convert ../../utils/util import into Magento_Module/js/utils/util\r\n             *\r\n             * @param {Object} importPath\r\n             * @param {Object} state\r\n             * @constructor\r\n             */\r\n            ImportDeclaration: function (importPath, state) {\r\n                var importExpression = importPath.node.source.value;\r\n\r\n                if (!state.opts.prefix) {\r\n                    throw Error('Prefix must be defined');\r\n                }\r\n\r\n                // Is the file being imported from another directory?\r\n                if (!path.isAbsolute(importExpression) && importExpression.includes('./')) {\r\n                    importPath.node.source.value = path.resolve(\r\n                        path.dirname(state.file.opts.filename.replace(\r\n                            state.opts.path,\r\n                            \"\"\r\n                        )),\r\n                        importExpression\r\n                    ).replace(\r\n                        process.cwd(),\r\n                        state.opts.prefix.replace(/\\/+$/, '')\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n","Magento_PageBuilderAdminAnalytics/js/page-builder/event-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Sets up event attributes and action depending on name and args\r\n         *\r\n         * @param {String} name\r\n         * @param {Array} args\r\n         */\r\n\r\n        build: function (name, args) {\r\n            var action = '',\r\n                eventAttributes = {},\r\n                event;\r\n\r\n            if (_.isUndefined(args)) {\r\n                return;\r\n            }\r\n\r\n            switch (name) {\r\n                case 'contentType:duplicateAfter':\r\n                    action = 'duplicate';\r\n                    break;\r\n\r\n                case 'contentType:removeAfter':\r\n                    action = 'remove';\r\n                    break;\r\n\r\n                case 'contentType:createAfter':\r\n                    action = 'create';\r\n                    break;\r\n\r\n                case 'contentType:editBefore':\r\n                    action = 'edit';\r\n                    break;\r\n\r\n                case 'contentType:visibilityAfter':\r\n                    action = args.visibility ? 'show' : 'hide';\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (!_.isUndefined(args.contentType)) {\r\n                eventAttributes = args.contentType.config;\r\n            } else if (!_.isUndefined(args.originalContentType)) {\r\n                eventAttributes = args.originalContentType.config;\r\n            }\r\n\r\n            if (action !== '' && !_.isEmpty(eventAttributes)) {\r\n                event = {\r\n                    element: eventAttributes.label,\r\n                    type: eventAttributes.name,\r\n                    action: action,\r\n                    widget: {\r\n                        name: eventAttributes.form,\r\n                        type: eventAttributes['menu_section']\r\n                    },\r\n                    feature: 'page-builder-tracker'\r\n                };\r\n            }\r\n\r\n            return event;\r\n        }\r\n    };\r\n});\r\n","Magento_PageBuilderAdminAnalytics/js/page-builder/events-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore', 'Magento_PageBuilderAdminAnalytics/js/page-builder/event-builder'],\r\n    function (_, EventBuilder) {\r\n        'use strict';\r\n\r\n        return function (target) {\r\n            var originalTarget = target.trigger,\r\n                isAdminAnalyticsEnabled,\r\n                event,\r\n                hasPageBuilderBeenUsed = false,\r\n                delayedPush;\r\n\r\n            /**\r\n             * Invokes custom code to track information regarding Page Builder usage\r\n             *\r\n             * @param {String} name\r\n             * @param {Array} args\r\n             */\r\n\r\n            target.trigger = function (name, args) {\r\n                originalTarget.apply(originalTarget, [name, args]);\r\n                isAdminAnalyticsEnabled =\r\n                    !_.isUndefined(window.digitalData) &&\r\n                    !_.isUndefined(window._satellite);\r\n\r\n                if (!hasPageBuilderBeenUsed && name.indexOf('stage:fullScreenModeChangeAfter') !== -1 &&\r\n                    args.fullScreen && isAdminAnalyticsEnabled\r\n                ) {\r\n                    hasPageBuilderBeenUsed = true;\r\n                    window.digitalData.page.url = window.location.href;\r\n                    window.digitalData.page.attributes = {\r\n                        editedWithPageBuilder: 'true'\r\n                    };\r\n                    window._satellite.track('page');\r\n                }\r\n\r\n                event = EventBuilder.build(name, args);\r\n\r\n                if (isAdminAnalyticsEnabled && !_.isUndefined(window.digitalData.event) && !_.isUndefined(event)) {\r\n                    delayedPush = setInterval(function (object) {\r\n                        if (_.isArray(window.digitalData.event)) {\r\n                            window.digitalData.event.push(object);\r\n                            window._satellite.track('event');\r\n                            clearInterval(delayedPush);\r\n                        }\r\n                    }, 500, event);\r\n                }\r\n            };\r\n\r\n            return target;\r\n        };\r\n    });\r\n","Magento_Payment/js/transparent.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global FORM_KEY */\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Payment/js/model/credit-card-validation/validator'\r\n], function ($, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.transparent', {\r\n        options: {\r\n            editFormSelector: '#edit_form',\r\n            hiddenFormTmpl:\r\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\"' +\r\n                'method=\"POST\" hidden' +\r\n                'enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\r\n                    '<% _.each(data.inputs, function(val, key){ %>' +\r\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\r\n                    '<% }); %>' +\r\n                '</form>',\r\n            cgiUrl: null,\r\n            orderSaveUrl: null,\r\n            controller: null,\r\n            gateway: null,\r\n            dateDelim: null,\r\n            cardFieldsMap: null,\r\n            expireYearLength: 2\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\r\n\r\n            $(this.options.editFormSelector).on('changePaymentMethod', this._setPlaceOrderHandler.bind(this));\r\n            $(this.options.editFormSelector).trigger('changePaymentMethod', [\r\n                $(this.options.editFormSelector).find(':radio[name=\"payment[method]\"]:checked').val()\r\n            ]);\r\n        },\r\n\r\n        /**\r\n         * Handler for form submit.\r\n         *\r\n         * @param {Object} event\r\n         * @param {String} method\r\n         */\r\n        _setPlaceOrderHandler: function (event, method) {\r\n            var $editForm = $(this.options.editFormSelector);\r\n\r\n            $editForm.off('beforeSubmitOrder.' + this.options.gateway);\r\n\r\n            if (method === this.options.gateway) {\r\n                $editForm.on('beforeSubmitOrder.' +  this.options.gateway, this._placeOrderHandler.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler for form submit to call gateway for credit card validation.\r\n         *\r\n         * @param {Event} event\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _placeOrderHandler: function (event) {\r\n            if ($(this.options.editFormSelector).valid()) {\r\n                this._orderSave();\r\n            } else {\r\n                $('body').trigger('processStop');\r\n            }\r\n            event.stopImmediatePropagation();\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Handler for Place Order button to call gateway for credit card validation.\r\n         * Save order and generate post data for gateway call.\r\n         *\r\n         * @private\r\n         */\r\n        _orderSave: function () {\r\n            var postData = {\r\n                'form_key': FORM_KEY,\r\n                'cc_type': this.ccType()\r\n            };\r\n\r\n            $.ajax({\r\n                url: this.options.orderSaveUrl,\r\n                type: 'post',\r\n                context: this,\r\n                data: postData,\r\n                dataType: 'json',\r\n\r\n                /**\r\n                 * Success callback\r\n                 * @param {Object} response\r\n                 */\r\n                success: function (response) {\r\n                    if (response.success && response[this.options.gateway]) {\r\n                        this._postPaymentToGateway(response);\r\n                    } else {\r\n                        this._processErrors(response);\r\n                    }\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                complete: function () {\r\n                    $('body').trigger('processStop');\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Post data to gateway for credit card validation.\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _postPaymentToGateway: function (response) {\r\n            var $iframeSelector = $('[data-container=\"' + this.options.gateway + '-transparent-iframe\"]'),\r\n                data,\r\n                tmpl,\r\n                iframe;\r\n\r\n            data = this._preparePaymentData(response);\r\n            tmpl = this.hiddenFormTmpl({\r\n                data: {\r\n                    target: $iframeSelector.attr('name'),\r\n                    action: this.options.cgiUrl,\r\n                    inputs: data\r\n                }\r\n            });\r\n\r\n            iframe = $iframeSelector\r\n                .on('submit', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            $(tmpl).appendTo(iframe).trigger('submit');\r\n            iframe.html('');\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        ccType: function () {\r\n            return this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\r\n            ).val();\r\n        },\r\n\r\n        /**\r\n         * Add credit card fields to post data for gateway.\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _preparePaymentData: function (response) {\r\n            var ccfields,\r\n                data,\r\n                preparedata;\r\n\r\n            data = response[this.options.gateway].fields;\r\n            ccfields = this.options.cardFieldsMap;\r\n\r\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\r\n                data[ccfields.cccvv] = this.element.find(\r\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\r\n                ).val();\r\n            }\r\n            preparedata = this._prepareExpDate();\r\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\r\n            data[ccfields.ccnum] = this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\r\n            ).val();\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Grab Month and Year into one\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _prepareExpDate: function () {\r\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\r\n                month = parseInt(\r\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(), 10\r\n                );\r\n\r\n            if (year.length > this.options.expireYearLength) {\r\n                year = year.substring(year.length - this.options.expireYearLength);\r\n            }\r\n\r\n            if (month < 10) {\r\n                month = '0' + month;\r\n            }\r\n\r\n            return {\r\n                month: month, year: year\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Processing errors\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _processErrors: function (response) {\r\n            var msg = response['error_messages'];\r\n\r\n            if (typeof msg === 'object') {\r\n                alert({\r\n                    content: msg.join('\\n')\r\n                });\r\n            }\r\n\r\n            if (msg) {\r\n                alert({\r\n                    content: msg\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.transparent;\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        creditCard: null,\r\n        creditCardNumber: null,\r\n        expirationMonth: null,\r\n        expirationYear: null,\r\n        cvvCode: null\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\r\n], function (utils, luhn10, creditCardTypes) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} card\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} isValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(card, isPotentiallyValid, isValid) {\r\n        return {\r\n            card: card,\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var potentialTypes,\r\n            cardType,\r\n            valid,\r\n            i,\r\n            maxLength;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        value = value.replace(/\\s+/g, '');\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        potentialTypes = creditCardTypes.getCardTypes(value);\r\n\r\n        if (potentialTypes.length === 0) {\r\n            return resultWrapper(null, false, false);\r\n        } else if (potentialTypes.length !== 1) {\r\n            return resultWrapper(null, true, false);\r\n        }\r\n\r\n        cardType = potentialTypes[0];\r\n\r\n        if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\r\n            valid = true;\r\n        } else {\r\n            valid = luhn10(value);\r\n        }\r\n\r\n        for (i = 0; i < cardType.lengths.length; i++) {\r\n            if (cardType.lengths[i] === value.length) {\r\n                return resultWrapper(cardType, valid, valid);\r\n            }\r\n        }\r\n\r\n        maxLength = Math.max.apply(null, cardType.lengths);\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(cardType, true, false);\r\n        }\r\n\r\n        return resultWrapper(cardType, false, false);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    /**\r\n     * CVV number validation.\r\n     * Validate digit count for CVV code.\r\n     *\r\n     * @param {*} value\r\n     * @param {Number} maxLength\r\n     * @return {Object}\r\n     */\r\n    return function (value, maxLength) {\r\n        var DEFAULT_LENGTH = 3;\r\n\r\n        maxLength = maxLength || DEFAULT_LENGTH;\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (value.length === maxLength) {\r\n            return resultWrapper(true, true);\r\n        }\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (value.length > maxLength) {\r\n            return resultWrapper(false, false);\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\r\n], function (utils, parseDate, expirationMonth, expirationYear) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} month\r\n     * @param {*} year\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid, month, year) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid,\r\n            month: month,\r\n            year: year\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var date,\r\n            monthValid,\r\n            yearValid;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(false, false, null, null);\r\n        }\r\n\r\n        value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\r\n        date = parseDate(value);\r\n        monthValid = expirationMonth(date.month);\r\n        yearValid = expirationYear(date.year);\r\n\r\n        if (monthValid.isValid && yearValid.isValid) {\r\n            return resultWrapper(true, true, date.month, date.year);\r\n        }\r\n\r\n        if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\r\n            return resultWrapper(false, true, null, null);\r\n        }\r\n\r\n        return resultWrapper(false, false, null, null);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/model/credit-card-validation/cvv-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'mage/translate'\r\n], function ($, cvvValidator, creditCardNumberValidator, yearValidator, monthValidator, creditCardData) {\r\n    'use strict';\r\n\r\n    $('.payment-method-content input[type=\"number\"]').on('keyup', function () {\r\n        if ($(this).val() < 0) {\r\n            $(this).val($(this).val().replace(/^-/, ''));\r\n        }\r\n    });\r\n\r\n    $.each({\r\n        'validate-card-type': [\r\n            function (number, item, allowedTypes) {\r\n                var cardInfo,\r\n                    i,\r\n                    l;\r\n\r\n                if (!creditCardNumberValidator(number).isValid) {\r\n                    return false;\r\n                }\r\n\r\n                cardInfo = creditCardNumberValidator(number).card;\r\n\r\n                for (i = 0, l = allowedTypes.length; i < l; i++) {\r\n                    if (cardInfo.title == allowedTypes[i].type) { //eslint-disable-line eqeqeq\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            },\r\n            $.mage.__('Please enter a valid credit card type number.')\r\n        ],\r\n        'validate-card-number': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             *\r\n             * @param {*} number - credit card number\r\n             * @return {Boolean}\r\n             */\r\n            function (number) {\r\n                return creditCardNumberValidator(number).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card number.')\r\n        ],\r\n        'validate-card-date': [\r\n\r\n            /**\r\n             * Validate credit card expiration month\r\n             *\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration month.')\r\n        ],\r\n        'validate-card-cvv': [\r\n\r\n            /**\r\n             * Validate cvv\r\n             *\r\n             * @param {String} cvv - card verification value\r\n             * @return {Boolean}\r\n             */\r\n            function (cvv) {\r\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\r\n\r\n                return cvvValidator(cvv, maxLength).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card verification number.')\r\n        ],\r\n        'validate-card-year': [\r\n\r\n            /**\r\n             * Validate credit card expiration year\r\n             *\r\n             * @param {String} date - year\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return yearValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration year.')\r\n        ]\r\n\r\n    }, function (i, rule) {\r\n        rule.unshift(i);\r\n        $.validator.addMethod.apply($.validator, rule);\r\n    });\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var types = [\r\n        {\r\n            title: 'Visa',\r\n            type: 'VI',\r\n            pattern: '^4\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'MasterCard',\r\n            type: 'MC',\r\n            pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'American Express',\r\n            type: 'AE',\r\n            pattern: '^3([47]\\\\d*)?$',\r\n            isAmex: true,\r\n            gaps: [4, 10],\r\n            lengths: [15],\r\n            code: {\r\n                name: 'CID',\r\n                size: 4\r\n            }\r\n        },\r\n        {\r\n            title: 'Diners',\r\n            type: 'DN',\r\n            pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\r\n            gaps: [4, 10],\r\n            lengths: [14, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Discover',\r\n            type: 'DI',\r\n            pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CID',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'JCB',\r\n            type: 'JCB',\r\n            pattern: '^35(2[8-9]|[3-8])\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'UnionPay',\r\n            type: 'UN',\r\n            pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVN',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro International',\r\n            type: 'MI',\r\n            pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro Domestic',\r\n            type: 'MD',\r\n            pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Hipercard',\r\n            type: 'HC',\r\n            pattern: '^((606282)|(637095)|(637568)|(637599)|(637609)|(637612))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [13, 16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Elo',\r\n            type: 'ELO',\r\n            pattern: '^((509091)|(636368)|(636297)|(504175)|(438935)|(40117[8-9])|(45763[1-2])|' +\r\n                '(457393)|(431274)|(50990[0-2])|(5099[7-9][0-9])|(50996[4-9])|(509[1-8][0-9][0-9])|' +\r\n                '(5090(0[0-2]|0[4-9]|1[2-9]|[24589][0-9]|3[1-9]|6[0-46-9]|7[0-24-9]))|' +\r\n                '(5067(0[0-24-8]|1[0-24-9]|2[014-9]|3[0-379]|4[0-9]|5[0-3]|6[0-5]|7[0-8]))|' +\r\n                '(6504(0[5-9]|1[0-9]|2[0-9]|3[0-9]))|' +\r\n                '(6504(8[5-9]|9[0-9])|6505(0[0-9]|1[0-9]|2[0-9]|3[0-8]))|' +\r\n                '(6505(4[1-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-8]))|' +\r\n                '(6507(0[0-9]|1[0-8]))|(65072[0-7])|(6509(0[1-9]|1[0-9]|20))|' +\r\n                '(6516(5[2-9]|6[0-9]|7[0-9]))|(6550(0[0-9]|1[0-9]))|' +\r\n                '(6550(2[1-9]|3[0-9]|4[0-9]|5[0-8])))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Aura',\r\n            type: 'AU',\r\n            pattern: '^5078\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        }\r\n    ];\r\n\r\n    return {\r\n        /**\r\n         * @param {*} cardNumber\r\n         * @return {Array}\r\n         */\r\n        getCardTypes: function (cardNumber) {\r\n            var i, value,\r\n                result = [];\r\n\r\n            if (utils.isEmpty(cardNumber)) {\r\n                return result;\r\n            }\r\n\r\n            if (cardNumber === '') {\r\n                return $.extend(true, {}, types);\r\n            }\r\n\r\n            for (i = 0; i < types.length; i++) {\r\n                value = types[i];\r\n\r\n                if (new RegExp(value.pattern).test(cardNumber)) {\r\n                    result.push($.extend(true, {}, value));\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Luhn algorithm verification\r\n     */\r\n    return function (a, b, c, d, e) {\r\n        for (d = +a[b = a.length - 1], e = 0; b--;) {\r\n            c = +a[b];\r\n            d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\r\n        }\r\n\r\n        return !(d % 10);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var month,\r\n            monthValid;\r\n\r\n        if (value.replace(/\\s/g, '') === '' || value === '0') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (isNaN(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        month = parseInt(value, 10);\r\n        monthValid = month > 0 && month < 13;\r\n\r\n        return resultWrapper(monthValid, monthValid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var currentYear = new Date().getFullYear(),\r\n            len = value.length,\r\n            valid,\r\n            expMaxLifetime = 19;\r\n\r\n        if (value.replace(/\\s/g, '') === '') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (len !== 4) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        value = parseInt(value, 10);\r\n        valid = value >= currentYear && value <= currentYear + expMaxLifetime;\r\n\r\n        return resultWrapper(valid, valid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (value) {\r\n        var month, len;\r\n\r\n        if (value.match('/')) {\r\n            value = value.split(/\\s*\\/\\s*/g);\r\n\r\n            return {\r\n                month: value[0],\r\n                year: value.slice(1).join()\r\n            };\r\n        }\r\n\r\n        len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\r\n        month = value.substr(0, len);\r\n\r\n        return {\r\n            month: month,\r\n            year: value.substr(month.length, 4)\r\n        };\r\n    };\r\n});\r\n","Magento_PaymentServicesPaypal/js/hosted-fields.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/translate',\r\n    'uiComponent',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer',\r\n    'Magento_PaymentServicesPaypal/js/view/payment/methods/hosted-fields',\r\n    'Magento_PaymentServicesPaypal/js/view/errors/response-error',\r\n    'Magento_Ui/js/modal/alert',\r\n    'domReady!'\r\n], function ($, _, $t, Component, domObserver, HostedFields, ResponseError, alert) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            orderFormSelector: '#edit_form',\r\n            messageSelector: '.message',\r\n            cardContainerSelector: '.card-container',\r\n            billingAddressSelectorPrefix: '#order-billing_address_',\r\n            mpOrderIdFieldSelector: '.payment-services-hosted-fields-form #mp-order-id',\r\n            paypalOrderIdSelector: '.payment-services-hosted-fields-form #paypal-order-id',\r\n            styles: {\r\n                '.valid': {\r\n                    'color': 'green'\r\n                },\r\n                '.invalid': {\r\n                    'color': 'red'\r\n                }\r\n            },\r\n            fields: {\r\n                number: {\r\n                    selector: '#card-number',\r\n                    placeholder: '4111 1111 1111 1111'\r\n                },\r\n                cvv: {\r\n                    selector: '#cvv',\r\n                    placeholder: '123'\r\n                },\r\n                expirationDate: {\r\n                    selector: '#expiration-date',\r\n                    label: $t('Expiration Date'),\r\n                    placeholder: 'MM/YY'\r\n                }\r\n\r\n            },\r\n            hostedFields: null,\r\n            generalErrorMessage: $t('An error occurred. Refresh the page and try again.'),\r\n            paymentMethodValidationError: $t('Your payment was not successful. Try again.'),\r\n            notEligibleErrorMessage: $t('This payment option is currently unavailable.'),\r\n            shouldCardBeVaulted: false,\r\n            paymentSource: '',\r\n            areHostedFieldsInitialized: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            this.element = element;\r\n            _.bindAll(this, 'getPaymentData', 'onOrderSuccess', 'onSuccess', 'onError', 'submitForm',\r\n                'onChangePaymentMethod');\r\n            this._super();\r\n            this.initFormListeners();\r\n            // eslint-disable-next-line no-undef\r\n            if (this.code === order.paymentMethod) {\r\n                this.orderForm.trigger('changePaymentMethod.' + this.code, this.code);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize form submit listeners.\r\n         */\r\n        initFormListeners: function () {\r\n            this.orderForm = $(this.orderFormSelector);\r\n            this.orderForm.off('changePaymentMethod.' + this.code)\r\n                .on('changePaymentMethod.' + this.code, this.onChangePaymentMethod);\r\n        },\r\n\r\n        /**\r\n         * Reinitialize submitOrder event.\r\n         *\r\n         * @param {Object} event\r\n         * @param {String} method\r\n         */\r\n        onChangePaymentMethod: function (event, method) {\r\n            this.orderForm.off('beforeSubmitOrder.' + this.code);\r\n            if (method === this.code) {\r\n                !this.areHostedFieldsInitialized && this.initHostedFields();\r\n                this.orderForm.on('beforeSubmitOrder.' + this.code, this.submitForm);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize Hosted Fields.\r\n         */\r\n        initHostedFields: function () {\r\n            $('body').trigger('processStart');\r\n            this.hostedFields = new HostedFields({\r\n                fields: this.fields,\r\n                scriptParams: this.scriptParams,\r\n                onOrderSuccess: this.onOrderSuccess,\r\n                createOrderUrl: this.createOrderUrl,\r\n                shouldCardBeVaulted: this.shouldCardBeVaulted,\r\n                paymentSource: this.paymentSource\r\n            });\r\n            this.render();\r\n        },\r\n\r\n        /**\r\n         * Render the Hosted Fields and set event listeners\r\n         */\r\n        render: function () {\r\n            this.hostedFields.sdkLoaded.then(function () {\r\n                if (this.hostedFields.isEligible()) {\r\n                    this.hostedFields.render()\r\n                        .then(function (hostedFields) {\r\n                            this.showFields(true);\r\n                            this.afterHostedFieldsRender(hostedFields);\r\n                            this.areHostedFieldsInitialized = true;\r\n                            $('body').trigger('processStop');\r\n                        }.bind(this));\r\n                } else {\r\n                    throw new Error('Hosted fields is not available');\r\n                }\r\n            }.bind(this)).catch(function () {\r\n                this.showFields(false);\r\n                this.displayEligibilityMessage(true);\r\n                $('body').trigger('processStop');\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Display eligibility message.\r\n         *\r\n         * @param {Boolean} show\r\n         */\r\n        displayEligibilityMessage: function (show) {\r\n            var element = $(this.element).find(this.messageSelector);\r\n\r\n            element.html(this.notEligibleErrorMessage);\r\n            show ? element.show() : element.hide();\r\n        },\r\n\r\n        /**\r\n         * Show/hide fields.\r\n         *\r\n         * @param {Boolean} show\r\n         */\r\n        showFields: function (show) {\r\n            var element = $(this.element).find(this.cardContainerSelector);\r\n\r\n            show ? element.show() : element.hide();\r\n        },\r\n\r\n        /**\r\n         * Bind events after hostedFields rendered.\r\n         *\r\n         * @param {Object} hostedFields\r\n         */\r\n        afterHostedFieldsRender: function (hostedFields) {\r\n            hostedFields.on('inputSubmitRequest', function () {\r\n                this.orderForm.trigger('submitOrder');\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Form submit handler\r\n         *\r\n         * @param {Object} e\r\n         */\r\n        submitForm: function (e) {\r\n            if (this.orderForm.valid()) {\r\n                this.hostedFields.instance.submit(this.getPaymentData())\r\n                    .then(this.onSuccess)\r\n                    .catch(this.onError);\r\n            } else {\r\n                $('body').trigger('processStop');\r\n            }\r\n            e.stopImmediatePropagation();\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get address field value.\r\n         *\r\n         * @param {String} selector\r\n         * @return {*|String|jQuery}\r\n         */\r\n        getAddressValue: function (selector) {\r\n            return $(this.billingAddressSelectorPrefix + selector).val();\r\n        },\r\n\r\n        /**\r\n         * Get payment related data.\r\n         *\r\n         * @return {Object}\r\n         */\r\n        getPaymentData: function () {\r\n            return {\r\n                cardholderName: this.getAddressValue('firstname') + ' ' +\r\n                    this.getAddressValue('lastname'),\r\n                billingAddress: {\r\n                    streetAddress: this.getAddressValue('street0'),\r\n                    extendedAddress: this.getAddressValue('street1'),\r\n                    region: $(this.billingAddressSelectorPrefix + 'region_id option:selected').text(),\r\n                    locality: this.getAddressValue('city'),\r\n                    postalCode: this.getAddressValue('postcode'),\r\n                    countryCodeAlpha2: this.getAddressValue('country_id')\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Success callback for transaction.\r\n         */\r\n        onSuccess: function () {\r\n            this.orderForm.trigger('realOrder');\r\n        },\r\n\r\n        /**\r\n         * Log error message.\r\n         *\r\n         * @param {Object} error\r\n         */\r\n        onError: function (error) {\r\n            var message = this.generalErrorMessage;\r\n\r\n            if (error instanceof ResponseError) {\r\n                message = error.message;\r\n                this.reRender();\r\n            } else if (error['debug_id']) {\r\n                message = this.paymentMethodValidationError;\r\n            }\r\n            $('body').trigger('processStop');\r\n            alert({\r\n                content: message\r\n            });\r\n            console.log(error['debug_id'] ? 'Error' + JSON.stringify(error) : error.toString());\r\n        },\r\n\r\n        /**\r\n         * Re-render hosted fields in case of order creation error.\r\n         */\r\n        reRender: function () {\r\n            this.hostedFields.instance.teardown().then(function () {\r\n                this.hostedFields.destroy();\r\n                this.initHostedFields();\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set the payment services order ID and PayPal order ID.\r\n         *\r\n         * @param {Object} order\r\n         */\r\n        onOrderSuccess: function (order) {\r\n            $(this.mpOrderIdFieldSelector).val(order['mp_order_id']);\r\n            $(this.paypalOrderIdSelector).val(order.id);\r\n        }\r\n    });\r\n});\r\n","Magento_PaymentServicesPaypal/js/vault.js":"/**\r\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'uiComponent',\r\n    'Magento_PaymentServicesPaypal/js/view/errors/response-error',\r\n    'Magento_Ui/js/modal/alert'\r\n], function ($, $t, Class, ResponseError, alert) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            $orderForm: null,\r\n            orderForm: 'edit_form',\r\n            $container: null,\r\n            paypalOrderIdSelector: '[name=\"payment[paypal_order_id]\"]',\r\n            mpOrderIdFieldSelector: '[name=\"payment[payments_order_id]\"]',\r\n            generalErrorMessage: $t('An error occurred. Refresh the page and try again.'),\r\n            paymentMethodValidationError: $t('Your payment was not successful. Try again.')\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this.$orderForm = $('#' + this.orderForm);\r\n            this._super();\r\n            this.initEventHandlers();\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get vault payment method code\r\n         *\r\n         * @returns {*}\r\n         */\r\n        getCode: function () {\r\n            return this.code;\r\n        },\r\n\r\n        /**\r\n         * Listen to vault token changes\r\n         */\r\n        initEventHandlers: function () {\r\n            // eslint-disable-next-line no-undef\r\n            if (this.code === order.paymentMethod) {\r\n                this.selectPaymentMethod();\r\n            }\r\n            $('#' + this.container).find('[name=\"payment[token_switcher]\"]')\r\n                .on('click', this.selectPaymentMethod.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Select current payment token\r\n         */\r\n        selectPaymentMethod: function () {\r\n            this.disableEventListeners();\r\n            this.enableEventListeners();\r\n        },\r\n\r\n        /**\r\n         * Enable form event listeners\r\n         */\r\n        enableEventListeners: function () {\r\n            this.$orderForm.on('beforeSubmitOrder.' + this.getCode(), this.submitOrder.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Disable form event listeners\r\n         */\r\n        disableEventListeners: function () {\r\n            this.$orderForm.off('beforeSubmitOrder');\r\n        },\r\n\r\n        /**\r\n         * Trigger the order placement process\r\n         *\r\n         * @param e\r\n         * @returns {boolean}\r\n         */\r\n        submitOrder: function (e) {\r\n          this.createOrder()\r\n              .then(function (order) {\r\n                  this.onOrderSuccess(order);\r\n              }.bind(this))\r\n              .then(this.setPaymentDetails.bind(this))\r\n              .then(this.placeOrder.bind(this))\r\n              .catch(this.onError.bind(this));\r\n          e.stopImmediatePropagation();\r\n          return false;\r\n        },\r\n\r\n        /**\r\n         * Create PayPal order\r\n         *\r\n         * @returns {Promise<any>}\r\n         */\r\n        createOrder: function () {\r\n            $('body').trigger('processStart');\r\n\r\n            var orderData = new FormData();\r\n            orderData.append('payment_source', 'vault');\r\n\r\n            return fetch(this.createOrderUrl, {\r\n                method: 'POST',\r\n                headers: {},\r\n                credentials: 'same-origin',\r\n                body: orderData\r\n            }).then(function (res) {\r\n                return res.json();\r\n            }).then(function (data) {\r\n                if (data.response['is_successful']) {\r\n                    return data.response['paypal-order'];\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set public hash on payment data\r\n         */\r\n        setPaymentDetails: function () {\r\n            this.$orderForm.find('[name=\"payment[public_hash]\"]').val(this.publicHash);\r\n        },\r\n\r\n        /**\r\n         * Kick off Commerce order flow\r\n         */\r\n        placeOrder: function () {\r\n          this.$orderForm.trigger('realOrder');\r\n        },\r\n\r\n        /**\r\n         * Populate order info on template upon order creation success\r\n         *\r\n         * @param order\r\n         */\r\n        onOrderSuccess: function (order) {\r\n            this.containerEl = $('#' + this.container);\r\n            $(this.paypalOrderIdSelector).prop('disabled', true);\r\n            $(this.mpOrderIdFieldSelector).prop('disabled', true);\r\n            this.containerEl.find(this.paypalOrderIdSelector).val(order.id);\r\n            this.containerEl.find(this.paypalOrderIdSelector).prop('disabled', false);\r\n            this.containerEl.find(this.mpOrderIdFieldSelector).val(order['mp_order_id']);\r\n            this.containerEl.find(this.mpOrderIdFieldSelector).prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Log error message\r\n         * @param error\r\n         */\r\n        onError: function (error) {\r\n            let message = this.generalErrorMessage;\r\n\r\n            if (error instanceof ResponseError) {\r\n                message = error.message;\r\n            } else if (error['debug_id']) {\r\n                message = this.paymentMethodValidationError;\r\n            }\r\n            $('body').trigger('processStop');\r\n            alert({\r\n                content: message\r\n            });\r\n            console.log(error['debug_id'] ? 'Error' + JSON.stringify(error) : error.toString());\r\n        }\r\n    });\r\n});\r\n","Magento_PaymentServicesPaypal/js/lib/script-loader-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* eslint-disable no-undef */\r\ndefine(['underscore', 'Magento_PaymentServicesPaypal/js/lib/script-loader'], function (_, scriptLoader) {\r\n    'use strict';\r\n\r\n    var promises = {},\r\n        defaultNamespace = 'paypal';\r\n\r\n    /**\r\n     * Parse src query string and move all params to object\r\n     *\r\n     * @param {Object} params\r\n     * @return {Object}\r\n     */\r\n    function processParamsSrc(params) {\r\n        var processedParams = _.clone(params),\r\n            url = new URL(params.src),\r\n            queryString = url.search.substring(1),\r\n            urlParams = JSON.parse('{\"' +\r\n                decodeURI(queryString).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') +\r\n                '\"}');\r\n\r\n        _.extend(processedParams, urlParams);\r\n        delete processedParams.src;\r\n\r\n        return processedParams;\r\n    }\r\n\r\n    /**\r\n     * Convert params to object key => value format\r\n     *\r\n     * @param {Object} params\r\n     * @return {Object}\r\n     */\r\n    function convertToParamsObject(params) {\r\n        var processedParams = {};\r\n\r\n        _.each(params, function (param) {\r\n            processedParams[param.name] = param.value;\r\n        });\r\n\r\n        return processedParams;\r\n    }\r\n\r\n    /**\r\n     * Load PayPal sdk with params.\r\n     *\r\n     * @param {Array} params\r\n     * @param {String} sdkNamespace\r\n     * @return {Promise}\r\n     */\r\n    return function (params, sdkNamespace) {\r\n        var src;\r\n\r\n        if (!params || !params.length) {\r\n            return Promise.reject();\r\n        }\r\n\r\n        params = convertToParamsObject(params);\r\n        params['data-namespace'] = sdkNamespace || defaultNamespace;\r\n\r\n        if (!params || !params.src) {\r\n            return Promise.reject();\r\n        }\r\n\r\n        src = params.src;\r\n\r\n        if (!promises[src]) {\r\n            params = processParamsSrc(params);\r\n\r\n            promises[src] = scriptLoader.load(params);\r\n        }\r\n\r\n        return promises[src];\r\n    };\r\n});\r\n","Magento_PaymentServicesPaypal/js/lib/script-loader.min.js":"/*!\r\n * paypal-js v3.1.1 (2021-03-14T21:08:07.006Z)\r\n * Copyright 2020-present, PayPal, Inc. All rights reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar paypalLoadScript=function(t){\"use strict\";function e(t,e){var r=document.querySelector('script[src=\"'.concat(t,'\"]'));if(null===r)return null;var n=a(t,e);if(Object.keys(r.dataset).length!==Object.keys(n.dataset).length)return null;var o=!0;return Object.keys(r.dataset).forEach((function(t){r.dataset[t]!==n.dataset[t]&&(o=!1)})),o?r:null}function r(t){var e=t.url,r=t.attributes,n=t.onSuccess,o=t.onError,i=a(e,r);i.onerror=o,i.onload=n,document.head.insertBefore(i,document.head.firstElementChild)}function n(t){var e=\"https://www.paypal.com/sdk/js\";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL);var r=function(t,e){var r=\"\",n=\"\";Array.isArray(t)?t.length>1?(r=\"*\",n=t.toString()):r=t.toString():\"string\"==typeof t&&t.length>0?r=t:\"string\"==typeof e&&e.length>0&&(r=\"*\",n=e);return{\"merchant-id\":r,\"data-merchant-id\":n}}(t[\"merchant-id\"],t[\"data-merchant-id\"]),n=Object.assign(t,r),a=Object.keys(n).filter((function(t){return void 0!==n[t]&&null!==n[t]&&\"\"!==n[t]})).reduce((function(t,e){var r=n[e].toString();return\"data-\"===e.substring(0,5)?t.dataAttributes[e]=r:t.queryParams[e]=r,t}),{queryParams:{},dataAttributes:{}}),i=a.queryParams,u=a.dataAttributes;return{url:\"\".concat(e,\"?\").concat(o(i)),dataAttributes:u}}function o(t){var e=\"\";return Object.keys(t).forEach((function(r){0!==e.length&&(e+=\"&\"),e+=r+\"=\"+t[r]})),e}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(\"script\");return r.src=t,Object.keys(e).forEach((function(t){r.setAttribute(t,e[t]),\"data-csp-nonce\"===t&&r.setAttribute(\"nonce\",e[\"data-csp-nonce\"])})),r}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();s(t,e);var n=t.url,o=t.attributes;if(\"string\"!=typeof n||0===n.length)throw new Error(\"Invalid url.\");if(void 0!==o&&\"object\"!=typeof o)throw new Error(\"Expected attributes to be an object.\");return new e((function(t,e){if(\"undefined\"==typeof window)return t();r({url:n,attributes:o,onSuccess:function(){return t()},onError:function(){return e(new Error('The script \"'.concat(n,'\" failed to load.')))}})}))}function u(){if(\"undefined\"==typeof Promise)throw new Error(\"Promise is undefined. To resolve the issue, use a Promise polyfill.\");return Promise}function c(t){return window[t]}function s(t,e){if(\"object\"!=typeof t||null===t)throw new Error(\"Expected an options object.\");if(void 0!==e&&\"function\"!=typeof e)throw new Error(\"Expected PromisePonyfill to be a function.\")}return t.loadCustomScript=i,t.loadScript=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();if(s(t,r),\"undefined\"==typeof window)return r.resolve(null);var o=n(t),a=o.url,d=o.dataAttributes,l=d[\"data-namespace\"]||\"paypal\",f=c(l);return e(a,d)&&f?r.resolve(f):i({url:a,attributes:d},r).then((function(){var t=c(l);if(t)return t;throw new Error(\"The window.\".concat(l,\" global variable is not available.\"))}))},t.version=\"3.1.1\",Object.defineProperty(t,\"__esModule\",{value:!0}),t}({});window.paypalLoadCustomScript=paypalLoadScript.loadCustomScript,window.paypalLoadScript=paypalLoadScript.loadScript;\r\n","Magento_PaymentServicesPaypal/js/view/errors/response-error.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Error type to handle response errors.\r\n     *\r\n     * @param {String} message\r\n     * @constructor\r\n     */\r\n    function ResponseError(message) {\r\n        this.name = 'ResponseError';\r\n        this.message = message;\r\n        this.stack = new Error().stack;\r\n    }\r\n\r\n    ResponseError.prototype = new Error;\r\n\r\n    /**\r\n     * Return a string representation\r\n     *\r\n     * @returns {String}\r\n     */\r\n    ResponseError.prototype.toString = function () {\r\n        return this.message;\r\n    };\r\n\r\n    return ResponseError;\r\n});\r\n","Magento_PaymentServicesPaypal/js/view/payment/methods/hosted-fields.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* eslint-disable no-undef */\r\ndefine([\r\n    'underscore',\r\n    'uiComponent',\r\n    'mage/translate',\r\n    'Magento_PaymentServicesPaypal/js/view/errors/response-error',\r\n    'scriptLoader'\r\n], function (_, Class, $t, ResponseError, loadSdkScript) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            sdkNamespace: 'paypal',\r\n            paypal: null,\r\n            formId: 'hosted-fields-form',\r\n            instance: undefined,\r\n            createOrderUrl: null,\r\n            orderCreateErrorMessage: {\r\n                default: $t('Failed to place order. Try again or refresh the page if that does not resolve the issue.'), // eslint-disable-line max-len,\r\n                //TODO: Update messages\r\n                'POSTAL_CODE_REQUIRED': $t('Postal code is required.'),\r\n                'CITY_REQUIRED': $t('City is required.')\r\n            },\r\n            styles: {\r\n                input: {\r\n                    color: '#ccc',\r\n                    'font-family': '\"Open Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif',\r\n                    'font-size': '16px',\r\n                    'font-weight': '400'\r\n                },\r\n                ':focus': {\r\n                    color: '#333'\r\n                },\r\n                '.valid': {\r\n                    color: '#333'\r\n                }\r\n            },\r\n            fields: {\r\n                number: {\r\n                    class: 'number',\r\n                    selector: '#${ $.formId } .${ $.fields.number.class }',\r\n                    placeholder: ''\r\n                },\r\n                expirationDate: {\r\n                    class: 'expiration-date',\r\n                    selector: '#${ $.formId } .${ $.fields.expirationDate.class }',\r\n                    placeholder: 'MM/YY'\r\n                },\r\n                cvv: {\r\n                    class: 'cvv',\r\n                    selector: '#${ $.formId } .${ $.fields.cvv.class }',\r\n                    placeholder: ''\r\n                }\r\n            },\r\n            scriptParams: [],\r\n            sdkLoaded: null,\r\n            shouldCardBeVaulted: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            _.bindAll(this, 'createOrder');\r\n\r\n            if (config.fields) {\r\n                this.constructor.defaults.fields = config.fields;\r\n            }\r\n            this._super();\r\n            this.sdkLoaded = loadSdkScript(this.scriptParams, this.sdkNamespace).then(function (sdkScript) {\r\n                this.paypal = sdkScript;\r\n            }.bind(this));\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('shouldCardBeVaulted');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check if eligible\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isEligible: function () {\r\n            return typeof this.paypal !== 'undefined' &&\r\n                this.paypal.HostedFields &&\r\n                this.paypal.HostedFields.isEligible();\r\n        },\r\n\r\n        /**\r\n         * Render fields.\r\n         *\r\n         * @return {*}\r\n         */\r\n        render: function () {\r\n            return this.paypal.HostedFields.render({\r\n                createOrder: this.createOrder,\r\n                styles: this.styles,\r\n                fields: this.fields\r\n            }).then(function (instance) {\r\n                this.instance = instance;\r\n\r\n                return instance;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Calls before create order.\r\n         *\r\n         * @return {Promise}\r\n         */\r\n        beforeCreateOrder: function () {\r\n            return Promise.resolve();\r\n        },\r\n\r\n        /**\r\n         * Create order in payment service / PayPal\r\n         *\r\n         * @returns {Promise<any>}\r\n         */\r\n        createOrder: function () {\r\n            return this.beforeCreateOrder()\r\n                .then(function () {\r\n                    const shouldCardBeVaulted = this.shouldCardBeVaulted(),\r\n                        orderData = new FormData();\r\n\r\n                    orderData.append('payment_source', this.paymentSource);\r\n\r\n                    return fetch(`${this.createOrderUrl}?vault=${shouldCardBeVaulted}`, {\r\n                        method: 'POST',\r\n                        headers: {},\r\n                        body: orderData\r\n                    });\r\n                }.bind(this)).then(function (res) {\r\n                    return res.json();\r\n                }).then(function (data) {\r\n                    if (data.response['is_successful']) {\r\n                        this.onOrderSuccess(data.response['paypal-order']);\r\n                    } else {\r\n                        throw new ResponseError(\r\n                            this.orderCreateErrorMessage[data.response.message] || this.orderCreateErrorMessage.default\r\n                        );\r\n                    }\r\n\r\n                    return data.response['paypal-order'].id;\r\n                }.bind(this)).catch(function (error) {\r\n                    if (error instanceof ResponseError) {\r\n                        throw error;\r\n                    }\r\n                    throw new ResponseError(this.orderCreateErrorMessage.default);\r\n                }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Customizable handler for order creation.\r\n         */\r\n        onOrderSuccess: function () {}\r\n    });\r\n});\r\n","Magento_Paypal/js/rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'Magento_Paypal/js/rules'\r\n], function (Class, Rules) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config) {\r\n            this.rules = new Rules();\r\n            this.initConfig(config);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * To apply the rule\r\n         */\r\n        apply: function () {\r\n            this.rules[this.name](this.$target, this.$owner, this.data);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'Magento_Ui/js/modal/alert'\r\n], function (Class, alert) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Check is solution enabled\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @returns {Boolean}\r\n     */\r\n    var isSolutionEnabled = function (solution, enabler) {\r\n            return solution.find(enabler).val() === '1';\r\n        },\r\n\r\n        /**\r\n         * Check is solution has related solutions enabled\r\n         *\r\n         * @param {Object} data\r\n         * @returns {Boolean}\r\n         */\r\n        hasRelationsEnabled = function (data) {\r\n            var name;\r\n\r\n            for (name in data.argument) {\r\n                if (\r\n                    data.solutionsElements[name] &&\r\n                    isSolutionEnabled(data.solutionsElements[name], data.enableButton)\r\n                ) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Set solution select-enabler to certain option\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         * @param {Boolean} enabled\r\n         */\r\n        setSolutionSelectEnabled = function (solution, enabler, enabled) {\r\n            enabled = !(enabled || typeof enabled === 'undefined') ? '0' : '1';\r\n\r\n            solution.find(enabler + ' option[value=' + enabled + ']')\r\n            .prop('selected', true);\r\n        },\r\n\r\n        /**\r\n         * Set solution property 'disabled' value\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         * @param {Boolean} enabled\r\n         */\r\n        setSolutionPropEnabled = function (solution, enabler, enabled) {\r\n            enabled = !(enabled || typeof enabled === 'undefined');\r\n\r\n            solution.find(enabler).prop('disabled', enabled);\r\n        },\r\n\r\n        /**\r\n         * Set/unset solution select-enabler label\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         * @param {Boolean} enabled\r\n         */\r\n        setSolutionMarkEnabled = function (solution, enabler, enabled) {\r\n            var solutionEnabler = solution.find('label[for=\"' + solution.find(enabler).attr('id') + '\"]');\r\n\r\n            enabled || typeof enabled === 'undefined' ?\r\n                solutionEnabler.addClass('enabled') :\r\n                solutionEnabler.removeClass('enabled');\r\n        },\r\n\r\n        /**\r\n         * Set/unset solution section label\r\n         *\r\n         * @param {*} solution\r\n         * @param {Boolean} enabled\r\n         */\r\n        setSolutionSectionMarkEnabled = function (solution, enabled) {\r\n            var solutionSection = solution.find('.section-config');\r\n\r\n            enabled || typeof enabled === 'undefined' ?\r\n                solutionSection.addClass('enabled') :\r\n                solutionSection.removeClass('enabled');\r\n        },\r\n\r\n        /**\r\n         * Set/unset solution section inner labels\r\n         *\r\n         * @param {*} solution\r\n         * @param {Boolean} enabled\r\n         */\r\n        setSolutionLabelsMarkEnabled = function (solution, enabled) {\r\n            var solutionLabels = solution.find('label.enabled');\r\n\r\n            enabled || typeof enabled === 'undefined' ?\r\n                solutionLabels.addClass('enabled') :\r\n                solutionLabels.removeClass('enabled');\r\n        },\r\n\r\n        /**\r\n         * Set/unset solution usedefault checkbox\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         * @param {Boolean} checked\r\n         */\r\n        setSolutionUsedefaultEnabled = function (solution, enabler, checked) {\r\n            checked = !(checked || typeof checked === 'undefined');\r\n\r\n            solution.find('input[id=\"' + solution.find(enabler).attr('id') + '_inherit\"]')\r\n            .prop('checked', checked);\r\n        },\r\n\r\n        /**\r\n         * Set solution as disabled\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         */\r\n        disableSolution = function (solution, enabler) {\r\n            setSolutionUsedefaultEnabled(solution, enabler);\r\n            setSolutionMarkEnabled(solution, enabler, false);\r\n            setSolutionSelectEnabled(solution, enabler, false);\r\n            setSolutionPropEnabled(solution, enabler, false);\r\n        },\r\n\r\n        /**\r\n         * Set solution as enabled\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         */\r\n        enableSolution = function (solution, enabler) {\r\n            setSolutionUsedefaultEnabled(solution, enabler);\r\n            setSolutionPropEnabled(solution, enabler);\r\n            setSolutionSelectEnabled(solution, enabler);\r\n            setSolutionMarkEnabled(solution, enabler);\r\n        },\r\n\r\n        /**\r\n         * Lock/unlock solution configuration button\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} buttonConfiguration\r\n         * @param {Boolean} unlock\r\n         */\r\n        setSolutionConfigurationUnlock = function (solution, buttonConfiguration, unlock) {\r\n            var solutionConfiguration = solution.find(buttonConfiguration);\r\n\r\n            unlock || typeof unlock === 'undefined' ?\r\n                solutionConfiguration.removeClass('disabled').prop('disabled', false) :\r\n                solutionConfiguration.addClass('disabled').attr('disabled', 'disabled');\r\n        },\r\n\r\n        /**\r\n         * Forward solution select-enabler changes\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} enabler\r\n         */\r\n        forwardSolutionChange = function (solution, enabler) {\r\n            solution.find(enabler).change();\r\n        },\r\n\r\n        /**\r\n         * Show/hide dependent fields\r\n         *\r\n         * @param {*} solution\r\n         * @param {String} identifier\r\n         * @param {Boolean} show\r\n         */\r\n        showDependsField = function (solution, identifier, show) {\r\n            show = show || typeof show === 'undefined';\r\n\r\n            solution.find(identifier).toggle(show);\r\n            solution.find(identifier).closest('tr').toggle(show);\r\n            solution.find(identifier).attr('disabled', !show);\r\n        };\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            /**\r\n             * Payment conflicts checker\r\n             */\r\n            executed: false\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        simpleDisable: function ($target, $owner, data) {\r\n            setSolutionSelectEnabled($target, data.enableButton, false);\r\n            setSolutionLabelsMarkEnabled($target, false);\r\n            setSolutionSectionMarkEnabled($target, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         */\r\n        simpleMarkEnable: function ($target) {\r\n            setSolutionSectionMarkEnabled($target);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        disable: function ($target, $owner, data) {\r\n            this.simpleDisable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableButton);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressDisable: function ($target, $owner, data) {\r\n            setSolutionSelectEnabled($target, data.enableButton, false);\r\n            setSolutionLabelsMarkEnabled($target, false);\r\n            forwardSolutionChange($target, data.enableButton);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressLockConfiguration: function ($target, $owner, data) {\r\n            setSolutionConfigurationUnlock($target, data.buttonConfiguration, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressLockConfigurationConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableInContextPayPal) &&\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.paypalExpressLockConfiguration($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressMarkDisable: function ($target, $owner, data) {\r\n            if (!hasRelationsEnabled(data)) {\r\n                this.simpleDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressUnlockConfiguration: function ($target, $owner, data) {\r\n            if (!hasRelationsEnabled(data)) {\r\n                setSolutionConfigurationUnlock($target, data.buttonConfiguration);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableBmlPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlDisableConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                this.paypalBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableBmlPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressDisableConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableButton) ||\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.payflowExpressDisable($target, $owner, data);\r\n                forwardSolutionChange($target, data.enableExpress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableExpress);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressEnableConditional: function ($target, $owner, data) {\r\n            if (hasRelationsEnabled(data)) {\r\n                setSolutionPropEnabled($target, data.enableExpress, false);\r\n                setSolutionSelectEnabled($target, data.enableExpress);\r\n                setSolutionMarkEnabled($target, data.enableExpress);\r\n            } else {\r\n                disableSolution($target, data.enableExpress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressLockConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                setSolutionPropEnabled($target, data.enableExpress, false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressUsedefaultDisable: function ($target, $owner, data) {\r\n            setSolutionUsedefaultEnabled($target, data.enableExpress, false);\r\n            this.payflowExpressEnable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressUsedefaultEnable: function ($target, $owner, data) {\r\n            setSolutionUsedefaultEnabled($target, data.enableExpress);\r\n            this.payflowExpressDisable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableBml);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisableConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableButton) ||\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.payflowBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisableConditionalExpress: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableExpress)) {\r\n                this.payflowBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableBml);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlEnableConditional: function ($target, $owner, data) {\r\n            if (hasRelationsEnabled(data)) {\r\n                setSolutionPropEnabled($target, data.enableBml, false);\r\n                setSolutionSelectEnabled($target, data.enableBml);\r\n                setSolutionMarkEnabled($target, data.enableBml);\r\n            } else {\r\n                disableSolution($target, data.enableBml);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlLockConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                setSolutionPropEnabled($target, data.enableBml, false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextShowMerchantId: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsMerchantId);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextHideMerchantId: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsMerchantId, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowShowSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlSortOrder);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowHideSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlSortOrder, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalShowSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlApiSortOrder);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalHideSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlApiSortOrder, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextActivate: function ($target, $owner, data) {\r\n            setSolutionMarkEnabled($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDeactivate: function ($target, $owner, data) {\r\n            setSolutionMarkEnabled($target, data.enableInContextPayPal, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDisableConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                this.inContextDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        conflict: function ($target, $owner, data) {\r\n            var newLine = String.fromCharCode(10, 13);\r\n\r\n            if (\r\n                isSolutionEnabled($owner, data.enableButton) &&\r\n                hasRelationsEnabled(data) &&\r\n                !this.executed\r\n            ) {\r\n                this.executed = true;\r\n                alert({\r\n                    content: 'The following error(s) occurred:' +\r\n                    newLine +\r\n                    'Some PayPal solutions conflict.' +\r\n                    newLine +\r\n                    'Please re-enable the previously enabled payment solutions.'\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        removeCreditOption: function ($target, $owner, data) {\r\n            if ($target.find(data.dependsButtonLabel + ' option[value=\"credit\"]').length > 0) {\r\n                $target.find(data.dependsButtonLabel + ' option[value=\"credit\"]').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        addCreditOption: function ($target, $owner, data) {\r\n            if ($target.find(data.dependsButtonLabel + ' option[value=\"credit\"]').length === 0) {\r\n                $target.find(data.dependsButtonLabel).append('<option value=\"credit\">Credit</option>');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        removeCreditOptionConditional: function ($target, $owner, data) {\r\n            if ($target.find(data.dependsDisableFundingOptions + ' option[value=\"CREDIT\"]').length === 0 ||\r\n                $target.find(data.dependsDisableFundingOptions + ' option[value=\"CREDIT\"]:selected').length > 0\r\n            ) {\r\n                this.removeCreditOption($target, $owner, data);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/solution.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiClass',\r\n    'Magento_Paypal/js/rule',\r\n    'mageUtils',\r\n    'underscore'\r\n], function ($, Class, Rule, utils, _) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n\r\n            /**\r\n             * The event corresponding to the state change\r\n             */\r\n            systemEvent: 'change',\r\n\r\n            /**\r\n             * The rules applied after the page is loaded\r\n             */\r\n            afterLoadRules: [],\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the payment method (data attribute)\r\n             */\r\n            enableButton:   '[data-enable=\"payment\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the Payflow Express (data attribute)\r\n             */\r\n            enableExpress:  '[data-enable=\"express\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the\r\n             * PayPal Express In-Context Checkout Experience (data attribute)\r\n             */\r\n            enableInContextPayPal: '[data-enable=\"in-context-api\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the Payflow Bml (data attribute)\r\n             */\r\n            enableBml:      '[data-enable=\"bml\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the PayPal Bml (data attribute)\r\n             */\r\n            enableBmlPayPal:      '[data-enable=\"bml-api\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the PayPal Merchant Id (data attribute)\r\n             */\r\n            dependsMerchantId:  '[data-enable=\"merchant-id\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the Payflow Bml Sort Order (data attribute)\r\n             */\r\n            dependsBmlSortOrder:    '[data-enable=\"bml-sort-order\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the PayPal Bml Sort Order (data attribute)\r\n             */\r\n            dependsBmlApiSortOrder:    '[data-enable=\"bml-api-sort-order\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the\r\n             * button Label credit option (data attribute)\r\n             */\r\n            dependsButtonLabel: '[data-enable=\"button-label\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the\r\n             * button Label credit option on load (data attribute)\r\n             */\r\n            dependsDisableFundingOptions: '[data-enable=\"disable-funding-options\"]',\r\n\r\n            /**\r\n             * Templates element selectors\r\n             */\r\n            templates: {\r\n                elementSelector: 'div.section-config tr[id$=\"${ $.identifier }\"]:first'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} identifier\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config, identifier) {\r\n            this.initConfig(config);\r\n            this.$self = this.createElement(identifier);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialization events\r\n         *\r\n         * @returns {exports.initEvents}\r\n         */\r\n        initEvents: function () {\r\n            _.each(this.config.events, function (elementEvents, selector) {\r\n\r\n                var solution = this,\r\n                    selectorButton = solution.$self.find(selector),\r\n                    $self = solution.$self,\r\n                    events = elementEvents;\r\n\r\n                selectorButton.on(solution.systemEvent, function () {\r\n                    _.each(events, function (elementEvent, name) {\r\n\r\n                        var predicate = elementEvent.predicate,\r\n                            result = true,\r\n\r\n                            /**\r\n                             * @param {Function} functionPredicate\r\n                             */\r\n                            predicateCallback = function (functionPredicate) {\r\n                                result = functionPredicate(solution, predicate.message, predicate.argument);\r\n\r\n                                if (result) {\r\n                                    $self.trigger(name);\r\n                                } else {\r\n                                    $self.trigger(predicate.event);\r\n                                }\r\n                            };\r\n\r\n                        if (solution.getValue($(this)) === elementEvent.value ||\r\n                            $(this).prop('multiple') && solution.checkMultiselectValue($(this), elementEvent)\r\n                        ) {\r\n                            if (predicate.name) {\r\n                                require([\r\n                                    'Magento_Paypal/js/predicate/' + predicate.name\r\n                                ], predicateCallback);\r\n                            } else {\r\n                                $self.trigger(name);\r\n                            }\r\n                        }\r\n                    }, this);\r\n                });\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} $element\r\n         * @returns {*}\r\n         */\r\n        getValue: function ($element) {\r\n            if ($element.is(':checkbox')) {\r\n                return $element.prop('checked') ? '1' : '0';\r\n            }\r\n\r\n            return $element.val();\r\n        },\r\n\r\n        /**\r\n         * Check multiselect value based on include value\r\n         *\r\n         * @param {Object} $element\r\n         * @param {Object} elementEvent\r\n         * @returns {Boolean}\r\n         */\r\n        checkMultiselectValue: function ($element, elementEvent) {\r\n            var isValueSelected = $.inArray(elementEvent.value, $element.val()) >= 0;\r\n\r\n            if (elementEvent.include) {\r\n                isValueSelected = (isValueSelected ? 'true' : 'false') === elementEvent.include;\r\n            }\r\n\r\n            return isValueSelected;\r\n        },\r\n\r\n        /**\r\n         * Adding event listeners\r\n         *\r\n         * @returns {exports.addListeners}\r\n         */\r\n        addListeners: function () {\r\n\r\n            _.each(this.config.relations, function (rules, targetName) {\r\n\r\n                var $target = this.createElement(targetName);\r\n\r\n                _.each(rules, function (instances, instanceName) {\r\n\r\n                    _.each(instances, function (instance) {\r\n                        var handler = new Rule({\r\n                            name: instanceName,\r\n                            $target: $target,\r\n                            $owner: this.$self,\r\n                            data: {\r\n                                buttonConfiguration: this.buttonConfiguration,\r\n                                enableButton: this.enableButton,\r\n                                enableExpress: this.enableExpress,\r\n                                enableInContextPayPal: this.enableInContextPayPal,\r\n                                enableBml: this.enableBml,\r\n                                enableBmlPayPal: this.enableBmlPayPal,\r\n                                dependsMerchantId: this.dependsMerchantId,\r\n                                dependsBmlSortOrder: this.dependsBmlSortOrder,\r\n                                dependsBmlApiSortOrder: this.dependsBmlApiSortOrder,\r\n                                dependsButtonLabel: this.dependsButtonLabel,\r\n                                dependsDisableFundingOptions: this.dependsDisableFundingOptions,\r\n                                solutionsElements: this.solutionsElements,\r\n                                argument: instance.argument\r\n                            }\r\n                        });\r\n\r\n                        if (instance.event === ':load') {\r\n                            this.afterLoadRules.push(handler);\r\n\r\n                            return;\r\n                        }\r\n\r\n                        this.$self.on(instance.event, _.bind(handler.apply, handler));\r\n                    }, this);\r\n                }, this);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create a jQuery element according to selector\r\n         *\r\n         * @param {String} identifier\r\n         * @returns {*}\r\n         */\r\n        createElement: function (identifier) {\r\n            if (identifier === ':self') {\r\n                return this.$self;\r\n            }\r\n\r\n            return $(utils.template(this.templates.elementSelector, {\r\n                'identifier': identifier\r\n            }));\r\n        },\r\n\r\n        /**\r\n         * Assign solutions elements\r\n         *\r\n         * @param {Object} elements\r\n         * @returns {exports.setSolutionsElements}\r\n         */\r\n        setSolutionsElements: function (elements) {\r\n            this.solutionsElements = elements;\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/solutions.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiClass',\r\n    'Magento_Paypal/js/solution',\r\n    'underscore'\r\n], function ($, Class, Solution, _) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n\r\n            /**\r\n             * Initialized solutions\r\n             */\r\n            solutions: {},\r\n\r\n            /**\r\n             * The elements of created solutions\r\n             */\r\n            solutionsElements: {},\r\n\r\n            /**\r\n             * The selector element responsible for configuration of payment method (CSS class)\r\n             */\r\n            buttonConfiguration: '.button.action-configure'\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config) {\r\n            this.initConfig(config)\r\n                .initSolutions();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialization and configuration solutions\r\n         *\r\n         * @returns {exports.initSolutions}\r\n         */\r\n        initSolutions: function () {\r\n            _.each(this.config.solutions, this.addSolution, this);\r\n            this.initializeSolutions()\r\n                .wipeButtonsConfiguration();\r\n            _.each(this.solutions, this.applicationRules);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * The creation and addition of the solution according to the configuration\r\n         *\r\n         * @param {Object} solution\r\n         * @param {String} identifier\r\n         */\r\n        addSolution: function (solution, identifier) {\r\n            this.solutions[identifier] = new Solution({\r\n                config: solution,\r\n                buttonConfiguration: this.buttonConfiguration\r\n            }, identifier);\r\n            this.solutionsElements[identifier] = this.solutions[identifier].$self;\r\n        },\r\n\r\n        /**\r\n         * Wiping buttons configuration of the payment method\r\n         */\r\n        wipeButtonsConfiguration: function () {\r\n            $(this.buttonConfiguration).removeClass('disabled')\r\n                .prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Application of the rules\r\n         *\r\n         * @param {Object} solution\r\n         */\r\n        applicationRules: function (solution) {\r\n            _.each(solution.afterLoadRules, function (rule) {\r\n                rule.apply();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initialize solutions\r\n         *\r\n         * @returns {exports.initializeSolutions}\r\n         */\r\n        initializeSolutions: function () {\r\n            _.each(this.solutions, function (solution) {\r\n                solution.setSolutionsElements(this.solutionsElements)\r\n                    .initEvents()\r\n                    .addListeners();\r\n            }, this);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/payflowpro/vault.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            $selector: null,\r\n            selector: 'edit_form'\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            self.$selector = $('#' + self.selector);\r\n            this._super();\r\n\r\n            this.initEventHandlers();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get payment code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'payflowpro';\r\n        },\r\n\r\n        /**\r\n         * Init event handlers\r\n         */\r\n        initEventHandlers: function () {\r\n            $('#' + this.container).find('[name=\"payment[token_switcher]\"]')\r\n                .on('click', this.setPaymentDetails.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Store payment details\r\n         */\r\n        setPaymentDetails: function () {\r\n            this.$selector.find('[name=\"payment[public_hash]\"]').val(this.publicHash);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/predicate/confirm.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    return function (solution, message, argument) {\r\n        var isConfirm = false;\r\n\r\n        _.every(argument, function (name) {\r\n            if (solution.solutionsElements[name] &&\r\n                solution.solutionsElements[name].find(solution.enableButton).val() == 1 //eslint-disable-line eqeqeq\r\n            ) {\r\n                isConfirm = true;\r\n\r\n                return !isConfirm;\r\n            }\r\n\r\n            return !isConfirm;\r\n        }, this);\r\n\r\n        if (isConfirm) {\r\n            return confirm(message); //eslint-disable-line no-alert\r\n        }\r\n\r\n        return true;\r\n    };\r\n});\r\n","Magento_ProductVideo/js/get-video-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery/ui',\r\n    'mage/translate'\r\n], function ($, alert) {\r\n        'use strict';\r\n\r\n        var videoRegister = {\r\n            _register: {},\r\n\r\n            /**\r\n             * Checks, if api is already registered\r\n             *\r\n             * @param {String} api\r\n             * @returns {bool}\r\n             */\r\n            isRegistered: function (api) {\r\n                return this._register[api] !== undefined;\r\n            },\r\n\r\n            /**\r\n             * Checks, if api is loaded\r\n             *\r\n             * @param {String} api\r\n             * @returns {bool}\r\n             */\r\n            isLoaded: function (api) {\r\n                return this._register[api] !== undefined && this._register[api] === true;\r\n            },\r\n\r\n            /**\r\n             * Register new video api\r\n             * @param {String} api\r\n             * @param {bool} loaded\r\n             */\r\n            register: function (api, loaded) {\r\n                loaded = loaded || false;\r\n                this._register[api] = loaded;\r\n            }\r\n        };\r\n\r\n        $.widget('mage.productVideoLoader', {\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                switch (this.element.data('type')) {\r\n                    case 'youtube':\r\n                        this.element.videoYoutube();\r\n                        this._player = this.element.data('mageVideoYoutube');\r\n                        break;\r\n\r\n                    case 'vimeo':\r\n                        this.element.videoVimeo();\r\n                        this._player = this.element.data('mageVideoVimeo');\r\n                        break;\r\n                    default:\r\n                        throw {\r\n                            name: $.mage.__('Video Error'),\r\n                            message: $.mage.__('Unknown video type'),\r\n\r\n                            /**\r\n                             * Return string\r\n                             */\r\n                            toString: function () {\r\n                                return this.name + ': ' + this.message;\r\n                            }\r\n                        };\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initializes variables\r\n             * @private\r\n             */\r\n            _initialize: function () {\r\n                this._params = this.element.data('params') || {};\r\n                this._code = this.element.data('code');\r\n                this._width = this.element.data('width');\r\n                this._height = this.element.data('height');\r\n                this._autoplay = !!this.element.data('autoplay');\r\n                this._playing = this._autoplay || false;\r\n                this.useYoutubeNocookie = this.element.data('youtubenocookie') || false;\r\n\r\n                this._responsive = this.element.data('responsive') !== false;\r\n\r\n                if (this._responsive === true) {\r\n                    this.element.addClass('responsive');\r\n                }\r\n\r\n                this._calculateRatio();\r\n            },\r\n\r\n            /**\r\n             * Abstract play command\r\n             */\r\n            play: function () {\r\n                this._player.play();\r\n            },\r\n\r\n            /**\r\n             * Abstract pause command\r\n             */\r\n            pause: function () {\r\n                this._player.pause();\r\n            },\r\n\r\n            /**\r\n             * Abstract stop command\r\n             */\r\n            stop: function () {\r\n                this._player.stop();\r\n            },\r\n\r\n            /**\r\n             * Abstract playing command\r\n             */\r\n            playing: function () {\r\n                return this._player.playing();\r\n            },\r\n\r\n            /**\r\n             * Abstract destroying command\r\n             */\r\n            destroy: function () {\r\n                if (this._player) {\r\n                    this._player.destroy();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Calculates ratio for responsive videos\r\n             * @private\r\n             */\r\n            _calculateRatio: function () {\r\n                if (!this._responsive) {\r\n                    return;\r\n                }\r\n                this.element.css('paddingBottom', this._height / this._width * 100 + '%');\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoYoutube', $.mage.productVideoLoader, {\r\n\r\n            /**\r\n             * Initialization of the Youtube widget\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                var self = this;\r\n\r\n                this._initialize();\r\n\r\n                this.element.append('<div></div>');\r\n\r\n                this._on(window, {\r\n\r\n                    /**\r\n                     * Youtube state check\r\n                     * @private\r\n                     */\r\n                    'youtubeapiready': function () {\r\n                        var host = 'https://www.youtube.com';\r\n\r\n                        if (self.useYoutubeNocookie) {\r\n                            host = 'https://www.youtube-nocookie.com';\r\n                        }\r\n\r\n                        if (self._player !== undefined) {\r\n                            return;\r\n                        }\r\n\r\n                        if (self._autoplay) {\r\n                            self._params.autoplay = 1;\r\n                        }\r\n                        self._params.rel = 0;\r\n\r\n                        self._player = new window.YT.Player(self.element.children(':first')[0], {\r\n                            height: self._height,\r\n                            width: self._width,\r\n                            videoId: self._code,\r\n                            playerVars: self._params,\r\n                            host: host,\r\n                            events: {\r\n\r\n                                /**\r\n                                 * @private\r\n                                 */\r\n                                'onReady': function onPlayerReady() {\r\n                                    self._player.getDuration();\r\n                                },\r\n\r\n                                /**\r\n                                 * State change flag init\r\n                                 */\r\n                                onStateChange: function (data) {\r\n                                    switch (window.parseInt(data.data, 10)) {\r\n                                        case 1:\r\n                                            self._playing = true;\r\n                                            break;\r\n                                        default:\r\n                                            self._playing = false;\r\n                                            break;\r\n                                    }\r\n\r\n                                    self._trigger('statechange', {}, data);\r\n                                }\r\n                            }\r\n\r\n                        });\r\n                    }\r\n                });\r\n\r\n                this._loadApi();\r\n            },\r\n\r\n            /**\r\n             * Loads Youtube API and triggers event, when loaded\r\n             * @private\r\n             */\r\n            _loadApi: function () {\r\n                var element,\r\n                    scriptTag;\r\n\r\n                if (videoRegister.isRegistered('youtube')) {\r\n                    if (videoRegister.isLoaded('youtube')) {\r\n                        $(window).trigger('youtubeapiready');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n                videoRegister.register('youtube');\r\n\r\n                element = document.createElement('script');\r\n                scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n                element.async = true;\r\n                element.src = 'https://www.youtube.com/iframe_api';\r\n                scriptTag.parentNode.insertBefore(element, scriptTag);\r\n\r\n                /**\r\n                 * Trigger youtube api ready event\r\n                 */\r\n                window.onYouTubeIframeAPIReady = function () {\r\n                    $(window).trigger('youtubeapiready');\r\n                    videoRegister.register('youtube', true);\r\n                };\r\n            },\r\n\r\n            /**\r\n             * Play command for Youtube\r\n             */\r\n            play: function () {\r\n                this._player.playVideo();\r\n                this._playing = true;\r\n            },\r\n\r\n            /**\r\n             * Pause command for Youtube\r\n             */\r\n            pause: function () {\r\n                this._player.pauseVideo();\r\n                this._playing = false;\r\n            },\r\n\r\n            /**\r\n             * Stop command for Youtube\r\n             */\r\n            stop: function () {\r\n                this._player.stopVideo();\r\n                this._playing = false;\r\n            },\r\n\r\n            /**\r\n             * Playing command for Youtube\r\n             */\r\n            playing: function () {\r\n                return this._playing;\r\n            },\r\n\r\n            /**\r\n             * stops and unloads player\r\n             * @private\r\n             */\r\n            destroy: function () {\r\n                if (this._player) {\r\n                    this.stop();\r\n                    this._player.destroy();\r\n                    this._player = undefined;\r\n                }\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoVimeo', $.mage.productVideoLoader, {\r\n\r\n            /**\r\n             * Initialize the Vimeo widget\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                var timestamp,\r\n                    src,\r\n                    additionalParams;\r\n\r\n                this._initialize();\r\n                timestamp = new Date().getTime();\r\n\r\n                if (this._autoplay) {\r\n                    additionalParams += '&autoplay=1';\r\n                }\r\n\r\n                src = 'https://player.vimeo.com/video/' +\r\n                    this._code + '?api=1&player_id=vimeo' +\r\n                    this._code +\r\n                    timestamp +\r\n                    additionalParams;\r\n                this.element.append(\r\n                    $('<iframe></iframe>')\r\n                        .attr('frameborder', 0)\r\n                        .attr('id', 'vimeo' + this._code + timestamp)\r\n                        .attr('width', this._width)\r\n                        .attr('height', this._height)\r\n                        .attr('src', src)\r\n                );\r\n\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoData', {\r\n            options: {\r\n                youtubeKey: '',\r\n                eventSource: '' //where is data going from - focus out or click on button\r\n            },\r\n\r\n            _REQUEST_VIDEO_INFORMATION_TRIGGER: 'request_video_information',\r\n\r\n            _UPDATE_VIDEO_INFORMATION_TRIGGER: 'updated_video_information',\r\n\r\n            _START_UPDATE_INFORMATION_TRIGGER: 'update_video_information',\r\n\r\n            _ERROR_UPDATE_INFORMATION_TRIGGER: 'error_updated_information',\r\n\r\n            _FINISH_UPDATE_INFORMATION_TRIGGER: 'finish_update_information',\r\n\r\n            _VIDEO_URL_VALIDATE_TRIGGER: 'validate_video_url',\r\n\r\n            _videoInformation: null,\r\n\r\n            _currentVideoUrl: null,\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _init: function () {\r\n                this.element.on(this._START_UPDATE_INFORMATION_TRIGGER, $.proxy(this._onRequestHandler, this));\r\n                this.element.on(this._ERROR_UPDATE_INFORMATION_TRIGGER, $.proxy(this._onVideoInvalid, this));\r\n                this.element.on(this._FINISH_UPDATE_INFORMATION_TRIGGER, $.proxy(\r\n                    function () {\r\n                        this._currentVideoUrl = null;\r\n                    }, this\r\n                ));\r\n                this.element.on(this._VIDEO_URL_VALIDATE_TRIGGER, $.proxy(this._onUrlValidateHandler, this));\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onUrlValidateHandler: function (event, callback, forceVideo) {\r\n                var url = this.element.val(),\r\n                    videoInfo;\r\n\r\n                videoInfo = this._validateURL(url, forceVideo);\r\n\r\n                if (videoInfo) {\r\n                    callback();\r\n                } else {\r\n                    this._onRequestError($.mage.__('Invalid video url'));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onRequestHandler: function () {\r\n                var url = this.element.val(),\r\n                    self = this,\r\n                    videoInfo,\r\n                    type,\r\n                    id,\r\n                    googleapisUrl;\r\n\r\n                if (this._currentVideoUrl === url) {\r\n                    return;\r\n                }\r\n\r\n                this._currentVideoUrl = url;\r\n\r\n                this.element.trigger(this._REQUEST_VIDEO_INFORMATION_TRIGGER, {\r\n                    url: url\r\n                });\r\n\r\n                if (!url) {\r\n                    return;\r\n                }\r\n\r\n                videoInfo = this._validateURL(url);\r\n\r\n                if (!videoInfo) {\r\n                    this._onRequestError($.mage.__('Invalid video url'));\r\n\r\n                    return;\r\n                }\r\n\r\n                /**\r\n                 *\r\n                 * @param {Object} data\r\n                 * @private\r\n                 */\r\n                function _onYouTubeLoaded(data) {\r\n                    var tmp,\r\n                        uploadedFormatted,\r\n                        respData,\r\n                        createErrorMessage;\r\n\r\n                    /**\r\n                     * Create errors message\r\n                     *\r\n                     * @returns {String}\r\n                     */\r\n                    createErrorMessage = function () {\r\n                        var error = data.error,\r\n                            errors = error.errors,\r\n                            i,\r\n                            errLength = errors.length,\r\n                            tmpError,\r\n                            errReason,\r\n                            errorsMessage = [];\r\n\r\n                        for (i = 0; i < errLength; i++) {\r\n                            tmpError = errors[i];\r\n                            errReason = tmpError.reason;\r\n\r\n                            if (['keyInvalid'].indexOf(errReason) !== -1) {\r\n                                errorsMessage.push($.mage.__('Youtube API key is invalid'));\r\n\r\n                                break;\r\n                            }\r\n\r\n                            errorsMessage.push(tmpError.message);\r\n                        }\r\n\r\n                        return $.mage.__('Video cant be shown due to the following reason: ') +\r\n                            $.unique(errorsMessage).join(', ');\r\n                    };\r\n\r\n                    if (data.error && [400, 402, 403].indexOf(data.error.code) !== -1) {\r\n                        this._onRequestError(createErrorMessage());\r\n\r\n                        return;\r\n                    }\r\n\r\n                    if (!data.items || data.items.length < 1) {\r\n                        this._onRequestError($.mage.__('Video not found'));\r\n\r\n                        return;\r\n                    }\r\n\r\n                    tmp = data.items[0];\r\n                    uploadedFormatted = tmp.snippet.publishedAt.replace('T', ' ').replace(/\\..+/g, '');\r\n                    respData = {\r\n                        duration: this._formatYoutubeDuration(tmp.contentDetails.duration),\r\n                        channel: tmp.snippet.channelTitle,\r\n                        channelId: tmp.snippet.channelId,\r\n                        uploaded: uploadedFormatted,\r\n                        title: tmp.snippet.localized.title,\r\n                        description: tmp.snippet.description,\r\n                        thumbnail: tmp.snippet.thumbnails.high.url,\r\n                        videoId: videoInfo.id,\r\n                        videoProvider: videoInfo.type,\r\n                        useYoutubeNocookie: videoInfo.useYoutubeNocookie\r\n                    };\r\n                    this._videoInformation = respData;\r\n                    this.element.trigger(this._UPDATE_VIDEO_INFORMATION_TRIGGER, respData);\r\n                    this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, true);\r\n                }\r\n\r\n                /**\r\n                 * @private\r\n                 */\r\n                function _onVimeoLoaded(data) {\r\n                    var tmp,\r\n                        respData,\r\n                        videoDescription = '';\r\n\r\n                    if (!data) {\r\n                        this._onRequestError($.mage.__('Video not found'));\r\n\r\n                        return null;\r\n                    }\r\n                    tmp = data;\r\n\r\n                    if (tmp.description !== null) {\r\n                        videoDescription = tmp.description;\r\n                    }\r\n\r\n                    if (tmp.duration == null) {\r\n                        this._onRequestError(\r\n                            $.mage.__('Because of its privacy settings, this video cannot be played here.')\r\n                        );\r\n                    } else {\r\n                        respData = {\r\n                            duration: this._formatVimeoDuration(tmp.duration),\r\n                            channel: tmp['author_name'],\r\n                            channelId: tmp['author_url'],\r\n                            uploaded: tmp['upload_date'],\r\n                            title: tmp.title,\r\n                            description: videoDescription.replace(/(&nbsp;|<([^>]+)>)/ig, ''),\r\n                            thumbnail: tmp['thumbnail_url'],\r\n                            videoId: videoInfo.id,\r\n                            videoProvider: videoInfo.type\r\n                        };\r\n                        this._videoInformation = respData;\r\n                        this.element.trigger(this._UPDATE_VIDEO_INFORMATION_TRIGGER, respData);\r\n                        this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, true);\r\n                    }\r\n                }\r\n\r\n                type = videoInfo.type;\r\n                id = videoInfo.id;\r\n\r\n                if (type === 'youtube') {\r\n                    googleapisUrl = 'https://www.googleapis.com/youtube/v3/videos?id=' +\r\n                        id +\r\n                        '&part=snippet,contentDetails&key=' +\r\n                        this.options.youtubeKey + '&alt=json&callback=?';\r\n                    $.getJSON(googleapisUrl,\r\n                        {\r\n                            format: 'json'\r\n                        },\r\n                        $.proxy(_onYouTubeLoaded, self)\r\n                    ).fail(\r\n                        function () {\r\n                            self._onRequestError('Video not found');\r\n                        }\r\n                    );\r\n                } else if (type === 'vimeo') {\r\n                    $.ajax({\r\n                        url: 'https://vimeo.com/api/oembed.json',\r\n                        dataType: 'jsonp',\r\n                        data: {\r\n                            format: 'json',\r\n                            url: 'https://vimeo.com/' + id\r\n                        },\r\n                        timeout: 5000,\r\n                        success:  $.proxy(_onVimeoLoaded, self),\r\n\r\n                        /**\r\n                         * @private\r\n                         */\r\n                        error: function () {\r\n                            self._onRequestError($.mage.__('Video not found'));\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onVideoInvalid: function (event, data) {\r\n                this._videoInformation = null;\r\n                this.element.val('');\r\n                alert({\r\n                    content: 'Error: \"' + data + '\"'\r\n                });\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onRequestError: function (error) {\r\n                this.element.trigger(this._ERROR_UPDATE_INFORMATION_TRIGGER, error);\r\n                this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, false);\r\n                this._currentVideoUrl = null;\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _formatYoutubeDuration: function (duration) {\r\n                var match = duration.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/),\r\n                    hours = parseInt(match[1], 10) || 0,\r\n                    minutes = parseInt(match[2], 10) || 0,\r\n                    seconds = parseInt(match[3], 10) || 0;\r\n\r\n                return this._formatVimeoDuration(hours * 3600 + minutes * 60 + seconds);\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _formatVimeoDuration: function (seconds) {\r\n                return new Date(seconds * 1000).toUTCString().match(/(\\d\\d:\\d\\d:\\d\\d)/)[0];\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _parseHref: function (href) {\r\n                var a = document.createElement('a');\r\n\r\n                a.href = href;\r\n\r\n                return a;\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _validateURL: function (href, forceVideo) {\r\n                var id,\r\n                    type,\r\n                    ampersandPosition,\r\n                    vimeoRegex,\r\n                    useYoutubeNocookie = false;\r\n\r\n                if (typeof href !== 'string') {\r\n                    return href;\r\n                }\r\n                href = this._parseHref(href);\r\n\r\n                if (href.host.match(/youtube\\.com/) && href.search) {\r\n\r\n                    id = href.search.split('v=')[1];\r\n\r\n                    if (id) {\r\n                        ampersandPosition = id.indexOf('&');\r\n                        type = 'youtube';\r\n                    }\r\n\r\n                    if (id && ampersandPosition !== -1) {\r\n                        id = id.substring(0, ampersandPosition);\r\n                    }\r\n\r\n                } else if (href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)) {\r\n                    id = href.pathname.replace(/^\\/(embed\\/|v\\/)?/, '').replace(/\\/.*/, '');\r\n                    type = 'youtube';\r\n\r\n                    if (href.host.match(/youtube-nocookie.com/)) {\r\n                        useYoutubeNocookie = true;\r\n                    }\r\n                } else if (href.host.match(/vimeo\\.com/)) {\r\n                    type = 'vimeo';\r\n                    vimeoRegex = new RegExp(['https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)',\r\n                        '?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)'\r\n                    ].join(''));\r\n\r\n                    if (href.href.match(vimeoRegex) != null) {\r\n                        id = href.href.match(vimeoRegex)[3];\r\n                    }\r\n                }\r\n\r\n                if ((!id || !type) && forceVideo) {\r\n                    id = href.href;\r\n                    type = 'custom';\r\n                }\r\n\r\n                return id ? {\r\n                    id: id, type: type, s: href.search.replace(/^\\?/, ''), useYoutubeNocookie: useYoutubeNocookie\r\n                } : false;\r\n            }\r\n        });\r\n    });\r\n","Magento_ProductVideo/js/new-video-dialog.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'mage/backend/tree-suggest',\r\n    'mage/backend/validation',\r\n    'Magento_ProductVideo/js/get-video-information'\r\n], function ($, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.createVideoPlayer', {\r\n        options: {\r\n            videoId: '',\r\n            videoProvider: '',\r\n            container: '.video-player-container',\r\n            videoClass: 'product-video',\r\n            reset: false,\r\n            useYoutubeNocookie: false,\r\n            metaData: {\r\n                DOM: {\r\n                    title: '.video-information.title span',\r\n                    uploaded: '.video-information.uploaded span',\r\n                    uploader: '.video-information.uploader span',\r\n                    duration: '.video-information.duration span',\r\n                    all: '.video-information span',\r\n                    wrapper: '.video-information'\r\n                },\r\n                data: {\r\n                    title: '',\r\n                    uploaded: '',\r\n                    uploader: '',\r\n                    uploaderUrl: '',\r\n                    duration: ''\r\n                }\r\n            }\r\n        },\r\n\r\n        _FINISH_CREATE_VIDEO_TRIGGER: 'finish_create_video',\r\n\r\n        _FINISH_UPDATE_VIDEO_TRIGGER: 'finish_update_video',\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            if (this.options.reset) {\r\n                this.reset();\r\n            } else {\r\n                this.update();\r\n            }\r\n\r\n            this.element.on('reset', $.proxy(this.reset, this));\r\n\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        update: function () {\r\n            var checkVideoID =\r\n                this.element.find(this.options.container).find('.' + this.options.videoClass).data('code'),\r\n                eventVideoData = {\r\n                    oldVideoId: checkVideoID ? checkVideoID.toString() : checkVideoID,\r\n                    newVideoId: this.options.videoId ? this.options.videoId.toString() : this.options.videoId\r\n                };\r\n\r\n            if (checkVideoID && checkVideoID !== this.options.videoId) {\r\n                this._doUpdate();\r\n                this.element.trigger(this._FINISH_UPDATE_VIDEO_TRIGGER, eventVideoData);\r\n            } else if (checkVideoID && checkVideoID === this.options.videoId) {\r\n                return false;\r\n            } else if (!checkVideoID) {\r\n                this._doUpdate();\r\n                this.element.trigger(this._FINISH_CREATE_VIDEO_TRIGGER, eventVideoData);\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _doUpdate: function () {\r\n            var uploaderLinkUrl,\r\n                uploaderLink;\r\n\r\n            this.reset();\r\n            this.element.find(this.options.container).append(\r\n                '<div class=\"' +\r\n                this.options.videoClass +\r\n                '\" data-type=\"' +\r\n                this.options.videoProvider +\r\n                '\" data-code=\"' +\r\n                this.options.videoId +\r\n                '\" data-youtubenocookie=\"' +\r\n                this.options.useYoutubeNocookie +\r\n                '\" data-width=\"100%\" data-height=\"100%\"></div>'\r\n            );\r\n            this.element.find(this.options.metaData.DOM.wrapper).show();\r\n            this.element.find(this.options.metaData.DOM.title).text(this.options.metaData.data.title);\r\n            this.element.find(this.options.metaData.DOM.uploaded).text(this.options.metaData.data.uploaded);\r\n            this.element.find(this.options.metaData.DOM.duration).text(this.options.metaData.data.duration);\r\n\r\n            if (this.options.videoProvider === 'youtube') {\r\n                uploaderLinkUrl = 'https://youtube.com/channel/' + this.options.metaData.data.uploaderUrl;\r\n            } else if (this.options.videoProvider === 'vimeo') {\r\n                uploaderLinkUrl = this.options.metaData.data.uploaderUrl;\r\n            }\r\n            uploaderLink = document.createElement('a');\r\n            uploaderLink.setAttribute('href', uploaderLinkUrl);\r\n            uploaderLink.setAttribute('target', '_blank');\r\n            uploaderLink.innerText = this.options.metaData.data.uploader;\r\n            this.element.find(this.options.metaData.DOM.uploader)[0].appendChild(uploaderLink);\r\n            this.element.find('.' + this.options.videoClass).productVideoLoader();\r\n\r\n        },\r\n\r\n        /**\r\n         * Reset\r\n         */\r\n        reset: function () {\r\n            this.element.find(this.options.container).find('.' + this.options.videoClass).remove();\r\n            this.element.find(this.options.metaData.DOM.wrapper).hide();\r\n            this.element.find(this.options.metaData.DOM.all).text('');\r\n\r\n        }\r\n    });\r\n\r\n    $.widget('mage.updateInputFields', {\r\n        options: {\r\n            reset: false,\r\n            DOM: {\r\n                urlField: 'input[name=\"video_url\"]',\r\n                titleField: 'input[name=\"video_title\"]',\r\n                fileField: '#file_name',\r\n                descriptionField: 'textarea[name=\"video_description\"]',\r\n                thumbnailLocation: '.field-new_video_screenshot_preview .admin__field-control'\r\n            },\r\n            data: {\r\n                url: '',\r\n                title: '',\r\n                description: '',\r\n                thumbnail: ''\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            if (this.options.reset) {\r\n                this.reset();\r\n            } else {\r\n                this.update();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update\r\n         */\r\n        update: function () {\r\n            $(this.options.DOM.titleField).val(this.options.data.title);\r\n            $(this.options.DOM.descriptionField).val(this.options.data.description);\r\n        },\r\n\r\n        /**\r\n         * Reset\r\n         */\r\n        reset: function () {\r\n            $(this.options.DOM.fileField).val('');\r\n            $(this.options.DOM.urlField).val('');\r\n            $(this.options.DOM.titleField).val('');\r\n            $(this.options.DOM.descriptionField).val('');\r\n        }\r\n    });\r\n\r\n    /**\r\n     */\r\n    $.widget('mage.newVideoDialog', {\r\n\r\n        _previewImage: null,\r\n\r\n        clickedElement: '',\r\n\r\n        _images: {},\r\n\r\n        _imageTypes: [\r\n            '.jpeg',\r\n            '.pjpeg',\r\n            '.jpeg',\r\n            '.jpg',\r\n            '.pjpeg',\r\n            '.png',\r\n            '.gif'\r\n        ],\r\n\r\n        _imageProductGalleryWrapperSelector: '#image-container',\r\n\r\n        _videoPreviewInputSelector: '#new_video_screenshot',\r\n\r\n        _videoPreviewRemoteSelector: '',\r\n\r\n        _videoDisableinputSelector: '#new_video_disabled',\r\n\r\n        _videoPreviewImagePointer: '#new_video_screenshot_preview',\r\n\r\n        _videoFormSelector: '#new_video_form',\r\n\r\n        _itemIdSelector: '#item_id',\r\n\r\n        _videoUrlSelector: '[name=\"video_url\"]',\r\n\r\n        _videoImageFilenameselector: '#file_name',\r\n\r\n        _videoUrlWidget: null,\r\n\r\n        _videoInformationBtnSelector: '[name=\"new_video_get\"]',\r\n\r\n        _editVideoBtnSelector: '.image',\r\n\r\n        _deleteGalleryVideoSelector: '[data-role=delete-button]',\r\n\r\n        _deleteGalleryVideoSelectorBtn: null,\r\n\r\n        _videoInformationGetBtn: null,\r\n\r\n        _videoInformationGetUrlField: null,\r\n\r\n        _videoInformationGetEditBtn: null,\r\n\r\n        _isEditPage: false,\r\n\r\n        _onlyVideoPlayer: false,\r\n\r\n        _tempPreviewImageData: null,\r\n\r\n        _videoPlayerSelector: '.mage-new-video-dialog',\r\n\r\n        _videoRequestComplete: null,\r\n\r\n        _gallery: null,\r\n\r\n        /**\r\n         * Bind events\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {\r\n                'setImage': '_onSetImage'\r\n            };\r\n\r\n            this._on(events);\r\n\r\n            this._videoUrlWidget = this.element.find(this._videoUrlSelector).videoData({\r\n                youtubeKey: this.options.youTubeApiKey,\r\n                eventSource: 'focusout'\r\n            });\r\n\r\n            this._videoInformationGetBtn = this.element.find(this._videoInformationBtnSelector);\r\n            this._videoInformationGetUrlField = this.element.find(this._videoUrlSelector);\r\n            this._videoInformationGetEditBtn = this._gallery.find(this._editVideoBtnSelector);\r\n\r\n            this._videoInformationGetBtn.on('click', $.proxy(this._onGetVideoInformationClick, this));\r\n            this._videoInformationGetUrlField.on('focusout', $.proxy(this._onGetVideoInformationFocusOut, this));\r\n\r\n            this._videoUrlWidget.on('updated_video_information', $.proxy(this._onGetVideoInformationSuccess, this));\r\n            this._videoUrlWidget.on('error_updated_information', $.proxy(this._onGetVideoInformationError, this));\r\n            this._videoUrlWidget.on(\r\n                'request_video_information',\r\n                $.proxy(this._onGetVideoInformationStartRequest, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Fired when user click on button \"Get video information\"\r\n         * @private\r\n         */\r\n        _onGetVideoInformationClick: function () {\r\n            var videoForm = this.element.find(this._videoFormSelector);\r\n\r\n            videoForm.validation();\r\n\r\n            if (this.element.find(this._videoUrlSelector).valid()) {\r\n                this._onlyVideoPlayer = false;\r\n                this._isEditPage = false;\r\n                this._videoUrlWidget.trigger('update_video_information');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Fired when user do focus out from url field\r\n         * @private\r\n         */\r\n        _onGetVideoInformationFocusOut: function () {\r\n            this._videoUrlWidget.trigger('update_video_information');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _onGetVideoInformationStartRequest: function () {\r\n            var videoForm = this.element.find(this._videoFormSelector);\r\n\r\n            try {\r\n                videoForm.validation('clearError');\r\n            } catch (e) {\r\n                // Do nothing\r\n            }\r\n\r\n            this._videoRequestComplete = false;\r\n        },\r\n\r\n        /**\r\n         * Fired when user click Edit Video button\r\n         * @private\r\n         */\r\n        _onGetVideoInformationEditClick: function () {\r\n            this._onlyVideoPlayer = true;\r\n            this._isEditPage = true;\r\n            this._videoUrlWidget.trigger('update_video_information');\r\n        },\r\n\r\n        /**\r\n         * Fired when successfully received information about the video.\r\n         * @param {Object} e\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onGetVideoInformationSuccess: function (e, data) {\r\n            var self = this;\r\n\r\n            self.element.on('finish_update_video finish_create_video', $.proxy(function (element, playerData) {\r\n                if (!self._onlyVideoPlayer ||\r\n                    !self._isEditPage && playerData.oldVideoId !== playerData.newVideoId ||\r\n                    playerData.oldVideoId && playerData.oldVideoId !== playerData.newVideoId\r\n                ) {\r\n                    self.element.updateInputFields({\r\n                        reset: false,\r\n                        data: {\r\n                            title: data.title,\r\n                            description: data.description\r\n                        }\r\n                    });\r\n                    this._loadRemotePreview(data.thumbnail);\r\n                }\r\n                self._onlyVideoPlayer = true;\r\n            }, this))\r\n                .createVideoPlayer({\r\n                    videoId: data.videoId,\r\n                    videoProvider: data.videoProvider,\r\n                    useYoutubeNocookie: data.useYoutubeNocookie,\r\n                    reset: false,\r\n                    metaData: {\r\n                        DOM: {\r\n                            title: '.video-information.title span',\r\n                            uploaded: '.video-information.uploaded span',\r\n                            uploader: '.video-information.uploader span',\r\n                            duration: '.video-information.duration span',\r\n                            all: '.video-information span',\r\n                            wrapper: '.video-information'\r\n                        },\r\n                        data: {\r\n                            title: data.title,\r\n                            uploaded: data.uploaded,\r\n                            uploader: data.channel,\r\n                            duration: data.duration,\r\n                            uploaderUrl: data.channelId\r\n                        }\r\n                    }\r\n                })\r\n                .off('finish_update_video finish_create_video');\r\n\r\n            this._videoRequestComplete = true;\r\n        },\r\n\r\n        /**\r\n         * Load preview from youtube/vimeo\r\n         * @param {String} sourceUrl\r\n         * @private\r\n         */\r\n        _loadRemotePreview: function (sourceUrl) {\r\n            var url = this.options.saveRemoteVideoUrl,\r\n                self = this;\r\n\r\n            this._getPreviewImage().attr('src', sourceUrl).hide();\r\n            this._blockActionButtons(true, true);\r\n            $.ajax({\r\n                url: url,\r\n                data: 'remote_image=' + sourceUrl,\r\n                type: 'post',\r\n                success: $.proxy(function (result) {\r\n                    this._tempPreviewImageData = result;\r\n                    this._getPreviewImage().attr('src', sourceUrl).show();\r\n                    this._blockActionButtons(false, true);\r\n                }, self)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Fired when receiving information about the video ended with error\r\n         * @private\r\n         */\r\n        _onGetVideoInformationError: function () {\r\n        },\r\n\r\n        /**\r\n         * Remove \".tmp\"\r\n         * @param {String} name\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        __prepareFilename: function (name) {\r\n            var tmppost = '.tmp';\r\n\r\n            if (!name) {\r\n                return name;\r\n            }\r\n\r\n            if (name.endsWith(tmppost)) {\r\n                name = name.slice(0, name.length - tmppost.length);\r\n            }\r\n\r\n            return name;\r\n        },\r\n\r\n        /**\r\n         * Set image data\r\n         * @param {String} file\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _setImage: function (file, imageData) {\r\n            file = this.__prepareFilename(file);\r\n            this._images[file] = imageData;\r\n            this._gallery.trigger('addItem', imageData);\r\n            this.element.trigger('setImage', imageData);\r\n            this._addVideoClass(imageData.url);\r\n        },\r\n\r\n        /**\r\n         * Get image data\r\n         *\r\n         * @param {String} file\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getImage: function (file) {\r\n            file = this.__prepareFilename(file);\r\n\r\n            return this._images[file];\r\n        },\r\n\r\n        /**\r\n         * Replace image (update)\r\n         * @param {String} oldFile\r\n         * @param {String} newFile\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _replaceImage: function (oldFile, newFile, imageData) {\r\n            var tmpNewFile = newFile,\r\n                tmpOldImage,\r\n                newImageId,\r\n                oldNewFilePosition,\r\n                fc,\r\n                suff,\r\n                searchsuff,\r\n                key,\r\n                oldValIdElem;\r\n\r\n            oldFile = this.__prepareFilename(oldFile);\r\n            newFile = this.__prepareFilename(newFile);\r\n            tmpOldImage = this._images[oldFile];\r\n\r\n            if (newFile === oldFile) {\r\n                this._images[newFile] = imageData;\r\n                this.saveImageRoles(imageData);\r\n                this._updateVisibility(imageData);\r\n                this._updateImageTitle(imageData);\r\n\r\n                return null;\r\n            }\r\n\r\n            this._removeImage(oldFile);\r\n            this._setImage(newFile, imageData);\r\n\r\n            if (!oldFile || !imageData.oldFile) {\r\n                return null;\r\n            }\r\n\r\n            newImageId = this.findElementId(tmpNewFile);\r\n            fc = this.element.find(this._itemIdSelector).val();\r\n\r\n            suff = 'product[media_gallery][images]' + fc;\r\n\r\n            searchsuff = 'input[name=\"' + suff + '[value_id]\"]';\r\n            key = this._gallery.find(searchsuff).val();\r\n\r\n            if (!key) {\r\n                return null;\r\n            }\r\n\r\n            oldValIdElem = document.createElement('input');\r\n            this._gallery.find('form[data-form=\"edit-product\"]').append(oldValIdElem);\r\n            $(oldValIdElem).attr({\r\n                type: 'hidden',\r\n                name: 'product[media_gallery][images][' + newImageId + '][save_data_from]'\r\n            }).val(key);\r\n\r\n            oldNewFilePosition = parseInt(tmpOldImage.position, 10);\r\n            imageData.position = oldNewFilePosition;\r\n\r\n            this._gallery.trigger('setPosition', {\r\n                imageData: imageData,\r\n                position: oldNewFilePosition\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove image data\r\n         * @param {String} file\r\n         * @private\r\n         */\r\n        _removeImage: function (file) {\r\n            var imageData = this._getImage(file);\r\n\r\n            if (!imageData) {\r\n                return null;\r\n            }\r\n\r\n            this._gallery.trigger('removeItem', imageData);\r\n            this.element.trigger('removeImage', imageData);\r\n            delete this._images[file];\r\n        },\r\n\r\n        /**\r\n         * Fired when image setted\r\n         * @param {Event} event\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _onSetImage: function (event, imageData) {\r\n            this.saveImageRoles(imageData);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Wrap _uploadFile\r\n         * @param {String} file\r\n         * @param {String} oldFile\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _uploadImage: function (file, oldFile, callback) {\r\n            var url = this.options.saveVideoUrl,\r\n                data = {\r\n                    files: file,\r\n                    url: url\r\n                };\r\n\r\n            this._blockActionButtons(true, true);\r\n            this._uploadFile(data, $.proxy(function (result) {\r\n                this._onImageLoaded(result, file, oldFile, callback);\r\n                this._blockActionButtons(false);\r\n            }, this));\r\n\r\n        },\r\n\r\n        /**\r\n         * @param {String} result\r\n         * @param {String} file\r\n         * @param {String} oldFile\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _onImageLoaded: function (result, file, oldFile, callback) {\r\n            var data;\r\n\r\n            try {\r\n                data = JSON.parse(result);\r\n            } catch (e) {\r\n                data = result;\r\n            }\r\n\r\n            if (this.element.find('#video_url').parent().find('.image-upload-error').length > 0) {\r\n                this.element.find('.image-upload-error').remove();\r\n            }\r\n\r\n            if (data.errorcode || data.error) {\r\n                this.element.find('#video_url').parent().append('<div class=\"image-upload-error\">' +\r\n                '<div class=\"image-upload-error-cross\"></div><span>' + data.error + '</span></div>');\r\n\r\n                return;\r\n            }\r\n            $.each(this.element.find(this._videoFormSelector).serializeArray(), function (i, field) {\r\n                data[field.name] = field.value;\r\n            });\r\n            data.disabled = this.element.find(this._videoDisableinputSelector).prop('checked') ? 1 : 0;\r\n            data['media_type'] = 'external-video';\r\n            data.oldFile = oldFile;\r\n\r\n            oldFile ?\r\n                this._replaceImage(oldFile, data.file, data) :\r\n                this._setImage(data.file, data);\r\n            callback.call(0, data);\r\n        },\r\n\r\n        /**\r\n         * File uploader\r\n         * @private\r\n         */\r\n        _uploadFile: function (data, callback) {\r\n            let form = this.element.find(this._videoFormSelector).get(0),\r\n                formData = new FormData(form);\r\n\r\n            $.ajax({\r\n                type: 'post',\r\n                url: data.url,\r\n                processData: false,\r\n                contentType: false,\r\n                data: formData,\r\n                success: function (result, textStatus, jqXHR) {\r\n                    // eslint-disable-next-line no-useless-call\r\n                    callback.call(null, result, textStatus, jqXHR);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update style\r\n         * @param {String} url\r\n         * @private\r\n         */\r\n        _addVideoClass: function (url) {\r\n            var classVideo = 'video-item';\r\n\r\n            this._gallery.find('img[src=\"' + url + '\"]').addClass(classVideo);\r\n        },\r\n\r\n        /**\r\n         * Build widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var imgs = _.values(this.element.closest(this.options.videoSelector).data('images')) || [],\r\n                widget,\r\n                uploader,\r\n                tmp,\r\n                i;\r\n\r\n            this._gallery =  this.element.closest(this.options.videoSelector);\r\n\r\n            for (i = 0; i < imgs.length; i++) {\r\n                tmp = imgs[i];\r\n                this._images[tmp.file] = tmp;\r\n\r\n                if (tmp['media_type'] === 'external-video') {\r\n                    tmp.subclass = 'video-item';\r\n                    this._addVideoClass(tmp.url);\r\n                }\r\n            }\r\n\r\n            this._gallery.on('openDialog', $.proxy(this._onOpenDialog, this));\r\n            this._bind();\r\n            this.createVideoItemIcons();\r\n            widget = this;\r\n            uploader = this.element.find(this._videoPreviewInputSelector);\r\n            uploader.on('change', this._onImageInputChange.bind(this));\r\n            uploader.attr('accept', this._imageTypes.join(','));\r\n\r\n            this.element.modal({\r\n                type: 'slide',\r\n                //appendTo: this._gallery,\r\n                modalClass: 'mage-new-video-dialog form-inline',\r\n                title: $.mage.__('New Video'),\r\n                buttons: [\r\n                    {\r\n                        text: $.mage.__('Save'),\r\n                        class: 'action-primary video-create-button',\r\n                        click: $.proxy(widget._onCreate, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Cancel'),\r\n                        class: 'video-cancel-button',\r\n                        click: $.proxy(widget._onCancel, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Delete'),\r\n                        class: 'video-delete-button',\r\n                        click: $.proxy(widget._onDelete, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Save'),\r\n                        class: 'action-primary video-edit',\r\n                        click: $.proxy(widget._onUpdate, widget)\r\n                    }\r\n                ],\r\n\r\n                /**\r\n                 * @returns {null}\r\n                 */\r\n                opened: function () {\r\n                    var roles,\r\n                        file,\r\n                        modalTitleElement,\r\n                        imageData,\r\n                        modal = widget.element.closest('.mage-new-video-dialog');\r\n\r\n                    widget.element.find('#video_url').focus();\r\n                    roles = widget.element.find('.video_image_role');\r\n                    roles.prop('disabled', false);\r\n                    file = widget.element.find('#file_name').val();\r\n                    widget._onGetVideoInformationEditClick();\r\n                    modalTitleElement = modal.find('.modal-title');\r\n\r\n                    if (!file) {\r\n                        widget._blockActionButtons(true);\r\n\r\n                        modal.find('.video-delete-button').hide();\r\n                        modal.find('.video-edit').hide();\r\n                        modal.find('.video-create-button').show();\r\n                        roles.prop('checked', widget._gallery.find('.image.item:not(.removed)').length < 1);\r\n                        modalTitleElement.text($.mage.__('New Video'));\r\n                        widget._isEditPage = false;\r\n\r\n                        return null;\r\n                    }\r\n                    widget._blockActionButtons(false);\r\n                    modalTitleElement.text($.mage.__('Edit Video'));\r\n                    widget._isEditPage = true;\r\n                    imageData = widget._getImage(file);\r\n\r\n                    if (!imageData) {\r\n                        imageData = {\r\n                            url: _.find(widget._gallery.find('.product-image'), function (image) {\r\n                                return image.src.indexOf(file) > -1;\r\n                            }).src\r\n                        };\r\n                    }\r\n\r\n                    widget._onPreview(null, imageData.url, false);\r\n                },\r\n\r\n                /**\r\n                 * Closed\r\n                 */\r\n                closed: function () {\r\n                    widget._onClose();\r\n                    widget.createVideoItemIcons();\r\n                }\r\n            });\r\n            this.toggleButtons();\r\n        },\r\n\r\n        /**\r\n         * @param {String} status\r\n         * @private\r\n         */\r\n        _blockActionButtons: function (status) {\r\n            this.element\r\n                .closest('.mage-new-video-dialog')\r\n                .find('.page-actions-buttons button.video-create-button, .page-actions-buttons button.video-edit')\r\n                .attr('disabled', status);\r\n        },\r\n\r\n        /**\r\n         * Check form\r\n         * @param {Function} callback\r\n         */\r\n        isValid: function (callback) {\r\n            var videoForm = this.element.find(this._videoFormSelector),\r\n                videoLoaded = true;\r\n\r\n            this._blockActionButtons(true);\r\n\r\n            this._videoUrlWidget.trigger('validate_video_url', $.proxy(function () {\r\n\r\n                videoForm.mage('validation', {\r\n\r\n                    /**\r\n                     * @param {jQuery} error\r\n                     * @param {jQuery} element\r\n                     */\r\n                    errorPlacement: function (error, element) {\r\n                        error.insertAfter(element);\r\n                    }\r\n                }).on('highlight.validate', function () {\r\n                    $(this).validation('option');\r\n                });\r\n\r\n                videoForm.validation();\r\n\r\n                if (this._videoRequestComplete === false) {\r\n                    videoLoaded = false;\r\n                }\r\n\r\n                callback(videoForm.valid() && videoLoaded);\r\n            }, this));\r\n\r\n            this._blockActionButtons(false);\r\n        },\r\n\r\n        /**\r\n         * Create video item icons\r\n         */\r\n        createVideoItemIcons: function () {\r\n            var $imageWidget = this._gallery.find('.product-image.video-item'),\r\n                $productGalleryWrapper = $(this._imageProductGalleryWrapperSelector).find('.product-image.video-item');\r\n\r\n            $imageWidget.parent().addClass('video-item');\r\n            $productGalleryWrapper.parent().addClass('video-item');\r\n            $imageWidget.removeClass('video-item');\r\n            $productGalleryWrapper.removeClass('video-item');\r\n            $('.video-item .action-delete').attr('title', $.mage.__('Delete video'));\r\n            $('.video-item .action-delete span').html($.mage.__('Delete video'));\r\n        },\r\n\r\n        /**\r\n         * Fired when click on create video\r\n         * @private\r\n         */\r\n        _onCreate: function () {\r\n            var nvs = this.element.find(this._videoPreviewInputSelector),\r\n                file = nvs.get(0),\r\n                reqClass = 'required-entry _required';\r\n\r\n            if (file && file.files && file.files.length) {\r\n                file = file.files[0];\r\n            } else {\r\n                file = null;\r\n            }\r\n\r\n            if (!file && !this._tempPreviewImageData) {\r\n                nvs.addClass(reqClass);\r\n            }\r\n\r\n            this.isValid($.proxy(\r\n                function (videoValidStatus) {\r\n\r\n                    if (!videoValidStatus) {\r\n                        return;\r\n                    }\r\n\r\n                    if (this._tempPreviewImageData) {\r\n                        this._onImageLoaded(this._tempPreviewImageData, null, null, $.proxy(this.close, this));\r\n                    } else {\r\n                        this._uploadImage(file, null, $.proxy(function () {\r\n                            this.close();\r\n                        }, this));\r\n                    }\r\n\r\n                    nvs.removeClass(reqClass);\r\n                },\r\n                this\r\n            ));\r\n        },\r\n\r\n        /**\r\n         * Fired when click on update video\r\n         * @private\r\n         */\r\n        _onUpdate: function () {\r\n            var inputFile, itemId, _inputSelector, mediaFields, imageData, flagChecked, fileName, callback;\r\n\r\n            this.isValid($.proxy(\r\n                function (videoValidStatus) {\r\n\r\n                    if (!videoValidStatus) {\r\n                        return;\r\n                    }\r\n\r\n                    imageData = this.imageData || {};\r\n                    inputFile = this.element.find(this._videoPreviewInputSelector);\r\n                    itemId = this.element.find(this._itemIdSelector).val();\r\n                    itemId = itemId.slice(1, itemId.length - 1);\r\n                    _inputSelector = '[name*=\"[' + itemId + ']\"]';\r\n                    mediaFields = this._gallery.find('input' + _inputSelector);\r\n                    $.each(mediaFields, function (i, el) {\r\n                        var elName = el.name,\r\n                            start = elName.indexOf(itemId) + itemId.length + 2,\r\n                            fieldName = elName.substring(start, el.name.length - 1),\r\n                            _field = this.element.find('#' + fieldName),\r\n                            _tmp;\r\n\r\n                        if (_field.length > 0) {\r\n                            _tmp = _inputSelector.slice(0, _inputSelector.length - 2) + '[' + fieldName + ']\"]';\r\n                            this._gallery.find(_tmp).val(_field.val());\r\n                            imageData[fieldName] = _field.val();\r\n                        }\r\n                    }.bind(this));\r\n                    flagChecked = this.element.find(this._videoDisableinputSelector).prop('checked') ? 1 : 0;\r\n                    this._gallery.find('input[name*=\"' + itemId + '][disabled]\"]').val(flagChecked);\r\n                    this._gallery.find(_inputSelector).siblings('.image-fade').css(\r\n                        'visibility',\r\n                        flagChecked ? 'visible' : 'hidden'\r\n                    );\r\n                    imageData.disabled = flagChecked;\r\n\r\n                    if (this._tempPreviewImageData) {\r\n                        this._onImageLoaded(\r\n                            this._tempPreviewImageData,\r\n                            null,\r\n                            imageData.file,\r\n                            $.proxy(this.close, this)\r\n                        );\r\n\r\n                        return;\r\n                    }\r\n                    fileName = inputFile.get(0).files;\r\n\r\n                    if (!fileName || !fileName.length) {\r\n                        fileName = null;\r\n                    }\r\n                    inputFile.replaceWith(inputFile);\r\n\r\n                    callback = $.proxy(function () {\r\n                        this.close();\r\n                    }, this);\r\n\r\n                    if (fileName) {\r\n                        this._uploadImage(fileName, imageData.file, callback);\r\n                    } else {\r\n                        this._replaceImage(imageData.file, imageData.file, imageData);\r\n                        callback(0, imageData);\r\n                    }\r\n                },\r\n                this\r\n            ));\r\n        },\r\n\r\n        /**\r\n         * Delegates call to producwt gallery to update video visibility.\r\n         *\r\n         * @param {Object} imageData\r\n         */\r\n        _updateVisibility: function (imageData) {\r\n            this._gallery.trigger('updateVisibility', {\r\n                disabled: imageData.disabled,\r\n                imageData: imageData\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Delegates call to product gallery to update video title.\r\n         *\r\n         * @param {Object} imageData\r\n         */\r\n        _updateImageTitle: function (imageData) {\r\n            this._gallery.trigger('updateImageTitle', {\r\n                imageData: imageData\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Fired when clicked on cancel\r\n         * @private\r\n         */\r\n        _onCancel: function () {\r\n            this.close();\r\n        },\r\n\r\n        /**\r\n         * Fired when clicked on delete\r\n         * @private\r\n         */\r\n        _onDelete: function () {\r\n            var filename = this.element.find(this._videoImageFilenameselector).val();\r\n\r\n            this._removeImage(filename);\r\n            this.close();\r\n        },\r\n\r\n        /**\r\n         * @param {String} file\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _readPreviewLocal: function (file, callback) {\r\n            var fr = new FileReader;\r\n\r\n            if (!window.FileReader) {\r\n                return;\r\n            }\r\n\r\n            /**\r\n             * On load end\r\n             */\r\n            fr.onloadend = function () {\r\n                callback(fr.result);\r\n            };\r\n            fr.readAsDataURL(file);\r\n        },\r\n\r\n        /**\r\n         *  Image file input handler\r\n         * @private\r\n         */\r\n        _onImageInputChange: function () {\r\n            var jFile = this.element.find(this._videoPreviewInputSelector),\r\n                file = jFile[0],\r\n                val = jFile.val(),\r\n                prev = this._getPreviewImage(),\r\n                ext = '.' + val.split('.').pop();\r\n\r\n            if (!val) {\r\n                return;\r\n            }\r\n            ext = ext ? ext.toLowerCase() : '';\r\n\r\n            if (\r\n                ext.length < 2 ||\r\n                this._imageTypes.indexOf(ext.toLowerCase()) === -1 || !file.files || !file.files.length\r\n            ) {\r\n                prev.remove();\r\n                this._previewImage = null;\r\n                jFile.val('');\r\n\r\n                return;\r\n            } // end if\r\n            file = file.files[0];\r\n            this._tempPreviewImageData = null;\r\n            this._onPreview(null, file, true);\r\n        },\r\n\r\n        /**\r\n         * Change Preview\r\n         * @param {String} error\r\n         * @param {String} src\r\n         * @param {Boolean} local\r\n         * @private\r\n         */\r\n        _onPreview: function (error, src, local) {\r\n            var img, renderImage;\r\n\r\n            img = this._getPreviewImage();\r\n\r\n            /**\r\n             * Callback\r\n             * @param {String} source\r\n             */\r\n            renderImage = function (source) {\r\n                img.attr({\r\n                    'src': source\r\n                }).show();\r\n            };\r\n\r\n            if (error) {\r\n                return;\r\n            }\r\n\r\n            if (!local) {\r\n                renderImage(src);\r\n            } else {\r\n                this._readPreviewLocal(src, renderImage);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Return preview image imstance\r\n         * @returns {null}\r\n         * @private\r\n         */\r\n        _getPreviewImage: function () {\r\n\r\n            if (!this._previewImage) {\r\n                this._previewImage = $(document.createElement('img')).css({\r\n                    'width': '100%',\r\n                    'display': 'none',\r\n                    'src': ''\r\n                });\r\n                $(this._previewImage).insertAfter(this.element.find(this._videoPreviewImagePointer));\r\n                $(this._previewImage).attr('data-role', 'video_preview_image');\r\n            }\r\n\r\n            return this._previewImage;\r\n        },\r\n\r\n        /**\r\n         * Close slideout dialog\r\n         */\r\n        close: function () {\r\n            this.element.modal('closeModal');\r\n        },\r\n\r\n        /**\r\n         * Close dialog wrap\r\n         * @private\r\n         */\r\n        _onClose: function () {\r\n            var newVideoForm;\r\n\r\n            this._isEditPage = true;\r\n            this.imageData = null;\r\n\r\n            if (this._previewImage) {\r\n                this._previewImage.remove();\r\n                this._previewImage = null;\r\n            }\r\n            this._tempPreviewImageData = null;\r\n            this.element.trigger('reset');\r\n            newVideoForm = this.element.find(this._videoFormSelector);\r\n\r\n            $(newVideoForm).find('input[type=\"hidden\"][name!=\"form_key\"]').val('');\r\n            this._gallery.find(\r\n                'input[name*=\"' + this.element.find(this._itemIdSelector).val() + '\"]'\r\n            ).parent().removeClass('active');\r\n\r\n            try {\r\n                newVideoForm.validation('clearError');\r\n            } catch (e) {\r\n\r\n            }\r\n            newVideoForm.trigger('reset');\r\n        },\r\n\r\n        /**\r\n         * Find element by fileName\r\n         * @param {String} file\r\n         */\r\n        findElementId: function (file) {\r\n            var elem = this._gallery.find('.image.item').find('input[value=\"' + file + '\"]');\r\n\r\n            if (!elem.length) {\r\n                return null;\r\n            }\r\n\r\n            return $(elem).attr('name').replace('product[media_gallery][images][', '').replace('][file]', '');\r\n        },\r\n\r\n        /**\r\n         * Save image roles\r\n         * @param {Object} imageData\r\n         */\r\n        saveImageRoles: function (imageData) {\r\n            var data = imageData.file,\r\n                self = this,\r\n                containers;\r\n\r\n            if (data && data.length > 0) {\r\n                containers = this._gallery.find('.image-placeholder').siblings('input');\r\n                $.each(containers, function (i, el) {\r\n                    var start = el.name.indexOf('[') + 1,\r\n                        end = el.name.indexOf(']'),\r\n                        imageType = el.name.substring(start, end),\r\n                        imageCheckbox = self.element.find(\r\n                            self._videoFormSelector + ' input[value=\"' + imageType + '\"]'\r\n                        );\r\n\r\n                    self._changeRole(imageType, imageCheckbox.prop('checked'), imageData);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Change image role\r\n         * @param {String} imageType - role name\r\n         * @param {bool} isEnabled - role active status\r\n         * @param {Object} imageData - image data object\r\n         * @private\r\n         */\r\n        _changeRole: function (imageType, isEnabled, imageData) {\r\n            var needCheked = true;\r\n\r\n            if (!isEnabled) {\r\n                needCheked = this._gallery.find('input[name=\"product[' + imageType + ']\"]').val() === imageData.file;\r\n            }\r\n\r\n            if (!needCheked) {\r\n                return null;\r\n            }\r\n\r\n            this._gallery.trigger('setImageType', {\r\n                type: imageType,\r\n                imageData: isEnabled ? imageData : null\r\n            });\r\n        },\r\n\r\n        /**\r\n         * On open dialog\r\n         * @param {Object} e\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _onOpenDialog: function (e, imageData) {\r\n            var formFields, flagChecked, file,\r\n                modal = this.element.closest('.mage-new-video-dialog');\r\n\r\n            if (imageData['media_type'] === 'external-video') {\r\n                this.imageData = imageData;\r\n                modal.find('.video-create-button').hide();\r\n                modal.find('.video-delete-button').show();\r\n                modal.find('.video-edit').show();\r\n                modal.createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset');\r\n\r\n                formFields = modal.find(this._videoFormSelector).find('.edited-data');\r\n\r\n                $.each(formFields, function (i, field) {\r\n                    $(field).val(imageData[field.name]);\r\n                });\r\n\r\n                flagChecked = imageData.disabled > 0;\r\n                modal.find(this._videoDisableinputSelector).prop('checked', flagChecked);\r\n\r\n                file = modal.find('#file_name').val(imageData.file);\r\n\r\n                $.each(modal.find('.video_image_role'), function () {\r\n                    $(this).prop('checked', false).prop('disabled', false);\r\n                });\r\n\r\n                $.each(this._gallery.find('.image-placeholder').siblings('input:hidden'), function () {\r\n                    var start, end, imageRole;\r\n\r\n                    if ($(this).val() === file.val()) {\r\n                        start = this.name.indexOf('[') + 1;\r\n                        end = this.name.length - 1;\r\n                        imageRole = this.name.substring(start, end);\r\n                        modal.find('#new_video_form input[value=\"' + imageRole + '\"]').prop('checked', true);\r\n                    }\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Toggle buttons\r\n         */\r\n        toggleButtons: function () {\r\n            var self = this,\r\n                modal = this.element.closest('.mage-new-video-dialog');\r\n\r\n            modal.find('.video-placeholder, .add-video-button-container > button').click(function () {\r\n                modal.find('.video-create-button').show();\r\n                modal.find('.video-delete-button').hide();\r\n                modal.find('.video-edit').hide();\r\n                modal.createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset').updateInputFields({\r\n                    reset: true\r\n                }).updateInputFields('reset');\r\n            });\r\n            this._gallery.on('click', '.item.video-item', function () {\r\n                modal.find('.video-create-button').hide();\r\n                modal.find('.video-delete-button').show();\r\n                modal.find('.video-edit').show();\r\n                modal.find('.mage-new-video-dialog').createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset');\r\n            });\r\n            this._gallery.on('click', '.item.video-item:not(.removed)', function () {\r\n                var flagChecked,\r\n                    file,\r\n                    formFields = modal.find('.edited-data'),\r\n                    container = $(this);\r\n\r\n                $.each(formFields, function (i, field) {\r\n                    $(field).val(container.find('input[name*=\"' + field.name + '\"]').val());\r\n                });\r\n\r\n                flagChecked = container.find('input[name*=\"disabled\"]').val() > 0;\r\n                self._gallery.find(self._videoDisableinputSelector).prop('checked', flagChecked);\r\n\r\n                file = self._gallery.find('#file_name').val(container.find('input[name*=\"file\"]').val());\r\n\r\n                $.each(self._gallery.find('.video_image_role'), function () {\r\n                    $(this).prop('checked', false).prop('disabled', false);\r\n                });\r\n\r\n                $.each(self._gallery.find('.image-placeholder').siblings('input:hidden'), function () {\r\n                    var start, end, imageRole;\r\n\r\n                    if ($(this).val() !== file.val()) {\r\n                        return null;\r\n                    }\r\n\r\n                    start = this.name.indexOf('[') + 1;\r\n                    end = this.name.length - 1;\r\n                    imageRole = this.name.substring(start, end);\r\n                    self._gallery.find('input[value=\"' + imageRole + '\"]').prop('checked', true);\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    $('#group-fields-image-management > legend > span').text($.mage.__('Images and Videos'));\r\n\r\n    return $.mage.newVideoDialog;\r\n});\r\n","Magento_ProductVideo/js/video-modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'productGallery',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'mage/backend/tree-suggest',\r\n    'mage/backend/validation',\r\n    'newVideoDialog'\r\n], function ($, productGallery) {\r\n    'use strict';\r\n\r\n    $.widget('mage.productGallery', productGallery, {\r\n\r\n        /**\r\n         * Bind events\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {},\r\n                itemId;\r\n\r\n            this._super();\r\n\r\n            /**\r\n             * Add item_id value to opened modal\r\n             * @param {Object} event\r\n             */\r\n            events['click ' + this.options.imageSelector] = function (event) {\r\n                if (!$(event.currentTarget).is('.ui-sortable-helper')) {\r\n                    itemId = $(event.currentTarget).find('input')[0].name.match(/\\[([^\\]]*)\\]/g)[2];\r\n                    this.videoDialog.find('#item_id').val(itemId);\r\n                }\r\n            };\r\n            this._on(events);\r\n            this.element.prev().find('[data-role=\"add-video-button\"]').on('click', this.showModal.bind(this));\r\n            this.element.on('openDialog', '.gallery.ui-sortable', $.proxy(this._onOpenDialog, this));\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._super();\r\n            this.videoDialog = this.element.find('#new-video');\r\n            this.videoDialog.mage('newVideoDialog', this.videoDialog.data('modalInfo'));\r\n        },\r\n\r\n        /**\r\n         * Open dialog for external video\r\n         * @private\r\n         */\r\n        _onOpenDialog: function (e, imageData) {\r\n\r\n            if (imageData['media_type'] !== 'external-video') {\r\n                this._superApply(arguments);\r\n            } else {\r\n                this.showModal();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Fired on trigger \"openModal\"\r\n         */\r\n        showModal: function () {\r\n            this.videoDialog.modal('openModal');\r\n        }\r\n    });\r\n\r\n    return $.mage.productGallery;\r\n});\r\n","Magento_ReleaseNotification/js/modal/component.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal-component',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/translate'\r\n], function ($, Modal, alert, $t) {\r\n    'use strict';\r\n\r\n    return Modal.extend({\r\n        defaults: {\r\n            imports: {\r\n                logAction:  '${ $.provider }:data.logAction'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Error handler.\r\n         *\r\n         * @param {Object} xhr - request result.\r\n         */\r\n        onError: function (xhr) {\r\n            if (xhr.statusText === 'abort') {\r\n                return;\r\n            }\r\n\r\n            alert({\r\n                content: xhr.message || $t('An error occurred while logging process.')\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Log release notes show\r\n         */\r\n        logReleaseNotesShow: function () {\r\n            var self = this,\r\n                data = {\r\n                    'form_key': window.FORM_KEY\r\n                };\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: this.logAction,\r\n                data: data,\r\n                showLoader: true\r\n            }).done(function (xhr) {\r\n                if (xhr.error) {\r\n                    self.onError(xhr);\r\n                }\r\n            }).fail(this.onError);\r\n        },\r\n\r\n        /**\r\n         * Close release notes\r\n         */\r\n        closeReleaseNotes: function () {\r\n            this.logReleaseNotesShow();\r\n            this.closeModal();\r\n        }\r\n    });\r\n});\r\n","Magento_Review/js/rating.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('marketing.ratingControl', {\r\n        options: {\r\n            colorFilled: '#333',\r\n            colorUnfilled: '#CCCCCC',\r\n            colorHover: '#f30'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._labels = this.element.find('label');\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._labels.on({\r\n                click: $.proxy(function (e) {\r\n                    $(e.currentTarget).prev().prop('checked', true);\r\n                    this._updateRating();\r\n                }, this),\r\n\r\n                hover: $.proxy(function (e) {\r\n                    this._updateHover($(e.currentTarget), this.options.colorHover);\r\n                }, this),\r\n\r\n                mouseleave: $.proxy(function (e) {\r\n                    this._updateHover($(e.currentTarget), this.options.colorUnfilled);\r\n                }, this)\r\n            });\r\n\r\n            this._updateRating();\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery} elem\r\n         * @param {String} color\r\n         * @private\r\n         */\r\n        _updateHover: function (elem, color) {\r\n            elem.nextAll('label').addBack().filter(function () {\r\n                return !$(this).data('checked');\r\n            }).css('color', color);\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _updateRating: function () {\r\n            var checkedInputs = this.element.find('input[type=\"radio\"]:checked');\r\n\r\n            checkedInputs.nextAll('label').addBack().css('color', this.options.colorFilled).data('checked', true);\r\n            checkedInputs.prevAll('label').css('color', this.options.colorUnfilled).data('checked', false);\r\n        },\r\n\r\n        /**\r\n         * Remove rating when form reset\r\n         */\r\n        removeRating: function () {\r\n            var checkedInputs = this.element.find('input[type=\"radio\"]');\r\n\r\n            checkedInputs.nextAll('label').css('color', this.options.colorUnfilled).data('checked', false);\r\n        }\r\n    });\r\n\r\n});\r\n","Magento_Rule/conditions-data-normalizer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore'\r\n], function ($, _) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    var ConditionsDataNormalizer = function () {\r\n        this.patterns = {\r\n            validate: /^[a-z0-9_.-][a-z0-9_.-]*(?:\\[(?:\\d*|[a-z0-9_.-]+)\\])*$/i,\r\n            key: /[a-z0-9_.-]+|(?=\\[\\])/gi,\r\n            push: /^$/,\r\n            fixed: /^\\d+$/,\r\n            named: /^[a-z0-9_.-]+$/i\r\n        };\r\n    };\r\n\r\n    ConditionsDataNormalizer.prototype = {\r\n        /**\r\n         * Will convert an object:\r\n         * {\r\n         *   \"foo[bar][1][baz]\": 123,\r\n         *   \"foo[bar][1][blah]\": 321\r\n         *   \"foo[bar][1--1][ah]\": 456\r\n         * }\r\n         *\r\n         * to\r\n         * {\r\n         *   \"foo\": {\r\n         *     \"bar\": {\r\n         *       \"1\": {\r\n         *         \"baz\": 123,\r\n         *         \"blah\": 321\r\n         *       },\r\n         *       \"1--1\": {\r\n         *         \"ah\": 456\r\n         *       }\r\n         *     }\r\n         *   }\r\n         * }\r\n         */\r\n        normalize: function normalize(value) {\r\n            var el, _this = this;\r\n\r\n            this.pushes = {};\r\n            this.data = {};\r\n\r\n            _.each(value, function (e, i) {\r\n                el = {};\r\n                el[i] = e;\r\n\r\n                _this._addPair({\r\n                    name: i,\r\n                    value: e\r\n                });\r\n            });\r\n\r\n            return this.data;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} base\r\n         * @param {String} key\r\n         * @param {String} value\r\n         * @return {Object}\r\n         * @private\r\n         */\r\n        _build: function build(base, key, value) {\r\n            base[key] = value;\r\n\r\n            return base;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} root\r\n         * @param {String} value\r\n         * @return {*}\r\n         * @private\r\n         */\r\n        _makeObject: function makeObject(root, value) {\r\n            var keys = root.match(this.patterns.key),\r\n                k, idx; // nest, nest, ..., nest\r\n\r\n            while ((k = keys.pop()) !== undefined) {\r\n                // foo[]\r\n                if (this.patterns.push.test(k)) {\r\n                    idx = this._incrementPush(root.replace(/\\[\\]$/, ''));\r\n                    value = this._build([], idx, value);\r\n                } // foo[n]\r\n                else if (this.patterns.fixed.test(k)) {\r\n                    value = this._build({}, k, value);\r\n                } // foo; foo[bar]\r\n                else if (this.patterns.named.test(k)) {\r\n                    value = this._build({}, k, value);\r\n                }\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         * @param {String} key\r\n         * @return {Number}\r\n         * @private\r\n         */\r\n        _incrementPush: function incrementPush(key) {\r\n            if (this.pushes[key] === undefined) {\r\n                this.pushes[key] = 0;\r\n            }\r\n\r\n            return this.pushes[key]++;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} pair\r\n         * @return {Object}\r\n         * @private\r\n         */\r\n        _addPair: function addPair(pair) {\r\n            var obj = this._makeObject(pair.name, pair.value);\r\n\r\n            if (!this.patterns.validate.test(pair.name)) {\r\n                return this;\r\n            }\r\n\r\n            this.data = $.extend(true, this.data, obj);\r\n\r\n            return this;\r\n        }\r\n    };\r\n\r\n    return ConditionsDataNormalizer;\r\n});\r\n","Magento_Rule/rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/translate',\r\n    'prototype'\r\n], function (jQuery) {\r\n    'use strict';\r\n\r\n    var VarienRulesForm = new Class.create();\r\n\r\n    VarienRulesForm.prototype = {\r\n        initialize: function (parent, newChildUrl) {\r\n            this.parent = $(parent);\r\n            this.newChildUrl  = newChildUrl;\r\n            this.shownElement = null;\r\n            this.updateElement = null;\r\n            this.chooserSelectedItems = $H({});\r\n            this.readOnly = false;\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param');\r\n\r\n            for (var i = 0; i < elems.length; i++) {\r\n                this.initParam(elems[i]);\r\n            }\r\n        },\r\n\r\n        setReadonly: function (readonly) {\r\n            this.readOnly = readonly;\r\n            var elems = this.parent.getElementsByClassName('rule-param-remove');\r\n\r\n            for (var i = 0; i < elems.length; i++) {\r\n                var element = elems[i];\r\n\r\n                if (this.readOnly) {\r\n                    element.hide();\r\n                } else {\r\n                    element.show();\r\n                }\r\n            }\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param-new-child');\r\n\r\n            for (var i = 0; i < elems.length; i++) {\r\n                var element = elems[i];\r\n\r\n                if (this.readOnly) {\r\n                    element.hide();\r\n                } else {\r\n                    element.show();\r\n                }\r\n            }\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param');\r\n\r\n            for (var i = 0; i < elems.length; i++) {\r\n                var container = elems[i];\r\n                var label = Element.down(container, '.label');\r\n\r\n                if (label) {\r\n                    if (this.readOnly) {\r\n                        label.addClassName('label-disabled');\r\n                    } else {\r\n                        label.removeClassName('label-disabled');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        initParam: function (container) {\r\n            container.rulesObject = this;\r\n            var label = Element.down(container, '.label');\r\n\r\n            if (label) {\r\n                Event.observe(label, 'click', this.showParamInputField.bind(this, container));\r\n            }\r\n\r\n            var elem = Element.down(container, '.element');\r\n\r\n            if (elem) {\r\n                var trig = elem.down('.rule-chooser-trigger');\r\n\r\n                if (trig) {\r\n                    Event.observe(trig, 'click', this.toggleChooser.bind(this, container));\r\n                }\r\n\r\n                var apply = elem.down('.rule-param-apply');\r\n\r\n                if (apply) {\r\n                    Event.observe(apply, 'click', this.hideParamInputField.bind(this, container));\r\n                } else {\r\n                    elem = elem.down('.element-value-changer');\r\n                    elem.container = container;\r\n\r\n                    if (!elem.multiple) {\r\n                        Event.observe(elem, 'change', this.hideParamInputField.bind(this, container));\r\n\r\n                        this.changeVisibilityForValueRuleParam(elem);\r\n\r\n                    }\r\n                    Event.observe(elem, 'blur', this.hideParamInputField.bind(this, container));\r\n                }\r\n            }\r\n\r\n            var remove = Element.down(container, '.rule-param-remove');\r\n\r\n            if (remove) {\r\n                Event.observe(remove, 'click', this.removeRuleEntry.bind(this, container));\r\n            }\r\n        },\r\n\r\n        showChooserElement: function (chooser) {\r\n            this.chooserSelectedItems = $H({});\r\n\r\n            if (chooser.hasClassName('no-split')) {\r\n                this.chooserSelectedItems.set(this.updateElement.value, 1);\r\n            } else {\r\n                var values = this.updateElement.value.split(','),\r\n s = '';\r\n\r\n                for (var i = 0; i < values.length; i++) {\r\n                    s = values[i].strip();\r\n\r\n                    if (s != '') {\r\n                        this.chooserSelectedItems.set(s, 1);\r\n                    }\r\n                }\r\n            }\r\n            new Ajax.Request(chooser.getAttribute('url'), {\r\n                evalScripts: true,\r\n                parameters: {\r\n                    'form_key': FORM_KEY, 'selected[]': this.chooserSelectedItems.keys()\r\n                },\r\n                onSuccess: function (transport) {\r\n                    if (this._processSuccess(transport)) {\r\n                        jQuery(chooser).html(transport.responseText);\r\n                        this.showChooserLoaded(chooser, transport);\r\n                        jQuery(chooser).trigger('contentUpdated');\r\n                    }\r\n                }.bind(this),\r\n                onFailure: this._processFailure.bind(this)\r\n            });\r\n        },\r\n\r\n        showChooserLoaded: function (chooser, transport) {\r\n            chooser.style.display = 'block';\r\n        },\r\n\r\n        showChooser: function (container, event) {\r\n            var chooser = container.up('li');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser = chooser.down('.rule-chooser');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            this.showChooserElement(chooser);\r\n        },\r\n\r\n        hideChooser: function (container, event) {\r\n            var chooser = container.up('li');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser = chooser.down('.rule-chooser');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser.style.display = 'none';\r\n        },\r\n\r\n        toggleChooser: function (container, event) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            var chooser = container.up('li').down('.rule-chooser');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n\r\n            if (chooser.style.display == 'block') {\r\n                chooser.style.display = 'none';\r\n                this.cleanChooser(container, event);\r\n            } else {\r\n                this.showChooserElement(chooser);\r\n            }\r\n        },\r\n\r\n        cleanChooser: function (container, event) {\r\n            var chooser = container.up('li').down('.rule-chooser');\r\n\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser.innerHTML = '';\r\n        },\r\n\r\n        showParamInputField: function (container, event) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            if (this.shownElement) {\r\n                this.hideParamInputField(this.shownElement, event);\r\n            }\r\n\r\n            Element.addClassName(container, 'rule-param-edit');\r\n            var elemContainer = Element.down(container, '.element');\r\n\r\n            var elem = Element.down(elemContainer, 'input.input-text');\r\n\r\n            jQuery(elem).trigger('contentUpdated');\r\n\r\n            if (elem) {\r\n                elem.focus();\r\n\r\n                if (elem && elem.id && elem.id.match(/__value$/)) {\r\n                    this.updateElement = elem;\r\n                }\r\n\r\n            }\r\n\r\n            var elem = Element.down(elemContainer, '.element-value-changer');\r\n\r\n            if (elem) {\r\n                elem.focus();\r\n            }\r\n\r\n            this.shownElement = container;\r\n        },\r\n\r\n        hideParamInputField: function (container, event) {\r\n            Element.removeClassName(container, 'rule-param-edit');\r\n            var label = Element.down(container, '.label'),\r\n elem;\r\n\r\n            if (!container.hasClassName('rule-param-new-child')) {\r\n                elem = Element.down(container, '.element-value-changer');\r\n\r\n                if (elem && elem.options) {\r\n                    var selectedOptions = [];\r\n\r\n                    for (var i = 0; i < elem.options.length; i++) {\r\n                        if (elem.options[i].selected) {\r\n                            selectedOptions.push(elem.options[i].text);\r\n                        }\r\n                    }\r\n\r\n                    var str = selectedOptions.join(', ');\r\n\r\n                    label.innerHTML = str != '' ? str : '...';\r\n                }\r\n\r\n                this.changeVisibilityForValueRuleParam(elem);\r\n\r\n                elem = Element.down(container, 'input.input-text');\r\n\r\n                if (elem) {\r\n                    var str = elem.value.replace(/(^\\s+|\\s+$)/g, '');\r\n\r\n                    elem.value = str;\r\n\r\n                    if (str == '') {\r\n                        str = '...';\r\n                    } else if (str.length > 30) {\r\n                        str = str.substr(0, 30) + '...';\r\n                    }\r\n                    label.innerHTML = str.escapeHTML();\r\n                }\r\n            } else {\r\n                elem = container.down('.element-value-changer');\r\n\r\n                if (elem.value) {\r\n                    this.addRuleNewChild(elem);\r\n                }\r\n                elem.value = '';\r\n            }\r\n\r\n            if (elem && elem.id && elem.id.match(/__value$/)) {\r\n                this.hideChooser(container, event);\r\n                this.updateElement = null;\r\n            }\r\n\r\n            this.shownElement = null;\r\n        },\r\n\r\n        changeVisibilityForValueRuleParam: function(elem) {\r\n            var parsedElementId = elem.id.split('__');\r\n            if (parsedElementId[2] !== 'operator') {\r\n                return false;\r\n            }\r\n\r\n            var valueElement = jQuery('#' + parsedElementId[0] + '__' + parsedElementId[1] + '__value');\r\n\r\n            if(elem.value === '<=>') {\r\n                valueElement.closest('.rule-param').hide();\r\n            } else {\r\n                valueElement.closest('.rule-param').show();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        addRuleNewChild: function (elem) {\r\n            var parent_id = elem.id.replace(/^.*__(.*)__.*$/, '$1');\r\n            var children_ul_id = elem.id.replace(/__/g, ':').replace(/[^:]*$/, 'children').replace(/:/g, '__');\r\n            var children_ul = $(this.parent).select('#' + children_ul_id)[0];\r\n            var max_id = 0,\r\n i;\r\n            var children_inputs = Selector.findChildElements(children_ul, $A(['input.hidden']));\r\n\r\n            if (children_inputs.length) {\r\n                children_inputs.each(function (el) {\r\n                    if (el.id.match(/__type$/)) {\r\n                        i = 1 * el.id.replace(/^.*__.*?([0-9]+)__.*$/, '$1');\r\n                        max_id = i > max_id ? i : max_id;\r\n                    }\r\n                });\r\n            }\r\n            var new_id = parent_id + '--' + (max_id + 1);\r\n            var new_type = elem.value;\r\n            var new_elem = document.createElement('LI');\r\n\r\n            new_elem.className = 'rule-param-wait';\r\n            new_elem.innerHTML = jQuery.mage.__('This won\\'t take long . . .');\r\n            children_ul.insertBefore(new_elem, $(elem).up('li'));\r\n\r\n            new Ajax.Request(this.newChildUrl, {\r\n                evalScripts: true,\r\n                parameters: {\r\n                    form_key: FORM_KEY, type: new_type.replace('/', '-'), id: new_id\r\n                },\r\n                onComplete: this.onAddNewChildComplete.bind(this, new_elem),\r\n                onSuccess: function (transport) {\r\n                    if (this._processSuccess(transport)) {\r\n                        $(new_elem).update(transport.responseText);\r\n                    }\r\n                }.bind(this),\r\n                onFailure: this._processFailure.bind(this)\r\n            });\r\n        },\r\n\r\n        _processSuccess: function (transport) {\r\n            if (transport.responseText.isJSON()) {\r\n                var response = transport.responseText.evalJSON();\r\n\r\n                if (response.error) {\r\n                    alert(response.message);\r\n                }\r\n\r\n                if (response.ajaxExpired && response.ajaxRedirect) {\r\n                    setLocation(response.ajaxRedirect);\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        _processFailure: function (transport) {\r\n            location.href = BASE_URL;\r\n        },\r\n\r\n        onAddNewChildComplete: function (new_elem) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            $(new_elem).removeClassName('rule-param-wait');\r\n            var elems = new_elem.getElementsByClassName('rule-param');\r\n\r\n            for (var i = 0; i < elems.length; i++) {\r\n                this.initParam(elems[i]);\r\n            }\r\n        },\r\n\r\n        removeRuleEntry: function (container, event) {\r\n            var li = Element.up(container, 'li');\r\n\r\n            li.parentNode.removeChild(li);\r\n        },\r\n\r\n        chooserGridInit: function (grid) {\r\n            //grid.reloadParams = {'selected[]':this.chooserSelectedItems.keys()};\r\n        },\r\n\r\n        chooserGridRowInit: function (grid, row) {\r\n            if (!grid.reloadParams) {\r\n                grid.reloadParams = {\r\n                    'selected[]': this.chooserSelectedItems.keys()\r\n                };\r\n            }\r\n        },\r\n\r\n        chooserGridRowClick: function (grid, event) {\r\n            var trElement = Event.findElement(event, 'tr');\r\n            var isInput = Event.element(event).tagName == 'INPUT';\r\n\r\n            if (trElement) {\r\n                var checkbox = Element.select(trElement, 'input');\r\n\r\n                if (checkbox[0]) {\r\n                    var checked = isInput ? checkbox[0].checked : !checkbox[0].checked;\r\n\r\n                    grid.setCheckboxChecked(checkbox[0], checked);\r\n\r\n                }\r\n            }\r\n        },\r\n\r\n        chooserGridCheckboxCheck: function (grid, element, checked) {\r\n            if (checked) {\r\n                if (!element.up('th')) {\r\n                    this.chooserSelectedItems.set(element.value, 1);\r\n                }\r\n            } else {\r\n                this.chooserSelectedItems.unset(element.value);\r\n            }\r\n            grid.reloadParams = {\r\n                'selected[]': this.chooserSelectedItems.keys()\r\n            };\r\n            this.updateElement.value = this.chooserSelectedItems.keys().join(', ');\r\n        }\r\n    };\r\n\r\n    return VarienRulesForm;\r\n});\r\n","Magento_Sales/js/bootstrap/order-create-index.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    'Magento_Sales/order/create/giftmessage'\r\n]);\r\n","Magento_Sales/js/bootstrap/order-post-action.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    'Magento_Sales/order/view/post-wrapper'\r\n]);\r\n","Magento_Sales/js/grid/columns/multiselect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/multiselect'\r\n], function (Multiselect) {\r\n    'use strict';\r\n\r\n    return Multiselect.extend({\r\n        /**\r\n         * Prevent calling this.selectAll(); in parent\r\n         *\r\n         * @returns  {Object}\r\n         */\r\n        updateState: function () {\r\n            var selected = this.selected().length,\r\n                totalRecords = this.totalRecords();\r\n\r\n            if (totalRecords && selected === totalRecords && !this.preserveSelectionsOnFilter) {\r\n                return this;\r\n            }\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_Sales/order/giftoptions_tooltip.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'prototype'\r\n], function () {\r\n    'use strict';\r\n\r\n    var GiftOptionsTooltip = Class.create();\r\n\r\n    GiftOptionsTooltip.prototype = {\r\n        _tooltipLines: [],\r\n        _tooltipWindow: null,\r\n        _tooltipWindowContent: null,\r\n        _targetLinks: [],\r\n        _eventMouseOver: null,\r\n        _eventMouseOut: null,\r\n        _styleOptions: null,\r\n        _tooltipContentLoaderFunction: null,\r\n\r\n        /**\r\n         * Initialize tooltip object\r\n         */\r\n        initialize: function () {\r\n            var options = Object.extend({\r\n                'delta_x': 30,\r\n                'delta_y': 0,\r\n                zindex: 1000\r\n            });\r\n\r\n            this._styleOptions = options;\r\n            this._eventMouseOver = this.showTooltip.bindAsEventListener(this);\r\n            this._eventMouseOut = this.hideTooltip.bindAsEventListener(this);\r\n        },\r\n\r\n        /**\r\n         * Set gift options tooltip window\r\n         *\r\n         * @param {String} windowId\r\n         * @param {String} contentId\r\n         *\r\n         * @return boolean success\r\n         */\r\n        setTooltipWindow: function (windowId, contentId) {\r\n            if (!$(windowId) || !$(contentId)) {\r\n                return false;\r\n            }\r\n            this._tooltipWindow = $(windowId);\r\n            this._tooltipWindowContent = $(contentId);\r\n            $(document.body).insert({\r\n                bottom: this._tooltipWindow\r\n            });\r\n            this.hideTooltip();\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Add tooltip to specified link\r\n         *\r\n         * @param {String} linkId\r\n         * @param {String} itemId - identifier of the item related to link\r\n         *\r\n         * @return boolean success\r\n         */\r\n        addTargetLink: function (linkId, itemId) {\r\n            if ($(linkId)) {\r\n                this._targetLinks[linkId] = [];\r\n                this._targetLinks[linkId].object = $(linkId);\r\n                this._targetLinks[linkId].itemId = itemId;\r\n                this._registerEvents(this._targetLinks[linkId].object);\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Detach event listeners from target links when tooltip is destroyed\r\n         */\r\n        destroy: function () {\r\n            var linkId;\r\n\r\n            for (linkId in this._targetLinks) { //eslint-disable-line guard-for-in\r\n                Event.stopObserving(this._targetLinks[linkId].object, 'mouseover', this._eventMouseOver);\r\n                Event.stopObserving(this._targetLinks[linkId].object, 'mouseout', this._eventMouseOut);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *  Register event listeners\r\n         *\r\n         *  @param {HTMLElement} element\r\n         */\r\n        _registerEvents: function (element) {\r\n            Event.observe(element, 'mouseover', this._eventMouseOver);\r\n            Event.observe(element, 'mouseout', this._eventMouseOut);\r\n        },\r\n\r\n        /**\r\n         * Move tooltip to mouse position\r\n         *\r\n         * @param {Prototype.Event} event\r\n         */\r\n        _moveTooltip: function (event) {\r\n            var mouseX, mouseY;\r\n\r\n            Event.stop(event);\r\n            mouseX = Event.pointerX(event);\r\n            mouseY = Event.pointerY(event);\r\n\r\n            this.setStyles(mouseX, mouseY);\r\n        },\r\n\r\n        /**\r\n         * Show tooltip\r\n         *\r\n         * @param {Object} event\r\n         *\r\n         * @return boolean success\r\n         */\r\n        showTooltip: function (event) {\r\n            var link, itemId, tooltipContent;\r\n\r\n            Event.stop(event);\r\n\r\n            if (this._tooltipWindow) {\r\n                link = Event.element(event);\r\n                itemId = this._targetLinks[link.id].itemId;\r\n                tooltipContent = '';\r\n\r\n                if (Object.isFunction(this._tooltipContentLoaderFunction)) {\r\n                    tooltipContent = this._tooltipContentLoaderFunction(itemId);\r\n                }\r\n\r\n                if (tooltipContent != '') { //eslint-disable-line eqeqeq\r\n                    this._updateTooltipWindowContent(tooltipContent);\r\n                    this._moveTooltip(event);\r\n                    new Element.show(this._tooltipWindow);\r\n\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Set tooltip window styles\r\n         *\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         */\r\n        setStyles: function (x, y) {\r\n            Element.setStyle(this._tooltipWindow, {\r\n                position: 'absolute',\r\n                top: y + this._styleOptions['delta_y'] + 'px',\r\n                left: x + this._styleOptions['delta_x'] + 'px',\r\n                zindex: this._styleOptions.zindex\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Hide tooltip\r\n         */\r\n        hideTooltip: function () {\r\n            if (this._tooltipWindow) {\r\n                new Element.hide(this._tooltipWindow);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set gift options tooltip content loader function\r\n         * This function should accept at least one parameter that will serve as an item ID\r\n         *\r\n         * @param {Function} loaderFunction - loader function\r\n         */\r\n        setTooltipContentLoaderFunction: function (loaderFunction) {\r\n            this._tooltipContentLoaderFunction = loaderFunction;\r\n        },\r\n\r\n        /**\r\n         * Update tooltip window content\r\n         *\r\n         * @param {String} content\r\n         */\r\n        _updateTooltipWindowContent: function (content) {\r\n            this._tooltipWindowContent.update(content);\r\n        }\r\n    };\r\n\r\n    window.giftOptionsTooltip = new GiftOptionsTooltip();\r\n});\r\n","Magento_Sales/order/create/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global AdminOrder */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Sales/order/create/scripts'\r\n], function (jQuery) {\r\n    'use strict';\r\n\r\n    var $el = jQuery('#edit_form'),\r\n        config,\r\n        baseUrl,\r\n        order,\r\n        payment;\r\n\r\n    if (!$el.length || !$el.data('order-config')) {\r\n        return;\r\n    }\r\n\r\n    config = $el.data('order-config');\r\n    baseUrl = $el.data('load-base-url');\r\n\r\n    order = new AdminOrder(config);\r\n    order.setLoadBaseUrl(baseUrl);\r\n\r\n    payment = {\r\n        switchMethod: order.switchPaymentMethod.bind(order)\r\n    };\r\n\r\n    window.order = order;\r\n    window.payment = payment;\r\n});\r\n","Magento_Sales/order/create/giftmessage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/********************* GIFT OPTIONS POPUP ***********************/\r\n/********************* GIFT OPTIONS SET ***********************/\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/ui',\r\n    'mage/translate',\r\n    'mage/validation',\r\n    'prototype'\r\n], function (jQuery) {\r\n\r\n    window.giftMessagesController = {\r\n        toogleRequired: function (source, objects) {\r\n            if (!$(source).value.blank()) {\r\n                objects.each(function (item) {\r\n                    $(item).addClassName('required-entry');\r\n                    var label = findFieldLabel($(item));\r\n\r\n                    if (label) {\r\n                        var span = label.down('span');\r\n\r\n                        if (!span) {\r\n                            Element.insert(label, {\r\n                                bottom: '&nbsp;<span class=\"required\">*</span>'\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                objects.each(function (item) {\r\n                    if ($(source).formObj && $(source).formObj.validator) {\r\n                        $(source).formObj.validator.reset(item);\r\n                    }\r\n                    $(item).removeClassName('required-entry');\r\n                    var label = findFieldLabel($(item));\r\n\r\n                    if (label) {\r\n                        var span = label.down('span');\r\n\r\n                        if (span) {\r\n                            Element.remove(span);\r\n                        }\r\n                    }\r\n                    // Hide validation advices if exist\r\n                    if ($(item) && $(item).advices) {\r\n                        $(item).advices.each(function (pair) {\r\n                            if (pair.value != null) pair.value.hide();\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        toogleGiftMessage: function (container) {\r\n            if (!$(container).toogleGiftMessage) {\r\n                $(container).toogleGiftMessage = true;\r\n                $(this.getFieldId(container, 'edit')).show();\r\n                $(container).down('.action-link').addClassName('open');\r\n                $(container).down('.default-text').hide();\r\n                $(container).down('.close-text').show();\r\n            } else {\r\n                $(container).toogleGiftMessage = false;\r\n                $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\r\n                var form = jQuery('#' + this.getFieldId(container, 'form'));\r\n\r\n                jQuery('#' + this.getFieldId(container, 'form')).validate({\r\n                    errorClass: 'mage-error'\r\n                });\r\n\r\n                if (!form.valid()) {\r\n                    return false;\r\n                }\r\n\r\n                new Ajax.Request($(this.getFieldId(container, 'form')).action, {\r\n                    parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\r\n                    loaderArea: container,\r\n                    onComplete: function (transport) {\r\n\r\n                        $(container).down('.action-link').removeClassName('open');\r\n                        $(container).down('.default-text').show();\r\n                        $(container).down('.close-text').hide();\r\n                        $(this.getFieldId(container, 'edit')).hide();\r\n\r\n                        if (transport.responseText.match(/YES/g)) {\r\n                            $(container).down('.default-text').down('.edit').show();\r\n                            $(container).down('.default-text').down('.add').hide();\r\n                        } else {\r\n                            $(container).down('.default-text').down('.add').show();\r\n                            $(container).down('.default-text').down('.edit').hide();\r\n                        }\r\n\r\n                    }.bind(this)\r\n                });\r\n            }\r\n\r\n            return false;\r\n        },\r\n        saveGiftMessage: function (container) {\r\n            $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\r\n\r\n            var form = jQuery('#' + this.getFieldId(container, 'form'));\r\n\r\n            form.validate({\r\n                errorClass: 'mage-error'\r\n            });\r\n\r\n            if (!form.valid()) {\r\n                return;\r\n            }\r\n\r\n            new Ajax.Request($(this.getFieldId(container, 'form')).action, {\r\n                parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\r\n                loaderArea: container,\r\n                onSuccess: function (response) {\r\n                    var message = '<div class=\"messages\"><div class=\"message message-success success\">' +\r\n                        response.responseText +\r\n                        '<div data-ui-id=\"messages-message-success\"></div></div></div>';\r\n\r\n                    jQuery('#messages').html(message);\r\n                    jQuery(document).scrollTop(0);\r\n                }\r\n            });\r\n        },\r\n        getFieldId: function (container, name) {\r\n            return container + '_' + name;\r\n        }\r\n    };\r\n\r\n    function findFieldLabel(field) {\r\n        var tdField = $(field).up('td');\r\n\r\n        if (tdField) {\r\n            var tdLabel = tdField.previous('td');\r\n\r\n            if (tdLabel) {\r\n                var label = tdLabel.down('label');\r\n\r\n                if (label) {\r\n                    return label;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    window.findFieldLabel = findFieldLabel;\r\n\r\n    window.GiftOptionsPopup = Class.create();\r\n    GiftOptionsPopup.prototype = {\r\n        //giftOptionsWindowMask: null,\r\n        giftOptionsWindow: null,\r\n\r\n        initialize: function () {\r\n            $$('.action-link').each(function (el) {\r\n                Event.observe(el, 'click', this.showItemGiftOptions.bind(this));\r\n            }, this);\r\n\r\n            // Move gift options popup to start of body, because soon it will contain FORM tag that can break DOM layout if within other FORM\r\n            var oldPopupContainer = $('gift_options_configure');\r\n\r\n            if (oldPopupContainer) {\r\n                oldPopupContainer.remove();\r\n            }\r\n\r\n            var newPopupContainer = $('gift_options_configure_new');\r\n\r\n            $(document.body).insert({\r\n                top: newPopupContainer\r\n            });\r\n            newPopupContainer.id = 'gift_options_configure';\r\n\r\n            // Put controls container inside a FORM tag so we can use Validator\r\n            var form = new Element('form', {\r\n                action: '#', id: 'gift_options_configuration_form', method: 'post'\r\n            });\r\n            var formContents = $('gift_options_form_contents');\r\n\r\n            if (formContents) {\r\n                formContents.parentNode.appendChild(form);\r\n                form.appendChild(formContents);\r\n            }\r\n\r\n            this.giftOptionsWindow = $('gift_options_configure');\r\n\r\n            jQuery(this.giftOptionsWindow).dialog({\r\n                autoOpen:   false,\r\n                modal:      true,\r\n                resizable:  false,\r\n                dialogClass: 'gift-options-popup',\r\n                minWidth:   500,\r\n                width:      '75%',\r\n                position: {\r\n                    my: 'left+12.5% top',\r\n                    at: 'center top',\r\n                    of: 'body'\r\n                },\r\n                open: function () {\r\n                    jQuery(this).closest('.ui-dialog').addClass('ui-dialog-active');\r\n\r\n                    var topMargin = jQuery(this).closest('.ui-dialog').children('.ui-dialog-titlebar').outerHeight() + 30;\r\n\r\n                    jQuery(this).closest('.ui-dialog').css({\r\n                        'margin-top' : topMargin,\r\n                        'z-index': 1000\r\n                    });\r\n                    jQuery(this).closest('.ui-dialog').nextAll('.ui-widget-overlay').css('z-index', 999);\r\n                },\r\n                close: function () {\r\n                    jQuery(this).closest('.ui-dialog').removeClass('ui-dialog-active');\r\n                }\r\n            });\r\n        },\r\n\r\n        showItemGiftOptions: function (event) {\r\n            var element = Event.element(event).id;\r\n            var itemId = element.sub('gift_options_link_', '');\r\n\r\n            jQuery(this.giftOptionsWindow).dialog('open');\r\n\r\n            this.setTitle(itemId);\r\n\r\n            Event.observe($('gift_options_cancel_button'), 'click', this.onCloseButton.bind(this));\r\n            Event.observe($('gift_options_ok_button'), 'click', this.onOkButton.bind(this));\r\n            Event.stop(event);\r\n        },\r\n\r\n        setTitle: function (itemId) {\r\n            var productTitleElement = $('order_item_' + itemId + '_title');\r\n            var productTitle = '';\r\n\r\n            if (productTitleElement) {\r\n                productTitle = productTitleElement.innerHTML;\r\n            }\r\n            jQuery(this.giftOptionsWindow).dialog({\r\n                title: jQuery.mage.__('Gift Options for ') + productTitle\r\n            });\r\n        },\r\n\r\n        onOkButton: function () {\r\n            var giftOptionsForm = jQuery('#gift_options_configuration_form');\r\n\r\n            if (!giftOptionsForm.validate({\r\n                errorClass: 'mage-error'\r\n            }).valid()) {\r\n                return false;\r\n            }\r\n\r\n            if (typeof (giftOptionsForm[0].reset) === 'function') {\r\n                giftOptionsForm[0].reset();\r\n            }\r\n            this.closeWindow();\r\n\r\n            return true;\r\n        },\r\n\r\n        onCloseButton: function () {\r\n            this.closeWindow();\r\n        },\r\n\r\n        closeWindow: function () {\r\n            jQuery(this.giftOptionsWindow).dialog('close');\r\n        }\r\n    };\r\n\r\n    window.GiftMessageSet = Class.create();\r\n\r\n    GiftMessageSet.prototype = {\r\n        destPrefix: 'current_item_giftmessage_',\r\n        sourcePrefix: 'giftmessage_',\r\n        fields: ['sender', 'recipient', 'message'],\r\n        isObserved: false,\r\n        callback: null,\r\n\r\n        initialize: function () {\r\n            $$('.action-link').each(function (el) {\r\n                Event.observe(el, 'click', this.setData.bind(this));\r\n            }, this);\r\n        },\r\n\r\n        setData: function (event) {\r\n            var element = Event.element(event).id;\r\n\r\n            this.id = element.sub('gift_options_link_', '');\r\n\r\n            if ($('gift-message-form-data-' + this.id)) {\r\n                this.fields.each(function (el) {\r\n                    if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\r\n                        $(this.destPrefix + el).value = $(this.sourcePrefix + this.id + '_' + el).value;\r\n                    }\r\n                }, this);\r\n                $('gift_options_giftmessage').show();\r\n            } else if ($('gift_options_giftmessage')) {\r\n                $('gift_options_giftmessage').hide();\r\n            }\r\n\r\n            if (!this.isObserved) {\r\n                Event.observe('gift_options_ok_button', 'click', this.saveData.bind(this));\r\n                this.isObserved = true;\r\n            }\r\n        },\r\n\r\n        prepareSaveData: function () {\r\n            var hash = $H();\r\n\r\n            $$('div[id^=gift_options_data_]').each(function (el) {\r\n                var fields = el.select('input', 'select', 'textarea');\r\n                var data = Form.serializeElements(fields, true);\r\n\r\n                hash.update(data);\r\n            });\r\n\r\n            return hash;\r\n        },\r\n\r\n        setSaveCallback: function (callback) {\r\n            if (typeof callback == 'function') {\r\n                this.callback = callback;\r\n            }\r\n        },\r\n\r\n        saveData: function (event) {\r\n            this.fields.each(function (el) {\r\n                if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\r\n                    $(this.sourcePrefix + this.id + '_' + el).value = $(this.destPrefix + el).value;\r\n                }\r\n            }, this);\r\n\r\n            if ($(this.sourcePrefix + this.id + '_form')) {\r\n                $(this.sourcePrefix + this.id + '_form').request();\r\n            } else if (typeof order != 'undefined') {\r\n                var data = this.prepareSaveData();\r\n                var self = this;\r\n\r\n                jQuery.when(order.loadArea(['items'], true, data.toObject())).done(function () {\r\n                    if (self.callback !== null) {\r\n                        self.callback();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n});\r\n","Magento_Sales/order/create/scripts.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n define([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/template',\r\n    'text!Magento_Sales/templates/order/create/shipping/reload.html',\r\n    'text!Magento_Sales/templates/order/create/payment/reload.html',\r\n    'mage/translate',\r\n    'prototype',\r\n    'Magento_Catalog/catalog/product/composite/configure',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (jQuery, confirm, alert, template, shippingTemplate, paymentTemplate) {\r\n\r\n    window.AdminOrder = new Class.create();\r\n\r\n    AdminOrder.prototype = {\r\n        initialize: function (data) {\r\n            if (!data) data = {};\r\n            this.loadBaseUrl = false;\r\n            this.customerId = data.customer_id ? data.customer_id : false;\r\n            this.storeId = data.store_id ? data.store_id : false;\r\n            this.quoteId = data['quote_id'] ? data['quote_id'] : false;\r\n            this.currencyId = false;\r\n            this.currencySymbol = data.currency_symbol ? data.currency_symbol : '';\r\n            this.addresses = data.addresses ? data.addresses : $H({});\r\n            this.shippingAsBilling = data.shippingAsBilling ? data.shippingAsBilling : false;\r\n            this.gridProducts = $H({});\r\n            this.gridProductsGift = $H({});\r\n            this.billingAddressContainer = '';\r\n            this.shippingAddressContainer = '';\r\n            this.isShippingMethodReseted = data.shipping_method_reseted ? data.shipping_method_reseted : false;\r\n            this.overlayData = $H({});\r\n            this.giftMessageDataChanged = false;\r\n            this.productConfigureAddFields = {};\r\n            this.productPriceBase = {};\r\n            this.collectElementsValue = true;\r\n            this.isOnlyVirtualProduct = false;\r\n            this.excludedPaymentMethods = [];\r\n            this.summarizePrice = true;\r\n            this.selectAddressEvent = false;\r\n            this.shippingTemplate = template(shippingTemplate, {\r\n                data: {\r\n                    title: jQuery.mage.__('Shipping Method'),\r\n                    linkText: jQuery.mage.__('Get shipping methods and rates')\r\n                }\r\n            });\r\n            this.paymentTemplate = template(paymentTemplate, {\r\n                data: {\r\n                    title: jQuery.mage.__('Payment Method'),\r\n                    linkText: jQuery.mage.__('Get available payment methods')\r\n                }\r\n            });\r\n\r\n            jQuery.async('#order-items', (function () {\r\n                this.dataArea = new OrderFormArea('data', $(this.getAreaId('data')), this);\r\n                this.itemsArea = Object.extend(new OrderFormArea('items', $(this.getAreaId('items')), this), {\r\n                    addControlButton: function (button) {\r\n                        var controlButtonArea = $(this.node).select('.actions')[0];\r\n                        if (typeof controlButtonArea != 'undefined') {\r\n                            var buttons = controlButtonArea.childElements();\r\n                            for (var i = 0; i < buttons.length; i++) {\r\n                                if (buttons[i].innerHTML.include(button.getLabel())) {\r\n                                    return;\r\n                                }\r\n                            }\r\n                            button.insertIn(controlButtonArea, 'top');\r\n                        }\r\n                    }\r\n                });\r\n\r\n                var searchButtonId = 'add_products',\r\n                    searchButton = new ControlButton(jQuery.mage.__('Add Products'), searchButtonId),\r\n                    searchAreaId = this.getAreaId('search');\r\n                searchButton.onClick = function () {\r\n                    $(searchAreaId).show();\r\n                    var el = this;\r\n                    window.setTimeout(function () {\r\n                        el.remove();\r\n                    }, 10);\r\n                };\r\n\r\n                jQuery.async('#order-items .admin__page-section-title', (function () {\r\n                    this.dataArea.onLoad = this.dataArea.onLoad.wrap(function (proceed) {\r\n                        proceed();\r\n                        this._parent.itemsArea.setNode($(this._parent.getAreaId('items')));\r\n                        this._parent.itemsArea.onLoad();\r\n                    });\r\n\r\n                    this.itemsArea.onLoad = this.itemsArea.onLoad.wrap(function (proceed) {\r\n                        proceed();\r\n                        if ($(searchAreaId) && !jQuery('#' + searchAreaId).is(':visible') && !$(searchButtonId)) {\r\n                            this.addControlButton(searchButton);\r\n                        }\r\n                    });\r\n                    this.areasLoaded();\r\n                    this.itemsArea.onLoad();\r\n\r\n                }).bind(this));\r\n\r\n            }).bind(this));\r\n\r\n            jQuery('#edit_form')\r\n                .on('submitOrder', function () {\r\n                    jQuery(this).trigger('realOrder');\r\n                })\r\n                .on('realOrder', this._realSubmit.bind(this));\r\n        },\r\n\r\n        areasLoaded: function () {\r\n        },\r\n\r\n        itemsLoaded: function () {\r\n        },\r\n\r\n        dataLoaded: function () {\r\n            this.dataShow();\r\n        },\r\n\r\n        setLoadBaseUrl: function (url) {\r\n            this.loadBaseUrl = url;\r\n        },\r\n\r\n        setAddresses: function (addresses) {\r\n            this.addresses = addresses;\r\n        },\r\n\r\n        addExcludedPaymentMethod: function (method) {\r\n            this.excludedPaymentMethods.push(method);\r\n        },\r\n\r\n        setCustomerId: function (id) {\r\n            this.customerId = id;\r\n            this.loadArea('header', true);\r\n            $(this.getAreaId('header')).callback = 'setCustomerAfter';\r\n            $('back_order_top_button').hide();\r\n            $('reset_order_top_button').show();\r\n        },\r\n\r\n        setCustomerAfter: function () {\r\n            this.customerSelectorHide();\r\n            if (this.storeId) {\r\n                $(this.getAreaId('data')).callback = 'dataLoaded';\r\n                this.loadArea(['data'], true);\r\n            } else {\r\n                this.storeSelectorShow();\r\n            }\r\n        },\r\n\r\n        setStoreId: function (id) {\r\n            this.storeId = id;\r\n            this.storeSelectorHide();\r\n            this.sidebarShow();\r\n            //this.loadArea(['header', 'sidebar','data'], true);\r\n            this.dataShow();\r\n            this.loadArea(\r\n                ['header', 'data'],\r\n                true,\r\n                null,\r\n                function () {\r\n                    location.reload();\r\n                }\r\n            );\r\n        },\r\n\r\n        setCurrencyId: function (id) {\r\n            this.currencyId = id;\r\n            //this.loadArea(['sidebar', 'data'], true);\r\n            this.loadArea(['data'], true);\r\n        },\r\n\r\n        setCurrencySymbol: function (symbol) {\r\n            this.currencySymbol = symbol;\r\n        },\r\n\r\n        selectAddress: function (el, container) {\r\n            var id = el.value;\r\n            if (id.length == 0) {\r\n                id = '0';\r\n            }\r\n\r\n            this.selectAddressEvent = true;\r\n            if (this.addresses[id]) {\r\n                this.fillAddressFields(container, this.addresses[id]);\r\n            } else {\r\n                this.fillAddressFields(container, {});\r\n            }\r\n            this.selectAddressEvent = false;\r\n\r\n            let data = this.serializeData(container).toObject();\r\n            data[el.name] = id;\r\n\r\n            this.resetPaymentMethod();\r\n            if (this.isShippingField(container) && !this.isShippingMethodReseted) {\r\n                this.resetShippingMethod(data);\r\n            } else {\r\n                this.saveData(data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Checks if the field belongs to the shipping address.\r\n         *\r\n         * @param {String} fieldId\r\n         * @return {Boolean}\r\n         */\r\n        isShippingField: function (fieldId) {\r\n            if (this.shippingAsBilling) {\r\n                return fieldId.include('billing');\r\n            }\r\n\r\n            return fieldId.include('shipping');\r\n        },\r\n\r\n        /**\r\n         * Checks if the field belongs to the billing address.\r\n         *\r\n         * @param {String} fieldId\r\n         * @return {Boolean}\r\n         */\r\n        isBillingField: function (fieldId) {\r\n            return fieldId.include('billing');\r\n        },\r\n\r\n        /**\r\n         * Binds events on container form fields.\r\n         *\r\n         * @param {String} container\r\n         */\r\n        bindAddressFields: function (container) {\r\n            var fields = $(container).select('input', 'select', 'textarea'),\r\n                i;\r\n\r\n            for (i = 0; i < fields.length; i++) {\r\n                jQuery(fields[i]).change(this.changeAddressField.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Triggers on each form's element changes.\r\n         *\r\n         * @param {Event} event\r\n         */\r\n        changeAddressField: function (event) {\r\n            var field = Event.element(event),\r\n                re = /[^\\[]*\\[([^\\]]*)_address\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/,\r\n                matchRes = field.name.match(re),\r\n                type,\r\n                name,\r\n                data,\r\n                resetShipping = false;\r\n\r\n            if (!matchRes) {\r\n                return;\r\n            }\r\n\r\n            type = matchRes[1];\r\n            name = matchRes[2];\r\n\r\n            if (this.isBillingField(field.id)) {\r\n                data = this.serializeData(this.billingAddressContainer);\r\n            } else {\r\n                data = this.serializeData(this.shippingAddressContainer);\r\n            }\r\n            data = data.toObject();\r\n\r\n            if (type === 'billing' && this.shippingAsBilling) {\r\n                this.syncAddressField(this.shippingAddressContainer, field.name, field);\r\n                resetShipping = true;\r\n            }\r\n\r\n            if (type === 'shipping' && !this.shippingAsBilling) {\r\n                resetShipping = true;\r\n            }\r\n\r\n            if (resetShipping) {\r\n                data['reset_shipping'] = true;\r\n            }\r\n\r\n            if (name !== 'customer_address_id' && this.selectAddressEvent === false) {\r\n                if (this.shippingAsBilling) {\r\n                    $('order-shipping_address_customer_address_id').value = '';\r\n                }\r\n\r\n                $('order-' + type + '_address_customer_address_id').value = '';\r\n            }\r\n\r\n            data['order[' + type + '_address][customer_address_id]'] = null;\r\n            data['shipping_as_billing'] = +this.shippingAsBilling;\r\n\r\n            if (name === 'customer_address_id') {\r\n                data['order[' + type + '_address][customer_address_id]'] =\r\n                    $('order-' + type + '_address_customer_address_id').value;\r\n            }\r\n\r\n            if (name === 'country_id' && this.selectAddressEvent === false) {\r\n                $('order-' + type + '_address_customer_address_id').value = '';\r\n            }\r\n\r\n            this.resetPaymentMethod();\r\n\r\n            if (data['reset_shipping']) {\r\n                this.resetShippingMethod();\r\n            } else {\r\n                this.saveData(data);\r\n\r\n                if (name === 'country_id' || name === 'customer_address_id') {\r\n                    this.loadArea(['shipping_method', 'billing_method', 'totals', 'items'], true, data);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set address container form field value.\r\n         *\r\n         * @param {String} container - container ID\r\n         * @param {String} fieldName - form field name\r\n         * @param {*} fieldValue - form field value\r\n         */\r\n        syncAddressField: function (container, fieldName, fieldValue) {\r\n            var syncName;\r\n\r\n            if (this.isBillingField(fieldName)) {\r\n                syncName = fieldName.replace('billing', 'shipping');\r\n            }\r\n\r\n            $(container).select('[name=\"' + syncName + '\"]').each(function (element) {\r\n                if (~['input', 'textarea', 'select'].indexOf(element.tagName.toLowerCase())) {\r\n                    if (element.type === \"checkbox\") {\r\n                        element.checked = fieldValue.checked;\r\n                    } else {\r\n                        element.value = fieldValue.value;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        fillAddressFields: function (container, data) {\r\n            var regionIdElem = false;\r\n            var regionIdElemValue = false;\r\n\r\n            var fields = $(container).select('input', 'select', 'textarea');\r\n            var re = /[^\\[]*\\[[^\\]]*\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/;\r\n            for (var i = 0; i < fields.length; i++) {\r\n                // skip input type file @Security error code: 1000\r\n                if (fields[i].tagName.toLowerCase() == 'input' && fields[i].type.toLowerCase() == 'file') {\r\n                    continue;\r\n                }\r\n                var matchRes = fields[i].name.match(re);\r\n                if (matchRes === null) {\r\n                    continue;\r\n                }\r\n                var name = matchRes[1];\r\n                var index = matchRes[3];\r\n\r\n                if (index) {\r\n                    // multiply line\r\n                    if (data[name]) {\r\n                        var values = data[name].split(\"\\n\");\r\n                        fields[i].value = values[index] ? values[index] : '';\r\n                    } else {\r\n                        fields[i].value = '';\r\n                    }\r\n                } else if (fields[i].tagName.toLowerCase() == 'select' && fields[i].multiple) {\r\n                    // multiselect\r\n                    if (data[name]) {\r\n                        values = [''];\r\n                        if (Object.isString(data[name])) {\r\n                            values = data[name].split(',');\r\n                        } else if (Object.isArray(data[name])) {\r\n                            values = data[name];\r\n                        }\r\n                        fields[i].setValue(values);\r\n                    }\r\n                } else {\r\n                    fields[i].setValue(data[name] ? data[name] : '');\r\n                }\r\n\r\n                if (fields[i].changeUpdater) {\r\n                    fields[i].changeUpdater();\r\n                }\r\n\r\n                if (name == 'region' && data['region_id'] && !data['region']) {\r\n                    fields[i].value = data['region_id'];\r\n                }\r\n\r\n                jQuery(fields[i]).trigger('change');\r\n            }\r\n        },\r\n\r\n        disableShippingAddress: function (flag) {\r\n            this.shippingAsBilling = flag;\r\n            if ($('order-shipping_address_customer_address_id')) {\r\n                $('order-shipping_address_customer_address_id').disabled = flag;\r\n            }\r\n            if ($(this.shippingAddressContainer)) {\r\n                var dataFields = $(this.shippingAddressContainer).select('input', 'select', 'textarea');\r\n                for (var i = 0; i < dataFields.length; i++) {\r\n                    dataFields[i].disabled = flag;\r\n\r\n                    if (this.isOnlyVirtualProduct) {\r\n                        dataFields[i].setValue('');\r\n                    }\r\n                }\r\n                var buttons = $(this.shippingAddressContainer).select('button');\r\n                // Add corresponding class to buttons while disabling them\r\n                for (i = 0; i < buttons.length; i++) {\r\n                    buttons[i].disabled = flag;\r\n                    if (flag) {\r\n                        buttons[i].addClassName('disabled');\r\n                    } else {\r\n                        buttons[i].removeClassName('disabled');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Equals shipping and billing addresses.\r\n         *\r\n         * @param {Boolean} flag\r\n         */\r\n        setShippingAsBilling: function (flag) {\r\n            var data,\r\n                areasToLoad = ['billing_method', 'shipping_address', 'shipping_method', 'totals', 'giftmessage'];\r\n\r\n            this.disableShippingAddress(flag);\r\n            data = this.serializeData(flag ? this.billingAddressContainer : this.shippingAddressContainer);\r\n            data = data.toObject();\r\n            data['shipping_as_billing'] = flag ? 1 : 0;\r\n            data['reset_shipping'] = 1;\r\n            // set customer_address_id to null for shipping address in order to treat it as new from backend\r\n            // Checkbox(Same As Billing Address) uncheck event\r\n            data['order[shipping_address][customer_address_id]'] = null;\r\n            this.loadArea(areasToLoad, true, data);\r\n        },\r\n\r\n        /**\r\n         * Replace shipping method area.\r\n         */\r\n        resetShippingMethod: function () {\r\n            if (!this.isOnlyVirtualProduct) {\r\n                $(this.getAreaId('shipping_method')).update(this.shippingTemplate);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Replace payment method area.\r\n         */\r\n        resetPaymentMethod: function () {\r\n            $(this.getAreaId('billing_method')).update(this.paymentTemplate);\r\n        },\r\n\r\n        /**\r\n         * Loads shipping options according to address data.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        loadShippingRates: function () {\r\n            var addressContainer = this.shippingAsBilling ?\r\n                'billingAddressContainer' :\r\n                'shippingAddressContainer',\r\n                data = this.serializeData(this[addressContainer]).toObject();\r\n\r\n            data['collect_shipping_rates'] = 1;\r\n            this.isShippingMethodReseted = false;\r\n            this.loadArea(['shipping_method', 'totals'], true, data);\r\n\r\n            return false;\r\n        },\r\n\r\n        setShippingMethod: function (method) {\r\n            var data = {};\r\n\r\n            data['order[shipping_method]'] = method;\r\n            this.loadArea([\r\n                'shipping_method',\r\n                'totals',\r\n                'billing_method'\r\n            ], true, data);\r\n        },\r\n\r\n        /**\r\n         * Updates available payment\r\n         * methods list according to order data.\r\n         *\r\n         * @return boolean\r\n         */\r\n        loadPaymentMethods: function () {\r\n            var data = this.serializeData(this.billingAddressContainer).toObject();\r\n\r\n            this.loadArea(['billing_method', 'totals'], true, data);\r\n\r\n            return false;\r\n        },\r\n\r\n        switchPaymentMethod: function(method){\r\n            if (this.paymentMethod !== method) {\r\n                jQuery('#edit_form')\r\n                    .off('submitOrder')\r\n                    .on('submitOrder', function(){\r\n                        jQuery(this).trigger('realOrder');\r\n                    });\r\n            }\r\n            jQuery('#edit_form').trigger('changePaymentMethod', [method]);\r\n            this.setPaymentMethod(method);\r\n            var data = {};\r\n            data['order[payment_method]'] = method;\r\n            this.loadArea(['card_validation'], true, data);\r\n        },\r\n\r\n        setPaymentMethod: function (method) {\r\n            if (this.paymentMethod && $('payment_form_' + this.paymentMethod)) {\r\n                var form = 'payment_form_' + this.paymentMethod;\r\n                [form + '_before', form, form + '_after'].each(function (el) {\r\n                    var block = $(el);\r\n                    if (block) {\r\n                        block.hide();\r\n                        block.select('input', 'select', 'textarea').each(function (field) {\r\n                            field.disabled = true;\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (!this.paymentMethod || method) {\r\n                $('order-billing_method_form').select('input', 'select', 'textarea').each(function (elem) {\r\n                    if (elem.type != 'radio') elem.disabled = true;\r\n                })\r\n            }\r\n\r\n            if ($('payment_form_' + method)) {\r\n                jQuery('#' + this.getAreaId('billing_method')).trigger('contentUpdated');\r\n                this.paymentMethod = method;\r\n                var form = 'payment_form_' + method;\r\n                [form + '_before', form, form + '_after'].each(function (el) {\r\n                    var block = $(el);\r\n                    if (block) {\r\n                        block.show();\r\n                        block.select('input', 'select', 'textarea').each(function (field) {\r\n                            field.disabled = false;\r\n                            if (!el.include('_before') && !el.include('_after') && !field.bindChange) {\r\n                                field.bindChange = true;\r\n                                field.paymentContainer = form;\r\n                                field.method = method;\r\n                                field.observe('change', this.changePaymentData.bind(this))\r\n                            }\r\n                        }, this);\r\n                    }\r\n                }, this);\r\n            }\r\n        },\r\n\r\n        changePaymentData: function (event) {\r\n            var elem = Event.element(event);\r\n            if (elem && elem.method) {\r\n                var data = this.getPaymentData(elem.method);\r\n                if (data) {\r\n                    this.loadArea(['card_validation'], true, data);\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n\r\n        getPaymentData: function (currentMethod) {\r\n            if (typeof (currentMethod) == 'undefined') {\r\n                if (this.paymentMethod) {\r\n                    currentMethod = this.paymentMethod;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n            if (this.isPaymentValidationAvailable() == false) {\r\n                return false;\r\n            }\r\n            var data = {};\r\n            var fields = $('payment_form_' + currentMethod).select('input', 'select');\r\n            for (var i = 0; i < fields.length; i++) {\r\n                data[fields[i].name] = fields[i].getValue();\r\n            }\r\n            if ((typeof data['payment[cc_type]']) != 'undefined' && (!data['payment[cc_type]'] || !data['payment[cc_number]'])) {\r\n                return false;\r\n            }\r\n            return data;\r\n        },\r\n\r\n        applyCoupon: function (code) {\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {\r\n                'order[coupon][code]': code,\r\n                'order[coupon][append]': code,\r\n                reset_shipping: true\r\n            });\r\n            this.orderItemChanged = false;\r\n            jQuery('html, body').animate({\r\n                scrollTop: 0\r\n            });\r\n        },\r\n\r\n        removeCoupon: function (code) {\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {\r\n                'order[coupon][code]': '',\r\n                'order[coupon][remove]': code,\r\n                reset_shipping: true\r\n            });\r\n            this.orderItemChanged = false;\r\n            jQuery('html, body').animate({\r\n                scrollTop: 0\r\n            });\r\n        },\r\n\r\n        addProduct: function (id) {\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {\r\n                add_product: id,\r\n                reset_shipping: true\r\n            });\r\n        },\r\n\r\n        removeQuoteItem: function (id) {\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true,\r\n                {remove_item: id, from: 'quote', reset_shipping: true});\r\n        },\r\n\r\n        moveQuoteItem: function (id, to) {\r\n            this.loadArea(['sidebar_' + to, 'items', 'shipping_method', 'totals', 'billing_method'], this.getAreaId('items'),\r\n                {move_item: id, to: to, reset_shipping: true});\r\n        },\r\n\r\n        productGridShow: function (buttonElement) {\r\n            this.productGridShowButton = buttonElement;\r\n            Element.hide(buttonElement);\r\n            this.showArea('search');\r\n        },\r\n\r\n        productGridRowInit: function (grid, row) {\r\n            var checkbox = $(row).select('.checkbox')[0];\r\n            var inputs = $(row).select('.input-text');\r\n            if (checkbox && inputs.length > 0) {\r\n                checkbox.inputElements = inputs;\r\n                for (var i = 0; i < inputs.length; i++) {\r\n                    var input = inputs[i];\r\n                    input.checkboxElement = checkbox;\r\n\r\n                    var product = this.gridProducts.get(checkbox.value);\r\n                    if (product) {\r\n                        var defaultValue = product[input.name];\r\n                        if (defaultValue) {\r\n                            if (input.name == 'giftmessage') {\r\n                                input.checked = true;\r\n                            } else {\r\n                                input.value = defaultValue;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    input.disabled = !checkbox.checked || input.hasClassName('input-inactive');\r\n\r\n                    Event.observe(input, 'keyup', this.productGridRowInputChange.bind(this));\r\n                    Event.observe(input, 'change', this.productGridRowInputChange.bind(this));\r\n                }\r\n            }\r\n        },\r\n\r\n        productGridRowInputChange: function (event) {\r\n            var element = Event.element(event);\r\n            if (element && element.checkboxElement && element.checkboxElement.checked) {\r\n                if (element.name != 'giftmessage' || element.checked) {\r\n                    this.gridProducts.get(element.checkboxElement.value)[element.name] = element.value;\r\n                } else if (element.name == 'giftmessage' && this.gridProducts.get(element.checkboxElement.value)[element.name]) {\r\n                    delete (this.gridProducts.get(element.checkboxElement.value)[element.name]);\r\n                }\r\n            }\r\n        },\r\n\r\n        productGridRowClick: function (grid, event) {\r\n            var trElement = Event.findElement(event, 'tr');\r\n            var qtyElement = trElement.select('input[name=\"qty\"]')[0];\r\n            var eventElement = Event.element(event);\r\n\r\n            if (eventElement.tagName === 'LABEL'\r\n                && trElement.querySelector('#' + eventElement.htmlFor)\r\n                && trElement.querySelector('#' + eventElement.htmlFor).type === 'checkbox'\r\n            ) {\r\n                event.stopPropagation();\r\n                trElement.querySelector('#' + eventElement.htmlFor).trigger('click');\r\n                return;\r\n            }\r\n\r\n            var isInputCheckbox = (eventElement.tagName === 'INPUT' && eventElement.type === 'checkbox');\r\n            var isInputQty = grid.targetElement && grid.targetElement.tagName === 'INPUT' && grid.targetElement.name === 'qty';\r\n            if (trElement && !isInputQty) {\r\n                var checkbox = Element.select(trElement, 'input[type=\"checkbox\"]')[0];\r\n                var confLink = Element.select(trElement, 'a')[0];\r\n                var priceColl = Element.select(trElement, '.price')[0];\r\n                if (checkbox) {\r\n                    // processing non composite product\r\n                    if (confLink.readAttribute('disabled')) {\r\n                        var checked = isInputCheckbox ? checkbox.checked : !checkbox.checked;\r\n                        grid.setCheckboxChecked(checkbox, checked);\r\n                        // processing composite product\r\n                    } else if (isInputCheckbox && !checkbox.checked) {\r\n                        grid.setCheckboxChecked(checkbox, false);\r\n                        // processing composite product\r\n                    } else if (!isInputCheckbox || (isInputCheckbox && checkbox.checked)) {\r\n                        var listType = confLink.readAttribute('list_type');\r\n                        var productId = confLink.readAttribute('product_id');\r\n                        if (typeof this.productPriceBase[productId] == 'undefined') {\r\n                            var priceBase = priceColl.innerHTML.match(/.*?([\\d,]+\\.?\\d*)/);\r\n                            if (!priceBase) {\r\n                                this.productPriceBase[productId] = 0;\r\n                            } else {\r\n                                this.productPriceBase[productId] = parseFloat(priceBase[1].replace(/,/g, ''));\r\n                            }\r\n                        }\r\n                        productConfigure.setConfirmCallback(listType, function () {\r\n                            // sync qty of popup and qty of grid\r\n                            var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\r\n                            if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\r\n                                qtyElement.value = confirmedCurrentQty.value;\r\n                            }\r\n                            // calc and set product price\r\n                            var productPrice = this._calcProductPrice();\r\n                            if (this._isSummarizePrice()) {\r\n                                productPrice += this.productPriceBase[productId];\r\n                            }\r\n                            productPrice = parseFloat(Math.round(productPrice + \"e+2\") + \"e-2\");\r\n                            priceColl.innerHTML = this.currencySymbol + productPrice.toFixed(2);\r\n                            // and set checkbox checked\r\n                            grid.setCheckboxChecked(checkbox, true);\r\n                        }.bind(this));\r\n                        productConfigure.setCancelCallback(listType, function () {\r\n                            if (!$(productConfigure.confirmedCurrentId) || !$(productConfigure.confirmedCurrentId).innerHTML) {\r\n                                grid.setCheckboxChecked(checkbox, false);\r\n                            }\r\n                        });\r\n                        productConfigure.setShowWindowCallback(listType, function () {\r\n                            // sync qty of grid and qty of popup\r\n                            var formCurrentQty = productConfigure.getCurrentFormQtyElement();\r\n                            if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\r\n                                formCurrentQty.value = qtyElement.value;\r\n                            }\r\n                        }.bind(this));\r\n                        productConfigure.showItemConfiguration(listType, productId);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is need to summarize price\r\n         */\r\n        _isSummarizePrice: function (elm) {\r\n            if (elm && elm.hasAttribute('summarizePrice')) {\r\n                this.summarizePrice = parseInt(elm.readAttribute('summarizePrice'));\r\n            }\r\n            return this.summarizePrice;\r\n        },\r\n        /**\r\n         * Calc product price through its options\r\n         */\r\n        _calcProductPrice: function () {\r\n            var productPrice = 0;\r\n            var getPriceFields = function (elms) {\r\n                var productPrice = 0;\r\n                var getPrice = function (elm) {\r\n                    var optQty = 1;\r\n                    if (elm.hasAttribute('qtyId')) {\r\n                        if (!$(elm.getAttribute('qtyId')).value) {\r\n                            return 0;\r\n                        } else {\r\n                            optQty = parseFloat($(elm.getAttribute('qtyId')).value);\r\n                        }\r\n                    }\r\n                    if (elm.hasAttribute('price') && !elm.disabled) {\r\n                        return parseFloat(elm.readAttribute('price')) * optQty;\r\n                    }\r\n                    return 0;\r\n                };\r\n                for (var i = 0; i < elms.length; i++) {\r\n                    if (elms[i].type == 'select-one' || elms[i].type == 'select-multiple') {\r\n                        for (var ii = 0; ii < elms[i].options.length; ii++) {\r\n                            if (elms[i].options[ii].selected) {\r\n                                if (this._isSummarizePrice(elms[i].options[ii])) {\r\n                                    productPrice += getPrice(elms[i].options[ii]);\r\n                                } else {\r\n                                    productPrice = getPrice(elms[i].options[ii]);\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (((elms[i].type == 'checkbox' || elms[i].type == 'radio') && elms[i].checked)\r\n                        || ((elms[i].type == 'file' || elms[i].type == 'text' || elms[i].type == 'textarea' || elms[i].type == 'hidden')\r\n                            && Form.Element.getValue(elms[i]))\r\n                    ) {\r\n                        if (this._isSummarizePrice(elms[i])) {\r\n                            productPrice += getPrice(elms[i]);\r\n                        } else {\r\n                            productPrice = getPrice(elms[i]);\r\n                        }\r\n                    }\r\n                }\r\n                return productPrice;\r\n            }.bind(this);\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('input'));\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('select'));\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('textarea'));\r\n            return productPrice;\r\n        },\r\n\r\n        productGridCheckboxCheck: function (grid, element, checked) {\r\n            if (checked) {\r\n                if (element.inputElements) {\r\n                    this.gridProducts.set(element.value, {});\r\n                    var product = this.gridProducts.get(element.value);\r\n                    for (var i = 0; i < element.inputElements.length; i++) {\r\n                        var input = element.inputElements[i];\r\n                        if (!input.hasClassName('input-inactive')) {\r\n                            input.disabled = false;\r\n                            if (input.name == 'qty' && !input.value) {\r\n                                input.value = 1;\r\n                            }\r\n                        }\r\n\r\n                        if (input.checked || input.name != 'giftmessage') {\r\n                            product[input.name] = input.value;\r\n                        } else if (product[input.name]) {\r\n                            delete (product[input.name]);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (element.inputElements) {\r\n                    for (var i = 0; i < element.inputElements.length; i++) {\r\n                        element.inputElements[i].disabled = true;\r\n                    }\r\n                }\r\n                this.gridProducts.unset(element.value);\r\n            }\r\n            grid.reloadParams = {'products[]': this.gridProducts.keys()};\r\n        },\r\n\r\n        productGridFilterKeyPress: function (grid, event) {\r\n            var returnKey = parseInt(Event.KEY_RETURN || 13, 10);\r\n\r\n            if (event.keyCode === returnKey) {\r\n                if (typeof event.stopPropagation === 'function') {\r\n                    event.stopPropagation();\r\n                }\r\n\r\n                if (typeof event.preventDefault === 'function') {\r\n                    event.preventDefault();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Submit configured products to quote\r\n         */\r\n        productGridAddSelected: function () {\r\n            if (this.productGridShowButton) Element.show(this.productGridShowButton);\r\n            var area = ['search', 'items', 'shipping_method', 'totals', 'giftmessage', 'billing_method'];\r\n            // prepare additional fields and filtered items of products\r\n            var fieldsPrepare = {};\r\n            var itemsFilter = [];\r\n            var products = this.gridProducts.toObject();\r\n            for (var productId in products) {\r\n                itemsFilter.push(productId);\r\n                var paramKey = 'item[' + productId + ']';\r\n                for (var productParamKey in products[productId]) {\r\n                    paramKey += '[' + productParamKey + ']';\r\n                    fieldsPrepare[paramKey] = products[productId][productParamKey];\r\n                }\r\n            }\r\n            this.productConfigureSubmit('product_to_add', area, fieldsPrepare, itemsFilter);\r\n            productConfigure.clean('quote_items');\r\n            this.hideArea('search');\r\n            this.gridProducts = $H({});\r\n        },\r\n\r\n        selectCustomer: function (grid, event) {\r\n            var element = Event.findElement(event, 'tr');\r\n            if (element.title) {\r\n                this.setCustomerId(element.title);\r\n            }\r\n        },\r\n\r\n        customerSelectorHide: function () {\r\n            this.hideArea('customer-selector');\r\n        },\r\n\r\n        customerSelectorShow: function () {\r\n            this.showArea('customer-selector');\r\n        },\r\n\r\n        storeSelectorHide: function () {\r\n            this.hideArea('store-selector');\r\n        },\r\n\r\n        storeSelectorShow: function () {\r\n            this.showArea('store-selector');\r\n        },\r\n\r\n        dataHide: function () {\r\n            this.hideArea('data');\r\n        },\r\n\r\n        dataShow: function () {\r\n            if ($('submit_order_top_button')) {\r\n                $('submit_order_top_button').show();\r\n            }\r\n            this.showArea('data');\r\n        },\r\n\r\n        clearShoppingCart: function (confirmMessage) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: confirmMessage,\r\n                actions: {\r\n                    confirm: function () {\r\n                        self.collectElementsValue = false;\r\n                        order.sidebarApplyChanges({'sidebar[empty_customer_cart]': 1});\r\n                        self.collectElementsValue = true;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        sidebarApplyChanges: function (auxiliaryParams) {\r\n            if ($(this.getAreaId('sidebar'))) {\r\n                var data = {};\r\n                if (this.collectElementsValue) {\r\n                    var elems = $(this.getAreaId('sidebar')).select('input');\r\n                    for (var i = 0; i < elems.length; i++) {\r\n                        if (elems[i].getValue()) {\r\n                            data[elems[i].name] = elems[i].getValue();\r\n                        }\r\n                    }\r\n                }\r\n                if (auxiliaryParams instanceof Object) {\r\n                    for (var paramName in auxiliaryParams) {\r\n                        data[paramName] = String(auxiliaryParams[paramName]);\r\n                    }\r\n                }\r\n                data.reset_shipping = true;\r\n                this.loadArea(['sidebar', 'items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'], true, data);\r\n            }\r\n        },\r\n\r\n        sidebarHide: function () {\r\n            if (this.storeId === false && $('page:left') && $('page:container')) {\r\n                $('page:left').hide();\r\n                $('page:container').removeClassName('container');\r\n                $('page:container').addClassName('container-collapsed');\r\n            }\r\n        },\r\n\r\n        sidebarShow: function () {\r\n            if ($('page:left') && $('page:container')) {\r\n                $('page:left').show();\r\n                $('page:container').removeClassName('container-collapsed');\r\n                $('page:container').addClassName('container');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show configuration of product and add handlers on submit form\r\n         *\r\n         * @param productId\r\n         */\r\n        sidebarConfigureProduct: function (listType, productId, itemId) {\r\n            // create additional fields\r\n            var params = {},\r\n                isWishlist = !!itemId;\r\n            params.reset_shipping = true;\r\n            params.add_product = productId;\r\n            this.prepareParams(params);\r\n            for (var i in params) {\r\n                if (params[i] === null) {\r\n                    unset(params[i]);\r\n                } else if (typeof (params[i]) == 'boolean') {\r\n                    params[i] = params[i] ? 1 : 0;\r\n                }\r\n            }\r\n            var fields = [];\r\n            for (var name in params) {\r\n                fields.push(new Element('input', {type: 'hidden', name: name, value: params[name]}));\r\n            }\r\n            // add additional fields before triggered submit\r\n            productConfigure.setBeforeSubmitCallback(listType, function () {\r\n                productConfigure.addFields(fields);\r\n            }.bind(this));\r\n            // response handler\r\n            productConfigure.setOnLoadIFrameCallback(listType, function (response) {\r\n                var areas = ['items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'];\r\n\r\n                if (!response.ok) {\r\n                    return;\r\n                }\r\n                if (isWishlist) {\r\n                    this.removeSidebarItem(itemId, 'wishlist').done(function () {\r\n                        this.loadArea(areas, true);\r\n                    }.bind(this));\r\n                } else {\r\n                    this.loadArea(areas, true);\r\n                }\r\n            }.bind(this));\r\n            // show item configuration\r\n            itemId = itemId ? itemId : productId;\r\n            productConfigure.showItemConfiguration(listType, itemId);\r\n            return false;\r\n        },\r\n\r\n        removeSidebarItem: function (id, from) {\r\n            return this.loadArea(['sidebar_' + from], 'sidebar_data_' + from, {\r\n                remove_item: id,\r\n                from: from\r\n            });\r\n        },\r\n\r\n        itemsUpdate: function () {\r\n            var area = ['sidebar', 'items', 'shipping_method', 'billing_method', 'totals', 'giftmessage'];\r\n            // prepare additional fields\r\n            var fieldsPrepare = {update_items: 1};\r\n            var info = $('order-items_grid').select('input', 'select', 'textarea');\r\n            for (var i = 0; i < info.length; i++) {\r\n                if (!info[i].disabled && (info[i].type != 'checkbox' || info[i].checked)) {\r\n                    fieldsPrepare[info[i].name] = info[i].getValue();\r\n                }\r\n            }\r\n            fieldsPrepare = Object.extend(fieldsPrepare, this.productConfigureAddFields);\r\n            this.productConfigureSubmit('quote_items', area, fieldsPrepare);\r\n            this.orderItemChanged = false;\r\n        },\r\n\r\n        itemsOnchangeBind: function () {\r\n            var elems = $('order-items_grid').select('input', 'select', 'textarea');\r\n            for (var i = 0; i < elems.length; i++) {\r\n                if (!elems[i].bindOnchange) {\r\n                    elems[i].bindOnchange = true;\r\n                    elems[i].observe('change', this.itemChange.bind(this))\r\n                }\r\n            }\r\n        },\r\n\r\n        itemChange: function (event) {\r\n            this.giftmessageOnItemChange(event);\r\n            this.orderItemChanged = true;\r\n        },\r\n\r\n        /**\r\n         * Submit batch of configured products\r\n         *\r\n         * @param listType\r\n         * @param area\r\n         * @param fieldsPrepare\r\n         * @param itemsFilter\r\n         */\r\n        productConfigureSubmit: function (listType, area, fieldsPrepare, itemsFilter) {\r\n            // prepare loading areas and build url\r\n            area = this.prepareArea(area);\r\n            this.loadingAreas = area;\r\n            var url = this.loadBaseUrl + 'block/' + area + '?isAjax=true';\r\n\r\n            // prepare additional fields\r\n            fieldsPrepare = this.prepareParams(fieldsPrepare);\r\n            fieldsPrepare.reset_shipping = 1;\r\n            fieldsPrepare.json = 1;\r\n\r\n            // create fields\r\n            var fields = [];\r\n            for (var name in fieldsPrepare) {\r\n                fields.push(new Element('input', {type: 'hidden', name: name, value: fieldsPrepare[name]}));\r\n            }\r\n            productConfigure.addFields(fields);\r\n\r\n            // filter items\r\n            if (itemsFilter) {\r\n                productConfigure.addItemsFilter(listType, itemsFilter);\r\n            }\r\n\r\n            // prepare and do submit\r\n            productConfigure.addListType(listType, {urlSubmit: url});\r\n            productConfigure.setOnLoadIFrameCallback(listType, function (response) {\r\n                this.loadAreaResponseHandler(response);\r\n            }.bind(this));\r\n            productConfigure.submit(listType);\r\n            // clean\r\n            this.productConfigureAddFields = {};\r\n        },\r\n\r\n        /**\r\n         * Show configuration of quote item\r\n         *\r\n         * @param itemId\r\n         */\r\n        showQuoteItemConfiguration: function (itemId) {\r\n            var listType = 'quote_items';\r\n            var qtyElement = $('order-items_grid').select('input[name=\"item\\[' + itemId + '\\]\\[qty\\]\"]')[0];\r\n            productConfigure.setConfirmCallback(listType, function () {\r\n                // sync qty of popup and qty of grid\r\n                var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\r\n                if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\r\n                    qtyElement.value = confirmedCurrentQty.value;\r\n                }\r\n                this.productConfigureAddFields['item[' + itemId + '][configured]'] = 1;\r\n                this.itemsUpdate();\r\n\r\n            }.bind(this));\r\n            productConfigure.setShowWindowCallback(listType, function () {\r\n                // sync qty of grid and qty of popup\r\n                var formCurrentQty = productConfigure.getCurrentFormQtyElement();\r\n                if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\r\n                    formCurrentQty.value = qtyElement.value;\r\n                }\r\n            }.bind(this));\r\n            productConfigure.showItemConfiguration(listType, itemId);\r\n        },\r\n\r\n        accountFieldsBind: function (container) {\r\n            if ($(container)) {\r\n                var fields = $(container).select('input', 'select', 'textarea');\r\n                for (var i = 0; i < fields.length; i++) {\r\n                    if (fields[i].id == 'group_id') {\r\n                        fields[i].observe('change', this.accountGroupChange.bind(this))\r\n                    } else {\r\n                        fields[i].observe('change', this.accountFieldChange.bind(this))\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        accountGroupChange: function () {\r\n            this.loadArea(['data'], true, this.serializeData('order-form_account').toObject());\r\n        },\r\n\r\n        accountFieldChange: function () {\r\n            this.saveData(this.serializeData('order-form_account'));\r\n        },\r\n\r\n        commentFieldsBind: function (container) {\r\n            if ($(container)) {\r\n                var fields = $(container).select('input', 'textarea');\r\n                for (var i = 0; i < fields.length; i++)\r\n                    fields[i].observe('change', this.commentFieldChange.bind(this))\r\n            }\r\n        },\r\n\r\n        commentFieldChange: function () {\r\n            this.saveData(this.serializeData('order-comment'));\r\n        },\r\n\r\n        giftmessageFieldsBind: function (container) {\r\n            if ($(container)) {\r\n                var fields = $(container).select('input', 'textarea');\r\n                for (var i = 0; i < fields.length; i++)\r\n                    fields[i].observe('change', this.giftmessageFieldChange.bind(this))\r\n            }\r\n        },\r\n\r\n        giftmessageFieldChange: function () {\r\n            this.giftMessageDataChanged = true;\r\n        },\r\n\r\n        giftmessageOnItemChange: function (event) {\r\n            var element = Event.element(event);\r\n            if (element.name.indexOf(\"giftmessage\") != -1 && element.type == \"checkbox\" && !element.checked) {\r\n                var messages = $(\"order-giftmessage\").select('textarea');\r\n                var name;\r\n                for (var i = 0; i < messages.length; i++) {\r\n                    name = messages[i].id.split(\"_\");\r\n                    if (name.length < 2) continue;\r\n                    if (element.name.indexOf(\"[\" + name[1] + \"]\") != -1 && messages[i].value != \"\") {\r\n                        alert({\r\n                            content: \"First, clean the Message field in Gift Message form\"\r\n                        });\r\n                        element.checked = true;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        loadArea: function (area, indicator, params, callback) {\r\n            var deferred = new jQuery.Deferred();\r\n            var url = this.loadBaseUrl;\r\n            if (area) {\r\n                area = this.prepareArea(area);\r\n                url += 'block/' + area;\r\n            }\r\n            if (indicator === true) indicator = 'html-body';\r\n            params = this.prepareParams(params);\r\n            params.json = true;\r\n            if (!this.loadingAreas) this.loadingAreas = [];\r\n            if (indicator) {\r\n                this.loadingAreas = area;\r\n                new Ajax.Request(url, {\r\n                    parameters: params,\r\n                    loaderArea: indicator,\r\n                    onSuccess: function (transport) {\r\n                        var response = transport.responseText.evalJSON();\r\n                        this.loadAreaResponseHandler(response);\r\n                        if (callback instanceof Function) {\r\n                            callback();\r\n                        }\r\n                        deferred.resolve();\r\n                    }.bind(this)\r\n                });\r\n            } else {\r\n                new Ajax.Request(url, {\r\n                    parameters: params,\r\n                    loaderArea: indicator,\r\n                    onSuccess: function (transport) {\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n            }\r\n            if (typeof productConfigure != 'undefined' && area instanceof Array && area.indexOf('items') != -1) {\r\n                productConfigure.clean('quote_items');\r\n            }\r\n            return deferred.promise();\r\n        },\r\n\r\n        loadAreaResponseHandler: function (response) {\r\n            if (response.error) {\r\n                alert({\r\n                    content: response.message\r\n                });\r\n            }\r\n            if (response.ajaxExpired && response.ajaxRedirect) {\r\n                setLocation(response.ajaxRedirect);\r\n            }\r\n            if (!this.loadingAreas) {\r\n                this.loadingAreas = [];\r\n            }\r\n            if (typeof this.loadingAreas == 'string') {\r\n                this.loadingAreas = [this.loadingAreas];\r\n            }\r\n            if (this.loadingAreas.indexOf('message') == -1) {\r\n                this.loadingAreas.push('message');\r\n            }\r\n            if (response.header) {\r\n                jQuery('.page-actions-inner').attr('data-title', response.header);\r\n            }\r\n\r\n            for (var i = 0; i < this.loadingAreas.length; i++) {\r\n                var id = this.loadingAreas[i];\r\n                if ($(this.getAreaId(id))) {\r\n                    if ((id in response) && id !== 'message' || response[id]) {\r\n                        $(this.getAreaId(id)).update(response[id]);\r\n                    }\r\n                    if ($(this.getAreaId(id)).callback) {\r\n                        this[$(this.getAreaId(id)).callback]();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        prepareArea: function (area) {\r\n            if (this.giftMessageDataChanged) {\r\n                return area.without('giftmessage');\r\n            }\r\n            return area;\r\n        },\r\n\r\n        saveData: function (data) {\r\n            this.loadArea(false, false, data);\r\n        },\r\n\r\n        showArea: function (area) {\r\n            var id = this.getAreaId(area);\r\n            if ($(id)) {\r\n                $(id).show();\r\n                this.areaOverlay();\r\n            }\r\n        },\r\n\r\n        hideArea: function (area) {\r\n            var id = this.getAreaId(area);\r\n            if ($(id)) {\r\n                $(id).hide();\r\n                this.areaOverlay();\r\n            }\r\n        },\r\n\r\n        areaOverlay: function () {\r\n            $H(order.overlayData).each(function (e) {\r\n                e.value.fx();\r\n            });\r\n        },\r\n\r\n        getAreaId: function (area) {\r\n            return 'order-' + area;\r\n        },\r\n\r\n        prepareParams: function (params) {\r\n            if (!params) {\r\n                params = {};\r\n            }\r\n            if (!params.customer_id) {\r\n                params.customer_id = this.customerId;\r\n            }\r\n            if (!params.store_id) {\r\n                params.store_id = this.storeId;\r\n            }\r\n            if (!params.currency_id) {\r\n                params.currency_id = this.currencyId;\r\n            }\r\n            if (!params.form_key) {\r\n                params.form_key = FORM_KEY;\r\n            }\r\n\r\n            if (this.isPaymentValidationAvailable()) {\r\n                var data = this.serializeData('order-billing_method');\r\n                if (data) {\r\n                    data.each(function (value) {\r\n                        params[value[0]] = value[1];\r\n                    });\r\n                }\r\n            } else {\r\n                params['payment[method]'] = this.paymentMethod;\r\n            }\r\n            return params;\r\n        },\r\n\r\n        /**\r\n         * Prevent from sending credit card information to server for some payment methods\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        isPaymentValidationAvailable: function () {\r\n            return ((typeof this.paymentMethod) == 'undefined'\r\n                || this.excludedPaymentMethods.indexOf(this.paymentMethod) == -1);\r\n        },\r\n\r\n        /**\r\n         * Serializes container form elements data.\r\n         *\r\n         * @param {String} container\r\n         * @return {Object}\r\n         */\r\n        serializeData: function (container) {\r\n            var fields = $(container).select('input', 'select', 'textarea'),\r\n                data = Form.serializeElements(fields, true);\r\n\r\n            return $H(data);\r\n        },\r\n\r\n        toggleCustomPrice: function (checkbox, elemId, tierBlock) {\r\n            if (checkbox.checked) {\r\n                $(elemId).disabled = false;\r\n                $(elemId).show();\r\n                if ($(tierBlock)) $(tierBlock).hide();\r\n            } else {\r\n                $(elemId).disabled = true;\r\n                $(elemId).hide();\r\n                if ($(tierBlock)) $(tierBlock).show();\r\n            }\r\n        },\r\n\r\n        submit: function () {\r\n            var $editForm = jQuery('#edit_form'),\r\n                beforeSubmitOrderEvent;\r\n\r\n            if ($editForm.valid()) {\r\n                $editForm.trigger('processStart');\r\n                beforeSubmitOrderEvent = jQuery.Event('beforeSubmitOrder');\r\n                $editForm.trigger(beforeSubmitOrderEvent);\r\n                if (beforeSubmitOrderEvent.result !== false) {\r\n                    $editForm.trigger('submitOrder');\r\n                }\r\n            }\r\n        },\r\n\r\n        _realSubmit: function () {\r\n            var disableAndSave = function () {\r\n                disableElements('save');\r\n                jQuery('#edit_form').on('invalid-form.validate', function () {\r\n                    enableElements('save');\r\n                    jQuery('#edit_form').trigger('processStop');\r\n                    jQuery('#edit_form').off('invalid-form.validate');\r\n                });\r\n                jQuery('#edit_form').triggerHandler('save');\r\n            }\r\n            if (this.orderItemChanged) {\r\n                var self = this;\r\n\r\n                jQuery('#edit_form').trigger('processStop');\r\n\r\n                confirm({\r\n                    content: jQuery.mage.__('You have item changes'),\r\n                    actions: {\r\n                        confirm: function () {\r\n                            jQuery('#edit_form').trigger('processStart');\r\n                            disableAndSave();\r\n                        },\r\n                        cancel: function () {\r\n                            self.itemsUpdate();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                disableAndSave();\r\n            }\r\n        },\r\n\r\n        overlay: function (elId, show, observe) {\r\n            if (typeof (show) == 'undefined') {\r\n                show = true;\r\n            }\r\n\r\n            var orderObj = this;\r\n            var obj = this.overlayData.get(elId);\r\n            if (!obj) {\r\n                obj = {\r\n                    show: show,\r\n                    el: elId,\r\n                    order: orderObj,\r\n                    fx: function (event) {\r\n                        this.order.processOverlay(this.el, this.show);\r\n                    }\r\n                };\r\n                obj.bfx = obj.fx.bindAsEventListener(obj);\r\n                this.overlayData.set(elId, obj);\r\n            } else {\r\n                obj.show = show;\r\n                Event.stopObserving(window, 'resize', obj.bfx);\r\n            }\r\n\r\n            Event.observe(window, 'resize', obj.bfx);\r\n\r\n            this.processOverlay(elId, show);\r\n        },\r\n\r\n        processOverlay: function (elId, show) {\r\n            var el = $(elId);\r\n\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var parentEl = el.up(1);\r\n            if (show) {\r\n                parentEl.removeClassName('ignore-validate');\r\n            } else {\r\n                parentEl.addClassName('ignore-validate');\r\n            }\r\n\r\n            if (Prototype.Browser.IE) {\r\n                parentEl.select('select').each(function (elem) {\r\n                    if (show) {\r\n                        elem.needShowOnSuccess = false;\r\n                        elem.style.visibility = '';\r\n                    } else {\r\n                        elem.style.visibility = 'hidden';\r\n                        elem.needShowOnSuccess = true;\r\n                    }\r\n                });\r\n            }\r\n\r\n            parentEl.setStyle({position: 'relative'});\r\n            el.setStyle({\r\n                display: show ? 'none' : ''\r\n            });\r\n        },\r\n\r\n        validateVat: function (parameters) {\r\n            var params = {\r\n                country: $(parameters.countryElementId).value,\r\n                vat: $(parameters.vatElementId).value\r\n            };\r\n\r\n            if (this.storeId !== false) {\r\n                params.store_id = this.storeId;\r\n            }\r\n\r\n            var currentCustomerGroupId = $(parameters.groupIdHtmlId)\r\n                ? $(parameters.groupIdHtmlId).value : '';\r\n\r\n            new Ajax.Request(parameters.validateUrl, {\r\n                parameters: params,\r\n                onSuccess: function (response) {\r\n                    var message = '';\r\n                    var groupActionRequired = null;\r\n                    try {\r\n                        response = response.responseText.evalJSON();\r\n\r\n                        if (null === response.group) {\r\n                            if (true === response.valid) {\r\n                                message = parameters.vatValidMessage;\r\n                            } else if (true === response.success) {\r\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\r\n                            } else {\r\n                                message = parameters.vatValidationFailedMessage;\r\n                            }\r\n                        } else {\r\n                            if (true === response.valid) {\r\n                                message = parameters.vatValidAndGroupValidMessage;\r\n                                if (0 === response.group) {\r\n                                    message = parameters.vatValidAndGroupInvalidMessage;\r\n                                    groupActionRequired = 'inform';\r\n                                } else if (currentCustomerGroupId != response.group) {\r\n                                    message = parameters.vatValidAndGroupChangeMessage;\r\n                                    groupActionRequired = 'change';\r\n                                }\r\n                            } else if (response.success) {\r\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\r\n                                groupActionRequired = 'inform';\r\n                            } else {\r\n                                message = parameters.vatValidationFailedMessage;\r\n                                groupActionRequired = 'inform';\r\n                            }\r\n                        }\r\n                    } catch (e) {\r\n                        message = parameters.vatValidationFailedMessage;\r\n                    }\r\n                    if (null === groupActionRequired) {\r\n                        alert({\r\n                            content: message\r\n                        });\r\n                    } else {\r\n                        this.processCustomerGroupChange(\r\n                            parameters.groupIdHtmlId,\r\n                            message,\r\n                            parameters.vatCustomerGroupMessage,\r\n                            parameters.vatGroupErrorMessage,\r\n                            response.group,\r\n                            groupActionRequired\r\n                        );\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        },\r\n\r\n        processCustomerGroupChange: function (groupIdHtmlId, message, customerGroupMessage, errorMessage, groupId, action) {\r\n            var groupMessage = '';\r\n            try {\r\n                var currentCustomerGroupId = $(groupIdHtmlId).value;\r\n                var currentCustomerGroupTitle =\r\n                    $$('#' + groupIdHtmlId + ' > option[value=' + currentCustomerGroupId + ']')[0].text;\r\n                var customerGroupOption = $$('#' + groupIdHtmlId + ' > option[value=' + groupId + ']')[0];\r\n                groupMessage = customerGroupMessage.replace(/%s/, customerGroupOption.text);\r\n            } catch (e) {\r\n                groupMessage = errorMessage;\r\n                if (action === 'change') {\r\n                    message = '';\r\n                    action = 'inform';\r\n                }\r\n            }\r\n\r\n            if (action === 'change') {\r\n                var confirmText = message.replace(/%s/, customerGroupOption.text);\r\n                confirmText = confirmText.replace(/%s/, currentCustomerGroupTitle);\r\n                confirm({\r\n                    content: confirmText,\r\n                    actions: {\r\n                        confirm: function() {\r\n                            $$('#' + groupIdHtmlId + ' option').each(function (o) {\r\n                                o.selected = o.readAttribute('value') == groupId;\r\n                            });\r\n                            this.accountGroupChange();\r\n                        }.bind(this)\r\n                    }\r\n                })\r\n            } else if (action === 'inform') {\r\n                alert({\r\n                    content: message + '\\n' + groupMessage\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    window.OrderFormArea = Class.create();\r\n    OrderFormArea.prototype = {\r\n        _name: null,\r\n        _node: null,\r\n        _parent: null,\r\n        _callbackName: null,\r\n\r\n        initialize: function (name, node, parent) {\r\n            if (!node)\r\n                return;\r\n            this._name = name;\r\n            this._parent = parent;\r\n            this._callbackName = node.callback;\r\n            if (typeof this._callbackName == 'undefined') {\r\n                this._callbackName = name + 'Loaded';\r\n                node.callback = this._callbackName;\r\n            }\r\n            parent[this._callbackName] = parent[this._callbackName].wrap((function (proceed) {\r\n                proceed();\r\n                this.onLoad();\r\n            }).bind(this));\r\n\r\n            this.setNode(node);\r\n        },\r\n\r\n        setNode: function (node) {\r\n            if (!node.callback) {\r\n                node.callback = this._callbackName;\r\n            }\r\n            this.node = node;\r\n        },\r\n\r\n        onLoad: function () {\r\n        }\r\n    };\r\n\r\n    window.ControlButton = Class.create();\r\n\r\n    ControlButton.prototype = {\r\n        _label: '',\r\n        _node: null,\r\n\r\n        initialize: function (label, id) {\r\n            this._label = label;\r\n            this._node = new Element('button', {\r\n                'class': 'action-secondary action-add',\r\n                'type': 'button'\r\n            });\r\n            if (typeof id !== 'undefined') {\r\n                this._node.setAttribute('id', id)\r\n            }\r\n        },\r\n\r\n        onClick: function () {\r\n        },\r\n\r\n        insertIn: function (element, position) {\r\n            var node = Object.extend(this._node),\r\n                content = {};\r\n            node.observe('click', this.onClick);\r\n            node.update('<span>' + this._label + '</span>');\r\n            content[position] = node;\r\n            Element.insert(element, content);\r\n        },\r\n\r\n        getLabel: function () {\r\n            return this._label;\r\n        }\r\n    };\r\n});\r\n","Magento_Sales/order/edit/message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderEditDialog', {\r\n        options: {\r\n            url:     null,\r\n            message: null,\r\n            modal:  null\r\n        },\r\n\r\n        /**\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            this._prepareDialog();\r\n        },\r\n\r\n        /**\r\n         * Show modal\r\n         */\r\n        showDialog: function () {\r\n            this.options.dialog.html(this.options.message).modal('openModal');\r\n        },\r\n\r\n        /**\r\n         * Redirect to edit page\r\n         */\r\n        redirect: function () {\r\n            window.location = this.options.url;\r\n        },\r\n\r\n        /**\r\n         * Prepare modal\r\n         * @protected\r\n         */\r\n        _prepareDialog: function () {\r\n            var self = this;\r\n\r\n            this.options.dialog = $('<div class=\"ui-dialog-content ui-widget-content\"></div>').modal({\r\n                type: 'popup',\r\n                modalClass: 'edit-order-popup',\r\n                title: $.mage.__('Edit Order'),\r\n                buttons: [{\r\n                    text: $.mage.__('Ok'),\r\n                    'class': 'action-primary',\r\n\r\n                    /** @inheritdoc */\r\n                    click: function () {\r\n                        self.redirect();\r\n                    }\r\n                }]\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.orderEditDialog;\r\n});\r\n","Magento_Sales/order/edit/address/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Currently Magento App stores both  region_id and region (as text) values.\r\n     * To prevent missing region (as text) we need to copy it in hidden field.\r\n     * @param {Array} config\r\n     * @param {String} element\r\n     */\r\n    return function (config, element) {\r\n        var form = $(element),\r\n            regionId = form.find('#region_id'),\r\n\r\n            /**\r\n             * Set region callback\r\n             */\r\n            setRegion = function () {\r\n                form.find('#region').val(regionId.filter(':visible').find(':selected').text());\r\n            };\r\n\r\n        if (regionId.is('visible')) {\r\n            setRegion();\r\n        }\r\n\r\n        regionId.on('change', setRegion);\r\n        form.find('#country_id').on('change', setRegion);\r\n    };\r\n});\r\n","Magento_Sales/order/view/post-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @returns {jQuery}\r\n     */\r\n    function getForm(url) {\r\n        return $('<form>', {\r\n            'action': url,\r\n            'method': 'POST'\r\n        }).append($('<input>', {\r\n            'name': 'form_key',\r\n            'value': window.FORM_KEY,\r\n            'type': 'hidden'\r\n        }));\r\n    }\r\n\r\n    $(document).on('click', '#order-view-cancel-button', function () {\r\n        var msg = $.mage.__('Are you sure you want to cancel this order?'),\r\n            url = $('#order-view-cancel-button').data('url');\r\n\r\n        confirm({\r\n            'content': msg,\r\n            'actions': {\r\n\r\n                /**\r\n                 * 'Confirm' action handler.\r\n                 */\r\n                confirm: function () {\r\n                    getForm(url).appendTo('body').trigger('submit');\r\n                }\r\n            }\r\n        });\r\n\r\n        return false;\r\n    });\r\n\r\n    $(document).on('click', '#order-view-hold-button', function () {\r\n        var url = $('#order-view-hold-button').data('url');\r\n\r\n        getForm(url).appendTo('body').trigger('submit');\r\n    });\r\n\r\n    $(document).on('click', '#order-view-unhold-button', function () {\r\n        var url = $('#order-view-unhold-button').data('url');\r\n\r\n        getForm(url).appendTo('body').trigger('submit');\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/apply_to_shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox-toggle-notice'\r\n], function (Checkbox) {\r\n    'use strict';\r\n\r\n    return Checkbox.extend({\r\n        defaults: {\r\n            imports: {\r\n                toggleDisabled: '${ $.parentName }.simple_action:value'\r\n            },\r\n            noticePerSimpleAction: {},\r\n            selectedSimpleAction: ''\r\n        },\r\n\r\n        /**\r\n         * Toggle element disabled state according to simple action value.\r\n         *\r\n         * @param {String} action\r\n         */\r\n        toggleDisabled: function (action) {\r\n            switch (action) {\r\n                default:\r\n                    this.disabled(false);\r\n            }\r\n\r\n            if (this.disabled()) {\r\n                this.checked(false);\r\n            }\r\n            this.selectedSimpleAction = action;\r\n            this.chooseNotice();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        chooseNotice: function () {\r\n            var checkedNoticeNumber = Number(this.checked());\r\n\r\n            if (checkedNoticeNumber === 1 && this.noticePerSimpleAction.hasOwnProperty(this.selectedSimpleAction)) {\r\n                this.notice = this.noticePerSimpleAction[this.selectedSimpleAction];\r\n            } else {\r\n                this._super();\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, uiRegistry, select) {\r\n    'use strict';\r\n\r\n    return select.extend({\r\n\r\n        /**\r\n         * Hide fields on coupon tab\r\n         */\r\n        onUpdate: function () {\r\n\r\n            /* eslint-disable eqeqeq */\r\n            if (this.value() != this.displayOnlyForCouponType) {\r\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\r\n            }\r\n\r\n            this.enableDisableFields();\r\n        },\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/components/fieldset',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, uiRegistry, fieldset, async) {\r\n    'use strict';\r\n\r\n    return fieldset.extend({\r\n\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * Initialize element\r\n         *\r\n         * @returns {Abstract} Chainable\r\n         */\r\n        initialize: function (elems, position) {\r\n            var obj = this;\r\n\r\n            this._super();\r\n\r\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\r\n                var useAutoGeneration = uiRegistry.get(\r\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\r\n                );\r\n\r\n                useAutoGeneration.on('checked', function () {\r\n                    obj.enableDisableFields();\r\n                });\r\n                obj.enableDisableFields();\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /*eslint-enable no-unused-vars*/\r\n        /*eslint-disable lines-around-comment*/\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            /**\r\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\r\n             */\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Security/js/confirm-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*eslint-disable no-undef*/\r\ndefine(\r\n    ['jquery'],\r\n    function ($) {\r\n        'use strict';\r\n\r\n        return function (config, element) {\r\n            $(element).on('click', config, function () {\r\n                confirmSetLocation(config.message, config.url);\r\n            });\r\n        };\r\n    }\r\n);\r\n","Magento_Security/js/escaper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * A loose JavaScript version of Magento\\Framework\\Escaper\r\n *\r\n * Due to differences in how XML/HTML is processed in PHP vs JS there are a couple of minor differences in behavior\r\n * from the PHP counterpart.\r\n *\r\n * The first difference is that the default invocation of escapeHtml without allowedTags will double-escape existing\r\n * entities as the intention of such an invocation is that the input isn't supposed to contain any HTML.\r\n *\r\n * The second difference is that escapeHtml will not escape quotes. Since the input is actually being processed by the\r\n * DOM there is no chance of quotes being mixed with HTML syntax. And, since escapeHtml is not\r\n * intended to be used with raw injection into a HTML attribute, this is acceptable.\r\n *\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        neverAllowedElements: ['script', 'img', 'embed', 'iframe', 'video', 'source', 'object', 'audio'],\r\n        generallyAllowedAttributes: ['id', 'class', 'href', 'title', 'style'],\r\n        forbiddenAttributesByElement: {\r\n            a: ['style']\r\n        },\r\n\r\n        /**\r\n         * Escape a string for safe injection into HTML\r\n         *\r\n         * @param {String} data\r\n         * @param {Array|null} allowedTags\r\n         * @returns {String}\r\n         */\r\n        escapeHtml: function (data, allowedTags) {\r\n            var domParser = new DOMParser(),\r\n                fragment = domParser.parseFromString('<div></div>', 'text/html');\r\n\r\n            fragment = fragment.body.childNodes[0];\r\n            allowedTags = typeof allowedTags === 'object' && allowedTags.length ? allowedTags : null;\r\n\r\n            if (allowedTags) {\r\n                fragment.innerHTML = data || '';\r\n                allowedTags = this._filterProhibitedTags(allowedTags);\r\n\r\n                this._removeComments(fragment);\r\n                this._removeNotAllowedElements(fragment, allowedTags);\r\n                this._removeNotAllowedAttributes(fragment);\r\n\r\n                return fragment.innerHTML;\r\n            }\r\n\r\n            fragment.textContent = data || '';\r\n\r\n            return fragment.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Remove the always forbidden tags from a list of provided tags\r\n         *\r\n         * @param {Array} tags\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _filterProhibitedTags: function (tags) {\r\n            return tags.filter(function (n) {\r\n                return this.neverAllowedElements.indexOf(n) === -1;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Remove comment nodes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeComments: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_COMMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                    false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                nodesToRemove.push(treeWalker.currentNode);\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.removeChild(nodeToRemove);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Strip the given node of all disallowed tags while permitting any nested text nodes\r\n         *\r\n         * @param {Node} node\r\n         * @param {Array|null} allowedTags\r\n         * @private\r\n         */\r\n        _removeNotAllowedElements: function (node, allowedTags) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function (currentNode) {\r\n                        return allowedTags.indexOf(currentNode.nodeName.toLowerCase()) === -1 ?\r\n                            NodeFilter.FILTER_ACCEPT\r\n                            // SKIP instead of REJECT because REJECT also rejects child nodes\r\n                            : NodeFilter.FILTER_SKIP;\r\n                    },\r\n                false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                if (allowedTags.indexOf(treeWalker.currentNode.nodeName.toLowerCase()) === -1) {\r\n                    nodesToRemove.push(treeWalker.currentNode);\r\n                }\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.replaceChild(\r\n                    node.ownerDocument.createTextNode(nodeToRemove.textContent),\r\n                    nodeToRemove\r\n                );\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove any invalid attributes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeNotAllowedAttributes: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                false\r\n                ),\r\n                i,\r\n                attribute,\r\n                nodeName,\r\n                attributesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                for (i = 0; i < treeWalker.currentNode.attributes.length; i++) {\r\n                    attribute = treeWalker.currentNode.attributes[i];\r\n                    nodeName = treeWalker.currentNode.nodeName.toLowerCase();\r\n\r\n                    if (this.generallyAllowedAttributes.indexOf(attribute.name) === -1  || // eslint-disable-line max-depth,max-len\r\n                        this._checkHrefValue(attribute) ||\r\n                        this.forbiddenAttributesByElement[nodeName] &&\r\n                        this.forbiddenAttributesByElement[nodeName].indexOf(attribute.name) !== -1\r\n                    ) {\r\n                        attributesToRemove.push(attribute);\r\n                    }\r\n                }\r\n            }\r\n\r\n            attributesToRemove.forEach(function (attributeToRemove) {\r\n                attributeToRemove.ownerElement.removeAttribute(attributeToRemove.name);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check that attribute contains script content\r\n         *\r\n         * @param {Object} attribute\r\n         * @private\r\n         */\r\n        _checkHrefValue: function (attribute) {\r\n            return attribute.nodeName === 'href' && attribute.nodeValue.startsWith('javascript');\r\n        }\r\n    };\r\n});\r\n","Magento_Security/js/system/config/session-size.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'domReady!'\r\n], function ($, $t, confirm) {\r\n    'use strict';\r\n\r\n    return function (config, inputEl) {\r\n        var $inputEl = $(inputEl);\r\n\r\n        $inputEl.on('blur', function () {\r\n            var inputVal = parseInt($inputEl.val(), 10);\r\n\r\n            if (inputVal < 256000) {\r\n                confirm({\r\n                    title: $t(config.modalTitleText),\r\n                    content: $t(config.modalContentBody),\r\n                    buttons: [{\r\n                        text: $t('No'),\r\n                        class: 'action-secondary action-dismiss',\r\n\r\n                        /**\r\n                         * Close modal and trigger 'cancel' action on click\r\n                         */\r\n                        click: function (event) {\r\n                            this.closeModal(event);\r\n                        }\r\n                    }, {\r\n                        text: $t('Yes'),\r\n                        class: 'action-primary action-accept',\r\n\r\n                        /**\r\n                         * Close modal and trigger 'confirm' action on click\r\n                         */\r\n                        click: function (event) {\r\n                            this.closeModal(event, true);\r\n                        }\r\n                    }],\r\n                    actions: {\r\n\r\n                        /**\r\n                         * Revert back to original value\r\n                         */\r\n                        cancel: function () {\r\n                            $inputEl.val(256000);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Shipping/js/packages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal, $t) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        config.buttons = [\r\n            {\r\n                text: $t('Print'),\r\n                'class': 'action action-primary',\r\n\r\n                /**\r\n                 * Click handler\r\n                 */\r\n                click: function () {\r\n                    window.location.href = this.options.url;\r\n                }\r\n            }, {\r\n                text: $t('Cancel'),\r\n                'class': 'action action-secondary',\r\n\r\n                /**\r\n                 * Click handler\r\n                 */\r\n                click: function () {\r\n                    this.closeModal();\r\n                }\r\n            }\r\n        ];\r\n        modal(config, element);\r\n    };\r\n});\r\n","Magento_Shipping/order/packaging.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['prototype'], function () {\r\n\r\n    window.Packaging = Class.create();\r\n    Packaging.prototype = {\r\n        /**\r\n         * Initialize object\r\n         */\r\n        initialize: function (params) {\r\n            this.packageIncrement = 0;\r\n            this.packages = [];\r\n            this.itemsAll = [];\r\n            this.createLabelUrl = params.createLabelUrl ? params.createLabelUrl : null;\r\n            this.itemsGridUrl = params.itemsGridUrl ? params.itemsGridUrl : null;\r\n            this.errorQtyOverLimit = params.errorQtyOverLimit;\r\n            this.titleDisabledSaveBtn = params.titleDisabledSaveBtn;\r\n            this.window = $('packaging_window');\r\n            this.messages = this.window.select('.message-warning')[0];\r\n            this.packagesContent = $('packages_content');\r\n            this.template = $('package_template');\r\n            this.paramsCreateLabelRequest = {};\r\n            this.validationErrorMsg = params.validationErrorMsg;\r\n\r\n            this.defaultItemsQty            = params.shipmentItemsQty ? params.shipmentItemsQty : null;\r\n            this.defaultItemsPrice          = params.shipmentItemsPrice ? params.shipmentItemsPrice : null;\r\n            this.defaultItemsName           = params.shipmentItemsName ? params.shipmentItemsName : null;\r\n            this.defaultItemsWeight         = params.shipmentItemsWeight ? params.shipmentItemsWeight : null;\r\n            this.defaultItemsProductId      = params.shipmentItemsProductId ? params.shipmentItemsProductId : null;\r\n            this.defaultItemsOrderItemId    = params.shipmentItemsOrderItemId ? params.shipmentItemsOrderItemId : null;\r\n\r\n            this.shippingInformation = params.shippingInformation ? params.shippingInformation : null;\r\n            this.thisPage           = params.thisPage ? params.thisPage : null;\r\n            this.customizableContainers = params.customizable ? params.customizable : [];\r\n\r\n            this.eps = 0.000001;\r\n        },\r\n\r\n        /**\r\n         * Get Package Id\r\n         */\r\n        getPackageId: function (packageBlock) {\r\n            return packageBlock.id.match(/\\d{0,}$/)[0];\r\n        },\r\n\r\n        //******************** Setters **********************************//\r\n        setLabelCreatedCallback: function (callback) {\r\n            this.labelCreatedCallback = callback;\r\n        },\r\n        setCancelCallback: function (callback) {\r\n            this.cancelCallback = callback;\r\n        },\r\n        setConfirmPackagingCallback: function (callback) {\r\n            this.confirmPackagingCallback = callback;\r\n        },\r\n        setItemQtyCallback: function (callback) {\r\n            this.itemQtyCallback = callback;\r\n        },\r\n        setCreateLabelUrl: function (url) {\r\n            this.createLabelUrl = url;\r\n        },\r\n        setParamsCreateLabelRequest: function (params) {\r\n            Object.extend(this.paramsCreateLabelRequest, params);\r\n        },\r\n        //******************** End Setters *******************************//\r\n\r\n        showWindow: function () {\r\n            if (this.packagesContent.childElements().length == 0) {\r\n                this.newPackage();\r\n            }\r\n            const allowedPackageTypes = [\"N\",\"D\"];\r\n\r\n            if (!Object.values(this.customizableContainers).some(packageType => allowedPackageTypes.includes(packageType))) {\r\n                $('packaging_window').select(\r\n                    'th.col-length,th.col-width,th.col-height'\r\n                ).forEach(element => {\r\n                    element.classList.remove('_required')\r\n                });\r\n            }\r\n            jQuery(this.window).modal('openModal');\r\n        },\r\n\r\n        cancelPackaging: function () {\r\n            if (Object.isFunction(this.cancelCallback)) {\r\n                this.cancelCallback();\r\n            }\r\n        },\r\n\r\n        confirmPackaging: function (params) {\r\n            if (Object.isFunction(this.confirmPackagingCallback)) {\r\n                this.confirmPackagingCallback();\r\n            }\r\n        },\r\n\r\n        checkAllItems: function (headCheckbox) {\r\n            $(headCheckbox).up('table').select('tbody input[type=\"checkbox\"]').each(function (checkbox) {\r\n                checkbox.checked = headCheckbox.checked;\r\n                this._observeQty.call(checkbox);\r\n            }.bind(this));\r\n        },\r\n\r\n        cleanPackages: function () {\r\n            this.packagesContent.update();\r\n            this.packages = [];\r\n            this.itemsAll = [];\r\n            this.packageIncrement = 0;\r\n            this._setAllItemsPackedState();\r\n            this.messages.hide().update();\r\n        },\r\n\r\n        sendCreateLabelRequest: function () {\r\n            var self = this;\r\n\r\n            if (!this.validate()) {\r\n                this.messages.show().update(this.validationErrorMsg);\r\n\r\n                return;\r\n            }\r\n            this.messages.hide().update();\r\n\r\n            if (this.createLabelUrl) {\r\n                var weight, length, width, height = null;\r\n                var packagesParams = [];\r\n\r\n                this.packagesContent.childElements().each(function (pack) {\r\n                    var packageId = this.getPackageId(pack);\r\n\r\n                    weight = parseFloat(pack.select('input[name=\"container_weight\"]')[0].value);\r\n                    length = parseFloat(pack.select('input[name=\"container_length\"]')[0].value);\r\n                    width = parseFloat(pack.select('input[name=\"container_width\"]')[0].value);\r\n                    height = parseFloat(pack.select('input[name=\"container_height\"]')[0].value);\r\n                    packagesParams[packageId] = {\r\n                        container:                  pack.select('select[name=\"package_container\"]')[0].value,\r\n                        customs_value:              parseFloat(pack.select('input[name=\"package_customs_value\"]')[0].value, 10),\r\n                        weight:                     isNaN(weight) ? '' : weight,\r\n                        length:                     isNaN(length) ? '' : length,\r\n                        width:                      isNaN(width) ? '' : width,\r\n                        height:                     isNaN(height) ? '' : height,\r\n                        weight_units:               pack.select('select[name=\"container_weight_units\"]')[0].value,\r\n                        dimension_units:            pack.select('select[name=\"container_dimension_units\"]')[0].value\r\n                    };\r\n\r\n                    if (isNaN(packagesParams[packageId]['customs_value'])) {\r\n                        packagesParams[packageId]['customs_value'] = 0;\r\n                    }\r\n\r\n                    if ('undefined' != typeof pack.select('select[name=\"package_size\"]')[0]) {\r\n                        if ('' != pack.select('select[name=\"package_size\"]')[0].value) {\r\n                            packagesParams[packageId]['size'] = pack.select('select[name=\"package_size\"]')[0].value;\r\n                        }\r\n                    }\r\n\r\n                    if ('undefined' != typeof pack.select('input[name=\"container_girth\"]')[0]) {\r\n                        if ('' != pack.select('input[name=\"container_girth\"]')[0].value) {\r\n                            packagesParams[packageId]['girth'] = pack.select('input[name=\"container_girth\"]')[0].value;\r\n                            packagesParams[packageId]['girth_dimension_units'] = pack.select('select[name=\"container_girth_dimension_units\"]')[0].value;\r\n                        }\r\n                    }\r\n\r\n                    if ('undefined' != typeof pack.select('select[name=\"content_type\"]')[0] && 'undefined' != typeof pack.select('input[name=\"content_type_other\"]')[0]) {\r\n                        packagesParams[packageId]['content_type'] = pack.select('select[name=\"content_type\"]')[0].value;\r\n                        packagesParams[packageId]['content_type_other'] = pack.select('input[name=\"content_type_other\"]')[0].value;\r\n                    } else {\r\n                        packagesParams[packageId]['content_type'] = '';\r\n                        packagesParams[packageId]['content_type_other'] = '';\r\n                    }\r\n                    var deliveryConfirmation = pack.select('select[name=\"delivery_confirmation_types\"]');\r\n\r\n                    if (deliveryConfirmation.length) {\r\n                        packagesParams[packageId]['delivery_confirmation'] =  deliveryConfirmation[0].value;\r\n                    }\r\n                }.bind(this));\r\n\r\n                for (var packageId in this.packages) {\r\n                    if (!isNaN(packageId)) {\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[container]']              = packagesParams[packageId]['container'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[weight]']                 = packagesParams[packageId]['weight'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[customs_value]']          = packagesParams[packageId]['customs_value'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[length]']                 = packagesParams[packageId]['length'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[width]']                  = packagesParams[packageId]['width'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[height]']                 = packagesParams[packageId]['height'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[weight_units]']           = packagesParams[packageId]['weight_units'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[dimension_units]']        = packagesParams[packageId]['dimension_units'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[content_type]']           = packagesParams[packageId]['content_type'];\r\n                        this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[content_type_other]']     = packagesParams[packageId]['content_type_other'];\r\n\r\n                        if ('undefined' != typeof packagesParams[packageId]['size']) {\r\n                            this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[size]'] = packagesParams[packageId]['size'];\r\n                        }\r\n\r\n                        if ('undefined' != typeof packagesParams[packageId]['girth']) {\r\n                            this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[girth]'] = packagesParams[packageId]['girth'];\r\n                            this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[girth_dimension_units]'] = packagesParams[packageId]['girth_dimension_units'];\r\n                        }\r\n\r\n                        if ('undefined' != typeof packagesParams[packageId]['delivery_confirmation']) {\r\n                            this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[params]' + '[delivery_confirmation]']  = packagesParams[packageId]['delivery_confirmation'];\r\n                        }\r\n\r\n                        for (var packedItemId in this.packages[packageId]['items']) {\r\n                            if (!isNaN(packedItemId)) {\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][qty]']           = this.packages[packageId]['items'][packedItemId]['qty'];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][customs_value]'] = this.packages[packageId]['items'][packedItemId]['customs_value'];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][price]']         = self.defaultItemsPrice[packedItemId];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][name]']          = self.defaultItemsName[packedItemId];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][weight]']        = self.defaultItemsWeight[packedItemId];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][product_id]']    = self.defaultItemsProductId[packedItemId];\r\n                                this.paramsCreateLabelRequest['packages[' + packageId + ']' + '[items]' + '[' + packedItemId + '][order_item_id]'] = self.defaultItemsOrderItemId[packedItemId];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                new Ajax.Request(this.createLabelUrl, {\r\n                    parameters: this.paramsCreateLabelRequest,\r\n                    onSuccess: function (transport) {\r\n                        var response = transport.responseText;\r\n\r\n                        if (response.isJSON()) {\r\n                            response = response.evalJSON();\r\n\r\n                            if (response.error) {\r\n                                this.messages.show().innerHTML = response.message;\r\n                            } else if (response.ok && Object.isFunction(this.labelCreatedCallback)) {\r\n                                this.labelCreatedCallback(response);\r\n                            }\r\n                        }\r\n                    }.bind(this)\r\n                });\r\n\r\n                if (this.paramsCreateLabelRequest['code'] &&\r\n                    this.paramsCreateLabelRequest['carrier_title'] &&\r\n                    this.paramsCreateLabelRequest['method_title'] &&\r\n                    this.paramsCreateLabelRequest['price']\r\n                ) {\r\n                    var a = this.paramsCreateLabelRequest['code'];\r\n                    var b = this.paramsCreateLabelRequest['carrier_title'];\r\n                    var c = this.paramsCreateLabelRequest['method_title'];\r\n                    var d = this.paramsCreateLabelRequest['price'];\r\n\r\n                    this.paramsCreateLabelRequest = {};\r\n                    this.paramsCreateLabelRequest['code']           = a;\r\n                    this.paramsCreateLabelRequest['carrier_title']  = b;\r\n                    this.paramsCreateLabelRequest['method_title']   = c;\r\n                    this.paramsCreateLabelRequest['price']          = d;\r\n                } else {\r\n                    this.paramsCreateLabelRequest = {};\r\n                }\r\n            }\r\n        },\r\n\r\n        validate: function () {\r\n            var dimensionElements = $('packaging_window').select(\r\n                'input[name=container_length],input[name=container_width],input[name=container_height],input[name=container_girth]:not(\"._disabled\")'\r\n            );\r\n            var callback = null;\r\n\r\n            if (dimensionElements.any(function (element) {\r\n                return !!element.value;\r\n            })) {\r\n                callback = function (element) {\r\n                    $(element).addClassName('required-entry');\r\n                };\r\n            } else {\r\n                callback = function (element) {\r\n                    $(element).removeClassName('required-entry');\r\n                };\r\n            }\r\n            dimensionElements.each(callback);\r\n\r\n            const allowedPackageTypes = [\"N\",\"D\"];\r\n\r\n            if (Object.values(this.customizableContainers).some(packageType => allowedPackageTypes.includes(packageType))) {\r\n                dimensionElements.each(function(element) {\r\n                    $(element).addClassName('required-entry');\r\n                });\r\n            }\r\n\r\n            return result = $$('[id^=\"package_block_\"]      input').collect(function (element) {\r\n                return this.validateElement(element);\r\n            }, this).all();\r\n        },\r\n\r\n        validateElement: function (elm) {\r\n            var cn = $w(elm.className);\r\n\r\n            return result = cn.all(function (value) {\r\n                var v = Validation.get(value);\r\n\r\n                if (Validation.isVisible(elm) && !v.test($F(elm), elm)) {\r\n                    $(elm).addClassName('validation-failed');\r\n\r\n                    return false;\r\n                }\r\n                $(elm).removeClassName('validation-failed');\r\n\r\n                return true;\r\n\r\n            });\r\n        },\r\n\r\n        validateCustomsValue: function () {\r\n            var items = [];\r\n            var isValid = true;\r\n            var itemsPrepare = [];\r\n            var itemsPacked = [];\r\n\r\n            this.packagesContent.childElements().each(function (pack) {\r\n                itemsPrepare = pack.select('[data-role=\"package-items\"]')[0];\r\n\r\n                if (itemsPrepare) {\r\n                    items = items.concat(itemsPrepare.select('.grid tbody tr'));\r\n                }\r\n                itemsPacked = pack.select('.package_items')[0];\r\n\r\n                if (itemsPacked) {\r\n                    items = items.concat(itemsPacked.select('.grid tbody tr'));\r\n                }\r\n            });\r\n\r\n            items.each(function (item) {\r\n                var itemCustomsValue = item.select('[name=\"customs_value\"]')[0];\r\n\r\n                if (!this.validateElement(itemCustomsValue)) {\r\n                    isValid = false;\r\n                }\r\n            }.bind(this));\r\n\r\n            if (isValid) {\r\n                this.messages.hide().update();\r\n            } else {\r\n                this.messages.show().update(this.validationErrorMsg);\r\n            }\r\n\r\n            return isValid;\r\n        },\r\n\r\n        newPackage: function () {\r\n            var pack = this.template.cloneNode(true);\r\n\r\n            pack.id = 'package_block_' + ++this.packageIncrement;\r\n            pack.addClassName('package-block');\r\n            pack.select('[data-role=package-number]')[0].update(this.packageIncrement);\r\n            this.packagesContent.insert({\r\n                top: pack\r\n            });\r\n            pack.select('[data-action=package-save-items]')[0].hide();\r\n            pack.show();\r\n        },\r\n\r\n        deletePackage: function (obj) {\r\n            var pack = $(obj).up('[id^=\"package_block\"]');\r\n\r\n            var packItems = pack.select('.package_items')[0];\r\n            var packageId = this.getPackageId(pack);\r\n\r\n            delete this.packages[packageId];\r\n            pack.remove();\r\n            this.messages.hide().update();\r\n            this._setAllItemsPackedState();\r\n        },\r\n\r\n        deleteItem: function (obj) {\r\n            var item = $(obj).up('tr');\r\n            var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n            var pack = $(obj).up('[id^=\"package_block\"]');\r\n            var packItems = pack.select('.package_items')[0];\r\n            var packageId = this.getPackageId(pack);\r\n\r\n            delete this.packages[packageId]['items'][itemId];\r\n\r\n            if (item.offsetParent.rows.length <= 2) { /* head + this last row */\r\n                $(packItems).hide();\r\n            }\r\n            item.remove();\r\n            this.messages.hide().update();\r\n            this._recalcContainerWeightAndCustomsValue(packItems);\r\n            this._setAllItemsPackedState();\r\n        },\r\n\r\n        recalcContainerWeightAndCustomsValue: function (obj) {\r\n            var pack = $(obj).up('[id^=\"package_block\"]');\r\n            var packItems = pack.select('.package_items')[0];\r\n\r\n            if (packItems) {\r\n                if (!this.validateCustomsValue()) {\r\n                    return;\r\n                }\r\n                this._recalcContainerWeightAndCustomsValue(packItems);\r\n            }\r\n        },\r\n\r\n        getItemsForPack: function (obj) {\r\n            if (this.itemsGridUrl) {\r\n                var parameters = $H({\r\n                    'shipment_id': this.shipmentId\r\n                });\r\n                var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n                var packagePrapare = packageBlock.select('[data-role=package-items]')[0];\r\n                var packagePrapareGrid = packagePrapare.select('.grid_prepare')[0];\r\n\r\n                new Ajax.Request(this.itemsGridUrl, {\r\n                    parameters: parameters,\r\n                    onSuccess: function (transport) {\r\n                        var response = transport.responseText;\r\n\r\n                        if (response) {\r\n                            packagePrapareGrid.update(response);\r\n                            this.processPackagePrepare(packagePrapareGrid);\r\n\r\n                            if (packagePrapareGrid.select('.grid tbody tr').length) {\r\n                                packageBlock.select('[data-action=package-add-items]')[0].hide();\r\n                                packageBlock.select('[data-action=package-save-items]')[0].show();\r\n                                packagePrapare.show();\r\n                            } else {\r\n                                packagePrapareGrid.update();\r\n                            }\r\n                        }\r\n                    }.bind(this)\r\n                });\r\n            }\r\n        },\r\n\r\n        getPackedItemsQty: function () {\r\n            var items = [];\r\n\r\n            for (var packageId in this.packages) {\r\n                if (!isNaN(packageId)) {\r\n                    for (var packedItemId in this.packages[packageId]['items']) {\r\n                        if (!isNaN(packedItemId)) {\r\n                            if (items[packedItemId]) {\r\n                                items[packedItemId] += this.packages[packageId]['items'][packedItemId]['qty'];\r\n                            } else {\r\n                                items[packedItemId] = this.packages[packageId]['items'][packedItemId]['qty'];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return items;\r\n        },\r\n\r\n        _parseQty: function (obj) {\r\n            var qty = $(obj).hasClassName('qty-decimal') ? parseFloat(obj.value) : parseInt(obj.value);\r\n\r\n            if (isNaN(qty) || qty <= 0) {\r\n                qty = 1;\r\n            }\r\n\r\n            return qty;\r\n        },\r\n\r\n        packItems: function (obj) {\r\n            var anySelected = false;\r\n            var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n            var packageId = this.getPackageId(packageBlock);\r\n            var packagePrepare = packageBlock.select('[data-role=package-items]')[0];\r\n            var packagePrepareGrid = packagePrepare.select('.grid_prepare')[0];\r\n\r\n            // check for exceeds the total shipped quantity\r\n            var checkExceedsQty = false;\r\n\r\n            this.messages.hide().update();\r\n            packagePrepareGrid.select('.grid tbody tr').each(function (item) {\r\n                var checkbox = item.select('[type=\"checkbox\"]')[0];\r\n                var itemId = checkbox.value;\r\n                var qtyValue  = this._parseQty(item.select('[name=\"qty\"]')[0]);\r\n\r\n                item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n\r\n                if (checkbox.checked && this._checkExceedsQty(itemId, qtyValue)) {\r\n                    this.messages.show().update(this.errorQtyOverLimit);\r\n                    checkExceedsQty = true;\r\n                }\r\n            }.bind(this));\r\n\r\n            if (checkExceedsQty) {\r\n                return;\r\n            }\r\n\r\n            if (!this.validateCustomsValue()) {\r\n                return;\r\n            }\r\n\r\n            // prepare items for packing\r\n            packagePrepareGrid.select('.grid tbody tr').each(function (item) {\r\n                var checkbox = item.select('[type=\"checkbox\"]')[0];\r\n\r\n                if (checkbox.checked) {\r\n                    var qty  = item.select('[name=\"qty\"]')[0];\r\n                    var qtyValue  = this._parseQty(qty);\r\n\r\n                    item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n                    anySelected = true;\r\n                    qty.disabled = 'disabled';\r\n                    checkbox.disabled = 'disabled';\r\n                    packagePrepareGrid.select('.grid th [type=\"checkbox\"]')[0].up('th label').hide();\r\n                    item.select('[data-action=package-delete-item]')[0].show();\r\n                } else {\r\n                    item.remove();\r\n                }\r\n            }.bind(this));\r\n\r\n            // packing items\r\n            if (anySelected) {\r\n                var packItems = packageBlock.select('.package_items')[0];\r\n\r\n                if (!packItems) {\r\n                    packagePrepare.insert(new Element('div').addClassName('grid_prepare'));\r\n                    packagePrepare.insert({\r\n                        after: packagePrepareGrid\r\n                    });\r\n                    packItems = packagePrepareGrid.removeClassName('grid_prepare').addClassName('package_items');\r\n                    packItems.select('.grid tbody tr').each(function (item) {\r\n                        var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n                        var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n\r\n                        qtyValue = qtyValue <= 0 ? 1 : qtyValue;\r\n\r\n                        if ('undefined' == typeof this.packages[packageId]) {\r\n                            this.packages[packageId] = {\r\n                                'items': [], 'params': {}\r\n                            };\r\n                        }\r\n\r\n                        if ('undefined' == typeof this.packages[packageId]['items'][itemId]) {\r\n                            this.packages[packageId]['items'][itemId] = {};\r\n                            this.packages[packageId]['items'][itemId]['qty'] = qtyValue;\r\n                        } else {\r\n                            this.packages[packageId]['items'][itemId]['qty'] += qtyValue;\r\n                        }\r\n                    }.bind(this));\r\n                } else {\r\n                    packagePrepareGrid.select('.grid tbody tr').each(function (item) {\r\n                        var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n                        var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n\r\n                        qtyValue = qtyValue <= 0 ? 1 : qtyValue;\r\n\r\n                        if ('undefined' == typeof this.packages[packageId]['items'][itemId]) {\r\n                            this.packages[packageId]['items'][itemId] = {};\r\n                            this.packages[packageId]['items'][itemId]['qty'] = qtyValue;\r\n                            packItems.select('.grid tbody')[0].insert(item);\r\n                        } else {\r\n                            this.packages[packageId]['items'][itemId]['qty'] += qtyValue;\r\n                            var packItem = packItems.select('[type=\"checkbox\"][value=\"' + itemId + '\"]')[0].up('tr').select('[name=\"qty\"]')[0];\r\n\r\n                            packItem.value = this.packages[packageId]['items'][itemId]['qty'];\r\n                        }\r\n                    }.bind(this));\r\n                    packagePrepareGrid.update();\r\n                }\r\n                $(packItems).show();\r\n                this._recalcContainerWeightAndCustomsValue(packItems);\r\n            } else {\r\n                packagePrepareGrid.update();\r\n            }\r\n\r\n            // show/hide disable/enable\r\n            packagePrepare.hide();\r\n            packageBlock.select('[data-action=package-save-items]')[0].hide();\r\n            packageBlock.select('[data-action=package-add-items]')[0].show();\r\n            this._setAllItemsPackedState();\r\n        },\r\n\r\n        validateItemQty: function (itemId, qty) {\r\n            return this.defaultItemsQty[itemId] < qty ? this.defaultItemsQty[itemId] : qty;\r\n        },\r\n\r\n        changeMeasures: function (obj) {\r\n            var incr = 0;\r\n            var incrSelected = 0;\r\n\r\n            obj.childElements().each(function (option) {\r\n                if (option.selected) {\r\n                    incrSelected = incr;\r\n                }\r\n                incr++;\r\n            });\r\n\r\n            var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n\r\n            packageBlock.select('.measures').each(function (item) {\r\n                if (item.name != obj.name) {\r\n                    var incr = 0;\r\n\r\n                    item.select('option').each(function (option) {\r\n                        if (incr == incrSelected) {\r\n                            item.value = option.value;\r\n                            //option.selected = true\r\n                        }\r\n                        incr++;\r\n                    });\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        checkSizeAndGirthParameter: function (obj, enabled) {\r\n            if (enabled == 0) {\r\n                return;\r\n            }\r\n            var currentNode = obj;\r\n\r\n            while (currentNode.nodeName != 'TBODY') {\r\n                currentNode = currentNode.parentNode;\r\n            }\r\n\r\n            if (!currentNode) {\r\n                return;\r\n            }\r\n\r\n            var packageSize = currentNode.select('select[name=package_size]');\r\n            var packageContainer = currentNode.select('select[name=package_container]');\r\n            var packageGirth = currentNode.select('input[name=container_girth]');\r\n            var packageGirthDimensionUnits = currentNode.select('select[name=container_girth_dimension_units]');\r\n\r\n            if (packageSize.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            var girthEnabled = packageContainer[0].value == 'NONRECTANGULAR' || packageContainer[0].value == 'VARIABLE';\r\n\r\n            if (!girthEnabled) {\r\n                packageGirth[0].value = '';\r\n                packageGirth[0].disable();\r\n                packageGirth[0].addClassName('_disabled');\r\n                packageGirthDimensionUnits[0].disable();\r\n                packageGirthDimensionUnits[0].addClassName('_disabled');\r\n            } else {\r\n                packageGirth[0].enable();\r\n                packageGirth[0].removeClassName('_disabled');\r\n                packageGirthDimensionUnits[0].enable();\r\n                packageGirthDimensionUnits[0].removeClassName('_disabled');\r\n            }\r\n\r\n            var sizeEnabled = packageContainer[0].value == 'NONRECTANGULAR' || packageContainer[0].value == 'RECTANGULAR' ||\r\n                packageContainer[0].value == 'VARIABLE';\r\n\r\n            if (!sizeEnabled) {\r\n                option = document.createElement('OPTION');\r\n                option.value = '';\r\n                option.text = '';\r\n                packageSize[0].options.add(option);\r\n                packageSize[0].value = '';\r\n                packageSize[0].disable();\r\n                packageSize[0].addClassName('_disabled');\r\n            } else {\r\n                for (i = 0; i < packageSize[0].length; i++) {\r\n                    if (packageSize[0].options[i].value == '') {\r\n                        packageSize[0].removeChild(packageSize[0].options[i]);\r\n                    }\r\n                }\r\n                packageSize[0].enable();\r\n                packageSize[0].removeClassName('_disabled');\r\n            }\r\n        },\r\n\r\n        changeContainerType: function (obj) {\r\n            if (this.customizableContainers.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            var disable = true;\r\n\r\n            for (var i in this.customizableContainers) {\r\n                if (this.customizableContainers[i] == obj.value) {\r\n                    disable = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            var currentNode = obj;\r\n\r\n            while (currentNode.nodeName != 'TBODY') {\r\n                currentNode = currentNode.parentNode;\r\n            }\r\n\r\n            if (!currentNode) {\r\n                return;\r\n            }\r\n\r\n            $(currentNode).select(\r\n                'input[name=container_length],input[name=container_width],input[name=container_height],select[name=container_dimension_units]'\r\n            ).each(function (inputElement) {\r\n                if (disable) {\r\n                    Form.Element.disable(inputElement);\r\n                    inputElement.addClassName('_disabled');\r\n\r\n                    if (inputElement.nodeName == 'INPUT') {\r\n                        $(inputElement).value = '';\r\n                    }\r\n                } else {\r\n                    Form.Element.enable(inputElement);\r\n                    inputElement.removeClassName('_disabled');\r\n                }\r\n            });\r\n        },\r\n\r\n        changeContentTypes: function (obj) {\r\n            var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n            var contentType = packageBlock.select('[name=content_type]')[0];\r\n            var contentTypeOther = packageBlock.select('[name=content_type_other]')[0];\r\n\r\n            if (contentType.value == 'OTHER') {\r\n                Form.Element.enable(contentTypeOther);\r\n                contentTypeOther.removeClassName('_disabled');\r\n            } else {\r\n                Form.Element.disable(contentTypeOther);\r\n                contentTypeOther.addClassName('_disabled');\r\n            }\r\n\r\n        },\r\n\r\n        //******************** Private functions **********************************//\r\n        _getItemsCount: function (items) {\r\n            var count = 0;\r\n\r\n            items.each(function (itemCount) {\r\n                if (!isNaN(itemCount)) {\r\n                    count += parseFloat(itemCount);\r\n                }\r\n            });\r\n\r\n            return count;\r\n        },\r\n\r\n        /**\r\n         * Show/hide disable/enable buttons in case of all items packed state\r\n         */\r\n        _setAllItemsPackedState: function () {\r\n            var addPackageBtn = $$('[data-action=add-packages]')[0];\r\n            var savePackagesBtn = $$('[data-action=save-packages]')[0];\r\n\r\n            if (this._getItemsCount(this.itemsAll) > 0 &&\r\n                    this._checkExceedsQtyFinal(this._getItemsCount(this.getPackedItemsQty()), this._getItemsCount(this.itemsAll))\r\n            ) {\r\n                this.packagesContent.select('[data-action=package-add-items]').each(function (button) {\r\n                    button.disabled = 'disabled';\r\n                    button.addClassName('_disabled');\r\n                });\r\n                addPackageBtn.addClassName('_disabled');\r\n                Form.Element.disable(addPackageBtn);\r\n                savePackagesBtn.removeClassName('_disabled');\r\n                Form.Element.enable(savePackagesBtn);\r\n                savePackagesBtn.title = '';\r\n\r\n                // package number recalculation\r\n                var packagesRecalc = [];\r\n\r\n                this.packagesContent.childElements().each(function (pack) {\r\n                    if (!pack.select('.package_items .grid tbody tr').length) {\r\n                        pack.remove();\r\n                    }\r\n                });\r\n                var packagesCount = this.packagesContent.childElements().length;\r\n\r\n                this.packageIncrement = packagesCount;\r\n                this.packagesContent.childElements().each(function (pack) {\r\n                    var packageId = this.getPackageId(pack);\r\n\r\n                    pack.id = 'package_block_' + packagesCount;\r\n                    pack.select('[data-role=package-number]')[0].update(packagesCount);\r\n                    packagesRecalc[packagesCount] = this.packages[packageId];\r\n                    --packagesCount;\r\n                }.bind(this));\r\n                this.packages = packagesRecalc;\r\n\r\n            } else {\r\n                this.packagesContent.select('[data-action=package-add-items]').each(function (button) {\r\n                    button.removeClassName('_disabled');\r\n                    Form.Element.enable(button);\r\n                });\r\n                addPackageBtn.removeClassName('_disabled');\r\n                Form.Element.enable(addPackageBtn);\r\n                savePackagesBtn.addClassName('_disabled');\r\n                Form.Element.disable(savePackagesBtn);\r\n                savePackagesBtn.title = this.titleDisabledSaveBtn;\r\n            }\r\n        },\r\n\r\n        processPackagePrepare: function (packagePrepare) {\r\n            var itemsAll = [],\r\n                qty,\r\n                itemId,\r\n                qtyValue = 0,\r\n                value = 1;\r\n\r\n            packagePrepare.select('.grid tbody tr').each(function (item) {\r\n                qty = item.select('[name=\"qty\"]')[0],\r\n                    itemId = item.select('[type=\"checkbox\"]')[0].value,\r\n                    qtyValue = parseFloat(qty.value);\r\n\r\n                if (Object.isFunction(this.itemQtyCallback)) {\r\n                    value = this.itemQtyCallback(itemId);\r\n\r\n                    if (typeof value !== 'undefined') {\r\n                        qtyValue = parseFloat(value);\r\n                        qtyValue = this.validateItemQty(itemId, qtyValue);\r\n                        qty.value = qtyValue;\r\n                    }\r\n                } else {\r\n                    value = item.select('[name=\"qty\"]')[0].value;\r\n                    qtyValue = typeof value == 'string' && value.length == 0 ? 0 : parseFloat(value);\r\n\r\n                    if (isNaN(qtyValue) || qtyValue < 0) {\r\n                        qtyValue = 1;\r\n                    }\r\n                }\r\n\r\n                if (qtyValue == 0) {\r\n                    item.remove();\r\n\r\n                    return;\r\n                }\r\n                var packedItems = this.getPackedItemsQty();\r\n\r\n                itemsAll[itemId] = qtyValue;\r\n\r\n                for (var packedItemId in packedItems) {\r\n                    if (!isNaN(packedItemId)) {\r\n                        var packedQty = packedItems[packedItemId];\r\n\r\n                        if (itemId == packedItemId) {\r\n                            if (qtyValue == packedQty || qtyValue <= packedQty) {\r\n                                item.remove();\r\n                            } else if (qtyValue > packedQty) {\r\n                                /* fix float number precision */\r\n                                qty.value = Number(Number(Math.round(qtyValue - packedQty + 'e+4') + 'e-4').toFixed(4));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }.bind(this));\r\n\r\n            if (!this.itemsAll.length) {\r\n                this.itemsAll = itemsAll;\r\n            }\r\n\r\n            packagePrepare.select('tbody input[type=\"checkbox\"]').each(function (item) {\r\n                $(item).observe('change', this._observeQty);\r\n                this._observeQty.call(item);\r\n            }.bind(this));\r\n        },\r\n\r\n        _observeQty: function () {\r\n            /** this = input[type=\"checkbox\"] */\r\n            var tr  = jQuery(this).closest('tr')[0],\r\n                qty = $(tr.cells[tr.cells.length - 1]).select('input[name=\"qty\"]')[0];\r\n\r\n            if (qty.disabled = !this.checked) {\r\n                $(qty).addClassName('_disabled');\r\n            } else {\r\n                $(qty).removeClassName('_disabled');\r\n            }\r\n        },\r\n\r\n        _checkExceedsQty: function (itemId, qty) {\r\n            var packedItemQty = this.getPackedItemsQty()[itemId] ? this.getPackedItemsQty()[itemId] : 0;\r\n            var allItemQty = this.itemsAll[itemId];\r\n\r\n            return qty * (1 - this.eps) > allItemQty *  (1 + this.eps)  - packedItemQty * (1 - this.eps);\r\n        },\r\n\r\n        _checkExceedsQtyFinal: function (checkOne, defQty) {\r\n            return checkOne * (1 + this.eps) >= defQty * (1 - this.eps);\r\n        },\r\n\r\n        _recalcContainerWeightAndCustomsValue: function (container) {\r\n            var packageBlock = container.up('[id^=\"package_block\"]');\r\n            var packageId = this.getPackageId(packageBlock);\r\n            var containerWeight = packageBlock.select('[name=\"container_weight\"]')[0];\r\n            var containerCustomsValue = packageBlock.select('[name=\"package_customs_value\"]')[0];\r\n\r\n            containerWeight.value = 0;\r\n            containerCustomsValue.value = 0;\r\n            container.select('.grid tbody tr').each(function (item) {\r\n                var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n                var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n\r\n                if (isNaN(qtyValue) || qtyValue <= 0) {\r\n                    qtyValue = 1;\r\n                    item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n                }\r\n                var itemWeight = parseFloat(this._getElementText(item.select('[data-role=item-weight]')[0]));\r\n\r\n                containerWeight.value = parseFloat(containerWeight.value) + itemWeight * qtyValue;\r\n                var itemCustomsValue = parseFloat(item.select('[name=\"customs_value\"]')[0].value) || 0;\r\n\r\n                containerCustomsValue.value = parseFloat(containerCustomsValue.value) + itemCustomsValue * qtyValue;\r\n                this.packages[packageId]['items'][itemId]['customs_value'] = itemCustomsValue;\r\n            }.bind(this));\r\n            containerWeight.value = parseFloat(parseFloat(Math.round(containerWeight.value + 'e+4') + 'e-4').toFixed(4));\r\n            containerCustomsValue.value = parseFloat(Math.round(containerCustomsValue.value + 'e+2') + 'e-2').toFixed(2);\r\n\r\n            if (containerCustomsValue.value == 0) {\r\n                containerCustomsValue.value = '';\r\n            }\r\n        },\r\n\r\n        _getElementText: function (el) {\r\n            if ('string' == typeof el.textContent) {\r\n                return el.textContent;\r\n            }\r\n\r\n            if ('string' == typeof el.innerText) {\r\n                return el.innerText;\r\n            }\r\n\r\n            return el.innerHTML.replace(/<[^>]*>/g, '');\r\n        }\r\n        //******************** End Private functions ******************************//\r\n    };\r\n\r\n});\r\n","Magento_Sitemap/js/form-submit-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        $(element).on('save', function () {\r\n            if ($(this).valid()) {\r\n                $('body').trigger('processStart');\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Swatches/js/product-attributes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/modal/prompt',\r\n    'uiRegistry',\r\n    'collapsable'\r\n], function ($, alert, prompt, rg) {\r\n    'use strict';\r\n\r\n    return function (optionConfig) {\r\n        var activePanelClass = 'selected-type-options',\r\n            swatchProductAttributes = {\r\n                frontendInput: $('#frontend_input'),\r\n                isFilterable: $('#is_filterable'),\r\n                isFilterableInSearch: $('#is_filterable_in_search'),\r\n                backendType: $('#backend_type'),\r\n                usedForSortBy: $('#used_for_sort_by'),\r\n                frontendClass: $('#frontend_class'),\r\n                isWysiwygEnabled: $('#is_wysiwyg_enabled'),\r\n                isHtmlAllowedOnFront: $('#is_html_allowed_on_front'),\r\n                isRequired: $('#is_required'),\r\n                isUnique: $('#is_unique'),\r\n                defaultValueText: $('#default_value_text'),\r\n                defaultValueTextarea: $('#default_value_textarea'),\r\n                defaultValueDate: $('#default_value_date'),\r\n                defaultValueDatetime: $('#default_value_datetime'),\r\n                defaultValueYesno: $('#default_value_yesno'),\r\n                isGlobal: $('#is_global'),\r\n                useProductImageForSwatch: $('#use_product_image_for_swatch'),\r\n                updateProductPreviewImage: $('#update_product_preview_image'),\r\n                usedInProductListing: $('#used_in_product_listing'),\r\n                isVisibleOnFront: $('#is_visible_on_front'),\r\n                position: $('#position'),\r\n                attrTabsFront: $('#product_attribute_tabs_front'),\r\n\r\n                /**\r\n                 * @returns {*|jQuery|HTMLElement}\r\n                 */\r\n                get tabsFront() {\r\n                    return this.attrTabsFront.length ? this.attrTabsFront.closest('li') : $('#front_fieldset-wrapper');\r\n                },\r\n                selectFields: ['boolean', 'select', 'multiselect', 'price', 'swatch_text', 'swatch_visual'],\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                toggleApplyVisibility: function (select) {\r\n                    if ($(select).val() === 1) {\r\n                        $(select).next('select').removeClass('no-display');\r\n                        $(select).next('select').removeClass('ignore-validate');\r\n                    } else {\r\n                        $(select).next('select').addClass('no-display');\r\n                        $(select).next('select').addClass('ignore-validate');\r\n                        $(select).next('select option:selected').each(function () {\r\n                            this.selected = false;\r\n                        });\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                checkOptionsPanelVisibility: function () {\r\n                    var selectOptionsPanel = $('#manage-options-panel'),\r\n                        visualOptionsPanel = $('#swatch-visual-options-panel'),\r\n                        textOptionsPanel = $('#swatch-text-options-panel');\r\n\r\n                    this._hidePanel(selectOptionsPanel);\r\n                    this._hidePanel(visualOptionsPanel);\r\n                    this._hidePanel(textOptionsPanel);\r\n\r\n                    switch (this.frontendInput.val()) {\r\n                        case 'swatch_visual':\r\n                            this._showPanel(visualOptionsPanel);\r\n                            break;\r\n\r\n                        case 'swatch_text':\r\n                            this._showPanel(textOptionsPanel);\r\n                            break;\r\n\r\n                        case 'select':\r\n                        case 'multiselect':\r\n                            this._showPanel(selectOptionsPanel);\r\n                            break;\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                bindAttributeInputType: function () {\r\n                    this.checkOptionsPanelVisibility();\r\n                    this.switchDefaultValueField();\r\n\r\n                    if (!~$.inArray(this.frontendInput.val(), this.selectFields)) {\r\n                        // not in array\r\n                        this.isFilterable.selectedIndex = 0;\r\n                        this._disable(this.isFilterable);\r\n                        this._disable(this.isFilterableInSearch);\r\n                    } else {\r\n                        // in array\r\n                        this._enable(this.isFilterable);\r\n                        this._enable(this.isFilterableInSearch);\r\n                        this.backendType.val('int');\r\n                    }\r\n\r\n                    if (this.frontendInput.val() === 'multiselect' ||\r\n                        this.frontendInput.val() === 'gallery' ||\r\n                        this.frontendInput.val() === 'textarea'\r\n                    ) {\r\n                        this._disable(this.usedForSortBy);\r\n                    } else {\r\n                        this._enable(this.usedForSortBy);\r\n                    }\r\n\r\n                    if (this.frontendInput.val() === 'swatch_text') {\r\n                        $('.swatch-text-field-0').addClass('required-option');\r\n                    } else {\r\n                        $('.swatch-text-field-0').removeClass('required-option');\r\n                    }\r\n\r\n                    this.setRowVisibility(this.isWysiwygEnabled, false);\r\n                    this.setRowVisibility(this.isHtmlAllowedOnFront, false);\r\n\r\n                    switch (this.frontendInput.val()) {\r\n                        case 'textarea':\r\n                            this.setRowVisibility(this.isWysiwygEnabled, true);\r\n\r\n                            if (this.isWysiwygEnabled.val() === '0') {\r\n                                this._enable(this.isHtmlAllowedOnFront);\r\n                            }\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                            break;\r\n\r\n                        case 'text':\r\n                            this.setRowVisibility(this.isHtmlAllowedOnFront, true);\r\n                            this._enable(this.frontendClass);\r\n                            break;\r\n\r\n                        case 'select':\r\n                        case 'multiselect':\r\n                            this.setRowVisibility(this.isHtmlAllowedOnFront, true);\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                            break;\r\n                        default:\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                    }\r\n\r\n                    this.switchIsFilterable();\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                switchIsFilterable: function () {\r\n                    if (this.isFilterable.selectedIndex === 0) {\r\n                        this._disable(this.position);\r\n                    } else {\r\n                        this._enable(this.position);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                switchDefaultValueField: function () {\r\n                    var currentValue = this.frontendInput.val(),\r\n                        defaultValueTextVisibility = false,\r\n                        defaultValueTextareaVisibility = false,\r\n                        defaultValueDateVisibility = false,\r\n                        defaultValueDatetimeVisibility = false,\r\n                        defaultValueYesnoVisibility = false,\r\n                        scopeVisibility = true,\r\n                        useProductImageForSwatch = false,\r\n                        defaultValueUpdateImage = false,\r\n                        optionDefaultInputType = '',\r\n                        isFrontTabHidden = false,\r\n                        thing = this;\r\n\r\n                    if (!this.frontendInput.length) {\r\n                        return;\r\n                    }\r\n\r\n                    switch (currentValue) {\r\n                        case 'select':\r\n                            optionDefaultInputType = 'radio';\r\n                            break;\r\n\r\n                        case 'multiselect':\r\n                            optionDefaultInputType = 'checkbox';\r\n                            break;\r\n\r\n                        case 'date':\r\n                            defaultValueDateVisibility = true;\r\n                            break;\r\n\r\n                        case 'datetime':\r\n                            defaultValueDatetimeVisibility = true;\r\n                            break;\r\n\r\n                        case 'boolean':\r\n                            defaultValueYesnoVisibility = true;\r\n                            break;\r\n\r\n                        case 'textarea':\r\n                        case 'texteditor':\r\n                            defaultValueTextareaVisibility = true;\r\n                            break;\r\n\r\n                        case 'media_image':\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n\r\n                        case 'price':\r\n                            scopeVisibility = false;\r\n                            break;\r\n\r\n                        case 'swatch_visual':\r\n                            useProductImageForSwatch = true;\r\n                            defaultValueUpdateImage = true;\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n\r\n                        case 'swatch_text':\r\n                            useProductImageForSwatch = false;\r\n                            defaultValueUpdateImage = true;\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n                        default:\r\n                            defaultValueTextVisibility = true;\r\n                            break;\r\n                    }\r\n\r\n                    delete optionConfig.hiddenFields['swatch_visual'];\r\n                    delete optionConfig.hiddenFields['swatch_text'];\r\n\r\n                    if (currentValue === 'media_image') {\r\n                        this.tabsFront.hide();\r\n                        this.setRowVisibility(this.isRequired, false);\r\n                        this.setRowVisibility(this.isUnique, false);\r\n                        this.setRowVisibility(this.frontendClass, false);\r\n                    } else if (optionConfig.hiddenFields[currentValue]) {\r\n                        $.each(optionConfig.hiddenFields[currentValue], function (key, option) {\r\n                            switch (option) {\r\n                                case '_front_fieldset':\r\n                                    thing.tabsFront.hide();\r\n                                    isFrontTabHidden = true;\r\n                                    break;\r\n\r\n                                case '_default_value':\r\n                                    defaultValueTextVisibility = false;\r\n                                    defaultValueTextareaVisibility = false;\r\n                                    defaultValueDateVisibility = false;\r\n                                    defaultValueDatetimeVisibility = false;\r\n                                    defaultValueYesnoVisibility = false;\r\n                                    break;\r\n\r\n                                case '_scope':\r\n                                    scopeVisibility = false;\r\n                                    break;\r\n                                default:\r\n                                    thing.setRowVisibility($('#' + option), false);\r\n                            }\r\n                        });\r\n\r\n                        if (!isFrontTabHidden) {\r\n                            thing.tabsFront.show();\r\n                        }\r\n\r\n                    } else {\r\n                        this.tabsFront.show();\r\n                        this.showDefaultRows();\r\n                    }\r\n\r\n                    this.setRowVisibility(this.defaultValueText, defaultValueTextVisibility);\r\n                    this.setRowVisibility(this.defaultValueTextarea, defaultValueTextareaVisibility);\r\n                    this.setRowVisibility(this.defaultValueDate, defaultValueDateVisibility);\r\n                    this.setRowVisibility(this.defaultValueDatetime, defaultValueDatetimeVisibility);\r\n                    this.setRowVisibility(this.defaultValueYesno, defaultValueYesnoVisibility);\r\n                    this.setRowVisibility(this.isGlobal, scopeVisibility);\r\n\r\n                    /* swatch attributes */\r\n                    this.setRowVisibility(this.useProductImageForSwatch, useProductImageForSwatch);\r\n                    this.setRowVisibility(this.updateProductPreviewImage, defaultValueUpdateImage);\r\n\r\n                    $('input[name=\\'default[]\\']').each(function () {\r\n                        $(this).attr('type', optionDefaultInputType);\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                showDefaultRows: function () {\r\n                    this.setRowVisibility(this.isRequired, true);\r\n                    this.setRowVisibility(this.isUnique, true);\r\n                    this.setRowVisibility(this.frontendClass, true);\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @param {Boolean} isVisible\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                setRowVisibility: function (el, isVisible) {\r\n                    if (isVisible) {\r\n                        el.show();\r\n                        el.closest('.field').show();\r\n                    } else {\r\n                        el.hide();\r\n                        el.closest('.field').hide();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _disable: function (el) {\r\n                    el.attr('disabled', 'disabled');\r\n                },\r\n\r\n                /**\r\n                 * @param {jQuery} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _enable: function (el) {\r\n                    if (!el.attr('readonly')) {\r\n                        el.prop('disabled', false);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _showPanel: function (el) {\r\n                    el.closest('.fieldset').show();\r\n                    el.addClass(activePanelClass);\r\n                    this._render(el.attr('id'));\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _hidePanel: function (el) {\r\n                    el.closest('.fieldset').hide();\r\n                    el.removeClass(activePanelClass);\r\n                },\r\n\r\n                /**\r\n                 * @param {String} id\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _render: function (id) {\r\n                    rg.get(id, function () {\r\n                        $('#' + id).trigger('render');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * @param {String} promptMessage\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                saveAttributeInNewSet: function (promptMessage) {\r\n\r\n                    prompt({\r\n                        content: promptMessage,\r\n                        actions: {\r\n\r\n                            /**\r\n                             * @param {String} val\r\n                             * @this {actions}\r\n                             */\r\n                            confirm: function (val) {\r\n                                var rules = ['required-entry', 'validate-no-html-tags'],\r\n                                    newAttributeSetNameInputId = $('#new_attribute_set_name'),\r\n                                    editForm = $('#edit_form'),\r\n                                    newAttributeSetName = val,\r\n                                    i;\r\n\r\n                                if (!newAttributeSetName) {\r\n                                    return;\r\n                                }\r\n\r\n                                for (i = 0; i < rules.length; i++) {\r\n                                    if (!$.validator.methods[rules[i]](newAttributeSetName)) {\r\n                                        alert({\r\n                                            content: $.validator.messages[rules[i]]\r\n                                        });\r\n\r\n                                        return;\r\n                                    }\r\n                                }\r\n\r\n                                if (newAttributeSetNameInputId.length) {\r\n                                    newAttributeSetNameInputId.val(newAttributeSetName);\r\n                                } else {\r\n                                    editForm.append(new Element('input', {\r\n                                            type: 'hidden',\r\n                                            id: newAttributeSetNameInputId,\r\n                                            name: 'new_attribute_set_name',\r\n                                            value: newAttributeSetName\r\n                                        })\r\n                                    );\r\n                                }\r\n                                // Temporary solution will replaced after refactoring of attributes functionality\r\n                                editForm.triggerHandler('save');\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n\r\n        $(function () {\r\n            var editForm = $('#edit_form'),\r\n                swatchVisualPanel = $('#swatch-visual-options-panel'),\r\n                swatchTextPanel = $('#swatch-text-options-panel'),\r\n                tableBody = $(),\r\n                activePanel = $();\r\n\r\n            $('#frontend_input').on('change', function () {\r\n                swatchProductAttributes.bindAttributeInputType();\r\n            });\r\n            $('#is_filterable').on('change', function () {\r\n                swatchProductAttributes.switchIsFilterable();\r\n            });\r\n\r\n            swatchProductAttributes.bindAttributeInputType();\r\n\r\n            // @todo: refactor collapsible component\r\n            $('.attribute-popup .collapse, [data-role=\"advanced_fieldset-content\"]')\r\n                .collapsable()\r\n                .collapse('hide');\r\n\r\n            editForm.on('beforeSubmit', function () {\r\n                var optionContainer, optionsValues;\r\n\r\n                activePanel = swatchTextPanel.hasClass(activePanelClass) ? swatchTextPanel : swatchVisualPanel;\r\n                optionContainer = activePanel.find('table tbody');\r\n\r\n                if (activePanel.hasClass(activePanelClass)) {\r\n                    optionsValues = $.map(\r\n                        optionContainer.find('tr'),\r\n                        function (row) {\r\n                            return $(row).find('input, select, textarea').serialize();\r\n                        }\r\n                    );\r\n                    $('<input>')\r\n                        .attr({\r\n                            type: 'hidden',\r\n                            name: 'serialized_options'\r\n                        })\r\n                        .val(JSON.stringify(optionsValues))\r\n                        .prependTo(editForm);\r\n                }\r\n\r\n                tableBody = optionContainer.detach();\r\n            });\r\n\r\n            editForm.on('afterValidate.error highlight.validate', function () {\r\n                if (activePanel.hasClass(activePanelClass)) {\r\n                    activePanel.find('table').append(tableBody);\r\n                    $('input[name=\"serialized_options\"]').remove();\r\n                }\r\n            });\r\n        });\r\n\r\n        window.saveAttributeInNewSet = swatchProductAttributes.saveAttributeInNewSet;\r\n        window.toggleApplyVisibility = swatchProductAttributes.toggleApplyVisibility;\r\n    };\r\n});\r\n","Magento_Swatches/js/swatch-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/smart-keyboard-handler',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'mage/validation/validation'\r\n], function ($, _, mageTemplate, keyboardHandler, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Extend form validation to support swatch accessibility\r\n     */\r\n    $.widget('mage.validation', $.mage.validation, {\r\n        /**\r\n         * Handle form with swatches validation. Focus on first invalid swatch block.\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} validation\r\n         */\r\n        listenFormValidateHandler: function (event, validation) {\r\n            var swatchWrapper, firstActive, swatches, swatch, successList, errorList, firstSwatch;\r\n\r\n            this._superApply(arguments);\r\n\r\n            swatchWrapper = '.swatch-attribute-options';\r\n            swatches = $(event.target).find(swatchWrapper);\r\n\r\n            if (!swatches.length) {\r\n                return;\r\n            }\r\n\r\n            swatch = '.swatch-attribute';\r\n            firstActive = $(validation.errorList[0].element || []);\r\n            successList = validation.successList;\r\n            errorList = validation.errorList;\r\n            firstSwatch = $(firstActive).parent(swatch).find(swatchWrapper);\r\n\r\n            keyboardHandler.focus(swatches);\r\n\r\n            $.each(successList, function (index, item) {\r\n                $(item).parent(swatch).find(swatchWrapper).attr('aria-invalid', false);\r\n            });\r\n\r\n            $.each(errorList, function (index, item) {\r\n                $(item.element).parent(swatch).find(swatchWrapper).attr('aria-invalid', true);\r\n            });\r\n\r\n            if (firstSwatch.length) {\r\n                $(firstSwatch).trigger('focus');\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render tooltips by attributes (only to up).\r\n     * Required element attributes:\r\n     *  - data-option-type (integer, 0-3)\r\n     *  - data-option-label (string)\r\n     *  - data-option-tooltip-thumb\r\n     *  - data-option-tooltip-value\r\n     *  - data-thumb-width\r\n     *  - data-thumb-height\r\n     */\r\n    $.widget('mage.SwatchRendererTooltip', {\r\n        options: {\r\n            delay: 200,                             //how much ms before tooltip to show\r\n            tooltipClass: 'swatch-option-tooltip'  //configurable, but remember about css\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            var $widget = this,\r\n                $this = this.element,\r\n                $element = $('.' + $widget.options.tooltipClass),\r\n                timer,\r\n                type = parseInt($this.data('option-type'), 10),\r\n                label = $this.data('option-label'),\r\n                thumb = $this.data('option-tooltip-thumb'),\r\n                value = $this.data('option-tooltip-value'),\r\n                width = $this.data('thumb-width'),\r\n                height = $this.data('thumb-height'),\r\n                $image,\r\n                $title,\r\n                $corner;\r\n\r\n            if (!$element.length) {\r\n                $element = $('<div class=\"' +\r\n                    $widget.options.tooltipClass +\r\n                    '\"><div class=\"image\"></div><div class=\"title\"></div><div class=\"corner\"></div></div>'\r\n                );\r\n                $('body').append($element);\r\n            }\r\n\r\n            $image = $element.find('.image');\r\n            $title = $element.find('.title');\r\n            $corner = $element.find('.corner');\r\n\r\n            $this.on('mouseenter', function () {\r\n                if (!$this.hasClass('disabled')) {\r\n                    timer = setTimeout(\r\n                        function () {\r\n                            var leftOpt = null,\r\n                                leftCorner = 0,\r\n                                left,\r\n                                $window;\r\n\r\n                            if (type === 2) {\r\n                                // Image\r\n                                $image.css({\r\n                                    'background': 'url(\"' + thumb + '\") no-repeat center', //Background case\r\n                                    'background-size': 'initial',\r\n                                    'width': width + 'px',\r\n                                    'height': height + 'px'\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 1) {\r\n                                // Color\r\n                                $image.css({\r\n                                    background: value\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 0 || type === 3) {\r\n                                // Default\r\n                                $image.hide();\r\n                            }\r\n\r\n                            $title.text(label);\r\n\r\n                            leftOpt = $this.offset().left;\r\n                            left = leftOpt + $this.width() / 2 - $element.width() / 2;\r\n                            $window = $(window);\r\n\r\n                            // the numbers (5 and 5) is magick constants for offset from left or right page\r\n                            if (left < 0) {\r\n                                left = 5;\r\n                            } else if (left + $element.width() > $window.width()) {\r\n                                left = $window.width() - $element.width() - 5;\r\n                            }\r\n\r\n                            // the numbers (6,  3 and 18) is magick constants for offset tooltip\r\n                            leftCorner = 0;\r\n\r\n                            if ($element.width() < $this.width()) {\r\n                                leftCorner = $element.width() / 2 - 3;\r\n                            } else {\r\n                                leftCorner = (leftOpt > left ? leftOpt - left : left - leftOpt) + $this.width() / 2 - 6;\r\n                            }\r\n\r\n                            $corner.css({\r\n                                left: leftCorner\r\n                            });\r\n                            $element.css({\r\n                                left: left,\r\n                                top: $this.offset().top - $element.height() - $corner.height() - 18\r\n                            }).show();\r\n                        },\r\n                        $widget.options.delay\r\n                    );\r\n                }\r\n            });\r\n\r\n            $this.on('mouseleave', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $(document).on('tap', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $this.on('tap', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render swatch controls with options and use tooltips.\r\n     * Required two json:\r\n     *  - jsonConfig (magento's option config)\r\n     *  - jsonSwatchConfig (swatch's option config)\r\n     *\r\n     *  Tuning:\r\n     *  - numberToShow (show \"more\" button if options are more)\r\n     *  - onlySwatches (hide selectboxes)\r\n     *  - moreButtonText (text for \"more\" button)\r\n     *  - selectorProduct (selector for product container)\r\n     *  - selectorProductPrice (selector for change price)\r\n     */\r\n    $.widget('mage.SwatchRenderer', {\r\n        options: {\r\n            classes: {\r\n                attributeClass: 'swatch-attribute',\r\n                attributeLabelClass: 'swatch-attribute-label',\r\n                attributeSelectedOptionLabelClass: 'swatch-attribute-selected-option',\r\n                attributeOptionsWrapper: 'swatch-attribute-options',\r\n                attributeInput: 'swatch-input',\r\n                optionClass: 'swatch-option',\r\n                selectClass: 'swatch-select',\r\n                moreButton: 'swatch-more',\r\n                loader: 'swatch-option-loading'\r\n            },\r\n            // option's json config\r\n            jsonConfig: {},\r\n\r\n            // swatch's json config\r\n            jsonSwatchConfig: {},\r\n\r\n            // selector of parental block of prices and swatches (need to know where to seek for price block)\r\n            selectorProduct: '.product-info-main',\r\n\r\n            // selector of price wrapper (need to know where set price)\r\n            selectorProductPrice: '[data-role=priceBox]',\r\n\r\n            //selector of product images gallery wrapper\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n\r\n            // selector of category product tile wrapper\r\n            selectorProductTile: '.product-item',\r\n\r\n            // number of controls to show (false or zero = show all)\r\n            numberToShow: false,\r\n\r\n            // show only swatch controls\r\n            onlySwatches: false,\r\n\r\n            // enable label for control\r\n            enableControlLabel: true,\r\n\r\n            // control label id\r\n            controlLabelId: '',\r\n\r\n            // text for more button\r\n            moreButtonText: $t('More'),\r\n\r\n            // Callback url for media\r\n            mediaCallback: '',\r\n\r\n            // Local media cache\r\n            mediaCache: {},\r\n\r\n            // Cache for BaseProduct images. Needed when option unset\r\n            mediaGalleryInitial: [{}],\r\n\r\n            // Use ajax to get image data\r\n            useAjax: false,\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n\r\n            // whether swatches are rendered in product list or on product page\r\n            inProductList: false,\r\n\r\n            // sly-old-price block selector\r\n            slyOldPriceSelector: '.sly-old-price',\r\n\r\n            // tier prise selectors start\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            // tier prise selectors end\r\n\r\n            // A price label selector\r\n            normalPriceLabelSelector: '.normal-price .price-label',\r\n            qtyInfo: '#qty'\r\n        },\r\n\r\n        /**\r\n         * Get chosen product\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProduct: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * Get chosen product id\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProductId: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) && products.length === 1 ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            // Don't render the same set of swatches twice\r\n            if ($(this.element).attr('data-rendered')) {\r\n                return;\r\n            }\r\n\r\n            $(this.element).attr('data-rendered', true);\r\n\r\n            if (_.isEmpty(this.options.jsonConfig.images)) {\r\n                this.options.useAjax = true;\r\n                // creates debounced variant of _LoadProductMedia()\r\n                // to use it in events handlers instead of _LoadProductMedia()\r\n                this._debouncedLoadProductMedia = _.debounce(this._LoadProductMedia.bind(this), 500);\r\n            }\r\n\r\n            this.options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            if (this.options.jsonConfig !== '' && this.options.jsonSwatchConfig !== '') {\r\n                // store unsorted attributes\r\n                this.options.jsonConfig.mappedAttributes = _.clone(this.options.jsonConfig.attributes);\r\n                this._sortAttributes();\r\n                this._RenderControls();\r\n                this._setPreSelectedGallery();\r\n                $(this.element).trigger('swatch.initialized');\r\n            } else {\r\n                console.log('SwatchRenderer: No input data received');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _sortAttributes: function () {\r\n            this.options.jsonConfig.attributes = _.sortBy(this.options.jsonConfig.attributes, function (attribute) {\r\n                return parseInt(attribute.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options = this.options,\r\n                gallery = $('[data-gallery-role=gallery-placeholder]', '.column.main'),\r\n                productData = this._determineProductData(),\r\n                $main = productData.isInProductView ?\r\n                    this.element.parents('.column.main') :\r\n                    this.element.parents('.product-item-info');\r\n\r\n            if (productData.isInProductView) {\r\n                gallery.data('gallery') ?\r\n                    this._onGalleryLoaded(gallery) :\r\n                    gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n            } else {\r\n                options.mediaGalleryInitial = [{\r\n                    'img': $main.find('.product-image-photo').attr('src')\r\n                }];\r\n            }\r\n\r\n            this.productForm = this.element.parents(this.options.selectorProductTile).find('form:first');\r\n            this.inProductList = this.productForm.length > 0;\r\n            $(this.options.qtyInfo).on('input', this._onQtyChanged.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Determine product id and related data\r\n         *\r\n         * @returns {{productId: *, isInProductView: bool}}\r\n         * @private\r\n         */\r\n        _determineProductData: function () {\r\n            // Check if product is in a list of products.\r\n            var productId,\r\n                isInProductView = false;\r\n\r\n            productId = this.element.parents('.product-item-details')\r\n                .find('.price-box.price-final_price').attr('data-product-id');\r\n\r\n            if (!productId) {\r\n                // Check individual product.\r\n                productId = $('[name=product]').val();\r\n                isInProductView = productId > 0;\r\n            }\r\n\r\n            return {\r\n                productId: productId,\r\n                isInProductView: isInProductView\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Render controls\r\n         *\r\n         * @private\r\n         */\r\n        _RenderControls: function () {\r\n            var $widget = this,\r\n                container = this.element,\r\n                classes = this.options.classes,\r\n                chooseText = this.options.jsonConfig.chooseText,\r\n                showTooltip = this.options.showTooltip;\r\n\r\n            $widget.optionsMap = {};\r\n\r\n            $.each(this.options.jsonConfig.attributes, function () {\r\n                var item = this,\r\n                    controlLabelId = 'option-label-' + item.code + '-' + item.id,\r\n                    options = $widget._RenderSwatchOptions(item, controlLabelId),\r\n                    select = $widget._RenderSwatchSelect(item, chooseText),\r\n                    input = $widget._RenderFormInput(item),\r\n                    listLabel = '',\r\n                    label = '';\r\n\r\n                // Show only swatch controls\r\n                if ($widget.options.onlySwatches && !$widget.options.jsonSwatchConfig.hasOwnProperty(item.id)) {\r\n                    return;\r\n                }\r\n\r\n                if ($widget.options.enableControlLabel) {\r\n                    label +=\r\n                        '<span id=\"' + controlLabelId + '\" class=\"' + classes.attributeLabelClass + '\">' +\r\n                        $('<i></i>').text(item.label).html() +\r\n                        '</span>' +\r\n                        '<span class=\"' + classes.attributeSelectedOptionLabelClass + '\"></span>';\r\n                }\r\n\r\n                if ($widget.inProductList) {\r\n                    $widget.productForm.append(input);\r\n                    input = '';\r\n                    listLabel = 'aria-label=\"' + $('<i></i>').text(item.label).html() + '\"';\r\n                } else {\r\n                    listLabel = 'aria-labelledby=\"' + controlLabelId + '\"';\r\n                }\r\n\r\n                // Create new control\r\n                container.append(\r\n                    '<div class=\"' + classes.attributeClass + ' ' + item.code + '\" ' +\r\n                         'data-attribute-code=\"' + item.code + '\" ' +\r\n                         'data-attribute-id=\"' + item.id + '\">' +\r\n                        label +\r\n                        '<div aria-activedescendant=\"\" ' +\r\n                             'tabindex=\"0\" ' +\r\n                             'aria-invalid=\"false\" ' +\r\n                             'aria-required=\"true\" ' +\r\n                             'role=\"listbox\" ' + listLabel +\r\n                             'class=\"' + classes.attributeOptionsWrapper + ' clearfix\">' +\r\n                            options + select +\r\n                        '</div>' + input +\r\n                    '</div>'\r\n                );\r\n\r\n                $widget.optionsMap[item.id] = {};\r\n\r\n                // Aggregate options array to hash (key => value)\r\n                $.each(item.options, function () {\r\n                    if (this.products.length > 0) {\r\n                        let salableProducts = this.products;\r\n\r\n                        if ($widget.options.jsonConfig.canDisplayShowOutOfStockStatus) {\r\n                            salableProducts = $widget.options.jsonConfig.salable[item.id][this.id];\r\n                        }\r\n                        $widget.optionsMap[item.id][this.id] = {\r\n                            price: parseInt(\r\n                                $widget.options.jsonConfig.optionPrices[this.products[0]].finalPrice.amount,\r\n                                10\r\n                            ),\r\n                            products: salableProducts\r\n                        };\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (showTooltip === 1) {\r\n                // Connect Tooltip\r\n                container\r\n                    .find('[data-option-type=\"1\"], [data-option-type=\"2\"],' +\r\n                        ' [data-option-type=\"0\"], [data-option-type=\"3\"]')\r\n                    .SwatchRendererTooltip();\r\n            }\r\n\r\n            // Hide all elements below more button\r\n            $('.' + classes.moreButton).nextAll().hide();\r\n\r\n            // Handle events like click or change\r\n            $widget._EventListener();\r\n\r\n            // Rewind options\r\n            $widget._Rewind(container);\r\n\r\n            //Emulate click on all swatches from Request\r\n            $widget._EmulateSelected($.parseQuery());\r\n            $widget._EmulateSelected($widget._getSelectedAttributes());\r\n        },\r\n\r\n        disableSwatchForOutOfStockProducts: function () {\r\n            let $widget = this, container = this.element;\r\n\r\n            $.each(this.options.jsonConfig.attributes, function () {\r\n                let item = this;\r\n\r\n                if ($widget.options.jsonConfig.canDisplayShowOutOfStockStatus) {\r\n                    let salableProducts = $widget.options.jsonConfig.salable[item.id],\r\n                        swatchOptions = $(container).find(`[data-attribute-id='${item.id}']`).find('.swatch-option');\r\n\r\n                    swatchOptions.each(function (key, value) {\r\n                        let optionId = $(value).data('option-id');\r\n\r\n                        if (!salableProducts.hasOwnProperty(optionId)) {\r\n                            $(value).attr('disabled', true).addClass('disabled');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render swatch options by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} controlId\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchOptions: function (config, controlId) {\r\n            var optionConfig = this.options.jsonSwatchConfig[config.id],\r\n                optionClass = this.options.classes.optionClass,\r\n                sizeConfig = this.options.jsonSwatchImageSizeConfig,\r\n                moreLimit = parseInt(this.options.numberToShow, 10),\r\n                moreClass = this.options.classes.moreButton,\r\n                moreText = this.options.moreButtonText,\r\n                countAttributes = 0,\r\n                html = '';\r\n\r\n            if (!this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            $.each(config.options, function (index) {\r\n                var id,\r\n                    type,\r\n                    value,\r\n                    thumb,\r\n                    label,\r\n                    width,\r\n                    height,\r\n                    attr,\r\n                    swatchImageWidth,\r\n                    swatchImageHeight;\r\n\r\n                if (!optionConfig.hasOwnProperty(this.id)) {\r\n                    return '';\r\n                }\r\n\r\n                // Add more button\r\n                if (moreLimit === countAttributes++) {\r\n                    html += '<a href=\"#\" class=\"' + moreClass + '\"><span>' + moreText + '</span></a>';\r\n                }\r\n\r\n                id = this.id;\r\n                type = parseInt(optionConfig[id].type, 10);\r\n                value = optionConfig[id].hasOwnProperty('value') ?\r\n                    $('<i></i>').text(optionConfig[id].value).html() : '';\r\n                thumb = optionConfig[id].hasOwnProperty('thumb') ? optionConfig[id].thumb : '';\r\n                width = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.width : 110;\r\n                height = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.height : 90;\r\n                label = this.label ? $('<i></i>').text(this.label).html() : '';\r\n                attr =\r\n                    ' id=\"' + controlId + '-item-' + id + '\"' +\r\n                    ' index=\"' + index + '\"' +\r\n                    ' aria-checked=\"false\"' +\r\n                    ' aria-describedby=\"' + controlId + '\"' +\r\n                    ' tabindex=\"0\"' +\r\n                    ' data-option-type=\"' + type + '\"' +\r\n                    ' data-option-id=\"' + id + '\"' +\r\n                    ' data-option-label=\"' + label + '\"' +\r\n                    ' aria-label=\"' + label + '\"' +\r\n                    ' role=\"option\"' +\r\n                    ' data-thumb-width=\"' + width + '\"' +\r\n                    ' data-thumb-height=\"' + height + '\"';\r\n\r\n                attr += thumb !== '' ? ' data-option-tooltip-thumb=\"' + thumb + '\"' : '';\r\n                attr += value !== '' ? ' data-option-tooltip-value=\"' + value + '\"' : '';\r\n\r\n                swatchImageWidth = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.width : 30;\r\n                swatchImageHeight = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.height : 20;\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                if (type === 0) {\r\n                    // Text\r\n                    html += '<div class=\"' + optionClass + ' text\" ' + attr + '>' + (value ? value : label) +\r\n                        '</div>';\r\n                } else if (type === 1) {\r\n                    // Color\r\n                    html += '<div class=\"' + optionClass + ' color\" ' + attr +\r\n                        ' style=\"background: ' + value +\r\n                        ' no-repeat center; background-size: initial;\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 2) {\r\n                    // Image\r\n                    html += '<div class=\"' + optionClass + ' image\" ' + attr +\r\n                        ' style=\"background: url(' + value + ') no-repeat center; background-size: initial;width:' +\r\n                        swatchImageWidth + 'px; height:' + swatchImageHeight + 'px\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 3) {\r\n                    // Clear\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '></div>';\r\n                } else {\r\n                    // Default\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '>' + label + '</div>';\r\n                }\r\n            });\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Render select by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} chooseText\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchSelect: function (config, chooseText) {\r\n            var html;\r\n\r\n            if (this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            html =\r\n                '<select class=\"' + this.options.classes.selectClass + ' ' + config.code + '\">' +\r\n                '<option value=\"0\" data-option-id=\"0\">' + chooseText + '</option>';\r\n\r\n            $.each(config.options, function () {\r\n                var label = this.label,\r\n                    attr = ' value=\"' + this.id + '\" data-option-id=\"' + this.id + '\"';\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                html += '<option ' + attr + '>' + label + '</option>';\r\n            });\r\n\r\n            html += '</select>';\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Input for submit form.\r\n         * This control shouldn't have \"type=hidden\", \"display: none\" for validation work :(\r\n         *\r\n         * @param {Object} config\r\n         * @private\r\n         */\r\n        _RenderFormInput: function (config) {\r\n            return '<input class=\"' + this.options.classes.attributeInput + ' super-attribute-select\" ' +\r\n                'name=\"super_attribute[' + config.id + ']\" ' +\r\n                'type=\"text\" ' +\r\n                'value=\"\" ' +\r\n                'data-selector=\"super_attribute[' + config.id + ']\" ' +\r\n                'data-validate=\"{required: true}\" ' +\r\n                'aria-required=\"true\" ' +\r\n                'aria-invalid=\"false\">';\r\n        },\r\n\r\n        /**\r\n         * Event listener\r\n         *\r\n         * @private\r\n         */\r\n        _EventListener: function () {\r\n            var $widget = this,\r\n                options = this.options.classes,\r\n                target;\r\n\r\n            $widget.element.on('click', '.' + options.optionClass, function () {\r\n                return $widget._OnClick($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('change', '.' + options.selectClass, function () {\r\n                return $widget._OnChange($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('click', '.' + options.moreButton, function (e) {\r\n                e.preventDefault();\r\n\r\n                return $widget._OnMoreClick($(this));\r\n            });\r\n\r\n            $widget.element.on('keydown', function (e) {\r\n                if (e.which === 13) {\r\n                    target = $(e.target);\r\n\r\n                    if (target.is('.' + options.optionClass)) {\r\n                        return $widget._OnClick(target, $widget);\r\n                    } else if (target.is('.' + options.selectClass)) {\r\n                        return $widget._OnChange(target, $widget);\r\n                    } else if (target.is('.' + options.moreButton)) {\r\n                        e.preventDefault();\r\n\r\n                        return $widget._OnMoreClick(target);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Load media gallery using ajax or json config.\r\n         *\r\n         * @private\r\n         */\r\n        _loadMedia: function () {\r\n            var $main = this.inProductList ?\r\n                    this.element.parents('.product-item-info') :\r\n                    this.element.parents('.column.main'),\r\n                images;\r\n\r\n            if (this.options.useAjax) {\r\n                this._debouncedLoadProductMedia();\r\n            }  else {\r\n                images = this.options.jsonConfig.images[this.getProduct()];\r\n\r\n                if (!images) {\r\n                    images = this.options.mediaGalleryInitial;\r\n                }\r\n                this.updateBaseImage(this._sortImages(images), $main, !this.inProductList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return parseInt(image.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Event for swatch options\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnClick: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                $wrapper = $this.parents('.' + $widget.options.classes.attributeOptionsWrapper),\r\n                $label = $parent.find('.' + $widget.options.classes.attributeSelectedOptionLabelClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput),\r\n                checkAdditionalData = JSON.parse(this.options.jsonSwatchConfig[attributeId]['additional_data']),\r\n                $priceBox = $widget.element.parents($widget.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            if ($widget.inProductList) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.hasClass('disabled')) {\r\n                return;\r\n            }\r\n\r\n            if ($this.hasClass('selected')) {\r\n                $parent.removeAttr('data-option-selected').find('.selected').removeClass('selected');\r\n                $input.val('');\r\n                $label.text('');\r\n                $this.attr('aria-checked', false);\r\n            } else {\r\n                $parent.attr('data-option-selected', $this.data('option-id')).find('.selected').removeClass('selected');\r\n                $label.text($this.data('option-label'));\r\n                $input.val($this.data('option-id'));\r\n                $input.attr('data-attr-name', this._getAttributeCodeById(attributeId));\r\n                $this.addClass('selected');\r\n                $widget._toggleCheckedAttributes($this, $wrapper);\r\n            }\r\n\r\n            $widget._Rebuild();\r\n\r\n            if ($priceBox.is(':data(mage-priceBox)')) {\r\n                $widget._UpdatePrice();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    this._getSelectedOptionPriceIndex(),\r\n                    $widget.options.jsonConfig.optionPrices,\r\n                    $priceBox\r\n                ]);\r\n\r\n            if (parseInt(checkAdditionalData['update_product_preview_image'], 10) === 1) {\r\n                $widget._loadMedia();\r\n            }\r\n\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Get selected option price index\r\n         *\r\n         * @return {String|undefined}\r\n         * @private\r\n         */\r\n        _getSelectedOptionPriceIndex: function () {\r\n            var allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (_.isEmpty(allowedProduct)) {\r\n                return undefined;\r\n            }\r\n\r\n            return allowedProduct;\r\n        },\r\n\r\n        /**\r\n         * Get human readable attribute code (eg. size, color) by it ID from configuration\r\n         *\r\n         * @param {Number} attributeId\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getAttributeCodeById: function (attributeId) {\r\n            var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n            return attribute ? attribute.code : attributeId;\r\n        },\r\n\r\n        /**\r\n         * Toggle accessibility attributes\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $wrapper\r\n         * @private\r\n         */\r\n        _toggleCheckedAttributes: function ($this, $wrapper) {\r\n            $wrapper.attr('aria-activedescendant', $this.attr('id'))\r\n                .find('.' + this.options.classes.optionClass).attr('aria-checked', false);\r\n            $this.attr('aria-checked', true);\r\n        },\r\n\r\n        /**\r\n         * Event for select\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnChange: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput);\r\n\r\n            if ($widget.productForm.length > 0) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.val() > 0) {\r\n                $parent.attr('data-option-selected', $this.val());\r\n                $input.val($this.val());\r\n            } else {\r\n                $parent.removeAttr('data-option-selected');\r\n                $input.val('');\r\n            }\r\n\r\n            $widget._Rebuild();\r\n            $widget._UpdatePrice();\r\n            $widget._loadMedia();\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Event for more switcher\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _OnMoreClick: function ($this) {\r\n            $this.nextAll().show();\r\n            $this.trigger('blur').remove();\r\n        },\r\n\r\n        /**\r\n         * Rewind options for controls\r\n         *\r\n         * @private\r\n         */\r\n        _Rewind: function (controls) {\r\n            controls.find('div[data-option-id], option[data-option-id]')\r\n                .removeClass('disabled')\r\n                .prop('disabled', false);\r\n            controls.find('div[data-option-empty], option[data-option-empty]')\r\n                .attr('disabled', true)\r\n                .addClass('disabled')\r\n                .attr('tabindex', '-1');\r\n            this.disableSwatchForOutOfStockProducts();\r\n        },\r\n\r\n        /**\r\n         * Rebuild container\r\n         *\r\n         * @private\r\n         */\r\n        _Rebuild: function () {\r\n            var $widget = this,\r\n                controls = $widget.element.find('.' + $widget.options.classes.attributeClass + '[data-attribute-id]'),\r\n                selected = controls.filter('[data-option-selected]');\r\n\r\n            // Enable all options\r\n            $widget._Rewind(controls);\r\n\r\n            // done if nothing selected\r\n            if (selected.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            // Disable not available options\r\n            controls.each(function () {\r\n                var $this = $(this),\r\n                    id = $this.data('attribute-id'),\r\n                    products = $widget._CalcProducts(id);\r\n\r\n                if (selected.length === 1 && selected.first().data('attribute-id') === id) {\r\n                    return;\r\n                }\r\n\r\n                $this.find('[data-option-id]').each(function () {\r\n                    var $element = $(this),\r\n                        option = $element.data('option-id');\r\n\r\n                    if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option) ||\r\n                        $element.hasClass('selected') ||\r\n                        $element.is(':selected')) {\r\n                        return;\r\n                    }\r\n\r\n                    if (_.intersection(products, $widget.optionsMap[id][option].products).length <= 0) {\r\n                        $element.attr('disabled', true).addClass('disabled');\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get selected product list\r\n         *\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _CalcProducts: function ($skipAttributeId) {\r\n            var $widget = this,\r\n                selectedOptions = '.' + $widget.options.classes.attributeClass + '[data-option-selected]',\r\n                products = [];\r\n\r\n            // Generate intersection of products\r\n            $widget.element.find(selectedOptions).each(function () {\r\n                var id = $(this).data('attribute-id'),\r\n                    option = $(this).attr('data-option-selected');\r\n\r\n                if ($skipAttributeId !== undefined && $skipAttributeId === id) {\r\n                    return;\r\n                }\r\n\r\n                if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option)) {\r\n                    return;\r\n                }\r\n\r\n                if (products.length === 0) {\r\n                    products = $widget.optionsMap[id][option].products;\r\n                } else {\r\n                    products = _.intersection(products, $widget.optionsMap[id][option].products);\r\n                }\r\n            });\r\n\r\n            return products;\r\n        },\r\n\r\n        /**\r\n         * Update total price\r\n         *\r\n         * @private\r\n         */\r\n        _UpdatePrice: function () {\r\n            var $widget = this,\r\n                $product = $widget.element.parents($widget.options.selectorProduct),\r\n                $productPrice = $product.find(this.options.selectorProductPrice),\r\n                result = $widget._getNewPrices(),\r\n                tierPriceHtml,\r\n                isShow;\r\n\r\n            $productPrice.trigger(\r\n                'updatePrice',\r\n                {\r\n                    'prices': $widget._getPrices(result, $productPrice.priceBox('option').prices)\r\n                }\r\n            );\r\n\r\n            isShow = typeof result != 'undefined' && result.oldPrice.amount !== result.finalPrice.amount;\r\n\r\n            $productPrice.find('span:first').toggleClass('special-price', isShow);\r\n\r\n            $product.find(this.options.slyOldPriceSelector)[isShow ? 'show' : 'hide']();\r\n\r\n            if (typeof result != 'undefined' && result.tierPrices && result.tierPrices.length) {\r\n                if (this.options.tierPriceTemplate) {\r\n                    tierPriceHtml = mageTemplate(\r\n                        this.options.tierPriceTemplate,\r\n                        {\r\n                            'tierPrices': result.tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.jsonConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        }\r\n                    );\r\n                    $(this.options.tierPriceBlockSelector).html(tierPriceHtml).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n\r\n            $product.find(this.options.normalPriceLabelSelector).hide();\r\n\r\n            _.each(this.element.find('.' + this.options.classes.attributeOptionsWrapper), function (attribute) {\r\n                if ($(attribute).find('.' + this.options.classes.optionClass + '.selected').length === 0) {\r\n                    if ($(attribute).find('.' + this.options.classes.selectClass).length > 0) {\r\n                        _.each($(attribute).find('.' + this.options.classes.selectClass), function (dropdown) {\r\n                            if ($(dropdown).val() === '0') {\r\n                                $product.find(this.options.normalPriceLabelSelector).show();\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        $product.find(this.options.normalPriceLabelSelector).show();\r\n                    }\r\n                }\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get new prices for selected options\r\n         *\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getNewPrices: function () {\r\n            var $widget = this,\r\n                newPrices = $widget.options.jsonConfig.prices,\r\n                allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (!_.isEmpty(allowedProduct)) {\r\n                newPrices = this.options.jsonConfig.optionPrices[allowedProduct];\r\n            }\r\n\r\n            return newPrices;\r\n        },\r\n\r\n        /**\r\n         * Get prices\r\n         *\r\n         * @param {Object} newPrices\r\n         * @param {Object} displayPrices\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPrices: function (newPrices, displayPrices) {\r\n            var $widget = this;\r\n\r\n            if (_.isEmpty(newPrices)) {\r\n                newPrices = $widget._getNewPrices();\r\n            }\r\n            _.each(displayPrices, function (price, code) {\r\n\r\n                if (newPrices[code]) {\r\n                    displayPrices[code].amount = newPrices[code].amount - displayPrices[code].amount;\r\n                }\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.jsonConfig.optionPrices,\r\n                product = {},\r\n                optionFinalPrice, optionMinPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Gets all product media and change current to the needed one\r\n         *\r\n         * @private\r\n         */\r\n        _LoadProductMedia: function () {\r\n            var $widget = this,\r\n                $this = $widget.element,\r\n                productData = this._determineProductData(),\r\n                mediaCallData,\r\n                mediaCacheKey,\r\n\r\n                /**\r\n                 * Processes product media data\r\n                 *\r\n                 * @param {Object} data\r\n                 * @returns void\r\n                 */\r\n                mediaSuccessCallback = function (data) {\r\n                    if (!(mediaCacheKey in $widget.options.mediaCache)) {\r\n                        $widget.options.mediaCache[mediaCacheKey] = data;\r\n                    }\r\n                    $widget._ProductMediaCallback($this, data, productData.isInProductView);\r\n                    setTimeout(function () {\r\n                        $widget._DisableProductMediaLoader($this);\r\n                    }, 300);\r\n                };\r\n\r\n            if (!$widget.options.mediaCallback) {\r\n                return;\r\n            }\r\n\r\n            mediaCallData = {\r\n                'product_id': this.getProduct()\r\n            };\r\n\r\n            mediaCacheKey = JSON.stringify(mediaCallData);\r\n\r\n            if (mediaCacheKey in $widget.options.mediaCache) {\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                mediaSuccessCallback($widget.options.mediaCache[mediaCacheKey]);\r\n            } else {\r\n                mediaCallData.isAjax = true;\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                $widget.xhr = $.ajax({\r\n                    url: $widget.options.mediaCallback,\r\n                    cache: true,\r\n                    type: 'GET',\r\n                    dataType: 'json',\r\n                    data: mediaCallData,\r\n                    success: mediaSuccessCallback\r\n                }).done(function () {\r\n                    $widget._XhrKiller();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _EnableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .addClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .addClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _DisableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .removeClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .removeClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback for product media\r\n         *\r\n         * @param {Object} $this\r\n         * @param {String} response\r\n         * @param {Boolean} isInProductView\r\n         * @private\r\n         */\r\n        _ProductMediaCallback: function ($this, response, isInProductView) {\r\n            var $main = isInProductView ? $this.parents('.column.main') : $this.parents('.product-item-info'),\r\n                $widget = this,\r\n                images = [],\r\n\r\n                /**\r\n                 * Check whether object supported or not\r\n                 *\r\n                 * @param {Object} e\r\n                 * @returns {*|Boolean}\r\n                 */\r\n                support = function (e) {\r\n                    return e.hasOwnProperty('large') && e.hasOwnProperty('medium') && e.hasOwnProperty('small');\r\n                };\r\n\r\n            if (_.size($widget) < 1 || !support(response)) {\r\n                this.updateBaseImage(this.options.mediaGalleryInitial, $main, isInProductView);\r\n\r\n                return;\r\n            }\r\n\r\n            images.push({\r\n                full: response.large,\r\n                img: response.medium,\r\n                thumb: response.small,\r\n                isMain: true\r\n            });\r\n\r\n            if (response.hasOwnProperty('gallery')) {\r\n                $.each(response.gallery, function () {\r\n                    if (!support(this) || response.large === this.large) {\r\n                        return;\r\n                    }\r\n                    images.push({\r\n                        full: this.large,\r\n                        img: this.medium,\r\n                        thumb: this.small\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.updateBaseImage(images, $main, isInProductView);\r\n        },\r\n\r\n        /**\r\n         * Check if images to update are initial and set their type\r\n         * @param {Array} images\r\n         */\r\n        _setImageType: function (images) {\r\n\r\n            images.map(function (img) {\r\n                if (!img.type) {\r\n                    img.type = 'image';\r\n                }\r\n            });\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Update [gallery-placeholder] or [product-image-photo]\r\n         * @param {Array} images\r\n         * @param {jQuery} context\r\n         * @param {Boolean} isInProductView\r\n         */\r\n        updateBaseImage: function (images, context, isInProductView) {\r\n            var justAnImage = images[0],\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                imagesToUpdate,\r\n                gallery = context.find(this.options.mediaGallerySelector).data('gallery'),\r\n                isInitial;\r\n\r\n            if (isInProductView) {\r\n                if (_.isUndefined(gallery)) {\r\n                    context.find(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                        this.updateBaseImage(images, context, isInProductView);\r\n                    }.bind(this));\r\n\r\n                    return;\r\n                }\r\n\r\n                imagesToUpdate = images.length ? this._setImageType($.extend(true, [], images)) : [];\r\n                isInitial = _.isEqual(\r\n                    imagesToUpdate.map(({thumb, img, full, type, videoUrl}) => ({thumb, img, full, type, videoUrl})),\r\n                    initialImages.map(({thumb, img, full, type, videoUrl}) => ({thumb, img, full, type, videoUrl}))\r\n                );\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend' && !isInitial) {\r\n                    imagesToUpdate = imagesToUpdate.concat(initialImages);\r\n                }\r\n\r\n                imagesToUpdate = this._setImageIndex(imagesToUpdate);\r\n\r\n                gallery.updateData(imagesToUpdate);\r\n                this._addFotoramaVideoEvents(isInitial);\r\n            } else if (justAnImage && justAnImage.img) {\r\n                context.find('.product-image-photo').attr('src', justAnImage.img);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.getProduct(),\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Kill doubled AJAX requests\r\n         *\r\n         * @private\r\n         */\r\n        _XhrKiller: function () {\r\n            var $widget = this;\r\n\r\n            if ($widget.xhr !== undefined && $widget.xhr !== null) {\r\n                $widget.xhr.abort();\r\n                $widget.xhr = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelected: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeCode, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-code=\"' + attributeCode + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click or selection change on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelectedByAttributeId: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeId, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-id=\"' + attributeId + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Get default options values settings with either URL query parameters\r\n         * @private\r\n         */\r\n        _getSelectedAttributes: function () {\r\n            var hashIndex = window.location.href.indexOf('#'),\r\n                selectedAttributes = {},\r\n                params;\r\n\r\n            if (hashIndex !== -1) {\r\n                params = $.parseQuery(window.location.href.substr(hashIndex + 1));\r\n\r\n                selectedAttributes = _.invert(_.mapObject(_.invert(params), function (attributeId) {\r\n                    var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n                    return attribute ? attribute.code : attributeId;\r\n                }.bind(this)));\r\n            }\r\n\r\n            return selectedAttributes;\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with a gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Sets mediaCache for cases when jsonConfig contains preSelectedGallery on layered navigation result pages\r\n         *\r\n         * @private\r\n         */\r\n        _setPreSelectedGallery: function () {\r\n            var mediaCallData;\r\n\r\n            if (this.options.jsonConfig.preSelectedGallery) {\r\n                mediaCallData = {\r\n                    'product_id': this.getProduct()\r\n                };\r\n\r\n                this.options.mediaCache[JSON.stringify(mediaCallData)] = this.options.jsonConfig.preSelectedGallery;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback for quantity change event.\r\n         */\r\n        _onQtyChanged: function () {\r\n            var $price = this.element.parents(this.options.selectorProduct)\r\n                .find(this.options.selectorProductPrice);\r\n\r\n            $price.trigger(\r\n                'updatePrice',\r\n                {\r\n                    'prices': this._getPrices(this._getNewPrices(), $price.priceBox('option').prices)\r\n                }\r\n            );\r\n        }\r\n    });\r\n\r\n    return $.mage.SwatchRenderer;\r\n});\r\n","Magento_Swatches/js/text.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n *  @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'jquery/ui',\r\n    'prototype',\r\n    'validation'\r\n], function (jQuery, mageTemplate, rg) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var swatchOptionTextDefaultInputType = 'radio',\r\n            swatchTextOption = {\r\n                table: $('swatch-text-options-table'),\r\n                itemCount: 0,\r\n                totalItems: 0,\r\n                rendered: 0,\r\n                isReadOnly: config.isReadOnly,\r\n                template: mageTemplate('#swatch-text-row-template'),\r\n\r\n                /**\r\n                 * Add option\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Object} render\r\n                 */\r\n                add: function (data, render) {\r\n                    var isNewOption = false,\r\n                        element;\r\n\r\n                    if (typeof data.id == 'undefined') {\r\n                        data = {\r\n                            'id': 'option_' + this.itemCount,\r\n                            'sort_order': this.itemCount + 1\r\n                        };\r\n                        isNewOption = true;\r\n                    }\r\n\r\n                    if (!data.intype) {\r\n                        data.intype = swatchOptionTextDefaultInputType;\r\n                    }\r\n\r\n                    element = this.template({\r\n                        data: data\r\n                    });\r\n\r\n                    if (isNewOption && !this.isReadOnly) {\r\n                        this.enableNewOptionDeleteButton(data.id);\r\n                    }\r\n                    this.itemCount++;\r\n                    this.totalItems++;\r\n                    this.elements += element;\r\n\r\n                    if (render) {\r\n                        this.render();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Remove option\r\n                 *\r\n                 * @param {Object} event\r\n                 */\r\n                remove: function (event) {\r\n                    var element = $(Event.findElement(event, 'tr')),\r\n                        elementFlags; // !!! Button already have table parent in safari\r\n\r\n                    // Safari workaround\r\n                    element.ancestors().each(function (parentItem) {\r\n                        if (parentItem.hasClassName('option-row')) {\r\n                            element = parentItem;\r\n                            throw $break;\r\n                        } else if (parentItem.hasClassName('box')) {\r\n                            throw $break;\r\n                        }\r\n                    });\r\n\r\n                    if (element) {\r\n                        elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                        if (elementFlags[0]) {\r\n                            elementFlags[0].value = 1;\r\n                        }\r\n\r\n                        element.addClassName('no-display');\r\n                        element.addClassName('template');\r\n                        element.hide();\r\n                        this.totalItems--;\r\n                        this.updateItemsCountField();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Update items count field\r\n                 */\r\n                updateItemsCountField: function () {\r\n                    $('swatch-text-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n                },\r\n\r\n                /**\r\n                 * Enable delete button for new option\r\n                 *\r\n                 * @param {String} id\r\n                 */\r\n                enableNewOptionDeleteButton: function (id) {\r\n                    $$('#delete_button_swatch_container_' + id + ' button').each(function (button) {\r\n                        button.enable();\r\n                        button.removeClassName('disabled');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * Bind remove button\r\n                 */\r\n                bindRemoveButtons: function () {\r\n                    jQuery('#swatch-text-options-panel').on('click', '.delete-option', this.remove.bind(this));\r\n                },\r\n\r\n                /**\r\n                 * Render action\r\n                 */\r\n                render: function () {\r\n                    Element.insert($$('[data-role=swatch-text-options-container]')[0], this.elements);\r\n                    this.elements = '';\r\n                },\r\n\r\n                /**\r\n                 * Render action with delay (performance fix)\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Number} from\r\n                 * @param {Number} step\r\n                 * @param {Number} delay\r\n                 * @returns {Boolean}\r\n                 */\r\n                renderWithDelay: function (data, from, step, delay) {\r\n                    var arrayLength = data.length,\r\n                        len;\r\n\r\n                    for (len = from + step; from < len && from < arrayLength; from++) {\r\n                        this.add(data[from]);\r\n                    }\r\n                    this.render();\r\n\r\n                    if (from === arrayLength) {\r\n                        this.updateItemsCountField();\r\n                        this.rendered = 1;\r\n                        jQuery('body').trigger('processStop');\r\n\r\n                        return true;\r\n                    }\r\n                    setTimeout(this.renderWithDelay.bind(this, data, from, step, delay), delay);\r\n                },\r\n\r\n                /**\r\n                 * Ignore validate action\r\n                 */\r\n                ignoreValidate: function () {\r\n                    var ignore = '.ignore-validate input, ' +\r\n                        '.ignore-validate select, ' +\r\n                        '.ignore-validate textarea';\r\n\r\n                    jQuery('#edit_form').data('validator').settings.forceIgnore = ignore;\r\n                }\r\n            };\r\n\r\n        if ($('add_new_swatch_text_option_button')) {\r\n            Event.observe(\r\n                'add_new_swatch_text_option_button',\r\n                'click',\r\n                swatchTextOption.add.bind(swatchTextOption, true)\r\n            );\r\n        }\r\n        jQuery('#swatch-text-options-panel').on('render', function () {\r\n            swatchTextOption.ignoreValidate();\r\n\r\n            if (swatchTextOption.rendered) {\r\n                return false;\r\n            }\r\n            jQuery('body').trigger('processStart');\r\n            swatchTextOption.renderWithDelay(config.attributesData, 0, 100, 300);\r\n            swatchTextOption.bindRemoveButtons();\r\n        });\r\n\r\n        if (config.isSortable) {\r\n            jQuery(function ($) {\r\n                $('[data-role=swatch-text-options-container]').sortable({\r\n                    distance: 8,\r\n                    tolerance: 'pointer',\r\n                    cancel: 'input, button',\r\n                    axis: 'y',\r\n\r\n                    /**\r\n                     * Update components\r\n                     */\r\n                    update: function () {\r\n                        $('[data-role=swatch-text-options-container] [data-role=order]').each(\r\n                            function (index, element) {\r\n                                $(element).val(index + 1);\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        jQuery(function () {\r\n            if (jQuery('#frontend_input').val() !== 'swatch_text') {\r\n                jQuery('.swatch-text-field-0').removeClass('required-option');\r\n            }\r\n        });\r\n\r\n        window.swatchTextOption = swatchTextOption;\r\n        window.swatchOptionTextDefaultInputType = swatchOptionTextDefaultInputType;\r\n\r\n        rg.set('swatch-text-options-panel', swatchTextOption);\r\n    };\r\n});\r\n","Magento_Swatches/js/visual.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global FORM_KEY */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'jquery/colorpicker/js/colorpicker',\r\n    'prototype',\r\n    'jquery/ui',\r\n    'validation'\r\n], function (jQuery, mageTemplate, rg) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var swatchOptionVisualDefaultInputType = 'radio',\r\n            swatchVisualOption = {\r\n                table: $('swatch-visual-options-table'),\r\n                itemCount: 0,\r\n                totalItems: 0,\r\n                rendered: 0,\r\n                isReadOnly: config.isReadOnly,\r\n                template: mageTemplate('#swatch-visual-row-template'),\r\n\r\n                /**\r\n                 * Add new option using template\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Object} render\r\n                 */\r\n                add: function (data, render) {\r\n                    var isNewOption = false,\r\n                        element;\r\n\r\n                    if (typeof data.id == 'undefined') {\r\n                        data = {\r\n                            'id': 'option_' + this.itemCount,\r\n                            'sort_order': this.itemCount + 1,\r\n                            'empty_class': 'unavailable'\r\n                        };\r\n                        isNewOption = true;\r\n                    } else if (data.defaultswatch0 === '') {\r\n                        data['empty_class'] = 'unavailable';\r\n                    }\r\n\r\n                    if (!data.intype) {\r\n                        data.intype = swatchOptionVisualDefaultInputType;\r\n                    }\r\n\r\n                    element = this.template({\r\n                        data: data\r\n                    });\r\n\r\n                    if (isNewOption && !this.isReadOnly) {\r\n                        this.enableNewOptionDeleteButton(data.id);\r\n                    }\r\n                    this.itemCount++;\r\n                    this.totalItems++;\r\n                    this.elements += element;\r\n\r\n                    if (render) {\r\n                        this.render();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * ColorPicker initialization process\r\n                 */\r\n                initColorPicker: function () {\r\n                    var element = this,\r\n                        hiddenColorPicker = !jQuery(element).data('colorpickerId');\r\n\r\n                    jQuery(this).ColorPicker({\r\n\r\n                        /**\r\n                         * ColorPicker onShow action\r\n                         */\r\n                        onShow: function () {\r\n                            var color = jQuery(element).parent().parent().prev().prev('input').val(),\r\n                                menu = jQuery(this).parents('.swatch_sub-menu_container');\r\n\r\n                            menu.hide();\r\n                            jQuery(element).ColorPickerSetColor(color);\r\n                        },\r\n\r\n                        /**\r\n                         * ColorPicker onSubmit action\r\n                         *\r\n                         * @param {String} hsb\r\n                         * @param {String} hex\r\n                         * @param {String} rgb\r\n                         * @param {String} el\r\n                         */\r\n                        onSubmit: function (hsb, hex, rgb, el) {\r\n                            var container = jQuery(el).parent().parent().prev();\r\n\r\n                            jQuery(el).ColorPickerHide();\r\n                            container.parent().removeClass('unavailable');\r\n                            container.prev('input').val('#' + hex);\r\n                            container.css('background', '#' + hex);\r\n                        }\r\n                    });\r\n\r\n                    if (hiddenColorPicker) {\r\n                        jQuery(this).ColorPickerShow();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Remove action\r\n                 *\r\n                 * @param {Object} event\r\n                 */\r\n                remove: function (event) {\r\n                    var element = $(Event.findElement(event, 'tr')),\r\n                        elementFlags; // !!! Button already have table parent in safari\r\n\r\n                    // Safari workaround\r\n                    element.ancestors().each(function (parentItem) {\r\n                        if (parentItem.hasClassName('option-row')) {\r\n                            element = parentItem;\r\n                            throw $break;\r\n                        } else if (parentItem.hasClassName('box')) {\r\n                            throw $break;\r\n                        }\r\n                    });\r\n\r\n                    if (element) {\r\n                        elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                        if (elementFlags[0]) {\r\n                            elementFlags[0].value = 1;\r\n                        }\r\n\r\n                        element.addClassName('no-display');\r\n                        element.addClassName('template');\r\n                        element.hide();\r\n                        this.totalItems--;\r\n                        this.updateItemsCountField();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Update items count field\r\n                 */\r\n                updateItemsCountField: function () {\r\n                    $('swatch-visual-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n                },\r\n\r\n                /**\r\n                 * Enable delete button for new option\r\n                 *\r\n                 * @param {String} id\r\n                 */\r\n                enableNewOptionDeleteButton: function (id) {\r\n                    $$('#delete_button_swatch_container_' + id + ' button').each(function (button) {\r\n                        button.enable();\r\n                        button.removeClassName('disabled');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * Bind remove button\r\n                 */\r\n                bindRemoveButtons: function () {\r\n                    jQuery('#swatch-visual-options-panel').on('click', '.delete-option', this.remove.bind(this));\r\n                },\r\n\r\n                /**\r\n                 * Render options\r\n                 */\r\n                render: function () {\r\n                    Element.insert($$('[data-role=swatch-visual-options-container]')[0], this.elements);\r\n                    this.elements = '';\r\n                },\r\n\r\n                /**\r\n                 * Render elements with delay (performance fix)\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Number} from\r\n                 * @param {Number} step\r\n                 * @param {Number} delay\r\n                 * @returns {Boolean}\r\n                 */\r\n                renderWithDelay: function (data, from, step, delay) {\r\n                    var arrayLength = data.length,\r\n                        len;\r\n\r\n                    for (len = from + step; from < len && from < arrayLength; from++) {\r\n                        this.add(data[from]);\r\n                    }\r\n                    this.render();\r\n\r\n                    if (from === arrayLength) {\r\n                        this.updateItemsCountField();\r\n                        this.rendered = 1;\r\n                        jQuery('body').trigger('processStop');\r\n\r\n                        return true;\r\n                    }\r\n                    setTimeout(this.renderWithDelay.bind(this, data, from, step, delay), delay);\r\n                },\r\n\r\n                /**\r\n                 * Ignore validate action\r\n                 */\r\n                ignoreValidate: function () {\r\n                    var ignore = '.ignore-validate input, ' +\r\n                        '.ignore-validate select, ' +\r\n                        '.ignore-validate textarea';\r\n\r\n                    jQuery('#edit_form').data('validator').settings.forceIgnore = ignore;\r\n                }\r\n            };\r\n\r\n        if ($('add_new_swatch_visual_option_button')) {\r\n            Event.observe(\r\n                'add_new_swatch_visual_option_button',\r\n                'click',\r\n                swatchVisualOption.add.bind(swatchVisualOption, {}, true)\r\n            );\r\n        }\r\n\r\n        jQuery('#swatch-visual-options-panel').on('render', function () {\r\n            swatchVisualOption.ignoreValidate();\r\n\r\n            if (swatchVisualOption.rendered) {\r\n                return false;\r\n            }\r\n            jQuery('body').trigger('processStart');\r\n            swatchVisualOption.renderWithDelay(config.attributesData, 0, 100, 300);\r\n            swatchVisualOption.bindRemoveButtons();\r\n            jQuery('#swatch-visual-options-panel').on(\r\n                'click',\r\n                '.colorpicker_handler',\r\n                swatchVisualOption.initColorPicker\r\n            );\r\n        });\r\n        jQuery('body').on('click', function (event) {\r\n            var element = jQuery(event.target);\r\n\r\n            if (\r\n                element.parents('.swatch_sub-menu_container').length === 1 ||\r\n                element.next('div.swatch_sub-menu_container').length === 1\r\n            ) {\r\n                return true;\r\n            }\r\n            jQuery('.swatch_sub-menu_container').hide();\r\n        });\r\n\r\n        if (config.isSortable) {\r\n            jQuery(function ($) {\r\n                $('[data-role=swatch-visual-options-container]').sortable({\r\n                    distance: 8,\r\n                    tolerance: 'pointer',\r\n                    cancel: 'input, button',\r\n                    axis: 'y',\r\n\r\n                    /**\r\n                     * Update component\r\n                     */\r\n                    update: function () {\r\n                        $('[data-role=swatch-visual-options-container] [data-role=order]').each(\r\n                            function (index, element) {\r\n                                $(element).val(index + 1);\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        window.swatchVisualOption = swatchVisualOption;\r\n        window.swatchOptionVisualDefaultInputType = swatchOptionVisualDefaultInputType;\r\n\r\n        rg.set('swatch-visual-options-panel', swatchVisualOption);\r\n\r\n        jQuery(function ($) {\r\n\r\n            var swatchComponents = {\r\n\r\n                /**\r\n                 * div wrapper for to hide all evement\r\n                 */\r\n                wrapper: null,\r\n\r\n                /**\r\n                 * iframe component to perform file upload without page reload\r\n                 */\r\n                iframe: null,\r\n\r\n                /**\r\n                 * form component for upload image\r\n                 */\r\n                form: null,\r\n\r\n                /**\r\n                 * Input file component for upload image\r\n                 */\r\n                inputFile: null,\r\n\r\n                /**\r\n                 * Create swatch component for upload files\r\n                 *\r\n                 * @this {swatchComponents}\r\n                 * @public\r\n                 */\r\n                create: function () {\r\n                    this.wrapper = $('<div>').css({\r\n                        display: 'none'\r\n                    }).appendTo($('body'));\r\n\r\n                    this.iframe = $('<iframe></iframe>', {\r\n                        id:  'upload_iframe',\r\n                        name: 'upload_iframe'\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.form = $('<form></form>', {\r\n                        id: 'swatch_form_image_upload',\r\n                        name: 'swatch_form_image_upload',\r\n                        target: 'upload_iframe',\r\n                        method: 'post',\r\n                        enctype: 'multipart/form-data',\r\n                        class: 'ignore-validate',\r\n                        action: config.uploadActionUrl\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.inputFile = $('<input />', {\r\n                        type: 'file',\r\n                        name: 'datafile',\r\n                        class: 'swatch_option_file'\r\n                    }).appendTo(this.form);\r\n\r\n                    $('<input />', {\r\n                        type: 'hidden',\r\n                        name: 'form_key',\r\n                        value: FORM_KEY\r\n                    }).appendTo(this.form);\r\n                }\r\n            };\r\n\r\n            /**\r\n             * Create swatch components\r\n             */\r\n            swatchComponents.create();\r\n\r\n            /**\r\n             * Register event for swatch input[type=file] change\r\n             */\r\n            swatchComponents.inputFile.change(function () {\r\n                var container = $('#' + $(this).attr('data-called-by')).parents().eq(2).children('.swatch_window'),\r\n\r\n                    /**\r\n                     * @this {iframe}\r\n                     */\r\n                    iframeHandler = function () {\r\n                        var imageParams = $.parseJSON($(this).contents().find('body').html()),\r\n                            fullMediaUrl = imageParams['swatch_path'] + imageParams['file_path'];\r\n\r\n                        container.prev('input').val(imageParams['file_path']);\r\n                        container.css({\r\n                            'background-image': 'url(' + fullMediaUrl + ')',\r\n                            'background-size': 'cover'\r\n                        });\r\n                        container.parent().removeClass('unavailable');\r\n                    };\r\n\r\n                swatchComponents.iframe.off('load');\r\n                swatchComponents.iframe.on('load', iframeHandler);\r\n                swatchComponents.form.submit();\r\n                $(this).val('');\r\n            });\r\n\r\n            /**\r\n             * Register event for choose \"upload image\" option\r\n             */\r\n            $(document).on('click', '.btn_choose_file_upload', function () {\r\n                swatchComponents.inputFile.attr('data-called-by', $(this).attr('id'));\r\n                swatchComponents.inputFile.trigger('click');\r\n            });\r\n\r\n            /**\r\n             * Register event for remove option\r\n             */\r\n            $(document).on('click', '.btn_remove_swatch', function () {\r\n                var optionPanel = $(this).parents().eq(2);\r\n\r\n                optionPanel.children('input').val('');\r\n                optionPanel.children('.swatch_window').css('background', '');\r\n\r\n                optionPanel.addClass('unavailable');\r\n\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n            });\r\n\r\n            /**\r\n             * Toggle color upload chooser\r\n             */\r\n            $(document).on('click', '.swatches-visual-col', function () {\r\n                var currentElement = $(this).find('.swatch_sub-menu_container');\r\n\r\n                jQuery('.swatch_sub-menu_container').not(currentElement).hide();\r\n                currentElement.toggle();\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_Swatches/js/form/element/swatch-visual.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global FORM_KEY */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/view/utils/async',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'prototype',\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'jquery/colorpicker/js/colorpicker',\r\n    'jquery/ui'\r\n], function (_, jQuery, mageTemplate, rg, prototype, Abstract) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Former implementation.\r\n     *\r\n     * @param {*} value\r\n     * @param {Object} container\r\n     * @param {String} uploadUrl\r\n     * @param {String} elementName\r\n     */\r\n    function oldCode(value, container, uploadUrl, elementName) {\r\n        var swatchVisualOption = {\r\n            itemCount: 0,\r\n            totalItems: 0,\r\n            rendered: 0,\r\n            isReadOnly: false,\r\n\r\n            /**\r\n             * Initialize.\r\n             */\r\n            initialize: function () {\r\n                if (_.isEmpty(value)) {\r\n                    container.addClassName('unavailable');\r\n                }\r\n\r\n                jQuery(container).on(\r\n                    'click',\r\n                    '.colorpicker_handler',\r\n                    this.initColorPicker\r\n                );\r\n            },\r\n\r\n            /**\r\n             * ColorPicker initialization process\r\n             */\r\n            initColorPicker: function () {\r\n                var element = this,\r\n                    hiddenColorPicker = !jQuery(element).data('colorpickerId');\r\n\r\n                jQuery(this).ColorPicker({\r\n\r\n                    /**\r\n                     * ColorPicker onShow action\r\n                     */\r\n                    onShow: function () {\r\n                        var color = jQuery(element).parent().parent().prev().prev('input').val(),\r\n                            menu = jQuery(this).parents('.swatch_sub-menu_container');\r\n\r\n                        menu.hide();\r\n                        jQuery(element).ColorPickerSetColor(color);\r\n                    },\r\n\r\n                    /**\r\n                     * ColorPicker onSubmit action\r\n                     *\r\n                     * @param {String} hsb\r\n                     * @param {String} hex\r\n                     * @param {String} rgb\r\n                     * @param {String} el\r\n                     */\r\n                    onSubmit: function (hsb, hex, rgb, el) {\r\n                        var localContainer = jQuery(el).parent().parent().prev();\r\n\r\n                        jQuery(el).ColorPickerHide();\r\n                        localContainer.parent().removeClass('unavailable');\r\n                        localContainer.prev('input').val('#' + hex).trigger('change');\r\n                        localContainer.css('background', '#' + hex);\r\n                    }\r\n                });\r\n\r\n                if (hiddenColorPicker) {\r\n                    jQuery(this).ColorPickerShow();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Remove action\r\n             *\r\n             * @param {Object} event\r\n             */\r\n            remove: function (event) {\r\n                var element = $(Event.findElement(event, 'tr')),\r\n                    elementFlags; // !!! Button already have table parent in safari\r\n\r\n                // Safari workaround\r\n                element.ancestors().each(function (parentItem) {\r\n                    if (parentItem.hasClassName('option-row')) {\r\n                        element = parentItem;\r\n                        throw $break;\r\n                    } else if (parentItem.hasClassName('box')) {\r\n                        throw $break;\r\n                    }\r\n                });\r\n\r\n                if (element) {\r\n                    elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                    if (elementFlags[0]) {\r\n                        elementFlags[0].value = 1;\r\n                    }\r\n\r\n                    element.addClassName('no-display');\r\n                    element.addClassName('template');\r\n                    element.hide();\r\n                    this.totalItems--;\r\n                    this.updateItemsCountField();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Update items count field\r\n             */\r\n            updateItemsCountField: function () {\r\n                $('swatch-visual-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n            }\r\n        };\r\n\r\n        //swatchVisualOption.initColorPicker();\r\n\r\n        jQuery('body').on('click', function (event) {\r\n            var element = jQuery(event.target);\r\n\r\n            if (\r\n                element.parents('.swatch_sub-menu_container').length === 1 ||\r\n                element.next('div.swatch_sub-menu_container').length === 1\r\n            ) {\r\n                return true;\r\n            }\r\n            jQuery('.swatch_sub-menu_container').hide();\r\n        });\r\n\r\n        jQuery(function ($) {\r\n\r\n            var swatchComponents = {\r\n\r\n                /**\r\n                 * div wrapper for to hide all evement\r\n                 */\r\n                wrapper: null,\r\n\r\n                /**\r\n                 * iframe component to perform file upload without page reload\r\n                 */\r\n                iframe: null,\r\n\r\n                /**\r\n                 * form component for upload image\r\n                 */\r\n                form: null,\r\n\r\n                /**\r\n                 * Input file component for upload image\r\n                 */\r\n                inputFile: null,\r\n\r\n                /**\r\n                 * Create swatch component for upload files\r\n                 *\r\n                 * @this {swatchComponents}\r\n                 * @public\r\n                 */\r\n                create: function () {\r\n                    this.wrapper = $('<div>').css({\r\n                        display: 'none'\r\n                    }).appendTo($('body'));\r\n\r\n                    this.iframe = $('<iframe></iframe>', {\r\n                        name: 'upload_iframe_' + elementName\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.form = $('<form></form>', {\r\n                        name: 'swatch_form_image_upload_' + elementName,\r\n                        target: 'upload_iframe_' + elementName,\r\n                        method: 'post',\r\n                        enctype: 'multipart/form-data',\r\n                        class: 'ignore-validate',\r\n                        action: uploadUrl\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.inputFile = $('<input />', {\r\n                        type: 'file',\r\n                        name: 'datafile',\r\n                        class: 'swatch_option_file'\r\n                    }).appendTo(this.form);\r\n\r\n                    $('<input />', {\r\n                        type: 'hidden',\r\n                        name: 'form_key',\r\n                        value: FORM_KEY\r\n                    }).appendTo(this.form);\r\n                }\r\n            };\r\n\r\n            swatchVisualOption.initialize();\r\n\r\n            /**\r\n             * Create swatch components\r\n             */\r\n            swatchComponents.create();\r\n\r\n            /**\r\n             * Register event for swatch input[type=file] change\r\n             */\r\n            swatchComponents.inputFile.change(function () {\r\n                var localContainer = $('.' + $(this).attr('data-called-by')).parents().eq(2).children('.swatch_window'),\r\n\r\n                    /**\r\n                     * @this {iframe}\r\n                     */\r\n                    iframeHandler = function () {\r\n                        var imageParams = $.parseJSON($(this).contents().find('body').html()),\r\n                            fullMediaUrl = imageParams['swatch_path'] + imageParams['file_path'];\r\n\r\n                        localContainer.prev('input').val(imageParams['file_path']).trigger('change');\r\n                        localContainer.css({\r\n                            'background-image': 'url(' + fullMediaUrl + ')',\r\n                            'background-size': 'cover'\r\n                        });\r\n                        localContainer.parent().removeClass('unavailable');\r\n                    };\r\n\r\n                swatchComponents.iframe.off('load');\r\n                swatchComponents.iframe.on('load', iframeHandler);\r\n                swatchComponents.form.submit();\r\n                $(this).val('');\r\n            });\r\n\r\n            /**\r\n             * Register event for choose \"upload image\" option\r\n             */\r\n            $(container).on('click', '.btn_choose_file_upload', function () {\r\n                swatchComponents.inputFile.attr('data-called-by', $(this).data('class'));\r\n                swatchComponents.inputFile.trigger('click');\r\n            });\r\n\r\n            /**\r\n             * Register event for remove option\r\n             */\r\n            $(container).on('click', '.btn_remove_swatch', function () {\r\n                var optionPanel = $(this).parents().eq(2);\r\n\r\n                optionPanel.children('input').val('').trigger('change');\r\n                optionPanel.children('.swatch_window').css('background', '');\r\n                optionPanel.addClass('unavailable');\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n            });\r\n\r\n            /**\r\n             * Toggle color upload chooser\r\n             */\r\n            $(container).on('click', '.swatch_window', function () {\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n                $(this).next('div').toggle();\r\n            });\r\n        });\r\n    }\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            elementId: 0,\r\n            prefixName: '',\r\n            prefixElementName: '',\r\n            elementName: '',\r\n            value: '',\r\n            uploadUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.configureDataScope();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initOldCode()\r\n                .on('value', this.onChangeColor.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler function that execute when color changes.\r\n         *\r\n         * @param {String} data - color\r\n         */\r\n        onChangeColor: function (data) {\r\n            if (!data) {\r\n                jQuery('.' + this.elementName).parent().removeClass('unavailable');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize wrapped former implementation.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initOldCode: function () {\r\n            jQuery.async('.' + this.elementName, this.name, function (elem) {\r\n                oldCode(this.value(), elem.parentElement, this.uploadUrl, this.elementName);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Configure data scope.\r\n         */\r\n        configureDataScope: function () {\r\n            var recordId, prefixName;\r\n\r\n            // Get recordId\r\n            recordId = this.parentName.split('.').last();\r\n\r\n            prefixName = this.dataScopeToHtmlArray(this.prefixName);\r\n            this.elementName = this.prefixElementName + recordId;\r\n\r\n            this.inputName = prefixName + '[' + this.elementName + ']';\r\n            this.exportDataLink = 'data.' + this.prefixName + '.' + this.elementName;\r\n            this.exports.value = this.provider + ':' + this.exportDataLink;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            this._super();\r\n\r\n            this.source.remove(this.exportDataLink);\r\n        },\r\n\r\n        /**\r\n         * Get HTML array from data scope.\r\n         *\r\n         * @param {String} dataScopeString\r\n         * @returns {String}\r\n         */\r\n        dataScopeToHtmlArray: function (dataScopeString) {\r\n            var dataScopeArray, dataScope, reduceFunction;\r\n\r\n            /**\r\n             * Add new level of nesting.\r\n             *\r\n             * @param {String} prev\r\n             * @param {String} curr\r\n             * @returns {String}\r\n             */\r\n            reduceFunction = function (prev, curr) {\r\n                return prev + '[' + curr + ']';\r\n            };\r\n\r\n            dataScopeArray = dataScopeString.split('.');\r\n\r\n            dataScope = dataScopeArray.shift();\r\n            dataScope += dataScopeArray.reduce(reduceFunction, '');\r\n\r\n            return dataScope;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/bootstrap.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    'mage/backend/editablemultiselect'\r\n]);\r\n","Magento_Tax/js/price/adjustment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            bodyTmpl: 'Magento_Tax/price/adjustment',\r\n            taxPriceType: 'final_price',\r\n            taxPriceCssClass: 'price-including-tax',\r\n            bothPrices: 3,\r\n            inclTax: 2,\r\n            exclTax: 1,\r\n            modules: {\r\n                price: '${ $.parentName }'\r\n            },\r\n            listens: {\r\n                price: 'initializePriceAttributes'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initializePriceAttributes();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update parent price.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initializePriceAttributes: function () {\r\n            if (this.displayBothPrices && this.price()) {\r\n                this.price().priceWrapperCssClasses = this.taxPriceCssClass;\r\n                this.price().priceWrapperAttr = {\r\n                    'data-label': $t('Incl. Tax')\r\n                };\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get price tax adjustment.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTax: function (row) {\r\n            return row['price_info']['extension_attributes']['tax_adjustments']['formatted_prices'][this.taxPriceType];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getTax.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTaxUnsanitizedHtml: function (row) {\r\n            return this.getTax(row);\r\n        },\r\n\r\n        /**\r\n         * Set price tax type.\r\n         *\r\n         * @param {String} priceType\r\n         * @return {Object}\r\n         */\r\n        setPriceType: function (priceType) {\r\n            this.taxPriceType = priceType;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display\r\n         * both price including tax and price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayBothPrices: function () {\r\n            return +this.source.data.displayTaxes === this.bothPrices;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price including tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceIncludeTax: function () {\r\n            return +this.source.data.displayTaxes === this.inclTax;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceExclTax: function () {\r\n            return +this.source.data.displayTaxes === this.exclTax;\r\n        }\r\n    });\r\n});\r\n","Magento_Theme/js/bootstrap.js":"/**\r\n *\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    'jquery/fileUploader/jquery.fileupload-ui',\r\n    'mage/adminhtml/browser',\r\n    'Magento_Theme/js/form'\r\n]);\r\n","Magento_Theme/js/custom-js-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery/ui'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('theme.themeJsList', {\r\n        options: {\r\n            templateId: null,\r\n            emptyTemplateId: null,\r\n            refreshFileListEvent: null,\r\n            prefixItemId: '',\r\n            suffixItemId: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize widget\r\n         *\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers\r\n         *\r\n         * @protected\r\n         */\r\n        _bind: function () {\r\n            $('body').on(this.options.refreshFileListEvent, $.proxy(this._onRefreshList, this));\r\n        },\r\n\r\n        /**\r\n         * Render js files list\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @protected\r\n         */\r\n        _onRefreshList: function (event, data) {\r\n            $(this.element).html('');\r\n\r\n            if (data.jsList.length) {\r\n                this._renderList(data.jsList);\r\n            } else {\r\n                this._renderEmptyList();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get item js list id\r\n         *\r\n         * @param {*} fileId\r\n         * @return {String}\r\n         * @protected\r\n         */\r\n        _getItemId: function (fileId) {\r\n            return this.options.prefixItemId + fileId + this.options.suffixItemId;\r\n        },\r\n\r\n        /**\r\n         * Render js list\r\n         *\r\n         * @param {Array} jsList\r\n         * @protected\r\n         */\r\n        _renderList: function (jsList) {\r\n            var itemTmpl,\r\n                index,\r\n                tmpl;\r\n\r\n            for (index = 0; index < jsList.length; index++) {\r\n                itemTmpl = $('<li></li>').html($(this.options.templateId).html());\r\n\r\n                $(itemTmpl).attr('class', $(this.options.templateId).attr('class'));\r\n\r\n                itemTmpl.attr('id', this._getItemId(jsList[index].id));\r\n\r\n                tmpl = mageTemplate(itemTmpl.html(), {\r\n                    data: jsList[index]\r\n                });\r\n\r\n                itemTmpl.html(tmpl);\r\n\r\n                itemTmpl.removeClass('no-display');\r\n                itemTmpl.appendTo(this.element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set empty js list\r\n         *\r\n         * @protected\r\n         */\r\n        _renderEmptyList: function () {\r\n            var itemTmpl = $('<li></li>').html($(this.options.emptyTemplateId).html());\r\n\r\n            $(itemTmpl).attr('class', $(this.options.emptyTemplateId).attr('class'));\r\n\r\n            itemTmpl.attr('id', 'empty-js-list');\r\n            itemTmpl.removeClass('no-display');\r\n            itemTmpl.appendTo(this.element);\r\n        }\r\n    });\r\n});\r\n","Magento_Theme/js/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'prototype'\r\n], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} selected\r\n     * @param {Object} defaultsById\r\n     */\r\n    function parentThemeOnChange(selected, defaultsById) {\r\n        var statusBar = $$('.tab-item-link')[0],\r\n            isChanged = statusBar.hasClassName('changed'),\r\n            defaults;\r\n\r\n        if (!isChanged) {\r\n            defaults = defaultsById[selected];\r\n            $('theme_title').value = defaults['theme_title'];\r\n        }\r\n    }\r\n\r\n    window.parentThemeOnChange = parentThemeOnChange;\r\n});\r\n","Magento_Theme/js/sortable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * JQuery UI Widget declaration: 'mage.sortable'\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Widget panel\r\n     */\r\n    $.widget('mage.sortable', $.ui.sortable, {\r\n        options: {\r\n            moveUpEvent:   'moveUp',\r\n            moveDownEvent: 'moveDown'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._super();\r\n            this.initButtons();\r\n            this.bind();\r\n        },\r\n\r\n        /**\r\n         * Init buttons.\r\n         */\r\n        initButtons: function () {\r\n            this.element.find('input.up').on('click', $.proxy(function (event) {\r\n                $('body').trigger(this.options.moveUpEvent, {\r\n                    item: $(event.target).parent('li')\r\n                });\r\n            }, this));\r\n            this.element.find('input.down').on('click', $.proxy(function (event) {\r\n                $('body').trigger(this.options.moveDownEvent, {\r\n                    item: $(event.target).parent('li')\r\n                });\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Bind.\r\n         */\r\n        bind: function () {\r\n            var $body = $('body');\r\n\r\n            $body.on(this.options.moveUpEvent, $.proxy(this._onMoveUp, this));\r\n            $body.on(this.options.moveDownEvent, $.proxy(this._onMoveDown, this));\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onMoveUp: function (event, data) {\r\n            data.item.insertBefore(data.item.prev());\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onMoveDown: function (event, data) {\r\n            data.item.insertAfter(data.item.next());\r\n        }\r\n    });\r\n\r\n    return $.mage.sortable;\r\n});\r\n","Magento_Theme/js/form/component/robots-reset-button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/components/button',\r\n    'uiRegistry'\r\n], function (Button, registry) {\r\n    'use strict';\r\n\r\n    return Button.extend({\r\n        defaults: {\r\n            customInstructionField: '${ $.parentName }.custom_instructions',\r\n            label: '',\r\n            buttonTpl: 'Magento_Theme/form/element/button'\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @param {String} json\r\n         * @return {String}\r\n         */\r\n        _parseJson: function (json) {\r\n            return JSON.parse(json);\r\n        },\r\n\r\n        /**\r\n         * @param {String} defaultRobotsTxt\r\n         */\r\n        reset: function (defaultRobotsTxt) {\r\n            var customInstructions = registry.get(this.customInstructionField);\r\n\r\n            if (customInstructions) {\r\n                customInstructions.set('value', this._parseJson(defaultRobotsTxt));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Translation/js/i18n-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    require.config({\r\n        config: {\r\n            'Magento_Ui/js/lib/knockout/bindings/i18n': {\r\n                inlineTranslation: true\r\n            }\r\n        }\r\n    });\r\n})();\r\n","Magento_Translation/js/mage-translation-dictionary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'text!js-translation.json'\r\n], function (dict) {\r\n    'use strict';\r\n\r\n    return JSON.parse(dict);\r\n});\r\n","Magento_Ui/js/block-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Ui/js/lib/knockout/template/loader',\r\n    'mage/template'\r\n], function (ko, $, templateLoader, template) {\r\n    'use strict';\r\n\r\n    var blockLoaderTemplatePath = 'ui/block-loader',\r\n        blockContentLoadingClass = '_block-content-loading',\r\n        blockLoader,\r\n        blockLoaderClass,\r\n        blockLoaderElement = $.Deferred(),\r\n        loaderImageHref = $.Deferred();\r\n\r\n    templateLoader.loadTemplate(blockLoaderTemplatePath).done(function (blockLoaderTemplate) {\r\n        loaderImageHref.done(function (loaderHref) {\r\n            blockLoader = template(blockLoaderTemplate.trim(), {\r\n                loaderImageHref: loaderHref\r\n            });\r\n            blockLoader = $(blockLoader);\r\n            blockLoaderClass = '.' + blockLoader.attr('class');\r\n            blockLoaderElement.resolve();\r\n        });\r\n    });\r\n\r\n    /**\r\n     * Helper function to check if blockContentLoading class should be applied.\r\n     * @param {Object} element\r\n     * @returns {Boolean}\r\n     */\r\n    function isLoadingClassRequired(element) {\r\n        var position = element.css('position');\r\n\r\n        if (position === 'absolute' || position === 'fixed') {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Add loader to block.\r\n     * @param {Object} element\r\n     */\r\n    function addBlockLoader(element) {\r\n        element.find(':focus').trigger('blur');\r\n        element.find('input:disabled, select:disabled').addClass('_disabled');\r\n        element.find('input, select').prop('disabled', true);\r\n\r\n        if (isLoadingClassRequired(element)) {\r\n            element.addClass(blockContentLoadingClass);\r\n        }\r\n        element.append(blockLoader.clone());\r\n    }\r\n\r\n    /**\r\n     * Remove loader from block.\r\n     * @param {Object} element\r\n     */\r\n    function removeBlockLoader(element) {\r\n        if (!element.has(blockLoaderClass).length) {\r\n            return;\r\n        }\r\n        element.find(blockLoaderClass).remove();\r\n        element.find('input:not(\"._disabled\"), select:not(\"._disabled\")').prop('disabled', false);\r\n        element.find('input:disabled, select:disabled').removeClass('_disabled');\r\n        element.removeClass(blockContentLoadingClass);\r\n    }\r\n\r\n    return function (loaderHref) {\r\n        loaderImageHref.resolve(loaderHref);\r\n        ko.bindingHandlers.blockLoader = {\r\n            /**\r\n             * Process loader for block\r\n             * @param {String} element\r\n             * @param {Boolean} displayBlockLoader\r\n             */\r\n            update: function (element, displayBlockLoader) {\r\n                element = $(element);\r\n\r\n                if (ko.unwrap(displayBlockLoader())) {\r\n                    blockLoaderElement.done(addBlockLoader(element));\r\n                } else {\r\n                    blockLoaderElement.done(removeBlockLoader(element));\r\n                }\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Ui/js/core/app.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    './renderer/types',\r\n    './renderer/layout',\r\n    '../lib/knockout/bootstrap'\r\n], function (types, layout) {\r\n    'use strict';\r\n\r\n    return function (data, merge) {\r\n        types.set(data.types);\r\n        layout(data.components, undefined, true, merge);\r\n    };\r\n});\r\n","Magento_Ui/js/core/renderer/layout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    './types',\r\n    '../../lib/logger/console-logger'\r\n], function (_, $, utils, registry, types, consoleLogger) {\r\n    'use strict';\r\n\r\n    var templates = registry.create(),\r\n        layout = {},\r\n        cachedConfig = {};\r\n\r\n    /**\r\n     * Build name from parent name and node name\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @param {String} [name]\r\n     * @returns {String}\r\n     */\r\n    function getNodeName(parent, node, name) {\r\n        var parentName = parent && parent.name;\r\n\r\n        if (typeof name !== 'string') {\r\n            name = node.name || name;\r\n        }\r\n\r\n        return utils.fullPath(parentName, name);\r\n    }\r\n\r\n    /**\r\n     * Get node type from node or parent.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getNodeType(parent, node) {\r\n        return node.type || parent && parent.childType;\r\n    }\r\n\r\n    /**\r\n     * Get data scope based on parent data scope and node data scope.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getDataScope(parent, node) {\r\n        var dataScope = node.dataScope,\r\n            parentScope = parent && parent.dataScope;\r\n\r\n        return !utils.isEmpty(parentScope) ?\r\n            !utils.isEmpty(dataScope) ?\r\n                parentScope + '.' + dataScope :\r\n                parentScope :\r\n            dataScope || '';\r\n    }\r\n\r\n    /**\r\n     * Load node dependencies on other instances.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadDeps(node) {\r\n        var loaded = $.Deferred(),\r\n            loggerUtils = consoleLogger.utils;\r\n\r\n        if (node.deps) {\r\n            consoleLogger.utils.asyncLog(\r\n                loaded,\r\n                {\r\n                    data: {\r\n                        component: node.name,\r\n                        deps: node.deps\r\n                    },\r\n                    messages: loggerUtils.createMessages(\r\n                        'depsStartRequesting',\r\n                        'depsFinishRequesting',\r\n                        'depsLoadingFail'\r\n                    )\r\n                }\r\n            );\r\n        }\r\n\r\n        registry.get(node.deps, function (deps) {\r\n            node.provider = node.extendProvider ? deps && deps.name : node.provider;\r\n            loaded.resolve(node);\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Load node component file via requirejs.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadSource(node) {\r\n        var loaded = $.Deferred(),\r\n            source = node.component;\r\n\r\n        consoleLogger.info('componentStartLoading', {\r\n            component: node.component\r\n        });\r\n\r\n        require([source], function (constr) {\r\n            consoleLogger.info('componentFinishLoading', {\r\n                component: node.component\r\n            });\r\n            loaded.resolve(node, constr);\r\n        }, function () {\r\n            consoleLogger.error('componentLoadingFail', {\r\n                component: node.component\r\n            });\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Create a new component instance and set it to the registry.\r\n     *\r\n     * @param {Object} node\r\n     * @param {Function} Constr\r\n     */\r\n    function initComponent(node, Constr) {\r\n        var component = new Constr(_.omit(node, 'children'));\r\n\r\n        consoleLogger.info('componentStartInitialization', {\r\n            component: node.component,\r\n            componentName: node.name\r\n        });\r\n\r\n        registry.set(node.name, component);\r\n    }\r\n\r\n    /**\r\n     * Application entry point.\r\n     *\r\n     * @param {Object} nodes\r\n     * @param {Object} parent\r\n     * @param {Boolean} cached\r\n     * @param {Boolean} merge\r\n     * @returns {Boolean|undefined}\r\n     */\r\n    function run(nodes, parent, cached, merge) {\r\n        if (_.isBoolean(merge) && merge) {\r\n            layout.merge(nodes);\r\n\r\n            return false;\r\n        }\r\n\r\n        if (cached) {\r\n            cachedConfig[_.keys(nodes)[0]] = JSON.parse(JSON.stringify(nodes));\r\n        }\r\n\r\n        _.each(nodes || [], layout.iterator.bind(layout, parent));\r\n    }\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines if node ready to be added or process it.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} node\r\n         */\r\n        iterator: function (parent, node) {\r\n            var action = _.isString(node) ?\r\n                this.addChild :\r\n                this.process;\r\n\r\n            action.apply(this, arguments);\r\n        },\r\n\r\n        /**\r\n         * Prepare component.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        process: function (parent, node, name) {\r\n            if (!parent && node.parent) {\r\n                return this.waitParent(node, name);\r\n            }\r\n\r\n            if (node.nodeTemplate) {\r\n                return this.waitTemplate.apply(this, arguments);\r\n            }\r\n\r\n            node = this.build.apply(this, arguments);\r\n\r\n            if (!registry.has(node.name)) {\r\n                this.addChild(parent, node)\r\n                    .manipulate(node)\r\n                    .initComponent(node);\r\n            }\r\n\r\n            if (node) {\r\n                run(node.children, node);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Detailed processing of component config.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Boolean|Object}\r\n         */\r\n        build: function (parent, node, name) {\r\n            var defaults    = parent && parent.childDefaults || {},\r\n                children    = this.filterDisabledChildren(node.children),\r\n                type        = getNodeType(parent, node),\r\n                dataScope   = getDataScope(parent, node),\r\n                component,\r\n                extendDeps  = true,\r\n                nodeName;\r\n\r\n            node.children = false;\r\n            node.extendProvider = true;\r\n\r\n            if (node.config && node.config.provider || node.provider) {\r\n                node.extendProvider = false;\r\n            }\r\n\r\n            if (node.config && node.config.deps || node.deps) {\r\n                extendDeps = false;\r\n            }\r\n\r\n            node = utils.extend({\r\n            }, types.get(type), defaults, node);\r\n\r\n            nodeName = getNodeName(parent, node, name);\r\n\r\n            if (registry.has(nodeName)) {\r\n                component = registry.get(nodeName);\r\n                component.children = children;\r\n\r\n                return component;\r\n            }\r\n\r\n            if (extendDeps && parent && parent.deps && type) {\r\n                node.deps = parent.deps;\r\n            }\r\n\r\n            _.extend(node, node.config || {}, {\r\n                index: node.name || name,\r\n                name: nodeName,\r\n                dataScope: dataScope,\r\n                parentName: utils.getPart(nodeName, -2),\r\n                parentScope: utils.getPart(dataScope, -2)\r\n            });\r\n\r\n            node.children = children;\r\n            node.componentType = node.type;\r\n\r\n            delete node.type;\r\n            delete node.config;\r\n\r\n            if (children) {\r\n                node.initChildCount = _.size(children);\r\n            }\r\n\r\n            if (node.isTemplate) {\r\n                node.isTemplate = false;\r\n\r\n                templates.set(node.name, node);\r\n                registry.get(node.parentName, function (parentComp) {\r\n                    parentComp.childTemplate = node;\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (node.componentDisabled === true) {\r\n                return false;\r\n            }\r\n\r\n            return node;\r\n        },\r\n\r\n        /**\r\n         * Filter out all disabled components.\r\n         *\r\n         * @param {Object} children\r\n         * @returns {*}\r\n         */\r\n        filterDisabledChildren: function (children) {\r\n            var cIds;\r\n\r\n            //cleanup children config.componentDisabled = true\r\n            if (children && typeof children === 'object') {\r\n                cIds = Object.keys(children);\r\n\r\n                if (cIds) {\r\n                    _.each(cIds, function (cId) {\r\n                        if (typeof children[cId] === 'object' &&\r\n                            children[cId].hasOwnProperty('config') &&\r\n                            typeof children[cId].config === 'object' &&\r\n                            children[cId].config.hasOwnProperty('componentDisabled') &&\r\n                            children[cId].config.componentDisabled === true) {\r\n                            delete children[cId];\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return children;\r\n        },\r\n\r\n        /**\r\n         * Init component.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        initComponent: function (node) {\r\n            if (!node.component) {\r\n                return this;\r\n            }\r\n\r\n            loadDeps(node)\r\n                .then(loadSource)\r\n                .done(initComponent);\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Loading component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        waitTemplate: function (parent, node) {\r\n            var args = _.toArray(arguments);\r\n\r\n            templates.get(node.nodeTemplate, function () {\r\n                this.applyTemplate.apply(this, args);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Waiting for parent component and process provided component.\r\n         *\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        waitParent: function (node, name) {\r\n            var process = this.process.bind(this);\r\n\r\n            registry.get(node.parent, function (parent) {\r\n                process(parent, node, name);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Processing component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         */\r\n        applyTemplate: function (parent, node, name) {\r\n            var template = templates.get(node.nodeTemplate);\r\n\r\n            node = utils.extend({}, template, node);\r\n\r\n            delete node.nodeTemplate;\r\n\r\n            this.process(parent, node, name);\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines inserting strategy.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        manipulate: function (node) {\r\n            var name = node.name;\r\n\r\n            if (node.appendTo) {\r\n                this.insert(name, node.appendTo, -1);\r\n            }\r\n\r\n            if (node.prependTo) {\r\n                this.insert(name, node.prependTo, 0);\r\n            }\r\n\r\n            if (node.insertTo) {\r\n                this.insertTo(name, node.insertTo);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component to provide target and position.\r\n         *\r\n         * @param {Object|String} item\r\n         * @param {Object} target\r\n         * @param {Number} position\r\n         * @returns {Object}\r\n         */\r\n        insert: function (item, target, position) {\r\n            registry.get(target, function (container) {\r\n                container.insertChild(item, position);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component into multiple targets.\r\n         *\r\n         * @param {Object} item\r\n         * @param {Array} targets\r\n         * @returns {Object}\r\n         */\r\n        insertTo: function (item, targets) {\r\n            _.each(targets, function (info, target) {\r\n                this.insert(item, target, info.position);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add provided child to parent.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} child\r\n         * @returns {Object}\r\n         */\r\n        addChild: function (parent, child) {\r\n            var name;\r\n\r\n            if (parent && parent.component) {\r\n                name = child.name || child;\r\n\r\n                this.insert(name, parent.name, child.sortOrder);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Merge components configuration with cached configuration.\r\n         *\r\n         * @param {Array} components\r\n         */\r\n        merge: function (components) {\r\n            var cachedKey = _.keys(components)[0],\r\n                compared = utils.compare(cachedConfig[cachedKey], components),\r\n                remove = this.filterComponents(this.getByProperty(compared.changes, 'type', 'remove'), true),\r\n                update = this.getByProperty(compared.changes, 'type', 'update'),\r\n                dataSources = this.getDataSources(components),\r\n                names, index, name, component;\r\n\r\n            _.each(dataSources, function (val, key) {\r\n                name = key.replace(/\\.children|\\.config/g, '');\r\n                component = registry.get(name);\r\n\r\n                component.cacheData();\r\n                component.updateConfig(\r\n                    true,\r\n                    this.getFullConfig(key, components),\r\n                    this.getFullConfig(key, cachedConfig[cachedKey])\r\n                );\r\n            }, this);\r\n\r\n            _.each(remove, function (val) {\r\n                component = registry.get(val.path);\r\n\r\n                if (component) {\r\n                    component.destroy();\r\n                }\r\n            });\r\n\r\n            update = _.compact(_.filter(update, function (val) {\r\n                return !_.isEqual(val.oldValue, val.value);\r\n            }));\r\n\r\n            _.each(update, function (val) {\r\n                names = val.path.split('.');\r\n                index = Math.max(_.lastIndexOf(names, 'config'), _.lastIndexOf(names, 'children') + 2);\r\n                name = _.without(names.splice(0, index), 'children', 'config').join('.');\r\n                component = registry.get(name);\r\n\r\n                if (val.name === 'sortOrder' && component) {\r\n                    registry.get(component.parentName).insertChild(component, val.value);\r\n                } else if (component) {\r\n                    component.updateConfig(\r\n                        val.oldValue,\r\n                        val.value,\r\n                        val.path\r\n                    );\r\n                }\r\n            }, this);\r\n\r\n            run(components, undefined, true);\r\n        },\r\n\r\n        /**\r\n         * Recursive dataSource assignment.\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} parentPath\r\n         * @returns {Object}\r\n         */\r\n        getDataSources: function (config, parentPath) {\r\n            var dataSources = {},\r\n                key, obj;\r\n\r\n            /* eslint-disable no-loop-func, max-depth */\r\n            for (key in config) {\r\n                if (config.hasOwnProperty(key)) {\r\n                    if (\r\n                        key === 'type' &&\r\n                        config[key] === 'dataSource' &&\r\n                        config.hasOwnProperty('config')\r\n                    ) {\r\n                        dataSources[parentPath + '.config'] = config.config;\r\n                    } else if (_.isObject(config[key])) {\r\n                        obj = this.getDataSources(config[key], utils.fullPath(parentPath, key));\r\n\r\n                        _.each(obj, function (value, path) {\r\n                            dataSources[path] = value;\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            /* eslint-enable no-loop-func, max-depth */\r\n\r\n            return dataSources;\r\n        },\r\n\r\n        /**\r\n         * Configuration getter.\r\n         *\r\n         * @param {String} path\r\n         * @param {Object} config\r\n         * @returns {Boolean|Object}\r\n         */\r\n        getFullConfig: function (path, config) {\r\n            var index;\r\n\r\n            path = path.split('.');\r\n            index = _.lastIndexOf(path, 'config');\r\n\r\n            if (!~index) {\r\n                return false;\r\n            }\r\n            path = path.splice(0, index);\r\n\r\n            _.each(path, function (val) {\r\n                config = config[val];\r\n            });\r\n\r\n            return config.config;\r\n        },\r\n\r\n        /**\r\n         * Filter data by property and value.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} prop\r\n         * @param {*} propValue\r\n         */\r\n        getByProperty: function (data, prop, propValue) {\r\n            return _.filter(data, function (value) {\r\n                return value[prop] === propValue;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Filter components.\r\n         *\r\n         * @param {Array} data\r\n         * @param {Boolean} splitPath\r\n         * @param {Number} index\r\n         * @param {String} separator\r\n         * @param {String} keyName\r\n         * @returns {Array}\r\n         */\r\n        filterComponents: function (data, splitPath, index, separator, keyName) {\r\n            var result = [],\r\n                names, length;\r\n\r\n            index = -2;\r\n            separator = '.' || separator;\r\n            keyName = 'children' || keyName;\r\n\r\n            _.each(data, function (val) {\r\n                names = val.path.split(separator);\r\n                length  = names.length;\r\n\r\n                if (names[length + index] === keyName) {\r\n                    val.path = splitPath ? _.without(names, keyName).join(separator) : val.path;\r\n                    result.push(val);\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    });\r\n\r\n    return run;\r\n});\r\n","Magento_Ui/js/core/renderer/types.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'mageUtils'\r\n], function (_, utils) {\r\n    'use strict';\r\n\r\n    var store = {};\r\n\r\n    /**\r\n     * Flatten a nested data.\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Object}\r\n     */\r\n    function flatten(data) {\r\n        var extender = data.extends || [],\r\n            result = {};\r\n\r\n        extender = utils.stringToArray(extender);\r\n\r\n        extender.push(data);\r\n\r\n        extender.forEach(function (item) {\r\n            if (_.isString(item)) {\r\n                item = store[item] || {};\r\n            }\r\n\r\n            utils.extend(result, item);\r\n        });\r\n\r\n        delete result.extends;\r\n\r\n        return result;\r\n    }\r\n\r\n    return {\r\n        /**\r\n         * Set types to store object.\r\n         *\r\n         * @param {Object} types\r\n         */\r\n        set: function (types) {\r\n            types = types || {};\r\n\r\n            utils.extend(store, types);\r\n\r\n            _.each(types, function (data, type) {\r\n                store[type] = flatten(data);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get type from store object.\r\n         *\r\n         * @param {String} type\r\n         * @returns {*|{}}\r\n         */\r\n        get: function (type) {\r\n            return store[type] || {};\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/dynamic-rows/action-delete.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            links: {\r\n                value: false\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record handler.\r\n         *\r\n         * @param {Number} index\r\n         * @param {Number} id\r\n         */\r\n        deleteRecord: function (index, id) {\r\n            this.bubble('deleteRecord', index, id);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dnd.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (ko, $, _, Element) {\r\n    'use strict';\r\n\r\n    var transformProp;\r\n\r\n    /**\r\n     * Get element context\r\n     */\r\n    function getContext(elem) {\r\n        return ko.contextFor(elem);\r\n    }\r\n\r\n    /**\r\n     * Defines supported css 'transform' property.\r\n     *\r\n     * @returns {String|Undefined}\r\n     */\r\n    transformProp = (function () {\r\n        var style = document.createElement('div').style,\r\n            base = 'Transform',\r\n            vendors = ['webkit', 'moz', 'ms', 'o'],\r\n            vi = vendors.length,\r\n            property;\r\n\r\n        if (typeof style.transform !== 'undefined') {\r\n            return 'transform';\r\n        }\r\n\r\n        while (vi--) {\r\n            property = vendors[vi] + base;\r\n\r\n            if (typeof style[property] !== 'undefined') {\r\n                return property;\r\n            }\r\n        }\r\n    })();\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            separatorsClass: {\r\n                top: '_dragover-top',\r\n                bottom: '_dragover-bottom'\r\n            },\r\n            step: 'auto',\r\n            tableClass: 'table.admin__dynamic-rows',\r\n            recordsCache: [],\r\n            draggableElement: {},\r\n            draggableElementClass: '_dragged',\r\n            elemPositions: [],\r\n            listens: {\r\n                '${ $.recordsProvider }:elems': 'setCacheRecords'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.recordsProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize component\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(\r\n                this,\r\n                'mousemoveHandler',\r\n                'mouseupHandler'\r\n            );\r\n\r\n            this._super()\r\n                .body = $('body');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\r\n         *     properties, calls 'setOptions' passing options to it\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'recordsCache'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init listens to start drag\r\n         *\r\n         * @param {Object} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            $(elem).on('mousedown touchstart', this.mousedownHandler.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Mouse down handler\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {Object} elem - element\r\n         * @param {Object} event - key down event\r\n         */\r\n        mousedownHandler: function (data, elem, event) {\r\n            var recordNode = this.getRecordNode(elem),\r\n                originRecord = $(elem).parents('tr').eq(0),\r\n                drEl = this.draggableElement,\r\n                $table = $(elem).parents('table').eq(0),\r\n                $tableWrapper = $table.parent(),\r\n                outerHight =\r\n                    $table.children('thead').outerHeight() === undefined ? 0 : $table.children('thead').outerHeight();\r\n\r\n            this.disableScroll();\r\n            $(recordNode).addClass(this.draggableElementClass);\r\n            $(originRecord).addClass(this.draggableElementClass);\r\n            this.step = this.step === 'auto' ? originRecord.height() / 2 : this.step;\r\n            drEl.originRow = originRecord;\r\n            drEl.instance = recordNode = this.processingStyles(recordNode, elem);\r\n            drEl.instanceCtx = this.getRecord(originRecord[0]);\r\n            drEl.eventMousedownY = this.getPageY(event);\r\n            drEl.minYpos = $table.offset().top - originRecord.offset().top + outerHight;\r\n            drEl.maxYpos = drEl.minYpos + ($table.children('tbody').outerHeight() || 0) - originRecord.outerHeight();\r\n            $tableWrapper.append(recordNode);\r\n            this.body.on('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.on('mouseup touchend', this.mouseupHandler);\r\n        },\r\n\r\n        /**\r\n         * Mouse move handler\r\n         *\r\n         * @param {Object} event - mouse move event\r\n         */\r\n        mousemoveHandler: function (event) {\r\n            var depEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - depEl.eventMousedownY,\r\n                processingPositionY = positionY + 'px',\r\n                processingMaxYpos = depEl.maxYpos + 'px',\r\n                processingMinYpos = depEl.minYpos + 'px',\r\n                depElement = this.getDepElement(depEl.instance, positionY, depEl.originRow);\r\n\r\n            if (depElement) {\r\n                depEl.depElement ? depEl.depElement.elem.removeClass(depEl.depElement.className) : false;\r\n                depEl.depElement = depElement;\r\n                depEl.depElement.insert !== 'none' ? depEl.depElement.elem.addClass(depElement.className) : false;\r\n            } else if (depEl.depElement && depEl.depElement.insert !== 'none') {\r\n                depEl.depElement.elem.removeClass(depEl.depElement.className);\r\n                depEl.depElement.insert = 'none';\r\n            }\r\n\r\n            if (positionY > depEl.minYpos && positionY < depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingPositionY + ')';\r\n            } else if (positionY < depEl.minYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMinYpos + ')';\r\n            } else if (positionY >= depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMaxYpos + ')';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mouse up handler\r\n         */\r\n        mouseupHandler: function (event) {\r\n            var depElementCtx,\r\n                drEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - drEl.eventMousedownY;\r\n\r\n            this.enableScroll();\r\n            drEl.depElement = this.getDepElement(drEl.instance, positionY, this.draggableElement.originRow);\r\n\r\n            drEl.instance.remove();\r\n\r\n            if (drEl.depElement) {\r\n                depElementCtx = this.getRecord(drEl.depElement.elem[0]);\r\n                drEl.depElement.elem.removeClass(drEl.depElement.className);\r\n\r\n                if (drEl.depElement.insert !== 'none') {\r\n                    this.setPosition(drEl.depElement.elem, depElementCtx, drEl);\r\n                }\r\n            }\r\n\r\n            drEl.originRow.removeClass(this.draggableElementClass);\r\n\r\n            this.body.off('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.off('mouseup touchend', this.mouseupHandler);\r\n\r\n            this.draggableElement = {};\r\n        },\r\n\r\n        /**\r\n         * Set position to element\r\n         *\r\n         * @param {Object} depElem - dep element\r\n         * @param {Object} depElementCtx - dep element context\r\n         * @param {Object} dragData - data draggable element\r\n         */\r\n        setPosition: function (depElem, depElementCtx, dragData) {\r\n            var depElemPosition = ~~depElementCtx.position;\r\n\r\n            if (dragData.depElement.insert === 'after') {\r\n                dragData.instanceCtx.position = depElemPosition + 1;\r\n            } else if (dragData.depElement.insert === 'before') {\r\n                dragData.instanceCtx.position = depElemPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element\r\n         *\r\n         * @param {Object} curInstance - current element instance\r\n         * @param {Number} position\r\n         * @param {Object} row\r\n         */\r\n        getDepElement: function (curInstance, position, row) {\r\n            var tableSelector = this.tableClass + ' tr',\r\n                $table = $(row).parents('table').eq(0),\r\n                $curInstance = $(curInstance),\r\n                recordsCollection = $table.find('table').length ?\r\n                    $table.find('tbody > tr').filter(function (index, elem) {\r\n                        return !$(elem).parents(tableSelector).length;\r\n                    }) :\r\n                    $table.find('tbody > tr'),\r\n                curInstancePositionTop = $curInstance.position().top,\r\n                curInstancePositionBottom = curInstancePositionTop + $curInstance.height();\r\n\r\n            if (position < 0) {\r\n                return this._getDepElement(recordsCollection, 'before', curInstancePositionTop);\r\n            } else if (position > 0) {\r\n                return this._getDepElement(recordsCollection, 'after', curInstancePositionBottom);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element private\r\n         *\r\n         * @param {Array} collection - record collection\r\n         * @param {String} position - position to add\r\n         * @param {Number} dragPosition - position drag element\r\n         */\r\n        _getDepElement: function (collection, position, dragPosition) {\r\n            var rec,\r\n                rangeEnd,\r\n                rangeStart,\r\n                result,\r\n                className,\r\n                i = 0,\r\n                length = collection.length;\r\n\r\n            for (i; i < length; i++) {\r\n                rec = collection.eq(i);\r\n\r\n                if (position === 'before') {\r\n                    rangeStart = collection.eq(i).position().top - this.step;\r\n                    rangeEnd = rangeStart + this.step * 2;\r\n                    className = this.separatorsClass.top;\r\n                } else if (position === 'after') {\r\n                    rangeEnd = rec.position().top + rec.height() + this.step;\r\n                    rangeStart = rangeEnd - this.step * 2;\r\n                    className = this.separatorsClass.bottom;\r\n                }\r\n\r\n                if (dragPosition > rangeStart && dragPosition < rangeEnd) {\r\n                    result = {\r\n                        elem: rec,\r\n                        insert: rec[0] === this.draggableElement.originRow[0] ? 'none' : position,\r\n                        className: className\r\n                    };\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Set default position of draggable element\r\n         *\r\n         * @param {Object} elem - current element instance\r\n         * @param {Object} data - current element data\r\n         */\r\n        _setDefaultPosition: function (elem, data) {\r\n            var originRecord = $(elem).parents('tr').eq(0),\r\n                position = originRecord.position();\r\n\r\n            ++position.top;\r\n            $(data).css(position);\r\n        },\r\n\r\n        /**\r\n         * Set records to cache\r\n         *\r\n         * @param {Object} records - record instance\r\n         */\r\n        setCacheRecords: function (records) {\r\n            this.recordsCache(records);\r\n        },\r\n\r\n        /**\r\n         * Set styles to draggable element\r\n         *\r\n         * @param {Object} data - data\r\n         * @param {Object} elem - elem instance\r\n         * @returns {Object} instance data.\r\n         */\r\n        processingStyles: function (data, elem) {\r\n            var table = $(elem).parents('table').eq(0),\r\n                columns = table.find('th'),\r\n                recordColumns = $(data).find('td');\r\n\r\n            this._setDefaultPosition(elem, $(data));\r\n            this._setColumnsWidth(columns, recordColumns);\r\n            this._setTableWidth(table, $(data));\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Set table width.\r\n         *\r\n         * @param {Object} originalTable - original record instance\r\n         * @param {Object} recordTable - draggable record instance\r\n         */\r\n        _setTableWidth: function (originalTable, recordTable) {\r\n            recordTable.outerWidth(originalTable.outerWidth());\r\n        },\r\n\r\n        /**\r\n         * Set columns width.\r\n         *\r\n         * @param {Object} originColumns - original record instance\r\n         * @param {Object} recordColumns - draggable record instance\r\n         */\r\n        _setColumnsWidth: function (originColumns, recordColumns) {\r\n            var i = 0,\r\n                length = originColumns.length;\r\n\r\n            for (i; i < length; i++) {\r\n                recordColumns.eq(i).outerWidth(originColumns.eq(i).outerWidth());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get copy original record\r\n         *\r\n         * @param {Object} record - original record instance\r\n         * @returns {Object} draggable record instance\r\n         */\r\n        getRecordNode: function (record) {\r\n            var $record = $(record),\r\n                table = $record.parents('table')[0].cloneNode(true),\r\n                $table = $(table);\r\n\r\n            $table.find('tr').remove();\r\n            $table.append($record.parents('tr')[0].cloneNode(true));\r\n\r\n            return table;\r\n        },\r\n\r\n        /**\r\n         * Get record context by element\r\n         *\r\n         * @param {Object} elem - original element\r\n         * @returns {Object} draggable record context\r\n         */\r\n        getRecord: function (elem) {\r\n            var ctx = getContext(elem),\r\n                index = _.isFunction(ctx.$index) ? ctx.$index() : ctx.$index;\r\n\r\n            return this.recordsCache()[index];\r\n        },\r\n\r\n        /**\r\n         * Get correct page Y\r\n         *\r\n         * @param {Object} event - current event\r\n         * @returns {integer}\r\n         */\r\n        getPageY: function (event) {\r\n            var pageY;\r\n\r\n            if (event.type.indexOf('touch') >= 0) {\r\n                if (event.originalEvent.touches[0]) {\r\n                    pageY = event.originalEvent.touches[0].pageY;\r\n                } else {\r\n                    pageY = event.originalEvent.changedTouches[0].pageY;\r\n                }\r\n            } else {\r\n                pageY = event.pageY;\r\n            }\r\n\r\n            return pageY;\r\n        },\r\n\r\n        /**\r\n         * Disable page scrolling\r\n         */\r\n        disableScroll: function () {\r\n            document.body.addEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Enable page scrolling\r\n         */\r\n        enableScroll: function () {\r\n            document.body.removeEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prevent default function\r\n         *\r\n         * @param {Object} event - event object\r\n         */\r\n        preventDefault: function (event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows-grid.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './dynamic-rows'\r\n], function (_, dynamicRows) {\r\n    'use strict';\r\n\r\n    return dynamicRows.extend({\r\n        defaults: {\r\n            dataProvider: '',\r\n            insertData: [],\r\n            map: null,\r\n            cacheGridData: [],\r\n            deleteProperty: false,\r\n            positionProvider: 'position',\r\n            dataLength: 0,\r\n            identificationProperty: 'id',\r\n            identificationDRProperty: 'id',\r\n            listens: {\r\n                'insertData': 'processingInsertData',\r\n                'recordData': 'initElements setToInsertData'\r\n            },\r\n            mappingSettings: {\r\n                enabled: true,\r\n                distinct: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this.setToInsertData = _.debounce(this.setToInsertData, 200);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'insertData'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from recordData to insertData\r\n         */\r\n        setToInsertData: function () {\r\n            var insertData = [],\r\n                obj;\r\n\r\n            if (this.recordData().length && !this.update) {\r\n                _.each(this.recordData(), function (recordData) {\r\n                    obj = {};\r\n                    obj[this.map[this.identificationProperty]] = recordData[this.identificationProperty];\r\n                    insertData.push(obj);\r\n                }, this);\r\n\r\n                if (insertData.length) {\r\n                    this.source.set(this.dataProvider, insertData);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.processingAddChild(data, this.startIndex + index, data[this.identificationDRProperty]);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize elements from grid\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initElements: function (data) {\r\n            var newData = this.getNewData(data);\r\n\r\n            this.parsePagesData(data);\r\n\r\n            if (newData.length) {\r\n                if (this.insertData().length) {\r\n                    this.processingAddChild(newData[0], data.length - 1, newData[0][this.identificationProperty]);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delete record instance\r\n         * update data provider dataScope\r\n         *\r\n         * @param {String|Number} index - record index\r\n         * @param {String|Number} recordId\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            this.updateInsertData(recordId);\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Updates insertData when record is deleted\r\n         *\r\n         * @param {String|Number} recordId\r\n         */\r\n        updateInsertData: function (recordId) {\r\n            var data = this.getElementData(this.insertData(), recordId),\r\n            prop = this.map[this.identificationDRProperty];\r\n\r\n            this.insertData(_.reject(this.source.get(this.dataProvider), function (recordData) {\r\n                return recordData[prop].toString() === data[prop].toString();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Find data object by index\r\n         *\r\n         * @param {Array} array - data collection\r\n         * @param {Number} index - element index\r\n         * @param {String} property - to find by property\r\n         *\r\n         * @returns {Object} data object\r\n         */\r\n        getElementData: function (array, index, property) {\r\n            var obj = {},\r\n                result;\r\n\r\n            property ? obj[property] = index : obj[this.map[this.identificationDRProperty]] = index;\r\n            result = _.findWhere(array, obj);\r\n\r\n            if (!result) {\r\n                property ?\r\n                    obj[property] = index.toString() :\r\n                    obj[this.map[this.identificationDRProperty]] = index.toString();\r\n            }\r\n\r\n            result = _.findWhere(array, obj);\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            if (this._elems.length > this.pageSize) {\r\n                return false;\r\n            }\r\n\r\n            this.showSpinner(true);\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Contains old data with new\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} changed data\r\n         */\r\n        getNewData: function (data) {\r\n            var changes = [],\r\n                tmpObj = {};\r\n\r\n            if (data.length !== this.relatedData.length) {\r\n                _.each(data, function (obj) {\r\n                    tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                    if (!_.findWhere(this.relatedData, tmpObj)) {\r\n                        changes.push(obj);\r\n                    }\r\n                }, this);\r\n            }\r\n\r\n            return changes;\r\n        },\r\n\r\n        /**\r\n         * Processing insert data\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processingInsertData: function (data) {\r\n            var changes,\r\n                obj = {};\r\n\r\n            changes = this._checkGridData(data);\r\n            this.cacheGridData = data;\r\n\r\n            if (changes.length) {\r\n                obj[this.identificationDRProperty] = changes[0][this.map[this.identificationProperty]];\r\n\r\n                if (_.findWhere(this.recordData(), obj)) {\r\n                    return false;\r\n                }\r\n\r\n                changes.forEach(function (changedObject) {\r\n                    this.mappingValue(changedObject);\r\n                }, this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mapping value from grid\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        mappingValue: function (data) {\r\n            var obj = {},\r\n                tmpObj = {};\r\n\r\n            if (this.mappingSettings.enabled) {\r\n                _.each(this.map, function (prop, index) {\r\n                    obj[index] = !_.isUndefined(data[prop]) ? data[prop] : '';\r\n                }, this);\r\n            } else {\r\n                obj = data;\r\n            }\r\n\r\n            if (this.mappingSettings.distinct) {\r\n                tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                if (_.findWhere(this.recordData(), tmpObj)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (!obj.hasOwnProperty(this.positionProvider)) {\r\n                this.setMaxPosition();\r\n                obj[this.positionProvider] = this.maxPosition;\r\n            }\r\n\r\n            this.source.set(this.dataScope + '.' + this.index + '.' + this.recordData().length, obj);\r\n        },\r\n\r\n        /**\r\n         * Check changed records\r\n         *\r\n         * @param {Array} data - array with records data\r\n         * @returns {Array} Changed records\r\n         */\r\n        _checkGridData: function (data) {\r\n            var cacheLength = this.cacheGridData.length,\r\n                curData = data.length,\r\n                max = cacheLength > curData ? this.cacheGridData : data,\r\n                changes = [],\r\n                obj = {};\r\n\r\n            max.forEach(function (record, index) {\r\n                obj[this.map[this.identificationDRProperty]] = record[this.map[this.identificationDRProperty]];\r\n\r\n                if (!_.where(this.cacheGridData, obj).length) {\r\n                    changes.push(data[index]);\r\n                }\r\n            }, this);\r\n\r\n            return changes;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'mageUtils',\r\n    'underscore',\r\n    'uiLayout',\r\n    'uiCollection',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'jquery'\r\n], function (ko, utils, _, layout, uiCollection, registry, $t, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Checks value type and cast to boolean if needed\r\n     *\r\n     * @param {*} value\r\n     *\r\n     * @returns {Boolean|*} casted or origin value\r\n     */\r\n    function castValue(value) {\r\n        if (_.isUndefined(value) || value === '' || _.isNull(value)) {\r\n            return false;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Compares arrays.\r\n     *\r\n     * @param {Array} base - array as method bases its decision on first argument.\r\n     * @param {Array} current - second array\r\n     *\r\n     * @returns {Boolean} result - is current array equal to base array\r\n     */\r\n    function compareArrays(base, current) {\r\n        var index = 0,\r\n            length = base.length;\r\n\r\n        if (base.length !== current.length) {\r\n            return false;\r\n        }\r\n\r\n        /*eslint-disable max-depth, eqeqeq, no-use-before-define */\r\n        for (index; index < length; index++) {\r\n            if (_.isArray(base[index]) && _.isArray(current[index])) {\r\n                if (!compareArrays(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[index] === 'object' && typeof current[index] === 'object') {\r\n                if (!compareObjects(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[index]) != castValue(current[index])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq, no-use-before-define */\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Compares objects. Compares only properties from origin object,\r\n     * if current object has more properties - they are not considered\r\n     *\r\n     * @param {Object} base - first object\r\n     * @param {Object} current - second object\r\n     *\r\n     * @returns {Boolean} result - is current object equal to base object\r\n     */\r\n    function compareObjects(base, current) {\r\n        var prop;\r\n\r\n        /*eslint-disable max-depth, eqeqeq*/\r\n        for (prop in base) {\r\n            if (_.isArray(base[prop]) && _.isArray(current[prop])) {\r\n                if (!compareArrays(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[prop] === 'object' && typeof current[prop] === 'object') {\r\n                if (!compareObjects(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[prop]) != castValue(current[prop])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq */\r\n\r\n        return true;\r\n    }\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            defaultRecord: false,\r\n            columnsHeader: true,\r\n            columnsHeaderAfterRender: false,\r\n            columnsHeaderClasses: '',\r\n            labels: [],\r\n            recordTemplate: 'record',\r\n            collapsibleHeader: false,\r\n            additionalClasses: {},\r\n            visible: true,\r\n            disabled: false,\r\n            fit: false,\r\n            addButton: true,\r\n            addButtonLabel: $t('Add'),\r\n            recordData: [],\r\n            maxPosition: 0,\r\n            deleteProperty: 'delete',\r\n            identificationProperty: 'record_id',\r\n            deleteValue: true,\r\n            showSpinner: true,\r\n            isDifferedFromDefault: false,\r\n            defaultState: [],\r\n            defaultPagesState: {},\r\n            pagesChanged: {},\r\n            hasInitialPagesState: {},\r\n            changed: false,\r\n            fallbackResetTpl: 'ui/form/element/helper/fallback-reset-link',\r\n            dndConfig: {\r\n                name: '${ $.name }_dnd',\r\n                component: 'Magento_Ui/js/dynamic-rows/dnd',\r\n                template: 'ui/dynamic-rows/cells/dnd',\r\n                recordsProvider: '${ $.name }',\r\n                enabled: true\r\n            },\r\n            templates: {\r\n                record: {\r\n                    parent: '${ $.$data.collection.name }',\r\n                    name: '${ $.$data.index }',\r\n                    dataScope: '${ $.$data.collection.index }.${ $.name }',\r\n                    nodeTemplate: '${ $.parent }.${ $.$data.collection.recordTemplate }'\r\n                }\r\n            },\r\n            links: {\r\n                recordData: '${ $.provider }:${ $.dataScope }.${ $.index }'\r\n            },\r\n            listens: {\r\n                visible: 'setVisible',\r\n                disabled: 'setDisabled',\r\n                childTemplate: 'initHeader',\r\n                recordTemplate: 'onUpdateRecordTemplate',\r\n                recordData: 'setDifferedFromDefault parsePagesData setRecordDataToCache',\r\n                currentPage: 'changePage',\r\n                elems: 'checkSpinner',\r\n                changed: 'updateTrigger'\r\n            },\r\n            modules: {\r\n                dnd: '${ $.dndConfig.name }'\r\n            },\r\n            pages: 1,\r\n            pageSize: 20,\r\n            relatedData: [],\r\n            currentPage: 1,\r\n            recordDataCache: [],\r\n            startIndex: 0\r\n        },\r\n\r\n        /**\r\n         * Sets record data to cache\r\n         */\r\n        setRecordDataToCache: function (data) {\r\n            this.recordDataCache = data;\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this,\r\n                'processingDeleteRecord',\r\n                'onChildrenUpdate',\r\n                'checkDefaultState',\r\n                'renderColumnsHeader',\r\n                'deleteHandler',\r\n                'setDefaultState'\r\n            );\r\n\r\n            this._super()\r\n                .initChildren()\r\n                .initDnd()\r\n                .initDefaultRecord()\r\n                .setInitialProperty()\r\n                .setColumnsHeaderListener()\r\n                .checkSpinner();\r\n\r\n            this.on('recordData', this.checkDefaultState);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        bubble: function (event) {\r\n            if (event === 'deleteRecord' || event === 'update') {\r\n                return false;\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Inits DND module\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initDnd: function () {\r\n            if (this.dndConfig.enabled) {\r\n                layout([this.dndConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            if (this.dnd()) {\r\n                this.dnd().destroy();\r\n            }\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('childTemplate')\r\n                .observe([\r\n                    'pages',\r\n                    'currentPage',\r\n                    'recordData',\r\n                    'columnsHeader',\r\n                    'visible',\r\n                    'disabled',\r\n                    'labels',\r\n                    'showSpinner',\r\n                    'isDifferedFromDefault',\r\n                    'changed'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n            elem.on({\r\n                'deleteRecord': this.deleteHandler,\r\n                'update': this.onChildrenUpdate,\r\n                'addChild': this.setDefaultState\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for deleteRecord event\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} id\r\n         */\r\n        deleteHandler: function (index, id) {\r\n            var defaultState;\r\n\r\n            this.setDefaultState();\r\n            defaultState = this.defaultPagesState[this.currentPage()];\r\n            this.processingDeleteRecord(index, id);\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(defaultState, this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        },\r\n\r\n        /**\r\n         * Set initial property to records data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setInitialProperty: function () {\r\n            if (_.isArray(this.recordData())) {\r\n                this.recordData.each(function (data, index) {\r\n                    this.source.set(this.dataScope + '.' + this.index + '.' + index + '.initialize', true);\r\n                }, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for update event\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        onChildrenUpdate: function (state) {\r\n            var changed,\r\n                dataScope,\r\n                changedElemDataScope;\r\n\r\n            if (state && !this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setDefaultState();\r\n                changed = this.getChangedElems(this.elems());\r\n                dataScope = this.elems()[0].dataScope.split('.');\r\n                dataScope.splice(dataScope.length - 1, 1);\r\n                changed.forEach(function (elem) {\r\n                    changedElemDataScope = elem.dataScope.split('.');\r\n                    changedElemDataScope.splice(0, dataScope.length);\r\n                    changedElemDataScope[0] =\r\n                        (parseInt(changedElemDataScope[0], 10) - this.pageSize * (this.currentPage() - 1)).toString();\r\n                    this.setValueByPath(\r\n                        this.defaultPagesState[this.currentPage()],\r\n                        changedElemDataScope, elem.initialValue\r\n                    );\r\n                }, this);\r\n            }\r\n\r\n            if (this.defaultPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set default dynamic-rows state or state before changing data\r\n         *\r\n         * @param {Array} data - defaultState data\r\n         */\r\n        setDefaultState: function (data) {\r\n            var componentData,\r\n                childItems;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()]) {\r\n                childItems = this.getChildItems();\r\n                componentData = childItems.length ?\r\n                    utils.copy(childItems) :\r\n                    utils.copy(this.getChildItems(this.recordDataCache));\r\n                componentData.forEach(function (dataObj) {\r\n                    if (dataObj.hasOwnProperty('initialize')) {\r\n                        delete dataObj.initialize;\r\n                    }\r\n                });\r\n\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = data ? data : this.arrayFilter(componentData);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets value to object by string path\r\n         *\r\n         * @param {Object} obj\r\n         * @param {Array|String} path\r\n         * @param {*} value\r\n         */\r\n        setValueByPath: function (obj, path, value) {\r\n            var prop;\r\n\r\n            if (_.isString(path)) {\r\n                path = path.split('.');\r\n            }\r\n\r\n            if (path.length - 1) {\r\n                prop = obj[path[0]];\r\n                path.splice(0, 1);\r\n                this.setValueByPath(prop, path, value);\r\n            } else if (path.length && obj) {\r\n                obj[path[0]] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns elements which changed self state\r\n         *\r\n         * @param {Array} array - data array\r\n         * @param {Array} changed - array with changed elements\r\n         * @returns {Array} changed - array with changed elements\r\n         */\r\n        getChangedElems: function (array, changed) {\r\n            changed = changed || [];\r\n\r\n            array.forEach(function (elem) {\r\n                if (_.isFunction(elem.elems)) {\r\n                    this.getChangedElems(elem.elems(), changed);\r\n                } else if (_.isFunction(elem.hasChanged) && elem.hasChanged()) {\r\n                    changed.push(elem);\r\n                }\r\n            }, this);\r\n\r\n            return changed;\r\n        },\r\n\r\n        /**\r\n         * Checks columnsHeaderAfterRender property,\r\n         * and set listener on elems if needed\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setColumnsHeaderListener: function () {\r\n            if (this.columnsHeaderAfterRender) {\r\n                this.on('recordData', this.renderColumnsHeader);\r\n\r\n                if (_.isArray(this.recordData()) && this.recordData().length) {\r\n                    this.renderColumnsHeader();\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks whether component's state is default or not\r\n         */\r\n        checkDefaultState: function () {\r\n            var isRecordDataArray = _.isArray(this.recordData()),\r\n                initialize,\r\n                hasNotDefaultRecords = isRecordDataArray ? !!this.recordData().filter(function (data) {\r\n                    return !data.initialize;\r\n                }).length : false;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()] && isRecordDataArray && hasNotDefaultRecords) {\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = utils.copy(this.getChildItems().filter(function (data) {\r\n                    initialize = data.initialize;\r\n                    delete data.initialize;\r\n\r\n                    return initialize;\r\n                }));\r\n\r\n                this.setChangedForCurrentPage();\r\n            } else if (this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Filters out deleted items from array\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} filtered array\r\n         */\r\n        arrayFilter: function (data) {\r\n            var prop;\r\n\r\n            /*eslint-disable no-loop-func*/\r\n            data.forEach(function (elem) {\r\n                for (prop in elem) {\r\n                    if (_.isArray(elem[prop])) {\r\n                        elem[prop] = _.filter(elem[prop], function (elemProp) {\r\n                            return elemProp[this.deleteProperty] !== this.deleteValue;\r\n                        }, this);\r\n\r\n                        elem[prop].forEach(function (elemProp) {\r\n                            if (_.isArray(elemProp)) {\r\n                                elem[prop] = this.arrayFilter(elemProp);\r\n                            }\r\n                        }, this);\r\n                    }\r\n                }\r\n            }, this);\r\n\r\n            /*eslint-enable no-loop-func*/\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Triggers update event\r\n         *\r\n         * @param {Boolean} val\r\n         */\r\n        updateTrigger: function (val) {\r\n            this.trigger('update', val);\r\n        },\r\n\r\n        /**\r\n         * Returns component state\r\n         */\r\n        hasChanged: function () {\r\n            return this.changed();\r\n        },\r\n\r\n        /**\r\n         * Render column header\r\n         */\r\n        renderColumnsHeader: function () {\r\n            this.recordData().length ? this.columnsHeader(true) : this.columnsHeader(false);\r\n        },\r\n\r\n        /**\r\n         * Init default record\r\n         *\r\n         * @returns Chainable.\r\n         */\r\n        initDefaultRecord: function () {\r\n            if (this.defaultRecord && !this.recordData().length) {\r\n                this.addChild();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create header template\r\n         *\r\n         * @param {Object} prop - instance obj\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        createHeaderTemplate: function (prop) {\r\n            var visible = prop.visible !== false,\r\n                disabled = _.isUndefined(prop.disabled) ? this.disabled() : prop.disabled;\r\n\r\n            return {\r\n                visible: ko.observable(visible),\r\n                disabled: ko.observable(disabled)\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Init header elements\r\n         */\r\n        initHeader: function () {\r\n            var labels = [],\r\n                data;\r\n\r\n            if (!this.labels().length) {\r\n                _.each(this.childTemplate.children, function (cell) {\r\n                    data = this.createHeaderTemplate(cell.config);\r\n                    cell.config.labelVisible = false;\r\n                    _.extend(data, {\r\n                        defaultLabelVisible: data.visible(),\r\n                        label: cell.config.label,\r\n                        name: cell.name,\r\n                        required: !!cell.config.validation,\r\n                        columnsHeaderClasses: cell.config.columnsHeaderClasses,\r\n                        sortOrder: cell.config.sortOrder\r\n                    });\r\n                    labels.push(data);\r\n                }, this);\r\n                this.labels(_.sortBy(labels, 'sortOrder'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set max element position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        setMaxPosition: function (position, elem) {\r\n            if (position || position === 0) {\r\n                this.checkMaxPosition(position);\r\n                this.sort(position, elem);\r\n            } else {\r\n                this.maxPosition += 1;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sort element by position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        sort: function (position, elem) {\r\n            var that = this,\r\n                sorted,\r\n                updatedCollection;\r\n\r\n            if (this.elems().filter(function (el) {\r\n                    return el.position || el.position === 0;\r\n                }).length !== this.getChildItems().length) {\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!elem.containers.length) {\r\n                registry.get(elem.name, function () {\r\n                    that.sort(position, elem);\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            sorted = this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            });\r\n\r\n            updatedCollection = this.updatePosition(sorted, position, elem.name);\r\n            this.elems(updatedCollection);\r\n        },\r\n\r\n        /**\r\n         * Checking loader visibility\r\n         *\r\n         * @param {Array} elems\r\n         */\r\n        checkSpinner: function (elems) {\r\n            this.showSpinner(!(!this.recordData().length || elems && elems.length === this.getChildItems().length));\r\n        },\r\n\r\n        /**\r\n         * Filtering data and calculates the quantity of pages\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        parsePagesData: function (data) {\r\n            this.relatedData = this.deleteProperty ?\r\n                _.filter(data, function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this) : data;\r\n\r\n            this._updatePagesQuantity();\r\n        },\r\n\r\n        /**\r\n         * Reinit record data in order to remove deleted values\r\n         *\r\n         * @return void\r\n         */\r\n        reinitRecordData: function () {\r\n            this.recordData(\r\n                _.filter(this.recordData(), function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get items to rendering on current page\r\n         *\r\n         * @returns {Array} data\r\n         */\r\n        getChildItems: function (data, page) {\r\n            var dataRecord = data || this.relatedData,\r\n                startIndex;\r\n\r\n            this.startIndex = (~~this.currentPage() - 1) * this.pageSize;\r\n\r\n            startIndex = page || this.startIndex;\r\n\r\n            return dataRecord.slice(startIndex, this.startIndex + parseInt(this.pageSize, 10));\r\n        },\r\n\r\n        /**\r\n         * Get record count with filtered delete property.\r\n         *\r\n         * @returns {Number} count\r\n         */\r\n        getRecordCount: function () {\r\n            return _.filter(this.recordData(), function (record) {\r\n                return record && record[this.deleteProperty] !== this.deleteValue;\r\n            }, this).length;\r\n        },\r\n\r\n        /**\r\n         * Get number of columns\r\n         *\r\n         * @returns {Number} columns\r\n         */\r\n        getColumnsCount: function () {\r\n            return this.labels().length + (this.dndConfig.enabled ? 1 : 0);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            this.bubble('addChild', false);\r\n\r\n            if (this.relatedData.length && this.relatedData.length % this.pageSize === 0) {\r\n                this.pages(this.pages() + 1);\r\n                this.nextPage();\r\n            } else if (~~this.currentPage() !== this.pages()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before deleteRecord\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} recordId\r\n         */\r\n        processingDeleteRecord: function (index, recordId) {\r\n            this.deleteRecord(index, recordId);\r\n        },\r\n\r\n        /**\r\n         * Change page\r\n         *\r\n         * @param {Number} page - current page\r\n         */\r\n        changePage: function (page) {\r\n            this.clear();\r\n\r\n            if (page === 1 && !this.recordData().length) {\r\n                return false;\r\n            }\r\n\r\n            if (~~page > this.pages()) {\r\n                this.currentPage(this.pages());\r\n\r\n                return false;\r\n            } else if (~~page < 1) {\r\n                this.currentPage(1);\r\n\r\n                return false;\r\n            }\r\n\r\n            this.initChildren();\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page first or not\r\n         */\r\n        isFirst: function () {\r\n            return this.currentPage() === 1;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page last or not\r\n         */\r\n        isLast: function () {\r\n            return this.currentPage() === this.pages();\r\n        },\r\n\r\n        /**\r\n         * Change page to next\r\n         */\r\n        nextPage: function () {\r\n            this.currentPage(this.currentPage() + 1);\r\n        },\r\n\r\n        /**\r\n         * Change page to previous\r\n         */\r\n        previousPage: function () {\r\n            this.currentPage(this.currentPage() - 1);\r\n        },\r\n\r\n        /**\r\n         * Check dependency and set position to elements\r\n         *\r\n         * @param {Array} collection - elems\r\n         * @param {Number} position - current position\r\n         * @param {String} elemName - element name\r\n         *\r\n         * @returns {Array} collection\r\n         */\r\n        updatePosition: function (collection, position, elemName) {\r\n            var curPos,\r\n                parsePosition = ~~position,\r\n                result = _.filter(collection, function (record) {\r\n                    return ~~record.position === parsePosition;\r\n                });\r\n\r\n            if (result[1]) {\r\n                curPos = parsePosition + 1;\r\n                result[0].name === elemName ? result[1].position = curPos : result[0].position = curPos;\r\n                this.updatePosition(collection, curPos);\r\n            }\r\n\r\n            return collection;\r\n        },\r\n\r\n        /**\r\n         * Check max elements position and set if max\r\n         *\r\n         * @param {Number} position - current position\r\n         */\r\n        checkMaxPosition: function (position) {\r\n            var max = 0,\r\n                pos;\r\n\r\n            this.recordData.each(function (record) {\r\n                pos = ~~record.position;\r\n                pos > max ? max = pos : false;\r\n            });\r\n\r\n            max < position ? max = position : false;\r\n            this.maxPosition = max;\r\n        },\r\n\r\n        /**\r\n         * Remove and set new max position\r\n         */\r\n        removeMaxPosition: function () {\r\n            this.maxPosition = 0;\r\n            this.elems.each(function (record) {\r\n                this.maxPosition < record.position ? this.maxPosition = ~~record.position : false;\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Update record template and rerender elems\r\n         *\r\n         * @param {String} recordName - record name\r\n         */\r\n        onUpdateRecordTemplate: function (recordName) {\r\n            if (recordName) {\r\n                this.recordTemplate = recordName;\r\n                this.reload();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record\r\n         *\r\n         * @param {Number} index - row index\r\n         *\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            var recordInstance,\r\n                lastRecord,\r\n                recordsData,\r\n                lastRecordIndex;\r\n\r\n            if (this.deleteProperty) {\r\n                recordsData = this.recordData();\r\n                recordInstance = _.find(this.elems(), function (elem) {\r\n                    return elem.index === index;\r\n                });\r\n                recordInstance.destroy();\r\n                this.elems([]);\r\n                this._updateCollection();\r\n                this.removeMaxPosition();\r\n                recordsData[recordInstance.index][this.deleteProperty] = this.deleteValue;\r\n                this.recordData(recordsData);\r\n                this.reinitRecordData();\r\n                this.reload();\r\n            } else {\r\n                this.update = true;\r\n\r\n                if (~~this.currentPage() === this.pages()) {\r\n                    lastRecordIndex = this.startIndex + this.getChildItems().length - 1;\r\n                    lastRecord =\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex\r\n                        }) ||\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex.toString()\r\n                        });\r\n\r\n                    lastRecord.destroy();\r\n                }\r\n\r\n                this.removeMaxPosition();\r\n                recordsData = this._getDataByProp(recordId);\r\n                this._updateData(recordsData);\r\n                this.update = false;\r\n            }\r\n\r\n            this._reducePages();\r\n            this._sort();\r\n        },\r\n\r\n        /**\r\n         * Update number of pages.\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _updatePagesQuantity: function () {\r\n            var pages = Math.ceil(this.relatedData.length / this.pageSize) || 1;\r\n\r\n            this.pages(pages);\r\n        },\r\n\r\n        /**\r\n         * Reduce the number of pages\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _reducePages: function () {\r\n            if (this.pages() < ~~this.currentPage()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get data object by some property\r\n         *\r\n         * @param {Number} id - element id\r\n         * @param {String} prop - property\r\n         */\r\n        _getDataByProp: function (id, prop) {\r\n            prop = prop || this.identificationProperty;\r\n\r\n            return _.reject(this.getChildItems(), function (recordData) {\r\n                return recordData[prop].toString() === id.toString();\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Sort elems by position property\r\n         */\r\n        _sort: function () {\r\n            this.elems(this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            }));\r\n        },\r\n\r\n        /**\r\n         * Set new data to dataSource,\r\n         * delete element\r\n         *\r\n         * @param {Array} data - record data\r\n         */\r\n        _updateData: function (data) {\r\n            var elems = _.clone(this.elems()),\r\n                path,\r\n                dataArr;\r\n\r\n            dataArr = this.recordData.splice(this.startIndex, this.recordData().length - this.startIndex);\r\n            dataArr.splice(0, this.pageSize);\r\n            elems = _.sortBy(this.elems(), function (elem) {\r\n                return ~~elem.index;\r\n            });\r\n\r\n            data.concat(dataArr).forEach(function (rec, idx) {\r\n                if (elems[idx]) {\r\n                    elems[idx].recordId = rec[this.identificationProperty];\r\n                }\r\n\r\n                if (!rec.position) {\r\n                    rec.position = this.maxPosition;\r\n                    this.setMaxPosition();\r\n                }\r\n\r\n                path = this.dataScope + '.' + this.index + '.' + (this.startIndex + idx);\r\n                this.source.set(path, rec);\r\n            }, this);\r\n\r\n            this.elems(elems);\r\n        },\r\n\r\n        /**\r\n         * Rerender dynamic-rows elems\r\n         */\r\n        reload: function () {\r\n            this.clear();\r\n            this.initChildren(false, true);\r\n            this._updatePagesQuantity();\r\n\r\n            /* After change page size need to check existing current page */\r\n            this._reducePages();\r\n        },\r\n\r\n        /**\r\n         * Update page size based on select change event.\r\n         * The value needs to be retrieved from select as ko value handler is executed after the event handler.\r\n         *\r\n         * @param {Object} component\r\n         * @param {jQuery.Event} event\r\n         */\r\n        updatePageSize: function (component, event) {\r\n            this.pageSize = $(event.target).val();\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Destroy all dynamic-rows elems\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        clear: function () {\r\n            this.destroyChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems();\r\n\r\n            _.each(elems, function (elem) {\r\n                if (_.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set classes\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object} Classes\r\n         */\r\n        setClasses: function (data) {\r\n            var additional;\r\n\r\n            if (_.isString(data.additionalClasses)) {\r\n                additional = data.additionalClasses.split(' ');\r\n                data.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    data.additionalClasses[name] = true;\r\n                });\r\n            }\r\n\r\n            if (!data.additionalClasses) {\r\n                data.additionalClasses = {};\r\n            }\r\n\r\n            _.extend(data.additionalClasses, {\r\n                '_fit': data.fit,\r\n                '_required': data.required,\r\n                '_error': data.error,\r\n                '_empty': !this.elems().length,\r\n                '_no-header': this.columnsHeaderAfterRender || this.collapsibleHeader\r\n            });\r\n\r\n            return data.additionalClasses;\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.showSpinner(true);\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.addChild(data, this.startIndex + index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set visibility to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisible(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabled(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set visibility to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisibilityColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabledColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Add child components\r\n         *\r\n         * @param {Object} data - component data\r\n         * @param {Number} index - record(row) index\r\n         * @param {Number|String} prop - custom identify property\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        addChild: function (data, index, prop) {\r\n            var template = this.templates.record,\r\n                child;\r\n\r\n            index = index || _.isNumber(index) ? index : this.recordData().length;\r\n            prop = prop || _.isNumber(prop) ? prop : index;\r\n\r\n            _.extend(this.templates.record, {\r\n                recordId: prop\r\n            });\r\n\r\n            child = utils.template(template, {\r\n                collection: this,\r\n                index: index\r\n            });\r\n\r\n            layout([child]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Restore value to default\r\n         */\r\n        restoreToDefault: function () {\r\n            this.recordData(utils.copy(this.default));\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Update whether value differs from default value\r\n         */\r\n        setDifferedFromDefault: function () {\r\n            var recordData;\r\n\r\n            if (this.default) {\r\n                recordData = utils.copy(this.recordData());\r\n\r\n                Array.isArray(recordData) && recordData.forEach(function (item) {\r\n                    delete item['record_id'];\r\n                });\r\n\r\n                this.isDifferedFromDefault(!_.isEqual(recordData, this.default));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set the changed property if the current page is different\r\n         * than the default state\r\n         *\r\n         * @return void\r\n         */\r\n        setChangedForCurrentPage: function () {\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(this.defaultPagesState[this.currentPage()], this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/record.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiCollection',\r\n    'uiRegistry'\r\n], function (_, uiCollection, registry) {\r\n    'use strict';\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            visible: true,\r\n            disabled: true,\r\n            headerLabel: '',\r\n            label: '',\r\n            positionProvider: 'position',\r\n            imports: {\r\n                data: '${ $.provider }:${ $.dataScope }'\r\n            },\r\n            listens: {\r\n                position: 'initPosition',\r\n                elems: 'setColumnVisibleListener'\r\n            },\r\n            links: {\r\n                position: '${ $.name }.${ $.positionProvider }:value'\r\n            },\r\n            exports: {\r\n                recordId: '${ $.provider }:${ $.dataScope }.record_id'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.parentName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            registry.async(this.name + '.' + this.positionProvider)(function (component) {\r\n\r\n                /**\r\n                 * Overwrite hasChanged method\r\n                 *\r\n                 * @returns {Boolean}\r\n                 */\r\n                component.hasChanged = function () {\r\n\r\n                    /* eslint-disable eqeqeq */\r\n                    return this.value().toString() != this.initialValue.toString();\r\n\r\n                    /* eslint-enable eqeqeq */\r\n                };\r\n\r\n                if (!component.initialValue) {\r\n                    component.initialValue = self.parentComponent().maxPosition;\r\n                    component.bubble('update', component.hasChanged());\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init config\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.label = this.label || this.headerLabel;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('position')\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'data',\r\n                    'label'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init element position\r\n         *\r\n         * @param {Number} position - element position\r\n         */\r\n        initPosition: function (position) {\r\n            var pos = parseInt(position, 10);\r\n\r\n            this.parentComponent().setMaxPosition(pos, this);\r\n\r\n            if (!pos && pos !== 0) {\r\n                this.position = this.parentComponent().maxPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set column visibility listener\r\n         */\r\n        setColumnVisibleListener: function () {\r\n            var elem = _.find(this.elems(), function (curElem) {\r\n                return !curElem.hasOwnProperty('visibleListener');\r\n            });\r\n\r\n            if (!elem) {\r\n                return;\r\n            }\r\n\r\n            this.childVisibleListener(elem);\r\n\r\n            if (!elem.visibleListener) {\r\n                elem.on('visible', this.childVisibleListener.bind(this, elem));\r\n            }\r\n\r\n            elem.visibleListener = true;\r\n        },\r\n\r\n        /**\r\n         * Child visibility listener\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        childVisibleListener: function (data) {\r\n            this.setVisibilityColumn(data.index, data.visible());\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Clear data\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        clear: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.clear();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get label for collapsible header\r\n         *\r\n         * @param {String} label\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getLabel: function (label) {\r\n            if (_.isString(label)) {\r\n                this.label(label);\r\n            } else if (label && this.label()) {\r\n                return this.label();\r\n            } else {\r\n                this.label(this.headerLabel);\r\n            }\r\n\r\n            return this.label();\r\n        },\r\n\r\n        /**\r\n         * Set visibility to record child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.visible(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set visibility to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            var elems = this.elems(),\r\n                curElem = parseInt(index, 10),\r\n                label;\r\n\r\n            if (!this.parentComponent()) {\r\n                return false;\r\n            }\r\n\r\n            if (_.isNaN(curElem)) {\r\n                _.findWhere(elems, {\r\n                    index: index\r\n                }).visible(state);\r\n                label = _.findWhere(this.parentComponent().labels(), {\r\n                    name: index\r\n                });\r\n                label.defaultLabelVisible && label.visible(state);\r\n            } else {\r\n                elems[curElem].visible(state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.disabled(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            index = ~~index;\r\n            this.elems()[index].disabled(state);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/adapter/buttons'\r\n], function ($, _, buttons) {\r\n    'use strict';\r\n\r\n    var selectorPrefix = '',\r\n        eventPrefix;\r\n\r\n    /**\r\n     * Initialize listener.\r\n     *\r\n     * @param {Function} callback\r\n     * @param {String} action\r\n     */\r\n    function initListener(callback, action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).on('click' + eventPrefix, callback);\r\n    }\r\n\r\n    /**\r\n     * Destroy listener.\r\n     *\r\n     * @param {String} action\r\n     */\r\n    function destroyListener(action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).off('click' + eventPrefix);\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Attaches events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} selectorPref\r\n         * @param {String} eventPref\r\n         */\r\n        on: function (handlers, selectorPref, eventPref) {\r\n            selectorPrefix = selectorPrefix || selectorPref;\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, initListener);\r\n            selectorPrefix = '';\r\n        },\r\n\r\n        /**\r\n         * Removes events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} eventPref\r\n         */\r\n        off: function (handlers, eventPref) {\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, destroyListener);\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/form/button-adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'jquery',\r\n    'underscore',\r\n    'uiRegistry'\r\n], function (Class, $, _, registry) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Initialize actions and adapter.\r\n         *\r\n         * @param {Object} config\r\n         * @param {Element} elem\r\n         * @returns {Object}\r\n         */\r\n        initialize: function (config, elem) {\r\n            return this._super()\r\n                .initActions()\r\n                .initAdapter(elem);\r\n        },\r\n\r\n        /**\r\n         * Creates callback from declared actions.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initActions: function () {\r\n            var callbacks = [];\r\n\r\n            _.each(this.actions, function (action) {\r\n                callbacks.push({\r\n                    action: registry.async(action.targetName),\r\n                    args: _.union([action.actionName], action.params)\r\n                });\r\n            });\r\n\r\n            /**\r\n             * Callback function.\r\n             */\r\n            this.callback = function () {\r\n                _.each(callbacks, function (callback) {\r\n                    callback.action.apply(callback.action, callback.args);\r\n                });\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Attach callback handler on button.\r\n         *\r\n         * @param {Element} elem\r\n         */\r\n        initAdapter: function (elem) {\r\n            $(elem).on('click', this.callback);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/client.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiClass'\r\n], function ($, _, utils, Class) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Before save validate request.\r\n     *\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @param {String} selectorPrefix\r\n     * @param {String} messagesClass\r\n     * @returns {*}\r\n     */\r\n    function beforeSave(data, url, selectorPrefix, messagesClass) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(utils.filterFormData(data));\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url || url === 'undefined') {\r\n            return save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url,\r\n            data: data,\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (!resp.error) {\r\n                    save.resolve();\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages || [resp.message] || [], function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Insert method.\r\n                         *\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            var $wrapper = $('<div></div>').addClass(messagesClass).html(msg);\r\n\r\n                            $('.page-main-actions', selectorPrefix).after($wrapper);\r\n                            $('html, body').animate({\r\n                                scrollTop: $('.page-main-actions', selectorPrefix).offset().top\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Assembles data and submits it using 'utils.submit' method\r\n         */\r\n        save: function (data, options) {\r\n            var url = this.urls.beforeSave,\r\n                save = this._save.bind(this, data, options);\r\n\r\n            beforeSave(data, url, this.selectorPrefix, this.messagesClass).then(save);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Save data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} options\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _save: function (data, options) {\r\n            var url = this.urls.save;\r\n\r\n            $('body').trigger('processStart');\r\n            options = options || {};\r\n\r\n            if (!options.redirect) {\r\n                url += 'back/edit';\r\n            }\r\n\r\n            if (options.ajaxSave) {\r\n                utils.ajaxSubmit({\r\n                    url: url,\r\n                    data: data\r\n                }, options);\r\n\r\n                $('body').trigger('processStop');\r\n\r\n                return this;\r\n            }\r\n\r\n            utils.submit({\r\n                url: url,\r\n                data: data\r\n            }, options.attributes);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/spinner',\r\n    'rjsResolver',\r\n    './adapter',\r\n    'uiCollection',\r\n    'mageUtils',\r\n    'jquery',\r\n    'Magento_Ui/js/core/app',\r\n    'mage/validation'\r\n], function (_, loader, resolver, adapter, Collection, utils, $, app) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Format params\r\n     *\r\n     * @param {Object} params\r\n     * @returns {Array}\r\n     */\r\n    function prepareParams(params) {\r\n        var result = '?';\r\n\r\n        _.each(params, function (value, key) {\r\n            result += key + '=' + value + '&';\r\n        });\r\n\r\n        return result.slice(0, -1);\r\n    }\r\n\r\n    /**\r\n     * Collect form data.\r\n     *\r\n     * @param {Array} items\r\n     * @returns {Object}\r\n     */\r\n    function collectData(items) {\r\n        var result = {},\r\n            name;\r\n\r\n        items = Array.prototype.slice.call(items);\r\n\r\n        items.forEach(function (item) {\r\n            switch (item.type) {\r\n                case 'checkbox':\r\n                    result[item.name] = +!!item.checked;\r\n                    break;\r\n\r\n                case 'radio':\r\n                    if (item.checked) {\r\n                        result[item.name] = item.value;\r\n                    }\r\n                    break;\r\n\r\n                case 'select-multiple':\r\n                    name = item.name.substring(0, item.name.length - 2); //remove [] from the name ending\r\n                    result[name] = _.pluck(item.selectedOptions, 'value');\r\n                    break;\r\n\r\n                default:\r\n                    result[item.name] = item.value;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Makes ajax request\r\n     *\r\n     * @param {Object} params\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @returns {*}\r\n     */\r\n    function makeRequest(params, data, url) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(data);\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url) {\r\n            save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url + prepareParams(params),\r\n            data: data,\r\n            dataType: 'json',\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (resp.ajaxExpired) {\r\n                    window.location.href = resp.ajaxRedirect;\r\n                }\r\n\r\n                if (!resp.error) {\r\n                    save.resolve(resp);\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages, function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Inserts message on page\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            $('.page-main-actions').after(msg);\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    /**\r\n     * Check if fields is valid.\r\n     *\r\n     * @param {Array}items\r\n     * @returns {Boolean}\r\n     */\r\n    function isValidFields(items) {\r\n        var result = true;\r\n\r\n        _.each(items, function (item) {\r\n            if (!$.validator.validateSingleElement(item)) {\r\n                result = false;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            additionalFields: [],\r\n            additionalInvalid: false,\r\n            selectorPrefix: '.page-content',\r\n            messagesClass: 'messages',\r\n            errorClass: '.admin__field._error',\r\n            eventPrefix: '.${ $.index }',\r\n            ajaxSave: false,\r\n            ajaxSaveType: 'default',\r\n            imports: {\r\n                reloadUrl: '${ $.provider}:reloadUrl'\r\n            },\r\n            listens: {\r\n                selectorPrefix: 'destroyAdapter initAdapter',\r\n                '${ $.name }.${ $.reloadItem }': 'params.set reload'\r\n            },\r\n            exports: {\r\n                selectorPrefix: '${ $.provider }:client.selectorPrefix',\r\n                messagesClass: '${ $.provider }:client.messagesClass'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initAdapter();\r\n\r\n            resolver(this.hideLoader, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'responseData',\r\n                    'responseStatus'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.selector = '[data-form-part=' + this.namespace + ']';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initAdapter: function () {\r\n            adapter.on({\r\n                'reset': this.reset.bind(this),\r\n                'save': this.save.bind(this, true, {}),\r\n                'saveAndContinue': this.save.bind(this, false, {})\r\n            }, this.selectorPrefix, this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Destroy adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        destroyAdapter: function () {\r\n            adapter.off([\r\n                'reset',\r\n                'save',\r\n                'saveAndContinue'\r\n            ], this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Hide loader.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        hideLoader: function () {\r\n            loader.get(this.name).hide();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Validate and save form.\r\n         *\r\n         * @param {String} redirect\r\n         * @param {Object} data\r\n         */\r\n        save: function (redirect, data) {\r\n            this.validate();\r\n\r\n            if (!this.additionalInvalid && !this.source.get('params.invalid')) {\r\n                this.setAdditionalData(data)\r\n                    .submit(redirect);\r\n            } else {\r\n                this.focusInvalid();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Tries to set focus on first invalid form field.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        focusInvalid: function () {\r\n            var invalidField = _.find(this.delegate('checkInvalid'));\r\n\r\n            if (!_.isUndefined(invalidField) && _.isFunction(invalidField.focused)) {\r\n                invalidField.focused(true);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set additional data to source before form submit and after validation.\r\n         *\r\n         * @param {Object} data\r\n         * @returns {Object}\r\n         */\r\n        setAdditionalData: function (data) {\r\n            _.each(data, function (value, name) {\r\n                this.source.set('data.' + name, value);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Submits form\r\n         *\r\n         * @param {String} redirect\r\n         */\r\n        submit: function (redirect) {\r\n            var additional = collectData(this.additionalFields),\r\n                source = this.source;\r\n\r\n            _.each(additional, function (value, name) {\r\n                source.set('data.' + name, value);\r\n            });\r\n\r\n            source.save({\r\n                redirect: redirect,\r\n                ajaxSave: this.ajaxSave,\r\n                ajaxSaveType: this.ajaxSaveType,\r\n                response: {\r\n                    data: this.responseData,\r\n                    status: this.responseStatus\r\n                },\r\n                attributes: {\r\n                    id: this.namespace\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validates each element and returns true, if all elements are valid.\r\n         */\r\n        validate: function () {\r\n            this.additionalFields = document.querySelectorAll(this.selector);\r\n            this.source.set('params.invalid', false);\r\n            this.source.trigger('data.validate');\r\n            this.set('additionalInvalid', !isValidFields(this.additionalFields));\r\n        },\r\n\r\n        /**\r\n         * Trigger reset form data.\r\n         */\r\n        reset: function () {\r\n            this.source.trigger('data.reset');\r\n            $('[data-bind*=datepicker]').val('');\r\n        },\r\n\r\n        /**\r\n         * Trigger overload form data.\r\n         */\r\n        overload: function () {\r\n            this.source.trigger('data.overload');\r\n        },\r\n\r\n        /**\r\n         * Updates data from server.\r\n         */\r\n        reload: function () {\r\n            makeRequest(this.params, this.data, this.reloadUrl).then(function (data) {\r\n                app(data, true);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    './client',\r\n    'mageUtils'\r\n], function (_, Element, Client, utils) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            clientConfig: {\r\n                urls: {\r\n                    save: '${ $.submit_url }',\r\n                    beforeSave: '${ $.validate_url }'\r\n                }\r\n            },\r\n            ignoreTmpls: {\r\n                data: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initClient();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes client component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initClient: function () {\r\n            this.client = new Client(this.clientConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Saves currently available data.\r\n         *\r\n         * @param {Object} [options] - Addtitional request options.\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        save: function (options) {\r\n            var data = this.get('data');\r\n\r\n            this.client.save(data, options);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update data that stored in provider.\r\n         *\r\n         * @param {Boolean} isProvider\r\n         * @param {Object} newData\r\n         * @param {Object} oldData\r\n         *\r\n         * @returns {Provider}\r\n         */\r\n        updateConfig: function (isProvider, newData, oldData) {\r\n            if (isProvider === true) {\r\n                this.setData(oldData, newData, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *  Set data to provider based on current data.\r\n         *\r\n         * @param {Object} oldData\r\n         * @param {Object} newData\r\n         * @param {Provider} current\r\n         * @param {String} parentPath\r\n         */\r\n        setData: function (oldData, newData, current, parentPath) {\r\n            _.each(newData, function (val, key) {\r\n                if (_.isObject(val) || _.isArray(val)) {\r\n                    this.setData(oldData[key], val, current[key], utils.fullPath(parentPath, key));\r\n                } else if (val != oldData[key] && oldData[key] == current[key]) {//eslint-disable-line eqeqeq\r\n                    this.set(utils.fullPath(parentPath, key), val);\r\n                }\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/switcher.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'uiClass'\r\n], function (_, registry, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            rules: []\r\n        },\r\n\r\n        /**\r\n         * Initializes instance of a DataSwitcher.\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initRules();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRules: function () {\r\n            this.rules.forEach(this.initRule, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRule: function (rule) {\r\n            var handler = this.onValueChange.bind(this, rule);\r\n\r\n            if (!rule.target) {\r\n                rule.target = this.target;\r\n            }\r\n\r\n            if (!rule.property) {\r\n                rule.property = this.property;\r\n            }\r\n\r\n            registry.get(rule.target, function (target) {\r\n                this.applyRule(rule, target.get(rule.property));\r\n                target.on(rule.property, handler);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        addRule: function (rule) {\r\n            this.rules.push(rule);\r\n            this.initRule(rule);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        applyRule: function (rule, value) {\r\n            var actions = rule.actions;\r\n\r\n            //TODO Refactor this logic in scope of MAGETWO-48585\r\n            /* eslint-disable eqeqeq */\r\n            if (rule.value != value) {\r\n                return;\r\n            } else if (rule.strict) {\r\n                return;\r\n            }\r\n\r\n            /* eslint-enable eqeqeq */\r\n            actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} action - Action object.\r\n         */\r\n        applyAction: function (action) {\r\n            registry.get(action.target, function (target) {\r\n                var callback = target[action.callback];\r\n\r\n                callback.apply(target, action.params || []);\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rules object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        onValueChange: function (rule, value) {\r\n            this.applyRule(rule, value);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter/buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return {\r\n        'reset': '#reset',\r\n        'save': '#save',\r\n        'saveAndContinue': '#save_and_continue'\r\n    };\r\n});\r\n","Magento_Ui/js/form/components/area.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './tab'\r\n], function (_, Tab) {\r\n    'use strict';\r\n\r\n    return Tab.extend({\r\n        defaults: {\r\n            uniqueNs:   'params.activeArea',\r\n            template:   'ui/area',\r\n            changed:    false,\r\n            loading:    false\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onContentLoading');\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.on({\r\n                'update':   this.onChildrenUpdate,\r\n                'loading':  this.onContentLoading\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         * Invokes setActive method if settings\r\n         * contain makeVisible property set to true.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'uiLayout',\r\n    'mageUtils',\r\n    'underscore'\r\n], function (Element, registry, layout, utils, _) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            buttonClasses: {},\r\n            additionalClasses: {},\r\n            displayArea: 'outsideGroup',\r\n            displayAsLink: false,\r\n            elementTmpl: 'ui/form/element/button',\r\n            template: 'ui/form/components/button/simple',\r\n            visible: true,\r\n            disabled: false,\r\n            title: '',\r\n            buttonTextId: '',\r\n            ariLabelledby: ''\r\n        },\r\n\r\n        /**\r\n         * Initializes component.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            return this._super()\r\n                ._setClasses()\r\n                ._setButtonClasses();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'title',\r\n                    'childError'\r\n                ]);\r\n        },\r\n\r\n        /**\r\n         * Performs configured actions\r\n         */\r\n        action: function () {\r\n            this.actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         * Apply action on target component,\r\n         * but previously create this component from template if it is not existed\r\n         *\r\n         * @param {Object} action - action configuration\r\n         */\r\n        applyAction: function (action) {\r\n            var targetName = action.targetName,\r\n                params = utils.copy(action.params) || [],\r\n                actionName = action.actionName,\r\n                target;\r\n\r\n            if (!registry.has(targetName)) {\r\n                this.getFromTemplate(targetName);\r\n            }\r\n            target = registry.async(targetName);\r\n\r\n            if (target && typeof target === 'function' && actionName) {\r\n                params.unshift(actionName);\r\n                target.apply(target, params);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create target component from template\r\n         *\r\n         * @param {Object} targetName - name of component,\r\n         * that supposed to be a template and need to be initialized\r\n         */\r\n        getFromTemplate: function (targetName) {\r\n            var parentName = targetName.split('.'),\r\n                index = parentName.pop(),\r\n                child;\r\n\r\n            parentName = parentName.join('.');\r\n            child = utils.template({\r\n                parent: parentName,\r\n                name: index,\r\n                nodeTemplate: targetName\r\n            });\r\n            layout([child]);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            if (typeof this.additionalClasses === 'string') {\r\n                if (this.additionalClasses === '') {\r\n                    this.additionalClasses = {};\r\n\r\n                    return this;\r\n                }\r\n\r\n                this.additionalClasses = this.additionalClasses\r\n                    .trim()\r\n                    .split(' ')\r\n                    .reduce(function (classes, name) {\r\n                        classes[name] = true;\r\n\r\n                        return classes;\r\n                    }, {}\r\n                );\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'buttonClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setButtonClasses: function () {\r\n            var additional = this.buttonClasses;\r\n\r\n            if (_.isString(additional)) {\r\n                this.buttonClasses = {};\r\n\r\n                if (additional.trim().length) {\r\n                    additional = additional.trim().split(' ');\r\n\r\n                    additional.forEach(function (name) {\r\n                        if (name.length) {\r\n                            this.buttonClasses[name] = true;\r\n                        }\r\n                    }, this);\r\n                }\r\n            }\r\n\r\n            _.extend(this.buttonClasses, {\r\n                'action-basic': !this.displayAsLink,\r\n                'action-additional': this.displayAsLink\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/collection.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Ui/js/modal/confirm'\r\n], function (_, utils, registry, Component, layout, confirm) {\r\n    'use strict';\r\n\r\n    var childTemplate = {\r\n        parent: '${ $.$data.name }',\r\n        name: '${ $.$data.childIndex }',\r\n        dataScope: '${ $.name }',\r\n        nodeTemplate: '${ $.$data.name }.${ $.$data.itemTemplate }'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            lastIndex: 0,\r\n            template: 'ui/form/components/collection'\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Activates the incoming child and triggers the update event.\r\n         *\r\n         * @param {Object} elem - Incoming child.\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.activate();\r\n\r\n            this.bubble('update');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Loops over corresponding data in data storage,\r\n         * creates child for each and pushes it's identifier to initialItems array.\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var children = this.source.get(this.dataScope),\r\n                initial = this.initialItems = [];\r\n\r\n            _.each(children, function (item, index) {\r\n                initial.push(index);\r\n                this.addChild(index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates new item of collection, based on incoming 'index'.\r\n         * If not passed creates one with 'new_' prefix.\r\n         *\r\n         * @param {String|Object} [index] - Index of a child.\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        addChild: function (index) {\r\n            this.childIndex = !_.isString(index) ?\r\n                'new_' + this.lastIndex++ :\r\n                index;\r\n\r\n            layout([utils.template(childTemplate, this)]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns true if current set of items differ from initial one,\r\n         * or if some child has been changed.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasChanged: function () {\r\n            var initial = this.initialItems,\r\n                current = this.elems.pluck('index'),\r\n                changed = !utils.equalArrays(initial, current);\r\n\r\n            return changed || this.elems.some(function (elem) {\r\n                return _.some(elem.delegate('hasChanged'));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initiates validation of its' children components.\r\n         *\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        validate: function () {\r\n            var elems;\r\n\r\n            this.allValid = true;\r\n\r\n            elems = this.elems.sortBy(function (elem) {\r\n                return !elem.active();\r\n            });\r\n\r\n            elems = elems.map(this._validate, this);\r\n\r\n            return _.flatten(elems);\r\n        },\r\n\r\n        /**\r\n         * Iterator function for components validation.\r\n         * Activates first invalid child component.\r\n         *\r\n         * @param {Object} elem - Element to run validation on.\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        _validate: function (elem) {\r\n            var result = elem.delegate('validate'),\r\n                invalid;\r\n\r\n            invalid = _.some(result, function (item) {\r\n                return !item.valid;\r\n            });\r\n\r\n            if (this.allValid && invalid) {\r\n                this.allValid = false;\r\n\r\n                elem.activate();\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Creates function that removes element\r\n         * from collection using '_removeChild' method.\r\n         * @param  {Object} elem - Element that should be removed.\r\n         * @deprecated Not used anymore\r\n         */\r\n        removeAddress: function (elem) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.removeMessage,\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        self._removeAddress(elem);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Removes element from both collection and data storage,\r\n         * activates first element if removed one was active,\r\n         * triggers 'update' event.\r\n         *\r\n         * @param {Object} elem - Element to remove.\r\n         */\r\n        _removeAddress: function (elem) {\r\n            var isActive = elem.active(),\r\n                first;\r\n\r\n            elem.destroy();\r\n\r\n            first = this.elems.first();\r\n\r\n            if (first && isActive) {\r\n                first.activate();\r\n            }\r\n\r\n            this.bubble('update');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/fieldset.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'underscore'\r\n], function (Collapsible, _) {\r\n    'use strict';\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            template: 'ui/form/fieldset',\r\n            collapsible: false,\r\n            changed: false,\r\n            loading: false,\r\n            error: false,\r\n            opened: false,\r\n            level: 0,\r\n            visible: true,\r\n            initializeFieldsetDataByDefault: false, /* Data in some fieldsets should be initialized before open */\r\n            disabled: false,\r\n            listens: {\r\n                'opened': 'onVisibilityChange'\r\n            },\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onChildrenError', 'onContentLoading');\r\n\r\n            return this._super()\r\n                ._setClasses();\r\n        },\r\n\r\n        /**\r\n         * Initializes components' configuration.\r\n         *\r\n         * @returns {Fieldset} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this._wasOpened = this.opened || !this.collapsible;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         *\r\n         * @returns {Object} Reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading error visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         *\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            elem.initContainer(this);\r\n\r\n            elem.on({\r\n                'update': this.onChildrenUpdate,\r\n                'loading': this.onContentLoading,\r\n                'error': this.onChildrenError\r\n            });\r\n\r\n            if (this.disabled) {\r\n                try {\r\n                    elem.disabled(true);\r\n                }\r\n                catch (e) {\r\n\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.bubble('update', hasChanged);\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__collapsible-block-wrapper': this.collapsible,\r\n                _show: this.opened,\r\n                _hide: !this.opened,\r\n                _disabled: this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler of the \"opened\" property changes.\r\n         *\r\n         * @param {Boolean} isOpened\r\n         */\r\n        onVisibilityChange: function (isOpened) {\r\n            if (!this._wasOpened) {\r\n                this._wasOpened = isOpened;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children validation error.\r\n         * Sets error property to one incoming.\r\n         *\r\n         * @param {String} message - error message.\r\n         */\r\n        onChildrenError: function (message) {\r\n            var hasErrors = false;\r\n\r\n            if (!message) {\r\n                hasErrors = this._isChildrenHasErrors(hasErrors, this);\r\n            }\r\n\r\n            this.error(hasErrors || message);\r\n\r\n            if (hasErrors || message) {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns errors of children if exist\r\n         *\r\n         * @param {Boolean} hasErrors\r\n         * @param {*} container\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _isChildrenHasErrors: function (hasErrors, container) {\r\n            var self = this;\r\n\r\n            if (hasErrors === false && container.hasOwnProperty('elems')) {\r\n                hasErrors = container.elems.some('error');\r\n\r\n                if (hasErrors === false && container.hasOwnProperty('_elems')) {\r\n                    container._elems.forEach(function (child) {\r\n\r\n                        if (hasErrors === false) {\r\n                            hasErrors = self._isChildrenHasErrors(hasErrors, child);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return hasErrors;\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiCollection'\r\n], function (_, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            visible: true,\r\n            label: '',\r\n            showLabel: true,\r\n            required: false,\r\n            template: 'ui/group/group',\r\n            fieldTemplate: 'ui/form/field',\r\n            breakLine: true,\r\n            validateWholeGroup: false,\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /**\r\n         * Extends this with defaults and config.\r\n         * Then calls initObservable, iniListenes and extractData methods.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                ._setClasses();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('visible')\r\n                .observe({\r\n                    required: !!+this.required\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__control-grouped': !this.breakLine,\r\n                'admin__control-fields': this.breakLine,\r\n                required:   this.required,\r\n                _error:     this.error,\r\n                _disabled:  this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Defines if group has only one element.\r\n         * @return {Boolean}\r\n         */\r\n        isSingle: function () {\r\n            return this.elems.getLength() === 1;\r\n        },\r\n\r\n        /**\r\n         * Defines if group has multiple elements.\r\n         * @return {Boolean}\r\n         */\r\n        isMultiple: function () {\r\n            return this.elems.getLength() > 1;\r\n        },\r\n\r\n        /**\r\n         * Returns an array of child components previews.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getPreview: function () {\r\n            return this.elems.map('getPreview');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/html.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent'\r\n], function ($, _, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            content:        '',\r\n            showSpinner:    false,\r\n            loading:        false,\r\n            visible:        true,\r\n            template:       'ui/content/content',\r\n            additionalClasses: {},\r\n            ignoreTmpls: {\r\n                content: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls 'initialize' method of\r\n         *     parent, calls 'initAjaxConfig'\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onContainerToggle', 'onDataLoaded');\r\n\r\n            this._super()\r\n                ._setClasses()\r\n                .initAjaxConfig();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' method of parent, initializes observable\r\n         * properties of instance\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('content loading visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__scope-old': !!additional\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initContainer: function (parent) {\r\n            this._super();\r\n\r\n            parent.on('active', this.onContainerToggle);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes default ajax config on instance\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initAjaxConfig: function () {\r\n            this.ajaxConfig = {\r\n                url: this.url,\r\n                data: {\r\n                    FORM_KEY: window.FORM_KEY\r\n                },\r\n                success:    this.onDataLoaded\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'loadData' if both 'active' variable and 'shouldLoad'\r\n         * property are truthy\r\n         *\r\n         * @param  {Boolean} active\r\n         */\r\n        onContainerToggle: function (active) {\r\n            if (active && this.shouldLoad()) {\r\n                this.loadData();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Defines if instance has 'content' property defined.\r\n         *\r\n         * @return {Boolean} [description]\r\n         */\r\n        hasData: function () {\r\n            return !!this.content();\r\n        },\r\n\r\n        /**\r\n         * Defines if instance should load external data\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        shouldLoad: function () {\r\n            return this.url && !this.hasData() && !this.loading();\r\n        },\r\n\r\n        /**\r\n         * Sets loading property to true, makes ajax call\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        loadData: function () {\r\n            this.loading(true);\r\n\r\n            $.ajax(this.ajaxConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Ajax's request success handler. Calls 'updateContent' passing 'data'\r\n         * to it, then sets 'loading' property to false.\r\n         *\r\n         * @param  {String} data\r\n         */\r\n        onDataLoaded: function (data) {\r\n            this.updateContent(data)\r\n                .loading(false);\r\n        },\r\n\r\n        /**\r\n         * Sets incoming data 'content' property's value\r\n         *\r\n         * @param  {String} content\r\n         * @return {Object} - reference to instance\r\n         */\r\n        updateContent: function (content) {\r\n            this.content(content);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Content getter\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getContentUnsanitizedHtml: function () {\r\n            return this.content();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './insert',\r\n    'mageUtils',\r\n    'jquery'\r\n], function (Insert, utils, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Get page actions element.\r\n     *\r\n     * @param {String} elem\r\n     * @param {String} actionsClass\r\n     * @returns {String}\r\n     */\r\n    function getPageActions(elem, actionsClass) {\r\n        var el = document.createElement('div');\r\n\r\n        el.innerHTML = elem;\r\n\r\n        return el.getElementsByClassName(actionsClass)[0];\r\n    }\r\n\r\n    /**\r\n     * Return element without page actions toolbar\r\n     *\r\n     * @param {String} elem\r\n     * @param {String} actionsClass\r\n     * @returns {String}\r\n     */\r\n    function removePageActions(elem, actionsClass) {\r\n        var el = document.createElement('div'),\r\n            actions;\r\n\r\n        el.innerHTML = elem;\r\n        actions = el.getElementsByClassName(actionsClass)[0];\r\n\r\n        if (actions) {\r\n            el.removeChild(actions);\r\n        }\r\n\r\n        return el.innerHTML;\r\n    }\r\n\r\n    return Insert.extend({\r\n        defaults: {\r\n            externalFormName: '${ $.ns }.${ $.ns }',\r\n            pageActionsClass: 'page-actions',\r\n            actionsContainerClass: 'page-main-actions',\r\n            exports: {\r\n                prefix: '${ $.externalFormName }:selectorPrefix'\r\n            },\r\n            imports: {\r\n                toolbarSection: '${ $.toolbarContainer }:toolbarSection',\r\n                prefix: '${ $.toolbarContainer }:rootSelector',\r\n                messagesClass: '${ $.externalFormName }:messagesClass'\r\n            },\r\n            settings: {\r\n                ajax: {\r\n                    ajaxSave: true,\r\n                    exports: {\r\n                        ajaxSave: '${ $.externalFormName }:ajaxSave'\r\n                    },\r\n                    imports: {\r\n                        responseStatus: '${ $.externalFormName }:responseStatus',\r\n                        responseData: '${ $.externalFormName }:responseData'\r\n                    }\r\n                }\r\n            },\r\n            modules: {\r\n                externalForm: '${ $.externalFormName }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe('responseStatus');\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var defaults = this.constructor.defaults;\r\n\r\n            utils.extend(defaults, defaults.settings[config.formSubmitType] || {});\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc*/\r\n        destroyInserted: function () {\r\n            if (this.isRendered && this.externalForm()) {\r\n                this.externalForm().delegate('destroy');\r\n                this.removeActions();\r\n                this.responseStatus(undefined);\r\n                this.responseData = {};\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onRender: function (data) {\r\n            var actions = getPageActions(data, this.pageActionsClass);\r\n\r\n            if (!data.length) {\r\n                return this;\r\n            }\r\n            data = removePageActions(data, this.pageActionsClass);\r\n            this.renderActions(actions);\r\n            this._super(data);\r\n        },\r\n\r\n        /**\r\n         * Insert actions in toolbar.\r\n         *\r\n         * @param {String} actions\r\n         */\r\n        renderActions: function (actions) {\r\n            var $container = $('<div></div>');\r\n\r\n            $container\r\n                .addClass(this.actionsContainerClass)\r\n                .append(actions);\r\n\r\n            this.formHeader = $container;\r\n\r\n            $(this.toolbarSection).append(this.formHeader);\r\n        },\r\n\r\n        /**\r\n         * Remove actions toolbar.\r\n         */\r\n        removeActions: function () {\r\n            $(this.formHeader).siblings('.' + this.messagesClass).remove();\r\n            $(this.formHeader).remove();\r\n            this.formHeader = $();\r\n        },\r\n\r\n        /**\r\n         * Reset external form data.\r\n         */\r\n        resetForm: function () {\r\n            if (this.externalSource()) {\r\n                this.externalSource().trigger('data.reset');\r\n                this.responseStatus(undefined);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert-listing.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    './insert',\r\n    'mageUtils',\r\n    'underscore'\r\n], function ($, Insert, utils, _) {\r\n    'use strict';\r\n\r\n    return Insert.extend({\r\n        defaults: {\r\n            externalListingName: '${ $.ns }.${ $.ns }',\r\n            behaviourType: 'simple',\r\n            externalFilterMode: false,\r\n            requestConfig: {\r\n                method: 'POST'\r\n            },\r\n            externalCondition: 'nin',\r\n            settings: {\r\n                edit: {\r\n                    imports: {\r\n                        'onChangeRecord': '${ $.editorProvider }:changed'\r\n                    }\r\n                },\r\n                filter: {\r\n                    exports: {\r\n                        'requestConfig': '${ $.externalProvider }:requestConfig'\r\n                    }\r\n                }\r\n            },\r\n            imports: {\r\n                onSelectedChange: '${ $.selectionsProvider }:selected',\r\n                'update_url': '${ $.externalProvider }:update_url',\r\n                'indexField': '${ $.selectionsProvider }:indexField'\r\n            },\r\n            exports: {\r\n                externalFiltersModifier: '${ $.externalProvider }:params.filters_modifier'\r\n            },\r\n            listens: {\r\n                externalValue: 'updateExternalFiltersModifier updateSelections',\r\n                indexField: 'initialUpdateListing'\r\n            },\r\n            modules: {\r\n                selections: '${ $.selectionsProvider }',\r\n                externalListing: '${ $.externalListingName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            _.bindAll(this, 'updateValue', 'updateExternalValueByEditableData');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var defaults = this.constructor.defaults;\r\n\r\n            if (config.behaviourType === 'edit') {\r\n                defaults.editableData = {};\r\n                _.map(defaults.settings.edit.imports, function (value, key) {\r\n                    this.imports[key] = value;\r\n                }, defaults);\r\n            }\r\n\r\n            if (config.externalFilterMode === true) {\r\n                _.map(defaults.settings.filter.exports, function (value, key) {\r\n                    this.exports[key] = value;\r\n                }, defaults);\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'externalValue'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroyInserted: function () {\r\n            if (this.isRendered && this.externalListing()) {\r\n                this.externalListing().source.storage().clearRequests();\r\n                this.externalListing().delegate('destroy');\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Store data from edited record\r\n         *\r\n         * @param {Object} record\r\n         */\r\n        onChangeRecord: function (record) {\r\n            this.updateEditableData(record);\r\n\r\n            if (!this.dataLinks.imports) {\r\n                return;\r\n            }\r\n\r\n            this.updateExternalValueByEditableData();\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue every time row is selected,\r\n         * if it is configured by 'dataLinks.imports'\r\n         * Also suppress dataLinks so import/export of selections will not activate each other in circle\r\n         *\r\n         */\r\n        onSelectedChange: function () {\r\n            if (!this.dataLinks.imports ||\r\n                this.suppressDataLinks ||\r\n                _.isBoolean(this.initialExportDone) && !this.initialExportDone\r\n            ) {\r\n                this.suppressDataLinks = false;\r\n\r\n                return;\r\n            }\r\n\r\n            this.suppressDataLinks = true;\r\n            this.updateExternalValue();\r\n        },\r\n\r\n        /**\r\n         * Stores data from editor in editableData\r\n         * @param {Object} record\r\n         *\r\n         */\r\n        updateEditableData: function (record) {\r\n            var id = _.keys(record[0])[0];\r\n\r\n            this.editableData[id] = record[0][id];\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue by data from editor (already stored in editableData)\r\n         *\r\n         */\r\n        updateExternalValueByEditableData: function () {\r\n            var updatedExtValue;\r\n\r\n            if (!(this.behaviourType === 'edit') || _.isEmpty(this.editableData) || _.isEmpty(this.externalValue())) {\r\n                return;\r\n            }\r\n\r\n            updatedExtValue = this.externalValue();\r\n            updatedExtValue.map(function (item) {\r\n                _.extend(item, this.editableData[item[this.indexField]]);\r\n            }, this);\r\n            this.setExternalValue(updatedExtValue);\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from selectionsProvider data (if it is enough)\r\n         * or ajax request to server\r\n         *\r\n         * @returns {Object} result - deferred that will be resolved when value is updated\r\n         */\r\n        updateExternalValue: function () {\r\n            var result = $.Deferred(),\r\n                provider = this.selections(),\r\n                selections,\r\n                totalSelected,\r\n                itemsType,\r\n                rows;\r\n\r\n            if (!provider) {\r\n                return result;\r\n            }\r\n\r\n            selections = provider && provider.getSelections();\r\n            totalSelected = provider.totalSelected();\r\n            itemsType = selections && selections.excludeMode ? 'excluded' : 'selected';\r\n            rows = provider && provider.rows();\r\n\r\n            if (this.canUpdateFromClientData(totalSelected, selections.selected, rows)) {\r\n                this.updateFromClientData(selections.selected, rows);\r\n                this.updateExternalValueByEditableData();\r\n                result.resolve();\r\n            } else {\r\n                this.updateFromServerData(selections, itemsType).done(function () {\r\n                    this.updateExternalValueByEditableData();\r\n                    result.resolve();\r\n                }.bind(this));\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Check if the selected rows data can be taken from selectionsProvider data\r\n         * (which only stores data of the current page rows)\r\n         *  + from already saved data\r\n         *\r\n         * @param {Boolean} totalSelected - total rows selected (include rows that were filtered out)\r\n         * @param {Array} selected - ids of selected rows\r\n         * @param {Object} rows\r\n         */\r\n        canUpdateFromClientData: function (totalSelected, selected, rows) {\r\n            var alreadySavedSelectionsIds = _.pluck(this.externalValue(), this.indexField),\r\n                rowsOnCurrentPageIds = _.pluck(rows, this.indexField);\r\n\r\n            return totalSelected === selected.length &&\r\n                _.intersection(_.union(alreadySavedSelectionsIds, rowsOnCurrentPageIds), selected).length ===\r\n                selected.length;\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from selectionsProvider data\r\n         * (which only stores data of the current page rows)\r\n         *  + from already saved data\r\n         *  so we can avoid request to server\r\n         *\r\n         * @param {Array} selected - ids of selected rows\r\n         * @param {Object} rows\r\n         */\r\n        updateFromClientData: function (selected, rows) {\r\n            var value,\r\n                rowIds,\r\n                valueIds;\r\n\r\n            if (!selected || !selected.length) {\r\n                this.setExternalValue([]);\r\n\r\n                return;\r\n            }\r\n\r\n            value = this.externalValue();\r\n            rowIds = _.pluck(rows, this.indexField);\r\n            valueIds = _.pluck(value, this.indexField);\r\n\r\n            value = _.map(selected, function (item) {\r\n                if (_.contains(rowIds, item)) {\r\n                    return _.find(rows, function (row) {\r\n                        return row[this.indexField] === item;\r\n                    }, this);\r\n                } else if (_.contains(valueIds, item)) {\r\n                    return _.find(value, function (row) {\r\n                        return row[this.indexField] === item;\r\n                    }, this);\r\n                }\r\n            }, this);\r\n\r\n            this.setExternalValue(value);\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from ajax request to grab selected rows data\r\n         *\r\n         * @param {Object} selections\r\n         * @param {String} itemsType\r\n         *\r\n         * @returns {Object} request - deferred that will be resolved when ajax is done\r\n         */\r\n        updateFromServerData: function (selections, itemsType) {\r\n            var filterType = selections && selections.excludeMode ? 'nin' : 'in',\r\n                selectionsData = {},\r\n                request;\r\n\r\n            _.extend(selectionsData, this.params || {}, selections.params);\r\n\r\n            if (selections[itemsType] && selections[itemsType].length) {\r\n                selectionsData.filters = {};\r\n                selectionsData['filters_modifier'] = {};\r\n                selectionsData['filters_modifier'][this.indexField] = {\r\n                    'condition_type': filterType,\r\n                    value: selections[itemsType]\r\n                };\r\n            }\r\n\r\n            selectionsData.paging = {\r\n                notLimits: 1\r\n            };\r\n\r\n            request = this.requestData(selectionsData, {\r\n                method: this.requestConfig.method\r\n            });\r\n            request\r\n                .done(function (data) {\r\n                    this.setExternalValue(data.items || data);\r\n                    this.loading(false);\r\n                }.bind(this))\r\n                .fail(this.onError);\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Set listing rows data to the externalValue,\r\n         * or if externalData is configured with the names of particular columns,\r\n         * filter rows data to have only these columns, and then set to the externalValue\r\n         *\r\n         * @param {Object} newValue - rows data\r\n         *\r\n         */\r\n        setExternalValue: function (newValue) {\r\n            var keys = this.externalData,\r\n                value = this.externalValue(),\r\n                selectedIds = _.pluck(newValue, this.indexField);\r\n\r\n            if (_.isArray(keys) && !_.isEmpty(keys)) {\r\n                newValue = _.map(newValue, function (item) {\r\n                    return _.pick(item, keys);\r\n                }, this);\r\n            } else if (keys && _.isString(keys) && !_.isEmpty(newValue)) {\r\n                newValue = newValue[0][keys];\r\n            }\r\n\r\n            if (this.externalFilterMode) {\r\n                newValue = _.union(newValue, _.filter(value,\r\n                    function (item) {\r\n                        return !_.contains(selectedIds, item[this.indexField]);\r\n                    }, this));\r\n            }\r\n\r\n            this.set('externalValue', newValue);\r\n        },\r\n\r\n        /**\r\n         * Updates external filter (if externalFilterMode is on)\r\n         * every time, when value is updated,\r\n         * so grid is re-filtered to exclude or include selected rows only\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        updateExternalFiltersModifier: function (items) {\r\n            var provider,\r\n                filter = {};\r\n\r\n            if (!this.externalFilterMode) {\r\n                return;\r\n            }\r\n\r\n            provider = this.selections();\r\n\r\n            if (!provider) {\r\n                this.needInitialListingUpdate = true;\r\n\r\n                return;\r\n            }\r\n\r\n            filter[this.indexField] = {\r\n                'condition_type': this.externalCondition,\r\n                value: _.pluck(items, this.indexField)\r\n            };\r\n            this.set('externalFiltersModifier', filter);\r\n        },\r\n\r\n        /**\r\n         * Updates grid selections\r\n         * every time, when extenalValue is updated,\r\n         * so grid is re-selected according to externalValue updated\r\n         * Also suppress dataLinks so import/export of selections will not activate each other in circle\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        updateSelections: function (items) {\r\n            var provider,\r\n                ids;\r\n\r\n            if (!this.dataLinks.exports || this.suppressDataLinks) {\r\n                this.suppressDataLinks = false;\r\n                this.initialExportDone = true;\r\n\r\n                return;\r\n            }\r\n\r\n            provider = this.selections();\r\n\r\n            if (!provider) {\r\n                this.needInitialListingUpdate = true;\r\n\r\n                return;\r\n            }\r\n\r\n            this.suppressDataLinks = true;\r\n            provider.deselectAll();\r\n\r\n            if (_.isString(items)) {\r\n                provider.selected([items] || []);\r\n            } else {\r\n                ids = _.pluck(items || [], this.indexField)\r\n                    .map(function (item) {\r\n                        return item.toString();\r\n                    });\r\n\r\n                provider.selected(ids || []);\r\n            }\r\n            this.initialExportDone = true;\r\n        },\r\n\r\n        /**\r\n         * initial update of the listing\r\n         * with rows that must be checked/filtered\r\n         * by the indexes\r\n         */\r\n        initialUpdateListing: function () {\r\n            var items = this.externalValue();\r\n\r\n            if (this.needInitialListingUpdate && items) {\r\n                this.updateExternalFiltersModifier(items);\r\n                this.updateSelections(items);\r\n                this.needInitialListingUpdate = false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload source\r\n         */\r\n        reload: function () {\r\n            this.externalSource().set('params.t', new Date().getTime());\r\n        },\r\n\r\n        /**\r\n         * Updates value from external value\r\n         *\r\n         */\r\n        updateValue: function () {\r\n            this.set('value', this.externalValue());\r\n        },\r\n\r\n        /**\r\n         * Updates external value, then updates value from external value\r\n         *\r\n         */\r\n        save: function () {\r\n            this.updateExternalValue().done(\r\n                function () {\r\n                    if (!this.realTimeLink) {\r\n                        this.updateValue();\r\n                    }\r\n                }.bind(this)\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'jquery',\r\n    'mage/translate',\r\n    'mageUtils',\r\n    'underscore',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/lib/view/utils/bindings',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (Element, $, $t, utils, _, alert) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            content: '',\r\n            template: 'ui/form/insert',\r\n            showSpinner: true,\r\n            loading: false,\r\n            autoRender: true,\r\n            visible: true,\r\n            contentSelector: '${$.name}',\r\n            externalData: [],\r\n            params: {\r\n                namespace: '${ $.ns }'\r\n            },\r\n            renderSettings: {\r\n                url: '${ $.render_url }',\r\n                dataType: 'html'\r\n            },\r\n            updateSettings: {\r\n                url: '${ $.update_url }',\r\n                dataType: 'json'\r\n            },\r\n            imports: {},\r\n            exports: {},\r\n            listens: {},\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope}'\r\n            },\r\n            modules: {\r\n                externalSource: '${ $.externalProvider }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            _.bindAll(this, 'onRender', 'onUpdate');\r\n\r\n            if (this.autoRender) {\r\n                this.render();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'visible',\r\n                    'content',\r\n                    'value',\r\n                    'loading'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            this.initDataLink(config)._super();\r\n            this.contentSelector = this.contentSelector.replace(/\\./g, '_');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sync data with external provider.\r\n         *\r\n         * @param {Object} config\r\n         * @returns {Object}\r\n         */\r\n        initDataLink: function (config) {\r\n            var key, value;\r\n\r\n            if (config.dataLinks) {\r\n                _.each(config.externalData, function (val) {\r\n                    value = val;\r\n                    key = 'externalValue.' + val.replace('data.', '');\r\n\r\n                    if (config.dataLinks.imports) {\r\n                        this.imports[key] = '${ $.externalProvider }:' + value;\r\n                    }\r\n\r\n                    if (config.dataLinks.exports) {\r\n                        this.exports[key] = '${ $.externalProvider }:' + value;\r\n                    }\r\n                    this.links[key] = '${ $.externalProvider }:' + value;\r\n                }, this.constructor.defaults);\r\n            }\r\n\r\n            if (config.realTimeLink) {\r\n                this.constructor.defaults.links.externalValue = 'value';\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Request for render content.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        render: function (params) {\r\n            var self = this,\r\n                request;\r\n\r\n            if (this.isRendered) {\r\n                return this;\r\n            }\r\n\r\n            self.previousParams = params || {};\r\n\r\n            $.async({\r\n                component: this.name,\r\n                ctx: '.' + this.contentSelector\r\n            }, function (el) {\r\n                self.contentEl = $(el);\r\n                self.startRender = true;\r\n                params = _.extend({}, self.params, params || {});\r\n                request = self.requestData(params, self.renderSettings);\r\n                request\r\n                    .done(self.onRender)\r\n                    .fail(self.onError);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            this.destroyInserted()\r\n                ._super();\r\n        },\r\n\r\n        /**\r\n         * Destroy inserted components.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        destroyInserted: function () {\r\n            if (this.isRendered) {\r\n                this.isRendered = false;\r\n                this.content('');\r\n\r\n                if (this.externalSource()) {\r\n                    this.externalSource().destroy();\r\n                }\r\n                this.initExternalLinks();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize links on external components.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initExternalLinks: function () {\r\n            var imports = this.filterExternalLinks(this.imports, this.ns),\r\n                exports = this.filterExternalLinks(this.exports, this.ns),\r\n                links = this.filterExternalLinks(this.links, this.ns);\r\n\r\n            this.setLinks(links, 'imports')\r\n                .setLinks(links, 'exports');\r\n\r\n            _.each({\r\n                exports: exports,\r\n                imports: imports\r\n            }, this.setLinks, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Filter external links.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String }ns\r\n         * @returns {Object}\r\n         */\r\n        filterExternalLinks: function (data, ns) {\r\n            var links  = {};\r\n\r\n            _.each(data, function (value, key) {\r\n                if (typeof value === 'string' && value.split('.')[0] === ns) {\r\n                    links[key] = value;\r\n                }\r\n            });\r\n\r\n            return links;\r\n        },\r\n\r\n        /**\r\n         * Request with configurable params and settings.\r\n         *\r\n         * @param {Object} params\r\n         * @param {Object} ajaxSettings\r\n         * @returns {Object}\r\n         */\r\n        requestData: function (params, ajaxSettings) {\r\n            var query = utils.copy(params);\r\n\r\n            ajaxSettings = _.extend({\r\n                url: this['update_url'],\r\n                method: 'GET',\r\n                data: query,\r\n                dataType: 'json'\r\n            }, ajaxSettings);\r\n\r\n            this.loading(true);\r\n\r\n            return $.ajax(ajaxSettings);\r\n        },\r\n\r\n        /**\r\n         * Callback that render content.\r\n         *\r\n         * @param {*} data\r\n         */\r\n        onRender: function (data) {\r\n            var resp;\r\n\r\n            this.loading(false);\r\n\r\n            try {\r\n                resp = JSON.parse(data);\r\n\r\n                if (resp.ajaxExpired) {\r\n                    window.location.href = resp.ajaxRedirect;\r\n                }\r\n            } catch (e) {\r\n                this.set('content', data);\r\n                this.isRendered = true;\r\n                this.startRender = false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Error callback.\r\n         *\r\n         * @param {Object} xhr\r\n         */\r\n        onError: function (xhr) {\r\n            if (xhr.statusText === 'abort') {\r\n                return;\r\n            }\r\n\r\n            alert({\r\n                content: $t('Something went wrong.')\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Getter for external data.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getExternalData: function () {\r\n            var data = {};\r\n\r\n            _.each(this.externalData, function (path) {\r\n                utils.nested(data, path.replace('data.', ''), this.externalSource().get(path));\r\n            }, this);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Request for update data.\r\n         *\r\n         * @returns {*|Object}\r\n         */\r\n        updateData: function (params) {\r\n            var request;\r\n\r\n            params = _.extend(params || {}, this.params);\r\n\r\n            if (!this.startRender && !this.isRendered) {\r\n                return this.render(params);\r\n            }\r\n\r\n            request = this.requestData(params, this.updateSettings);\r\n            request\r\n                .done(this.onUpdate)\r\n                .fail(this.onError);\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Set data to external provider, clear changes.\r\n         *\r\n         * @param {*} data\r\n         */\r\n        onUpdate: function (data) {\r\n            this.externalSource().set('data', data);\r\n            this.externalSource().trigger('data.overload');\r\n            this.loading(false);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/multiline.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './group'\r\n], function (Group) {\r\n    'use strict';\r\n\r\n    return Group.extend({\r\n        defaults: {\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize Multiline component.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initialize: function () {\r\n            return this._super()\r\n                ._prepareValue();\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('value');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Prepare value for Multiline options.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         * @private\r\n         */\r\n        _prepareValue: function () {\r\n            var value = this.value();\r\n\r\n            if (typeof value === 'string') {\r\n                this.value(value.split('\\n'));\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/tab.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiCollection'\r\n], function (Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            uniqueProp:     'active',\r\n            active:         false,\r\n            wasActivated:   false\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .setUnique();\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('active wasActivated');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets active property to true, then invokes pushParams method.\r\n         */\r\n        activate: function () {\r\n            this.active(true);\r\n            this.wasActivated(true);\r\n\r\n            this.setUnique();\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/tab_group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/collapsible'\r\n], function (_, Collapsible) {\r\n    'use strict';\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            listens: {\r\n                '${ $.provider }:data.validate': 'onValidate'\r\n            },\r\n            collapsible: false,\r\n            opened: true\r\n        },\r\n\r\n        /**\r\n         * Invokes initElement method of parent class, calls 'initActivation' method\r\n         * passing element to it.\r\n         * @param {Object} elem\r\n         * @returns {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            this._super()\r\n                .initActivation(elem);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Activates element if one is first or if one has 'active' propert\r\n         * set to true.\r\n         *\r\n         * @param  {Object} elem\r\n         * @returns {Object} - reference to instance\r\n         */\r\n        initActivation: function (elem) {\r\n            var elems   = this.elems(),\r\n                isFirst = !elems.indexOf(elem);\r\n\r\n            if (isFirst || elem.active()) {\r\n                elem.activate();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delegates 'validate' method on element, then reads 'invalid' property\r\n         * of params storage, and if defined, activates element, sets\r\n         * 'allValid' property of instance to false and sets invalid's\r\n         * 'focused' property to true.\r\n         *\r\n         * @param {Object} elem\r\n         */\r\n        validate: function (elem) {\r\n            var result  = elem.delegate('validate'),\r\n                invalid;\r\n\r\n            invalid = _.find(result, function (item) {\r\n                return typeof item !== 'undefined' && !item.valid;\r\n            });\r\n\r\n            if (invalid) {\r\n                elem.activate();\r\n                invalid.target.focused(true);\r\n            }\r\n\r\n            return invalid;\r\n        },\r\n\r\n        /**\r\n         * Sets 'allValid' property of instance to true, then calls 'validate' method\r\n         * of instance for each element.\r\n         */\r\n        onValidate: function () {\r\n            this.elems.sortBy(function (elem) {\r\n                return !elem.active();\r\n            }).some(this.validate, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/collection/item.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    '../tab'\r\n], function (_, utils, Tab) {\r\n    'use strict';\r\n\r\n    var previewConfig = {\r\n        separator: ' ',\r\n        prefix: ''\r\n    };\r\n\r\n    /**\r\n     * Parses incoming data and returns result merged with default preview config\r\n     *\r\n     * @param  {Object|String} data\r\n     * @return {Object}\r\n     */\r\n    function parsePreview(data) {\r\n        if (typeof data == 'string') {\r\n            data = {\r\n                items: data\r\n            };\r\n        }\r\n\r\n        data.items = utils.stringToArray(data.items);\r\n\r\n        return _.defaults(data, previewConfig);\r\n    }\r\n\r\n    return Tab.extend({\r\n        defaults: {\r\n            label: '',\r\n            uniqueNs: 'activeCollectionItem',\r\n            previewTpl: 'ui/form/components/collection/preview'\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initializes of parent class\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'buildPreview', 'hasPreview');\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls initProperties of parent class, initializes properties\r\n         * of instance.\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.displayed = [];\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class, initializes observable\r\n         * properties of instance.\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe({\r\n                    noPreview: true,\r\n                    indexed: {}\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being called when child element has been initialized,\r\n         *     calls initElement of parent class, binds to element's update event,\r\n         *     calls insertToArea and insertToIndexed methods passing element to it\r\n         *\r\n         * @param  {Object} elem\r\n         */\r\n        initElement: function (elem) {\r\n            this._super()\r\n                .insertToIndexed(elem);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Adds element to observable indexed object of instance\r\n         *\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        insertToIndexed: function (elem) {\r\n            var indexed = this.indexed();\r\n\r\n            indexed[elem.index] = elem;\r\n\r\n            this.indexed(indexed);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Destroys current instance along with all of its' children.\r\n         * Overrides base method to clear data when this method is called.\r\n         */\r\n        destroy: function () {\r\n            this._super();\r\n            this._clearData();\r\n        },\r\n\r\n        /**\r\n         * Clears all data associated with component.\r\n         * @private\r\n         *\r\n         * @returns {Item} Chainable.\r\n         */\r\n        _clearData: function () {\r\n            this.source.remove(this.dataScope);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Formats incoming previews array via parsePreview function.\r\n         *\r\n         * @param  {Array} previews\r\n         * @return {Array} - formatted previews\r\n         */\r\n        formatPreviews: function (previews) {\r\n            return previews.map(parsePreview);\r\n        },\r\n\r\n        /**\r\n         * Creates string view of previews\r\n         *\r\n         * @param  {Object} data\r\n         * @return {Strict} - formatted preview string\r\n         */\r\n        buildPreview: function (data) {\r\n            var preview = this.getPreview(data.items),\r\n                prefix = data.prefix;\r\n\r\n            return prefix + preview.join(data.separator);\r\n        },\r\n\r\n        /**\r\n         * Defines if instance has preview for incoming data\r\n         *\r\n         * @param  {Object}  data\r\n         * @return {Boolean}\r\n         */\r\n        hasPreview: function (data) {\r\n            return !!this.getPreview(data.items).length;\r\n        },\r\n\r\n        /**\r\n         * Creates an array of previews for elements specified in incoming\r\n         * items array, calls updatePreview afterwards.\r\n         *\r\n         * @param  {Array} items - An array of element's indexes.\r\n         * @returns {Array} An array of previews.\r\n         */\r\n        getPreview: function (items) {\r\n            var elems = this.indexed(),\r\n                displayed = this.displayed,\r\n                preview;\r\n\r\n            items = items.map(function (index) {\r\n                var elem = elems[index];\r\n\r\n                preview = elem && elem.visible() ? elem.getPreview() : '';\r\n\r\n                preview = Array.isArray(preview) ?\r\n                    _.compact(preview).join(', ') :\r\n                    preview;\r\n\r\n                utils.toggle(displayed, index, !!preview);\r\n\r\n                return preview;\r\n            });\r\n\r\n            this.noPreview(!displayed.length);\r\n\r\n            return _.compact(items);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/abstract.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiLayout',\r\n    'uiElement',\r\n    'Magento_Ui/js/lib/validation/validator'\r\n], function (_, utils, layout, Element, validator) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            visible: true,\r\n            preview: '',\r\n            focused: false,\r\n            required: false,\r\n            disabled: false,\r\n            valueChangedByUser: false,\r\n            elementTmpl: 'ui/form/element/input',\r\n            tooltipTpl: 'ui/form/element/helper/tooltip',\r\n            fallbackResetTpl: 'ui/form/element/helper/fallback-reset',\r\n            'input_type': 'input',\r\n            placeholder: false,\r\n            description: '',\r\n            labelVisible: true,\r\n            label: '',\r\n            error: '',\r\n            warn: '',\r\n            notice: '',\r\n            customScope: '',\r\n            default: '',\r\n            isDifferedFromDefault: false,\r\n            showFallbackReset: false,\r\n            additionalClasses: {},\r\n            isUseDefault: '',\r\n            serviceDisabled: false,\r\n            valueUpdate: false, // ko binding valueUpdate\r\n\r\n            switcherConfig: {\r\n                component: 'Magento_Ui/js/form/switcher',\r\n                name: '${ $.name }_switcher',\r\n                target: '${ $.name }',\r\n                property: 'value'\r\n            },\r\n            listens: {\r\n                visible: 'setPreview',\r\n                value: 'setDifferedFromDefault',\r\n                '${ $.provider }:data.reset': 'reset',\r\n                '${ $.provider }:data.overload': 'overload',\r\n                '${ $.provider }:${ $.customScope ? $.customScope + \".\" : \"\"}data.validate': 'validate',\r\n                'isUseDefault': 'toggleUseDefault'\r\n            },\r\n            ignoreTmpls: {\r\n                value: true\r\n            },\r\n\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'reset');\r\n\r\n            this._super()\r\n                .setInitialValue()\r\n                ._setClasses()\r\n                .initSwitcher();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks if component has error.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        checkInvalid: function () {\r\n            return this.error() && this.error().length ? this : null;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            var rules = this.validation = this.validation || {};\r\n\r\n            this._super();\r\n\r\n            this.observe('error disabled focused preview visible value warn notice isDifferedFromDefault')\r\n                .observe('isUseDefault serviceDisabled')\r\n                .observe({\r\n                    'required': !!rules['required-entry']\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes regular properties of instance.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            var uid = utils.uniqueid(),\r\n                name,\r\n                valueUpdate,\r\n                scope;\r\n\r\n            this._super();\r\n\r\n            scope = this.dataScope.split('.');\r\n            name = scope.length > 1 ? scope.slice(1) : scope;\r\n\r\n            valueUpdate = this.showFallbackReset ? 'afterkeydown' : this.valueUpdate;\r\n\r\n            _.extend(this, {\r\n                uid: uid,\r\n                noticeId: 'notice-' + uid,\r\n                errorId: 'error-' + uid,\r\n                tooltipId: 'tooltip-' + uid,\r\n                inputName: utils.serializeName(name.join('.')),\r\n                valueUpdate: valueUpdate\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes switcher element instance.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initSwitcher: function () {\r\n            if (this.switcherConfig.enabled) {\r\n                layout([this.switcherConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets initial value of the element and subscribes to it's changes.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        setInitialValue: function () {\r\n            this.initialValue = this.getInitialValue();\r\n\r\n            if (this.value.peek() !== this.initialValue) {\r\n                this.value(this.initialValue);\r\n            }\r\n\r\n            this.on('value', this.onUpdate.bind(this));\r\n            this.isUseDefault(this.disabled());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses;\r\n\r\n            if (_.isString(additional)) {\r\n                this.additionalClasses = {};\r\n\r\n                if (additional.trim().length) {\r\n                    additional = additional.trim().split(' ');\r\n\r\n                    additional.forEach(function (name) {\r\n                        if (name.length) {\r\n                            this.additionalClasses[name] = true;\r\n                        }\r\n                    }, this);\r\n                }\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                _required: this.required,\r\n                _error: this.error,\r\n                _warn: this.warn,\r\n                _disabled: this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets initial value of element\r\n         *\r\n         * @returns {*} Elements' value.\r\n         */\r\n        getInitialValue: function () {\r\n            var values = [this.value(), this.default],\r\n                value;\r\n\r\n            values.some(function (v) {\r\n                if (v !== null && v !== undefined) {\r\n                    value = v;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            return this.normalizeData(value);\r\n        },\r\n\r\n        /**\r\n         * Sets 'value' as 'hidden' property's value, triggers 'toggle' event,\r\n         * sets instance's hidden identifier in params storage based on\r\n         * 'value'.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        setVisible: function (isVisible) {\r\n            this.visible(isVisible);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Show element.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        show: function () {\r\n            this.visible(true);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Hide element.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        hide: function () {\r\n            this.visible(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Disable element.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        disable: function () {\r\n            this.disabled(true);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Enable element.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        enable: function () {\r\n            this.disabled(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {(String|Object)} rule\r\n         * @param {(Object|Boolean)} [options]\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        setValidation: function (rule, options) {\r\n            var rules = utils.copy(this.validation),\r\n                changed;\r\n\r\n            if (_.isObject(rule)) {\r\n                _.extend(this.validation, rule);\r\n            } else {\r\n                this.validation[rule] = options;\r\n            }\r\n\r\n            changed = !utils.compare(rules, this.validation).equal;\r\n\r\n            if (changed) {\r\n                this.required(!!rules['required-entry']);\r\n                this.validate();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns unwrapped preview observable.\r\n         *\r\n         * @returns {String} Value of the preview observable.\r\n         */\r\n        getPreview: function () {\r\n            return this.value();\r\n        },\r\n\r\n        /**\r\n         * Checks if element has addons\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasAddons: function () {\r\n            return this.addbefore || this.addafter;\r\n        },\r\n\r\n        /**\r\n         * Checks if element has service setting\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasService: function () {\r\n            return this.service && this.service.template;\r\n        },\r\n\r\n        /**\r\n         * Defines if value has changed.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasChanged: function () {\r\n            var notEqual = this.value() !== this.initialValue;\r\n\r\n            return !this.visible() ? false : notEqual;\r\n        },\r\n\r\n        /**\r\n         * Checks if 'value' is not empty.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasData: function () {\r\n            return !utils.isEmpty(this.value());\r\n        },\r\n\r\n        /**\r\n         * Sets value observable to initialValue property.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        reset: function () {\r\n            this.value(this.initialValue);\r\n            this.error(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets current state as initial.\r\n         */\r\n        overload: function () {\r\n            this.setInitialValue();\r\n            this.bubble('update', this.hasChanged());\r\n        },\r\n\r\n        /**\r\n         * Clears 'value' property.\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        clear: function () {\r\n            this.value('');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Converts values like 'null' or 'undefined' to an empty string.\r\n         *\r\n         * @param {*} value - Value to be processed.\r\n         * @returns {*}\r\n         */\r\n        normalizeData: function (value) {\r\n            return utils.isEmpty(value) ? '' : value;\r\n        },\r\n\r\n        /**\r\n         * Validates itself by it's validation rules using validator object.\r\n         * If validation of a rule did not pass, writes it's message to\r\n         * 'error' observable property.\r\n         *\r\n         * @returns {Object} Validate information.\r\n         */\r\n        validate: function () {\r\n            var value = this.value(),\r\n                result = validator(this.validation, value, this.validationParams),\r\n                message = !this.disabled() && this.visible() ? result.message : '',\r\n                isValid = this.disabled() || !this.visible() || result.passed;\r\n\r\n            this.error(message);\r\n            this.error.valueHasMutated();\r\n            this.bubble('error', message);\r\n\r\n            //TODO: Implement proper result propagation for form\r\n            if (this.source && !isValid) {\r\n                this.source.set('params.invalid', true);\r\n            }\r\n\r\n            return {\r\n                valid: isValid,\r\n                target: this\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Callback that fires when 'value' property is updated.\r\n         */\r\n        onUpdate: function () {\r\n            this.bubble('update', this.hasChanged());\r\n\r\n            this.validate();\r\n        },\r\n\r\n        /**\r\n         * Restore value to default\r\n         */\r\n        restoreToDefault: function () {\r\n            this.value(this.default);\r\n            this.focused(true);\r\n        },\r\n\r\n        /**\r\n         * Update whether value differs from default value\r\n         */\r\n        setDifferedFromDefault: function () {\r\n            var value = typeof this.value() != 'undefined' && this.value() !== null ? this.value() : '',\r\n                defaultValue = typeof this.default != 'undefined' && this.default !== null ? this.default : '';\r\n\r\n            this.isDifferedFromDefault(value !== defaultValue);\r\n        },\r\n\r\n        /**\r\n         * @param {Boolean} state\r\n         */\r\n        toggleUseDefault: function (state) {\r\n            this.disabled(state);\r\n\r\n            if (this.source && this.hasService()) {\r\n                this.source.set('data.use_default.' + this.index, Number(state));\r\n            }\r\n        },\r\n\r\n        /**\r\n         *  Callback when value is changed by user\r\n         */\r\n        userChanges: function () {\r\n            this.valueChangedByUser = true;\r\n        },\r\n\r\n        /**\r\n         * Returns correct id for 'aria-describedby' accessibility attribute\r\n         *\r\n         * @returns {Boolean|String}\r\n         */\r\n        getDescriptionId: function () {\r\n            var id = false;\r\n\r\n            if (this.error()) {\r\n                id = this.errorId;\r\n            } else if (this.notice()) {\r\n                id = this.noticeId;\r\n            }\r\n\r\n            return id;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/boolean.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            checked: false,\r\n            links: {\r\n                checked: 'value'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {*|void|Element}\r\n         */\r\n        initObservable: function () {\r\n            return this._super()\r\n                    .observe('checked');\r\n        },\r\n\r\n        /**\r\n         * Converts provided value to boolean.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        normalizeData: function () {\r\n            return !!+this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'onUpdate' method of parent, if value is defined and instance's\r\n         *     'unique' property set to true, calls 'setUnique' method\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        onUpdate: function () {\r\n            if (this.hasUnique) {\r\n                this.setUnique();\r\n            }\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/checkbox-set.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    './abstract'\r\n], function (_, utils, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            template: 'ui/form/element/checkbox-set',\r\n            multiple: false,\r\n            multipleScopeValue: null\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.value = this.normalizeData(this.value);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initLinks: function () {\r\n            var scope = this.source.get(this.dataScope);\r\n\r\n            this.multipleScopeValue = this.multiple && _.isArray(scope) ? utils.copy(scope) : undefined;\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        reset: function () {\r\n            this.value(utils.copy(this.initialValue));\r\n            this.error(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        clear: function () {\r\n            var value = this.multiple ? [] : '';\r\n\r\n            this.value(value);\r\n            this.error(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        normalizeData: function (value) {\r\n            if (!this.multiple) {\r\n                return this._super();\r\n            }\r\n\r\n            return _.isArray(value) ? utils.copy(value) : [];\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        setInitialValue: function () {\r\n            this._super();\r\n\r\n            this.initialValue = utils.copy(this.initialValue);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        getInitialValue: function () {\r\n            var values = [this.multipleScopeValue, this.default, this.value.peek(), []],\r\n                value;\r\n\r\n            if (!this.multiple) {\r\n                return this._super();\r\n            }\r\n\r\n            values.some(function (v) {\r\n                return _.isArray(v) && (value = utils.copy(v));\r\n            });\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         * Returns labels which matches current value.\r\n         *\r\n         * @returns {String|Array}\r\n         */\r\n        getPreview: function () {\r\n            var option;\r\n\r\n            if (!this.multiple) {\r\n                option = this.getOption(this.value());\r\n\r\n                return option ? option.label : '';\r\n            }\r\n\r\n            return this.value.map(function (value) {\r\n                return this.getOption(value).label;\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Returns option object associated with provided value.\r\n         *\r\n         * @param {String} value\r\n         * @returns {Object}\r\n         */\r\n        getOption: function (value) {\r\n            return _.findWhere(this.options, {\r\n                value: value\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        hasChanged: function () {\r\n            var value = this.value(),\r\n                initial = this.initialValue;\r\n\r\n            return this.multiple ?\r\n                !utils.equalArrays(value, initial) :\r\n                this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/color-picker-palette.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return [\r\n        [\r\n            'rgb(0,0,0)', 'rgb(52,52,52)', 'rgb(83,83,83)', 'rgb(135,135,135)', 'rgb(193,193,193)',\r\n            'rgb(234,234,234)', 'rgb(240,240,240)', 'rgb(255,255,255)'\r\n        ],\r\n        [\r\n            'rgb(252,0,9)', 'rgb(253,135,10)', 'rgb(255,255,13)', 'rgb(35,255,9)', 'rgb(33,255,255)',\r\n            'rgb(0,0,254)', 'rgb(132,0,254)', 'rgb(251,0,255)'\r\n        ],\r\n        [\r\n            'rgb(240,192,194)', 'rgb(251,223,194)', 'rgb(255,241,193)', 'rgb(210,230,201)',\r\n            'rgb(199,217,220)', 'rgb(197,219,240)', 'rgb(208,200,227)', 'rgb(229,199,212)'\r\n        ],\r\n        [\r\n            'rgb(228,133,135)', 'rgb(246,193,139)', 'rgb(254,225,136)', 'rgb(168,208,152)',\r\n            'rgb(146,184,190)', 'rgb(143,184,227)', 'rgb(165,148,204)', 'rgb(202,147,175)'\r\n        ],\r\n        [\r\n            'rgb(214,78,83)', 'rgb(243,163,88)', 'rgb(254,211,83)', 'rgb(130,187,106)',\r\n            'rgb(99,149,159)', 'rgb(93,150,211)', 'rgb(123,100,182)', 'rgb(180,100,142)'\r\n        ],\r\n        [\r\n            'rgb(190,0,5)', 'rgb(222,126,44)', 'rgb(236,183,39)', 'rgb(89,155,61)', 'rgb(55,110,123)',\r\n            'rgb(49,112,185)', 'rgb(83,55,150)', 'rgb(147,55,101)'\r\n        ],\r\n        [\r\n            'rgb(133,0,3)', 'rgb(163,74,10)', 'rgb(177,127,7)', 'rgb(45,101,23)', 'rgb(18,62,74)',\r\n            'rgb(14,62,129)', 'rgb(40,15,97)', 'rgb(95,16,55)'\r\n        ],\r\n        [\r\n            'rgb(81,0,1)', 'rgb(100,48,7)', 'rgb(107,78,3)', 'rgb(31,63,16)',\r\n            'rgb(13,39,46)', 'rgb(10,40,79)', 'rgb(24,12,59)', 'rgb(59,10,36)'\r\n        ]\r\n    ];\r\n});\r\n","Magento_Ui/js/form/element/color-picker.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'mage/translate',\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'Magento_Ui/js/form/element/color-picker-palette'\r\n], function ($t, Abstract, palette) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n\r\n        defaults: {\r\n            colorPickerConfig: {\r\n                chooseText: $t('Apply'),\r\n                cancelText: $t('Cancel'),\r\n                maxSelectionSize: 8,\r\n                clickoutFiresChange: true,\r\n                allowEmpty: true,\r\n                localStorageKey: 'magento.spectrum',\r\n                palette: palette\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.colorPickerConfig.value = this.value;\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/country.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    './select'\r\n], function (_, registry, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            imports: {\r\n                update: '${ $.parentName }.website_id:value'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Filters 'initialOptions' property by 'field' and 'value' passed,\r\n         * calls 'setOptions' passing the result to it\r\n         *\r\n         * @param {*} value\r\n         * @param {String} field\r\n         */\r\n        filter: function (value, field) {\r\n            var result, defaultCountry, defaultValue;\r\n\r\n            if (!field) { //validate field, if we are on update\r\n                field = this.filterBy.field;\r\n            }\r\n\r\n            this._super(value, field);\r\n            result = _.filter(this.initialOptions, function (item) {\r\n\r\n                if (item[field]) {\r\n                    return ~item[field].indexOf(value);\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            this.setOptions(result);\r\n            this.reset();\r\n\r\n            if (!this.value()) {\r\n                defaultCountry = _.filter(result, function (item) {\r\n                    return item['is_default'] && _.contains(item['is_default'], value);\r\n                });\r\n\r\n                if (defaultCountry.length) {\r\n                    defaultValue = defaultCountry.shift();\r\n                    this.value(defaultValue.value);\r\n                }\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n","Magento_Ui/js/form/element/date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'moment',\r\n    'mageUtils',\r\n    './abstract',\r\n    'moment-timezone-with-data'\r\n], function (moment, utils, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            options: {},\r\n\r\n            storeTimeZone: 'UTC',\r\n\r\n            validationParams: {\r\n                dateFormat: '${ $.outputDateFormat }'\r\n            },\r\n\r\n            /**\r\n             * Format of date that comes from the\r\n             * server (ICU Date Format).\r\n             *\r\n             * Used only in date picker mode\r\n             * (this.options.showsTime == false).\r\n             *\r\n             * @type {String}\r\n             */\r\n            inputDateFormat: 'y-MM-dd',\r\n\r\n            /**\r\n             * Format of date that should be sent to the\r\n             * server (ICU Date Format).\r\n             *\r\n             * Used only in date picker mode\r\n             * (this.options.showsTime == false).\r\n             *\r\n             * @type {String}\r\n             */\r\n            outputDateFormat: 'MM/dd/y',\r\n\r\n            /**\r\n             * Date/time format that is used to display date in\r\n             * the input field.\r\n             *\r\n             * @type {String}\r\n             */\r\n            pickerDateTimeFormat: '',\r\n\r\n            pickerDefaultDateFormat: 'MM/dd/y', // ICU Date Format\r\n            pickerDefaultTimeFormat: 'h:mm a', // ICU Time Format\r\n\r\n            elementTmpl: 'ui/form/element/date',\r\n\r\n            /**\r\n             * Format needed by moment timezone for conversion\r\n             */\r\n            timezoneFormat: 'YYYY-MM-DD HH:mm',\r\n\r\n            listens: {\r\n                'value': 'onValueChange',\r\n                'shiftedValue': 'onShiftedValueChange'\r\n            },\r\n\r\n            /**\r\n             * Date/time value shifted to corresponding timezone\r\n             * according to this.storeTimeZone property. This value\r\n             * will be sent to the server.\r\n             *\r\n             * @type {String}\r\n             */\r\n            shiftedValue: ''\r\n        },\r\n\r\n        /**\r\n         * Initializes regular properties of instance.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            if (!this.options.dateFormat) {\r\n                this.options.dateFormat = this.pickerDefaultDateFormat;\r\n            }\r\n\r\n            if (!this.options.timeFormat) {\r\n                this.options.timeFormat = this.pickerDefaultTimeFormat;\r\n            }\r\n\r\n            this.prepareDateTimeFormats();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            return this._super().observe(['shiftedValue']);\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        getPreview: function () {\r\n            return this.shiftedValue();\r\n        },\r\n\r\n        /**\r\n         * Prepares and sets date/time value that will be displayed\r\n         * in the input field.\r\n         *\r\n         * @param {String} value\r\n         */\r\n        onValueChange: function (value) {\r\n            var shiftedValue;\r\n\r\n            if (value) {\r\n                if (this.options.showsTime && !this.options.timeOnly) {\r\n                    shiftedValue = moment.tz(value, 'UTC').tz(this.storeTimeZone);\r\n                } else {\r\n                    shiftedValue = moment(value, this.outputDateFormat, true);\r\n                }\r\n\r\n                if (!shiftedValue.isValid()) {\r\n                    shiftedValue = moment(value, this.inputDateFormat);\r\n                }\r\n                shiftedValue = shiftedValue.format(this.pickerDateTimeFormat);\r\n            } else {\r\n                shiftedValue = '';\r\n            }\r\n\r\n            if (shiftedValue !== this.shiftedValue()) {\r\n                this.shiftedValue(shiftedValue);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Prepares and sets date/time value that will be sent\r\n         * to the server.\r\n         *\r\n         * @param {String} shiftedValue\r\n         */\r\n        onShiftedValueChange: function (shiftedValue) {\r\n            var value,\r\n                formattedValue,\r\n                momentValue;\r\n\r\n            if (shiftedValue) {\r\n                momentValue = moment(shiftedValue, this.pickerDateTimeFormat);\r\n\r\n                if (this.options.showsTime && !this.options.timeOnly) {\r\n                    formattedValue = moment(momentValue).format(this.timezoneFormat);\r\n                    value = moment.tz(formattedValue, this.storeTimeZone).tz('UTC').toISOString();\r\n                } else {\r\n                    value = momentValue.format(this.outputDateFormat);\r\n                }\r\n            } else {\r\n                value = '';\r\n            }\r\n\r\n            if (value !== this.value()) {\r\n                this.value(value);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Prepares and converts all date/time formats to be compatible\r\n         * with moment.js library.\r\n         */\r\n        prepareDateTimeFormats: function () {\r\n            if (this.options.timeOnly) {\r\n                this.pickerDateTimeFormat = this.options.timeFormat;\r\n            } else {\r\n                this.pickerDateTimeFormat = this.options.dateFormat;\r\n\r\n                if (this.options.showsTime) {\r\n                    this.pickerDateTimeFormat += ' ' + this.options.timeFormat;\r\n                }\r\n            }\r\n\r\n            this.pickerDateTimeFormat = utils.convertToMomentFormat(this.pickerDateTimeFormat);\r\n\r\n            if (this.options.dateFormat) {\r\n                this.outputDateFormat = this.options.dateFormat;\r\n            }\r\n\r\n            this.inputDateFormat = this.options.timeOnly ?\r\n                utils.convertToMomentFormat(this.pickerDefaultTimeFormat) :\r\n                utils.convertToMomentFormat(this.inputDateFormat);\r\n            this.outputDateFormat = this.options.timeOnly ?\r\n                utils.convertToMomentFormat(this.options.timeFormat) :\r\n                utils.convertToMomentFormat(this.outputDateFormat);\r\n\r\n            this.validationParams.dateFormat = this.outputDateFormat;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/file-uploader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n/* global Base64 */\r\n/* eslint-disable no-undef */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/lib/validation/validator',\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'mage/backend/notification',\r\n    'mage/translate',\r\n    'jquery/jquery.cookie',\r\n    'jquery/uppy-core',\r\n    'mage/adminhtml/tools'\r\n], function ($, _, utils, uiAlert, validator, Element, notification, $t) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            value: [],\r\n            aggregatedErrors: [],\r\n            maxFileSize: false,\r\n            isMultipleFiles: false,\r\n            placeholderType: 'document', // 'image', 'video'\r\n            allowedExtensions: false,\r\n            previewTmpl: 'ui/form/element/uploader/preview',\r\n            dropZone: '[data-role=drop-zone]',\r\n            isLoading: false,\r\n            uploaderConfig: {\r\n                dataType: 'json',\r\n                sequentialUploads: true,\r\n                formData: {\r\n                    'form_key': window.FORM_KEY\r\n                }\r\n            },\r\n            tracks: {\r\n                isLoading: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes file uploader plugin on provided input element.\r\n         *\r\n         * @param {HTMLInputElement} fileInput\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        initUploader: function (fileInput) {\r\n            _.extend(this.uploaderConfig, {\r\n                dropZone: $(fileInput).closest(this.dropZone),\r\n                change: this.onFilesChoosed.bind(this),\r\n                drop: this.onFilesChoosed.bind(this),\r\n                add: this.onBeforeFileUpload.bind(this),\r\n                fail: this.onFail.bind(this),\r\n                done: this.onFileUploaded.bind(this),\r\n                start: this.onLoadingStart.bind(this),\r\n                stop: this.onLoadingStop.bind(this)\r\n            });\r\n\r\n            // uppy implementation\r\n            if (fileInput !== undefined) {\r\n                let targetElement = $(fileInput).closest('.file-uploader-area')[0],\r\n                    dropTargetElement = $(fileInput).closest(this.dropZone)[0],\r\n                    formKey = window.FORM_KEY !== undefined ? window.FORM_KEY : $.cookie('form_key'),\r\n                    fileInputName = this.fileInputName,\r\n                    arrayFromObj = Array.from,\r\n                    options = {\r\n                        proudlyDisplayPoweredByUppy: false,\r\n                        target: targetElement,\r\n                        hideUploadButton: true,\r\n                        hideRetryButton: true,\r\n                        hideCancelButton: true,\r\n                        inline: true,\r\n                        showRemoveButtonAfterComplete: true,\r\n                        showProgressDetails: false,\r\n                        showSelectedFiles: false,\r\n                        allowMultipleUploads: false,\r\n                        hideProgressAfterFinish: true\r\n                    };\r\n\r\n                if (fileInputName === undefined) {\r\n                    fileInputName = $(fileInput).attr('name');\r\n                }\r\n                // handle input type file\r\n                this.replaceInputTypeFile(fileInput);\r\n\r\n                const uppy = new Uppy.Uppy({\r\n                    autoProceed: true,\r\n\r\n                    onBeforeFileAdded: (currentFile) => {\r\n                        let file = currentFile,\r\n                            allowed = this.isFileAllowed(file);\r\n\r\n                        if (this.disabled()) {\r\n                            this.notifyError($t('The file upload field is disabled.'));\r\n                            return false;\r\n                        }\r\n\r\n                        if (!allowed.passed)  {\r\n                            this.aggregateError(file.name, allowed.message);\r\n                            this.uploaderConfig.stop();\r\n                            return false;\r\n                        }\r\n\r\n                        // code to allow duplicate files from same folder\r\n                        const modifiedFile = {\r\n                            ...currentFile,\r\n                            id:  currentFile.id + '-' + Date.now()\r\n                        };\r\n\r\n                        this.onLoadingStart();\r\n                        return modifiedFile;\r\n                    },\r\n\r\n                    meta: {\r\n                        'form_key': formKey,\r\n                        'param_name': fileInputName,\r\n                        isAjax : true\r\n                    }\r\n                });\r\n\r\n                // initialize Uppy upload\r\n                uppy.use(Uppy.Dashboard, options);\r\n\r\n                // drop area for file upload\r\n                uppy.use(Uppy.DropTarget, {\r\n                    target: dropTargetElement,\r\n                    onDragOver: () => {\r\n                        // override Array.from method of legacy-build.min.js file\r\n                        Array.from = null;\r\n                    },\r\n                    onDragLeave: () => {\r\n                        Array.from = arrayFromObj;\r\n                    }\r\n                });\r\n\r\n                // upload files on server\r\n                uppy.use(Uppy.XHRUpload, {\r\n                    endpoint: this.uploaderConfig.url,\r\n                    fieldName: fileInputName\r\n                });\r\n\r\n                uppy.on('upload-success', (file, response) => {\r\n                    let data = {\r\n                        files : [response.body],\r\n                        result : response.body\r\n                    };\r\n\r\n                    this.onFileUploaded('', data);\r\n                });\r\n\r\n                uppy.on('upload-error', (file, error) => {\r\n                    console.error(error.message);\r\n                    console.error(error.status);\r\n                });\r\n\r\n                uppy.on('complete', () => {\r\n                    this.onLoadingStop();\r\n                    Array.from = arrayFromObj;\r\n                });\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Replace Input type File with Span\r\n         * and bind click event\r\n         */\r\n        replaceInputTypeFile: function (fileInput) {\r\n            let fileId = fileInput.id, fileName = fileInput.name,\r\n                spanElement = '<span id=\\'' + fileId + '\\'></span>';\r\n\r\n            $('#' + fileId).closest('.file-uploader-area').attr('upload-area-id', fileName);\r\n            $(fileInput).replaceWith(spanElement);\r\n            $('#' + fileId).closest('.file-uploader-area').find('.file-uploader-button:first').on('click', function () {\r\n                $('#' + fileId).closest('.file-uploader-area').find('.uppy-Dashboard-browse').trigger('click');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Defines initial value of the instance.\r\n         *\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        setInitialValue: function () {\r\n            var value = this.getInitialValue(),\r\n                imageSize = this.setImageSize;\r\n\r\n            _.each(value, function (val) {\r\n                if (val.type !== undefined && val.type.indexOf('image') >= 0) {\r\n                    imageSize(val);\r\n                }\r\n            }, this);\r\n\r\n            value = value.map(this.processFile, this);\r\n\r\n            this.initialValue = value.slice();\r\n\r\n            this.value(value);\r\n            this.on('value', this.onUpdate.bind(this));\r\n            this.isUseDefault(this.disabled());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set image size for already loaded image\r\n         *\r\n         * @param value\r\n         * @returns {Promise<void>}\r\n         */\r\n        async setImageSize(value) {\r\n            let response = await fetch(value.url),\r\n                blob = await response.blob();\r\n\r\n            value.size = blob.size;\r\n        },\r\n\r\n        /**\r\n         * Empties files list.\r\n         *\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        clear: function () {\r\n            this.value.removeAll();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks if files list contains any items.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasData: function () {\r\n            return !!this.value().length;\r\n        },\r\n\r\n        /**\r\n         * Resets files list to its' initial value.\r\n         *\r\n         * @returns {FileUploader}\r\n         */\r\n        reset: function () {\r\n            var value = this.initialValue.slice();\r\n\r\n            this.value(value);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Adds provided file to the files list.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        addFile: function (file) {\r\n            file = this.processFile(file);\r\n\r\n            this.isMultipleFiles ?\r\n                this.value.push(file) :\r\n                this.value([file]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Retrieves from the list file which matches\r\n         * search criteria implemented in itertor function.\r\n         *\r\n         * @param {Function} fn - Function that will be invoked\r\n         *      for each file in the list.\r\n         * @returns {Object}\r\n         */\r\n        getFile: function (fn) {\r\n            return _.find(this.value(), fn);\r\n        },\r\n\r\n        /**\r\n         * Removes provided file from thes files list.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        removeFile: function (file) {\r\n            this.value.remove(file);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * May perform modifications on the provided\r\n         * file object before adding it to the files list.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {Object} Modified file object.\r\n         */\r\n        processFile: function (file) {\r\n            file.previewType = this.getFilePreviewType(file);\r\n\r\n            if (!file.id && file.name) {\r\n                file.id = Base64.mageEncode(file.name);\r\n            }\r\n\r\n            this.observe.call(file, true, [\r\n                'previewWidth',\r\n                'previewHeight'\r\n            ]);\r\n\r\n            return file;\r\n        },\r\n\r\n        /**\r\n         * Formats incoming bytes value to a readable format.\r\n         *\r\n         * @param {Number} bytes\r\n         * @returns {String}\r\n         */\r\n        formatSize: function (bytes) {\r\n            var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'],\r\n                i;\r\n\r\n            if (bytes === 0) {\r\n                return '0 Byte';\r\n            }\r\n\r\n            i = window.parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\r\n\r\n            return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\r\n        },\r\n\r\n        /**\r\n         * Returns path to the files' preview image.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {String}\r\n         */\r\n        getFilePreview: function (file) {\r\n            return file.url;\r\n        },\r\n\r\n        /**\r\n         * Returns path to the file's preview template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getPreviewTmpl: function () {\r\n            return this.previewTmpl;\r\n        },\r\n\r\n        /**\r\n         * Checks if provided file is allowed to be uploaded.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {Object} Validation result.\r\n         */\r\n        isFileAllowed: function (file) {\r\n            var result;\r\n\r\n            _.every([\r\n                this.isExtensionAllowed(file),\r\n                this.isSizeExceeded(file)\r\n            ], function (value) {\r\n                result = value;\r\n\r\n                return value.passed;\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Checks if extension of provided file is allowed.\r\n         *\r\n         * @param {Object} file - File to be checked.\r\n         * @returns {Boolean}\r\n         */\r\n        isExtensionAllowed: function (file) {\r\n            return validator('validate-file-type', file.name, this.allowedExtensions);\r\n        },\r\n\r\n        /**\r\n         * Get simplified file type.\r\n         *\r\n         * @param {Object} file - File to be checked.\r\n         * @returns {String}\r\n         */\r\n        getFilePreviewType: function (file) {\r\n            var type;\r\n\r\n            if (!file.type) {\r\n                return 'document';\r\n            }\r\n\r\n            type = file.type.split('/')[0];\r\n\r\n            return type !== 'image' && type !== 'video' ? 'document' : type;\r\n        },\r\n\r\n        /**\r\n         * Checks if size of provided file exceeds\r\n         * defined in configuration size limits.\r\n         *\r\n         * @param {Object} file - File to be checked.\r\n         * @returns {Boolean}\r\n         */\r\n        isSizeExceeded: function (file) {\r\n            return validator('validate-max-size', file.size, this.maxFileSize);\r\n        },\r\n\r\n        /**\r\n         * Displays provided error message.\r\n         *\r\n         * @param {String} msg\r\n         * @returns {FileUploader} Chainable.\r\n         */\r\n        notifyError: function (msg) {\r\n            var data = {\r\n                content: msg\r\n            };\r\n\r\n            if (this.isMultipleFiles) {\r\n                data.modalClass = '_image-box';\r\n            }\r\n\r\n            uiAlert(data);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Performs data type conversions.\r\n         *\r\n         * @param {*} value\r\n         * @returns {Array}\r\n         */\r\n        normalizeData: function (value) {\r\n            return utils.isEmpty(value) ? [] : value;\r\n        },\r\n\r\n        /**\r\n         * Checks if files list is different\r\n         * from its' initial value.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasChanged: function () {\r\n            var value = this.value(),\r\n                initial = this.initialValue;\r\n\r\n            return !utils.equalArrays(value, initial);\r\n        },\r\n\r\n        /**\r\n         * Handler which is invoked when files are choosed for upload.\r\n         * May be used for implementation of additional validation rules,\r\n         * e.g. total files and a total size rules.\r\n         *\r\n         * @param {Event} event - Event object.\r\n         * @param {Object} data - File data that will be uploaded.\r\n         */\r\n        onFilesChoosed: function (event, data) {\r\n            // no option exists in file uploader for restricting upload chains to single files\r\n            // this enforces that policy\r\n            if (!this.isMultipleFiles) {\r\n                data.files.splice(1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler which is invoked prior to the start of a file upload.\r\n         *\r\n         * @param {Event} event - Event object.\r\n         * @param {Object} data - File data that will be uploaded.\r\n         */\r\n        onBeforeFileUpload: function (event, data) {\r\n            var file = data.files[0],\r\n                allowed = this.isFileAllowed(file),\r\n                target = $(event.target);\r\n\r\n            if (this.disabled()) {\r\n                this.notifyError($t('The file upload field is disabled.'));\r\n\r\n                return;\r\n            }\r\n\r\n            if (allowed.passed) {\r\n                target.on('fileuploadsend', function (eventBound, postData) {\r\n                    postData.data.append('param_name', this.paramName);\r\n                }.bind(data));\r\n\r\n                target.fileupload('process', data).done(function () {\r\n                    data.submit();\r\n                });\r\n            } else {\r\n                this.aggregateError(file.name, allowed.message);\r\n\r\n                // if all files in upload chain are invalid, stop callback is never called; this resolves promise\r\n                if (this.aggregatedErrors.length === data.originalFiles.length) {\r\n                    this.uploaderConfig.stop();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add error message associated with filename for display when upload chain is complete\r\n         *\r\n         * @param {String} filename\r\n         * @param {String} message\r\n         */\r\n        aggregateError: function (filename, message) {\r\n            this.aggregatedErrors.push({\r\n                filename: filename,\r\n                message: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Event} event\r\n         * @param {Object} data\r\n         */\r\n        onFail: function (event, data) {\r\n            console.error(data.jqXHR.responseText);\r\n            console.error(data.jqXHR.status);\r\n        },\r\n\r\n        /**\r\n         * Handler of the file upload complete event.\r\n         *\r\n         * @param {Event} event\r\n         * @param {Object} data\r\n         */\r\n        onFileUploaded: function (event, data) {\r\n            var uploadedFilename = data.files[0].name,\r\n                file = data.result,\r\n                error = file.error;\r\n\r\n            error ?\r\n                this.aggregateError(uploadedFilename, error) :\r\n                this.addFile(file);\r\n        },\r\n\r\n        /**\r\n         * Load start event handler.\r\n         */\r\n        onLoadingStart: function () {\r\n            this.isLoading = true;\r\n        },\r\n\r\n        /**\r\n         * Load stop event handler.\r\n         */\r\n        onLoadingStop: function () {\r\n            var aggregatedErrorMessages = [];\r\n\r\n            this.isLoading = false;\r\n\r\n            if (!this.aggregatedErrors.length) {\r\n                return;\r\n            }\r\n\r\n            if (!this.isMultipleFiles) { // only single file upload occurred; use first file's error message\r\n                aggregatedErrorMessages.push(this.aggregatedErrors[0].message);\r\n            } else { // construct message from all aggregatedErrors\r\n                _.each(this.aggregatedErrors, function (error) {\r\n                    notification().add({\r\n                        error: true,\r\n                        message: '%s' + error.message, // %s to be used as placeholder for html injection\r\n\r\n                        /**\r\n                         * Adds constructed error notification to aggregatedErrorMessages\r\n                         *\r\n                         * @param {String} constructedMessage\r\n                         */\r\n                        insertMethod: function (constructedMessage) {\r\n                            var escapedFileName = $('<div>').text(error.filename).html(),\r\n                                errorMsgBodyHtml = '<strong>%s</strong> %s.<br>'\r\n                                    .replace('%s', escapedFileName)\r\n                                    .replace('%s', $t('was not uploaded'));\r\n\r\n                            // html is escaped in message body for notification widget; prepend unescaped html here\r\n                            constructedMessage = constructedMessage.replace('%s', errorMsgBodyHtml);\r\n\r\n                            aggregatedErrorMessages.push(constructedMessage);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.notifyError(aggregatedErrorMessages.join(''));\r\n\r\n            // clear out aggregatedErrors array for this completed upload chain\r\n            this.aggregatedErrors = [];\r\n        },\r\n\r\n        /**\r\n         * Handler function which is supposed to be invoked when\r\n         * file input element has been rendered.\r\n         *\r\n         * @param {HTMLInputElement} fileInput\r\n         */\r\n        onElementRender: function (fileInput) {\r\n            this.initUploader(fileInput);\r\n        },\r\n\r\n        /**\r\n         * Handler of the preview image load event.\r\n         *\r\n         * @param {Object} file - File associated with an image.\r\n         * @param {Event} event\r\n         */\r\n        onPreviewLoad: function (file, event) {\r\n            var img = event.currentTarget;\r\n\r\n            file.previewWidth = img.naturalWidth;\r\n            file.previewHeight = img.naturalHeight;\r\n        },\r\n\r\n        /**\r\n         * Restore value to default\r\n         */\r\n        restoreToDefault: function () {\r\n            var defaultValue = utils.copy(this.default);\r\n\r\n            defaultValue.map(this.processFile, this);\r\n            this.value(defaultValue);\r\n        },\r\n\r\n        /**\r\n         * Update whether value differs from default value\r\n         */\r\n        setDifferedFromDefault: function () {\r\n            var value = utils.copy(this.value());\r\n\r\n            this.isDifferedFromDefault(!_.isEqual(value, this.default));\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/image-uploader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global Base64 */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/lib/validation/validator',\r\n    'Magento_Ui/js/form/element/file-uploader',\r\n    'mage/adminhtml/browser'\r\n], function ($, _, utils, uiAlert, validator, Element, browser) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            // Listen for file deletions from the media browser\r\n            $(window).on('fileDeleted.mediabrowser', this.onDeleteFile.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Assign uid for media gallery\r\n         *\r\n         * @return {ImageUploader} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            var mediaGalleryUid = utils.uniqueid();\r\n\r\n            this._super();\r\n\r\n            _.extend(this, {\r\n                mediaGalleryUid: mediaGalleryUid\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add file event callback triggered from media gallery\r\n         *\r\n         * @param {ImageUploader} imageUploader - UI Class\r\n         * @param {Event} e\r\n         */\r\n        addFileFromMediaGallery: function (imageUploader, e) {\r\n            var $buttonEl = $(e.target),\r\n                fileSize = $buttonEl.data('size'),\r\n                fileMimeType = $buttonEl.data('mime-type'),\r\n                filePathname = $buttonEl.val(),\r\n                fileBasename = filePathname.split('/').pop();\r\n\r\n            this.addFile({\r\n                type: fileMimeType,\r\n                name: fileBasename,\r\n                size: fileSize,\r\n                url: filePathname\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Open the media browser dialog\r\n         *\r\n         * @param {ImageUploader} imageUploader - UI Class\r\n         * @param {Event} e\r\n         */\r\n        openMediaBrowserDialog: function (imageUploader, e) {\r\n            var $buttonEl = $(e.target),\r\n                openDialogUrl = this.mediaGallery.openDialogUrl +\r\n                'target_element_id/' + $buttonEl.attr('id') +\r\n                '/store/' + this.mediaGallery.storeId +\r\n                '/type/image/?isAjax=true';\r\n\r\n            if (this.mediaGallery.initialOpenSubpath) {\r\n                openDialogUrl += '&current_tree_path=' + Base64.idEncode(this.mediaGallery.initialOpenSubpath);\r\n            }\r\n\r\n            browser.openDialog(\r\n                openDialogUrl,\r\n                null,\r\n                null,\r\n                this.mediaGallery.openDialogTitle,\r\n                {\r\n                    targetElementId: $buttonEl.attr('id')\r\n                }\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.event} e\r\n         * @param {Object} data\r\n         * @returns {Object} Chainables\r\n         */\r\n        onDeleteFile: function (e, data) {\r\n            var fileId = this.getFileId(),\r\n                deletedFileIds = data.ids;\r\n\r\n            if (fileId && $.inArray(fileId, deletedFileIds) > -1) {\r\n                this.clear();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        clear: function () {\r\n            this.value([]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets the ID of the file used if set\r\n         *\r\n         * @return {String|Null} ID\r\n         */\r\n        getFileId: function () {\r\n            return this.hasData() ? this.value()[0].id : null;\r\n        },\r\n\r\n        /**\r\n         * Trigger native browser file upload UI via clicking on 'Upload' button\r\n         *\r\n         * @param {ImageUploader} imageUploader - UI Class\r\n         * @param {Event} e\r\n         */\r\n        triggerImageUpload: function (imageUploader, e) {\r\n            $(e.target).closest('.file-uploader').find('.uppy-Dashboard-browse').trigger('click');\r\n        },\r\n\r\n        /**\r\n         * Get list of file extensions allowed in comma delimited format\r\n         *\r\n         * @return {String}\r\n         */\r\n        getAllowedFileExtensionsInCommaDelimitedFormat: function () {\r\n            var allowedExtensions = this.allowedExtensions.toUpperCase().split(' ');\r\n\r\n            // if jpg and jpeg in allowed extensions, remove jpeg from list\r\n            if (allowedExtensions.indexOf('JPG') !== -1 && allowedExtensions.indexOf('JPEG') !== -1) {\r\n                allowedExtensions.splice(allowedExtensions.indexOf('JPEG'), 1);\r\n            }\r\n\r\n            return allowedExtensions.join(', ');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/media.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'mageUtils',\r\n    './abstract'\r\n], function (utils, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            links: {\r\n                value: ''\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes file component.\r\n         *\r\n         * @returns {Media} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initFormId();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Defines form ID with which file input will be associated.\r\n         *\r\n         * @returns {Media} Chainable.\r\n         */\r\n        initFormId: function () {\r\n            var namespace;\r\n\r\n            if (this.formId) {\r\n                return this;\r\n            }\r\n\r\n            namespace   = this.name.split('.');\r\n            this.formId = namespace[0];\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/multiselect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    './select'\r\n], function (_, utils, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            size: 5,\r\n            elementTmpl: 'ui/form/element/multiselect',\r\n            listens: {\r\n                value: 'setDifferedFromDefault setPrepareToSendData'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        setInitialValue: function () {\r\n            this._super();\r\n\r\n            this.initialValue = utils.copy(this.initialValue);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        normalizeData: function (value) {\r\n            if (utils.isEmpty(value)) {\r\n                value = [];\r\n            }\r\n\r\n            return _.isString(value) ? value.split(',') : value;\r\n        },\r\n\r\n        /**\r\n         * Sets the prepared data to dataSource\r\n         * by path, where key is component link to dataSource with\r\n         * suffix \"-prepared-for-send\"\r\n         *\r\n         * @param {Array} data - current component value\r\n         */\r\n        setPrepareToSendData: function (data) {\r\n            if (_.isUndefined(data) || !data.length) {\r\n                data = '';\r\n            }\r\n\r\n            this.source.set(this.dataScope + '-prepared-for-send', data);\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        getInitialValue: function () {\r\n            var values = [\r\n                    this.normalizeData(this.source.get(this.dataScope)),\r\n                    this.normalizeData(this.default)\r\n                ],\r\n                value;\r\n\r\n            values.some(function (v) {\r\n                return _.isArray(v) && (value = utils.copy(v)) && !_.isEmpty(v);\r\n            });\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        hasChanged: function () {\r\n            var value = this.value(),\r\n                initial = this.initialValue;\r\n\r\n            return !utils.equalArrays(value, initial);\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        reset: function () {\r\n            this.value(utils.copy(this.initialValue));\r\n            this.error(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        clear: function () {\r\n            this.value([]);\r\n            this.error(false);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/post-code.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './abstract'\r\n], function (_, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            imports: {\r\n                countryOptions: '${ $.parentName }.country_id:indexedOptions',\r\n                update: '${ $.parentName }.country_id:value'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n\r\n            /**\r\n             * equalityComparer function\r\n             *\r\n             * @returns boolean.\r\n             */\r\n            this.value.equalityComparer = function (oldValue, newValue) {\r\n                return !oldValue && !newValue || oldValue === newValue;\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Method called every time country selector's value gets changed.\r\n         * Updates all validations and requirements for certain country.\r\n         * @param {String} value - Selected country ID.\r\n         */\r\n        update: function (value) {\r\n            var isZipCodeOptional,\r\n                option;\r\n\r\n            if (!value) {\r\n                return;\r\n            }\r\n\r\n            option = _.isObject(this.countryOptions) && this.countryOptions[value];\r\n\r\n            if (!option) {\r\n                return;\r\n            }\r\n\r\n            isZipCodeOptional = !!option['is_zipcode_optional'];\r\n\r\n            if (isZipCodeOptional) {\r\n                this.error(false);\r\n            }\r\n\r\n            this.validation['required-entry'] = !isZipCodeOptional;\r\n            this.required(!isZipCodeOptional);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/region.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    './select',\r\n    'Magento_Checkout/js/model/default-post-code-resolver'\r\n], function (_, registry, Select, defaultPostCodeResolver) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            skipValidation: false,\r\n            imports: {\r\n                countryOptions: '${ $.parentName }.country_id:indexedOptions',\r\n                update: '${ $.parentName }.country_id:value'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initialize: function () {\r\n            var option;\r\n\r\n            this._super();\r\n\r\n            option = _.find(this.countryOptions, function (row) {\r\n                return row['is_default'] === true;\r\n            });\r\n            this.hideRegion(option);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Method called every time country selector's value gets changed.\r\n         * Updates all validations and requirements for certain country.\r\n         * @param {String} value - Selected country ID.\r\n         */\r\n        update: function (value) {\r\n            var isRegionRequired,\r\n                option;\r\n\r\n            if (!value) {\r\n                return;\r\n            }\r\n\r\n            option = _.isObject(this.countryOptions) && this.countryOptions[value];\r\n\r\n            if (!option) {\r\n                return;\r\n            }\r\n\r\n            this.hideRegion(option);\r\n\r\n            defaultPostCodeResolver.setUseDefaultPostCode(!option['is_zipcode_optional']);\r\n\r\n            isRegionRequired = !this.skipValidation && !!option['is_region_required'];\r\n\r\n            if (!isRegionRequired) {\r\n                this.error(false);\r\n            }\r\n\r\n            this.required(isRegionRequired);\r\n            this.validation['required-entry'] = isRegionRequired;\r\n\r\n            registry.get(this.customName, function (input) {\r\n                input.required(isRegionRequired);\r\n                input.validation['required-entry'] = isRegionRequired;\r\n                input.validation['validate-not-number-first'] = !this.options().length;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Hide select and corresponding text input field if region must not be shown for selected country.\r\n         *\r\n         * @private\r\n         * @param {Object}option\r\n         */\r\n        hideRegion: function (option) {\r\n            if (!option || option['is_region_visible'] !== false) {\r\n                return;\r\n            }\r\n\r\n            this.setVisible(false);\r\n\r\n            if (this.customEntry) {\r\n                this.toggleInput(false);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    './abstract',\r\n    'uiLayout'\r\n], function (_, utils, registry, Abstract, layout) {\r\n    'use strict';\r\n\r\n    var inputNode = {\r\n        parent: '${ $.$data.parentName }',\r\n        component: 'Magento_Ui/js/form/element/abstract',\r\n        template: '${ $.$data.template }',\r\n        provider: '${ $.$data.provider }',\r\n        name: '${ $.$data.index }_input',\r\n        dataScope: '${ $.$data.customEntry }',\r\n        customScope: '${ $.$data.customScope }',\r\n        sortOrder: {\r\n            after: '${ $.$data.name }'\r\n        },\r\n        displayArea: 'body',\r\n        label: '${ $.$data.label }'\r\n    };\r\n\r\n    /**\r\n     * Parses incoming options, considers options with undefined value property\r\n     *     as caption\r\n     *\r\n     * @param  {Array} nodes\r\n     * @return {Object}\r\n     */\r\n    function parseOptions(nodes, captionValue) {\r\n        var caption,\r\n            value;\r\n\r\n        nodes = _.map(nodes, function (node) {\r\n            value = node.value;\r\n\r\n            if (value === null || value === captionValue) {\r\n                if (_.isUndefined(caption)) {\r\n                    caption = node.label;\r\n                }\r\n            } else {\r\n                return node;\r\n            }\r\n        });\r\n\r\n        return {\r\n            options: _.compact(nodes),\r\n            caption: _.isString(caption) ? caption : false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Recursively loops over data to find non-undefined, non-array value\r\n     *\r\n     * @param  {Array} data\r\n     * @return {*} - first non-undefined value in array\r\n     */\r\n    function findFirst(data) {\r\n        var value;\r\n\r\n        data.some(function (node) {\r\n            value = node.value;\r\n\r\n            if (Array.isArray(value)) {\r\n                value = findFirst(value);\r\n            }\r\n\r\n            return !_.isUndefined(value);\r\n        });\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Recursively set to object item like value and item.value like key.\r\n     *\r\n     * @param {Array} data\r\n     * @param {Object} result\r\n     * @returns {Object}\r\n     */\r\n    function indexOptions(data, result) {\r\n        var value;\r\n\r\n        result = result || {};\r\n\r\n        data.forEach(function (item) {\r\n            value = item.value;\r\n\r\n            if (Array.isArray(value)) {\r\n                indexOptions(value, result);\r\n            } else {\r\n                result[value] = item;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            customName: '${ $.parentName }.${ $.index }_input',\r\n            elementTmpl: 'ui/form/element/select',\r\n            caption: '',\r\n            options: []\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults, extends config with formatted values\r\n         *     and options, and invokes initialize method of AbstractElement class.\r\n         *     If instance's 'customEntry' property is set to true, calls 'initInput'\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            if (this.customEntry) {\r\n                registry.get(this.name, this.initInput.bind(this));\r\n            }\r\n\r\n            if (this.filterBy) {\r\n                this.initFilter();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\r\n         *     properties, calls 'setOptions' passing options to it\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n\r\n            this.initialOptions = this.options;\r\n\r\n            this.observe('options caption')\r\n                .setOptions(this.options());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set link for filter.\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        initFilter: function () {\r\n            var filter = this.filterBy;\r\n\r\n            this.filter(this.default, filter.field);\r\n            this.setLinks({\r\n                filter: filter.target\r\n            }, 'imports');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates input from template, renders it via renderer.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initInput: function () {\r\n            layout([utils.template(inputNode, this)]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Matches specified value with existing options\r\n         * or, if value is not specified, returns value of the first option.\r\n         *\r\n         * @returns {*}\r\n         */\r\n        normalizeData: function () {\r\n            var value = this._super(),\r\n                option;\r\n\r\n            if (value !== '') {\r\n                option = this.getOption(value);\r\n\r\n                return option && option.value;\r\n            }\r\n\r\n            if (!this.caption()) {\r\n                return findFirst(this.options);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Filters 'initialOptions' property by 'field' and 'value' passed,\r\n         * calls 'setOptions' passing the result to it\r\n         *\r\n         * @param {*} value\r\n         * @param {String} field\r\n         */\r\n        filter: function (value, field) {\r\n            var source = this.initialOptions,\r\n                result;\r\n\r\n            field = field || this.filterBy.field;\r\n\r\n            result = _.filter(source, function (item) {\r\n                return item[field] === value || item.value === '';\r\n            });\r\n\r\n            this.setOptions(result);\r\n        },\r\n\r\n        /**\r\n         * Change visibility for input.\r\n         *\r\n         * @param {Boolean} isVisible\r\n         */\r\n        toggleInput: function (isVisible) {\r\n            registry.get(this.customName, function (input) {\r\n                input.setVisible(isVisible);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sets 'data' to 'options' observable array, if instance has\r\n         * 'customEntry' property set to true, calls 'setHidden' method\r\n         *  passing !options.length as a parameter\r\n         *\r\n         * @param {Array} data\r\n         * @returns {Object} Chainable\r\n         */\r\n        setOptions: function (data) {\r\n            var captionValue = this.captionValue || '',\r\n                result = parseOptions(data, captionValue),\r\n                isVisible;\r\n\r\n            this.indexedOptions = indexOptions(result.options);\r\n\r\n            this.options(result.options);\r\n\r\n            if (!this.caption()) {\r\n                this.caption(result.caption);\r\n            }\r\n\r\n            if (this.customEntry) {\r\n                isVisible = !!result.options.length;\r\n\r\n                this.setVisible(isVisible);\r\n                this.toggleInput(!isVisible);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Processes preview for option by it's value, and sets the result\r\n         * to 'preview' observable\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        getPreview: function () {\r\n            var value = this.value(),\r\n                option = this.indexedOptions[value],\r\n                preview = option ? option.label : '';\r\n\r\n            this.preview(preview);\r\n\r\n            return preview;\r\n        },\r\n\r\n        /**\r\n         * Get option from indexedOptions list.\r\n         *\r\n         * @param {Number} value\r\n         * @returns {Object} Chainable\r\n         */\r\n        getOption: function (value) {\r\n            return this.indexedOptions[value];\r\n        },\r\n\r\n        /**\r\n         * Select first available option\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        clear: function () {\r\n            var value = this.caption() ? '' : findFirst(this.options);\r\n\r\n            this.value(value);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setInitialValue: function () {\r\n            if (_.isUndefined(this.value()) && !this.default) {\r\n                this.clear();\r\n            }\r\n\r\n            return this._super();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/single-checkbox-toggle-notice.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (SingleCheckbox) {\r\n    'use strict';\r\n\r\n    return SingleCheckbox.extend({\r\n        defaults: {\r\n            notices: [],\r\n            tracks: {\r\n                notice: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Choose notice on initialization\r\n         *\r\n         * @returns {*|void|Element}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .chooseNotice();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Choose notice function\r\n         *\r\n         * @returns void\r\n         */\r\n        chooseNotice: function () {\r\n            var checkedNoticeNumber = Number(this.checked());\r\n\r\n            this.notice = this.notices[checkedNoticeNumber];\r\n        },\r\n\r\n        /**\r\n         * Choose notice on update\r\n         *\r\n         * @returns void\r\n         */\r\n        onUpdate: function () {\r\n            this._super();\r\n            this.chooseNotice();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/single-checkbox-use-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isUseDefault: false,\r\n            isUseConfig: false,\r\n            listens: {\r\n                'isUseConfig': 'toggleElement',\r\n                'isUseDefault': 'toggleElement'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n\r\n            return this\r\n                ._super()\r\n                .observe('isUseConfig');\r\n        },\r\n\r\n        /**\r\n         * Toggle element\r\n         */\r\n        toggleElement: function () {\r\n            this.disabled(this.isUseDefault() || this.isUseConfig());\r\n\r\n            if (this.source) {\r\n                this.source.set('data.use_default.' + this.index, Number(this.isUseDefault()));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/single-checkbox.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'underscore',\r\n    'mage/translate'\r\n], function (AbstractField, _, $t) {\r\n    'use strict';\r\n\r\n    return AbstractField.extend({\r\n        defaults: {\r\n            template: 'ui/form/components/single/field',\r\n            checked: false,\r\n            initialChecked: false,\r\n            multiple: false,\r\n            prefer: 'checkbox', // 'radio' | 'checkbox' | 'toggle'\r\n            valueMap: {},\r\n\r\n            templates: {\r\n                radio: 'ui/form/components/single/radio',\r\n                checkbox: 'ui/form/components/single/checkbox',\r\n                toggle: 'ui/form/components/single/switcher'\r\n            },\r\n\r\n            listens: {\r\n                'checked': 'onCheckedChanged',\r\n                'value': 'onExtendedValueChanged'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initConfig: function (config) {\r\n            this._super();\r\n\r\n            if (!config.elementTmpl) {\r\n                if (!this.prefer && !this.multiple) {\r\n                    this.elementTmpl = this.templates.radio;\r\n                } else if (this.prefer === 'radio') {\r\n                    this.elementTmpl = this.templates.radio;\r\n                } else if (this.prefer === 'checkbox') {\r\n                    this.elementTmpl = this.templates.checkbox;\r\n                } else if (this.prefer === 'toggle') {\r\n                    this.elementTmpl = this.templates.toggle;\r\n                } else {\r\n                    this.elementTmpl = this.templates.checkbox;\r\n                }\r\n            }\r\n\r\n            if (this.prefer === 'toggle' && _.isEmpty(this.toggleLabels)) {\r\n                this.toggleLabels = {\r\n                    'on': $t('Yes'),\r\n                    'off': $t('No')\r\n                };\r\n            }\r\n\r\n            if (typeof this.default === 'undefined' || this.default === null) {\r\n                this.default = '';\r\n            }\r\n\r\n            if (typeof this.value === 'undefined' || this.value === null) {\r\n                this.value = _.isEmpty(this.valueMap) || this.default !== '' ? this.default : this.valueMap.false;\r\n                this.initialValue = this.value;\r\n            } else {\r\n                this.initialValue = this.value;\r\n            }\r\n\r\n            if (this.multiple && !_.isArray(this.value)) {\r\n                this.value = []; // needed for correct observable assignment\r\n            }\r\n\r\n            this.initialChecked = this.checked;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            return this\r\n                ._super()\r\n                .observe('checked');\r\n        },\r\n\r\n        /**\r\n         * Get true/false key from valueMap by value.\r\n         *\r\n         * @param {*} value\r\n         * @returns {Boolean|undefined}\r\n         */\r\n        getReverseValueMap: function getReverseValueMap(value) {\r\n            var bool = false;\r\n\r\n            _.some(this.valueMap, function (iValue, iBool) {\r\n                if (iValue === value) {\r\n                    bool = iBool === 'true';\r\n\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            return bool;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        setInitialValue: function () {\r\n            if (_.isEmpty(this.valueMap)) {\r\n                this.on('value', this.onUpdate.bind(this));\r\n            } else {\r\n                this._super();\r\n                this.checked(this.getReverseValueMap(this.value()));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handle dataScope changes for checkbox / radio button.\r\n         *\r\n         * @param {*} newExportedValue\r\n         */\r\n        onExtendedValueChanged: function (newExportedValue) {\r\n            var isMappedUsed = !_.isEmpty(this.valueMap),\r\n                oldChecked = this.checked.peek(),\r\n                oldValue = this.initialValue,\r\n                newChecked;\r\n\r\n            if (this.multiple) {\r\n                newChecked = newExportedValue.indexOf(oldValue) !== -1;\r\n            } else if (isMappedUsed) {\r\n                newChecked = this.getReverseValueMap(newExportedValue);\r\n            } else if (typeof newExportedValue === 'boolean') {\r\n                newChecked = newExportedValue;\r\n            } else {\r\n                newChecked = newExportedValue === oldValue;\r\n            }\r\n\r\n            if (newChecked !== oldChecked) {\r\n                this.checked(newChecked);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle checked state changes for checkbox / radio button.\r\n         *\r\n         * @param {Boolean} newChecked\r\n         */\r\n        onCheckedChanged: function (newChecked) {\r\n            var isMappedUsed = !_.isEmpty(this.valueMap),\r\n                oldValue = this.initialValue,\r\n                newValue;\r\n\r\n            if (isMappedUsed) {\r\n                newValue = this.valueMap[newChecked];\r\n            } else {\r\n                newValue = oldValue;\r\n            }\r\n\r\n            if (!this.multiple && newChecked) {\r\n                this.value(newValue);\r\n            } else if (!this.multiple && !newChecked) {\r\n                if (typeof newValue === 'boolean') {\r\n                    this.value(newChecked);\r\n                } else if (newValue === this.value.peek()) {\r\n                    this.value('');\r\n                }\r\n\r\n                if (isMappedUsed) {\r\n                    this.value(newValue);\r\n                }\r\n            } else if (this.multiple && newChecked && this.value.indexOf(newValue) === -1) {\r\n                this.value.push(newValue);\r\n            } else if (this.multiple && !newChecked && this.value.indexOf(newValue) !== -1) {\r\n                this.value.splice(this.value.indexOf(newValue), 1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        onUpdate: function () {\r\n            if (this.hasUnique) {\r\n                this.setUnique();\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        reset: function () {\r\n            if (this.multiple && this.initialChecked) {\r\n                this.value.push(this.initialValue);\r\n            } else if (this.multiple && !this.initialChecked) {\r\n                this.value.splice(this.value.indexOf(this.initialValue), 1);\r\n            } else {\r\n                this.value(this.initialValue);\r\n            }\r\n\r\n            this.error(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        clear: function () {\r\n            if (this.multiple) {\r\n                this.value([]);\r\n            } else {\r\n                this.value('');\r\n            }\r\n\r\n            this.error(false);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/text.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'mageUtils'\r\n], function (Element, utils) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            visible: true,\r\n            label: '',\r\n            error: '',\r\n            uid: utils.uniqueid(),\r\n            disabled: false,\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Has service\r\n         *\r\n         * @returns {Boolean} false.\r\n         */\r\n        hasService: function () {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Has addons\r\n         *\r\n         * @returns {Boolean} false.\r\n         */\r\n        hasAddons: function () {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('disabled visible value');\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/textarea.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            cols: 15,\r\n            rows: 2,\r\n            elementTmpl: 'ui/form/element/textarea'\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/ui-select.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './abstract',\r\n    'Magento_Ui/js/lib/key-codes',\r\n    'mage/translate',\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, Abstract, keyCodes, $t, ko, $) {\r\n    'use strict';\r\n\r\n    var isTouchDevice = typeof document.ontouchstart !== 'undefined';\r\n\r\n    /**\r\n     * Processing options list\r\n     *\r\n     * @param {Array} array - Property array\r\n     * @param {String} separator - Level separator\r\n     * @param {Array} created - list to add new options\r\n     *\r\n     * @return {Array} Plain options list\r\n     */\r\n    function flattenCollection(array, separator, created) {\r\n        var i = 0,\r\n            length,\r\n            childCollection;\r\n\r\n        array = _.compact(array);\r\n        length = array.length;\r\n        created = created || [];\r\n\r\n        for (i; i < length; i++) {\r\n            created.push(array[i]);\r\n\r\n            if (array[i].hasOwnProperty(separator)) {\r\n                childCollection = array[i][separator];\r\n                delete array[i][separator];\r\n                flattenCollection.call(this, childCollection, separator, created);\r\n            }\r\n        }\r\n\r\n        return created;\r\n    }\r\n\r\n    /**\r\n     * Set levels to options list\r\n     *\r\n     * @param {Array} array - Property array\r\n     * @param {String} separator - Level separator\r\n     * @param {Number} level - Starting level\r\n     * @param {String} path - path to root\r\n     *\r\n     * @returns {Array} Array with levels\r\n     */\r\n    function setProperty(array, separator, level, path) {\r\n        var i = 0,\r\n            length,\r\n            nextLevel,\r\n            nextPath;\r\n\r\n        array = _.compact(array);\r\n        length = array.length;\r\n        level = level || 0;\r\n        path = path || '';\r\n\r\n        for (i; i < length; i++) {\r\n            if (array[i]) {\r\n                _.extend(array[i], {\r\n                    level: level,\r\n                    path: path\r\n                });\r\n            }\r\n\r\n            if (array[i].hasOwnProperty(separator)) {\r\n                nextLevel = level + 1;\r\n                nextPath = path ? path + '.' + array[i].label : array[i].label;\r\n                setProperty.call(this, array[i][separator], separator, nextLevel, nextPath);\r\n            }\r\n        }\r\n\r\n        return array;\r\n    }\r\n\r\n    /**\r\n     * Preprocessing options list\r\n     *\r\n     * @param {Array} nodes - Options list\r\n     *\r\n     * @return {Object} Object with property - options(options list)\r\n     *      and cache options with plain and tree list\r\n     */\r\n    function parseOptions(nodes) {\r\n        var caption,\r\n            value,\r\n            cacheNodes,\r\n            copyNodes;\r\n\r\n        nodes = setProperty(nodes, 'optgroup');\r\n        copyNodes = JSON.parse(JSON.stringify(nodes));\r\n        cacheNodes = flattenCollection(copyNodes, 'optgroup');\r\n\r\n        nodes = _.map(nodes, function (node) {\r\n            value = node.value;\r\n\r\n            if (value == null || value === '') {\r\n                if (_.isUndefined(caption)) {\r\n                    caption = node.label;\r\n                }\r\n            } else {\r\n                return node;\r\n            }\r\n        });\r\n\r\n        return {\r\n            options: _.compact(nodes),\r\n            cacheOptions: {\r\n                plain: _.compact(cacheNodes),\r\n                tree: _.compact(nodes)\r\n            }\r\n        };\r\n    }\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            options: [],\r\n            total: 0,\r\n            listVisible: false,\r\n            value: [],\r\n            filterOptions: false,\r\n            chipsEnabled: true,\r\n            itemsQuantity: '',\r\n            filterInputValue: '',\r\n            filterOptionsFocus: false,\r\n            multiselectFocus: false,\r\n            multiple: true,\r\n            selectType: 'tree',\r\n            lastSelectable: false,\r\n            showFilteredQuantity: true,\r\n            showCheckbox: true,\r\n            levelsVisibility: true,\r\n            openLevelsAction: true,\r\n            showOpenLevelsActionIcon: true,\r\n            optgroupLabels: false,\r\n            closeBtn: true,\r\n            showPath: true,\r\n            labelsDecoration: false,\r\n            disableLabel: false,\r\n            filterRateLimit: 500,\r\n            filterRateLimitMethod: 'notifyAtFixedRate',\r\n            closeBtnLabel: $t('Done'),\r\n            optgroupTmpl: 'ui/grid/filters/elements/ui-select-optgroup',\r\n            quantityPlaceholder: $t('options'),\r\n            hoverClass: '_hover',\r\n            rootListSelector: 'ul.admin__action-multiselect-menu-inner._root',\r\n            visibleOptionSelector: 'li.admin__action-multiselect-menu-inner-item:visible',\r\n            actionTargetSelector: '.action-menu-item',\r\n            selectedPlaceholders: {\r\n                defaultPlaceholder: $t('Select...'),\r\n                lotPlaceholders: $t('Selected')\r\n            },\r\n            separator: 'optgroup',\r\n            searchOptions: false,\r\n            loading: false,\r\n            searchUrl: false,\r\n            lastSearchKey: '',\r\n            lastSearchPage: 1,\r\n            filterPlaceholder: '',\r\n            emptyOptionsHtml: '',\r\n            cachedSearchResults: {},\r\n            pageLimit: 50,\r\n            deviation: 30,\r\n            validationLoading: false,\r\n            isRemoveSelectedIcon: false,\r\n            debounce: 300,\r\n            missingValuePlaceholder: $t('Entity with ID: %s doesn\\'t exist'),\r\n            isDisplayMissingValuePlaceholder: false,\r\n            currentSearchKey: '',\r\n            listens: {\r\n                listVisible: 'cleanHoveredElement',\r\n                filterInputValue: 'filterOptionsList',\r\n                options: 'checkOptionsList'\r\n            },\r\n            presets: {\r\n                single: {\r\n                    showCheckbox: false,\r\n                    chipsEnabled: false,\r\n                    closeBtn: false\r\n                },\r\n                optgroup: {\r\n                    showCheckbox: false,\r\n                    lastSelectable: true,\r\n                    optgroupLabels: true,\r\n                    openLevelsAction: false,\r\n                    labelsDecoration: true,\r\n                    showOpenLevelsActionIcon: false\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes UISelect component.\r\n         *\r\n         * @returns {UISelect} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            $.async(\r\n                this.rootListSelector,\r\n                this,\r\n                this.onRootListRender.bind(this)\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         * Set defaults according to mode and levels configuration\r\n         *\r\n         * @param  {Object} config\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function (config) {\r\n            var result = parseOptions(config.options),\r\n                defaults = this.constructor.defaults,\r\n                multiple = _.isBoolean(config.multiple) ? config.multiple : defaults.multiple,\r\n                type = config.selectType || defaults.selectType,\r\n                showOpenLevelsActionIcon = _.isBoolean(config.showOpenLevelsActionIcon) ?\r\n                    config.showOpenLevelsActionIcon :\r\n                    defaults.showOpenLevelsActionIcon,\r\n                openLevelsAction = _.isBoolean(config.openLevelsAction) ?\r\n                    config.openLevelsAction :\r\n                    defaults.openLevelsAction;\r\n\r\n            multiple = !multiple ? 'single' : false;\r\n            config.showOpenLevelsActionIcon = showOpenLevelsActionIcon && openLevelsAction;\r\n            _.extend(config, result, defaults.presets[multiple], defaults.presets[type]);\r\n            this._super();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check child optgroup\r\n         */\r\n        hasChildList: function () {\r\n            return _.find(this.options(), function (option) {\r\n                return !!option[this.separator];\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Check tree mode\r\n         */\r\n        isTree: function () {\r\n            return this.hasChildList() && this.selectType !== 'optgroup';\r\n        },\r\n\r\n        /**\r\n         * Add option to lastOptions array\r\n         *\r\n         * @param {Object} data\r\n         * @returns {Boolean}\r\n         */\r\n        addLastElement: function (data) {\r\n            if (!data.hasOwnProperty(this.separator)) {\r\n                !this.cacheOptions.lastOptions ? this.cacheOptions.lastOptions = [] : false;\r\n\r\n                if (!_.findWhere(\r\n                    this.cacheOptions.lastOptions,\r\n                        {\r\n                            value: data.value\r\n                        }\r\n                    )\r\n                ) {\r\n                    this.cacheOptions.lastOptions.push(data);\r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Return empty options html\r\n         */\r\n        getEmptyOptionsUnsanitizedHtml: function () {\r\n            return this.emptyOptionsHtml;\r\n        },\r\n\r\n        /**\r\n         * Check options length and set to cache\r\n         * if some options is added\r\n         *\r\n         * @param {Array} options - ui select options\r\n         */\r\n        checkOptionsList: function (options) {\r\n            if (options.length > this.cacheOptions.plain.length) {\r\n                this.cacheOptions.plain = options;\r\n                this.setCaption();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check label decoration\r\n         */\r\n        isLabelDecoration: function (data) {\r\n            return data.hasOwnProperty(this.separator) && this.labelsDecoration;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\r\n         *     properties, calls 'setOptions' passing options to it\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.observe([\r\n                'listVisible',\r\n                'placeholder',\r\n                'multiselectFocus',\r\n                'options',\r\n                'itemsQuantity',\r\n                'filterInputValue',\r\n                'filterOptionsFocus',\r\n                'loading',\r\n                'validationLoading',\r\n                'isDisplayMissingValuePlaceholder'\r\n            ]);\r\n\r\n            this.filterInputValue.extend({\r\n                rateLimit: {\r\n                    timeout: this.filterRateLimit,\r\n                    method: this.filterRateLimitMethod\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * object with key - keyname and value - handler function for this key\r\n         *\r\n         * @returns {Object} Object with handlers function name.\r\n         */\r\n        keyDownHandlers: function () {\r\n            return {\r\n                enterKey: this.enterKeyHandler,\r\n                escapeKey: this.escapeKeyHandler,\r\n                spaceKey: this.enterKeyHandler,\r\n                pageUpKey: this.pageUpKeyHandler,\r\n                pageDownKey: this.pageDownKeyHandler\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Processing level visibility for levels\r\n         *\r\n         * @param {Object} data - element data\r\n         *\r\n         * @returns {Boolean} level visibility.\r\n         */\r\n        showLevels: function (data) {\r\n            var curLevel = ++data.level,\r\n                isVisible;\r\n\r\n            if (data.visible) {\r\n                isVisible = data.visible();\r\n            } else {\r\n                isVisible = !!data.hasOwnProperty(this.separator) &&\r\n                    _.isBoolean(this.levelsVisibility) &&\r\n                    this.levelsVisibility ||\r\n                    data.hasOwnProperty(this.separator) && parseInt(this.levelsVisibility, 10) >= curLevel;\r\n\r\n                data.visible = ko.observable(isVisible);\r\n                data.isVisited = isVisible;\r\n            }\r\n\r\n            return isVisible;\r\n        },\r\n\r\n        /**\r\n         * Processing level visibility for levels\r\n         *\r\n         * @param {Object} data - element data\r\n         *\r\n         * @returns {Boolean} level visibility.\r\n         */\r\n        getLevelVisibility: function (data) {\r\n            if (data.visible) {\r\n                return data.visible();\r\n            }\r\n\r\n            return this.showLevels(data);\r\n        },\r\n\r\n        /**\r\n         * Set option to options array.\r\n         *\r\n         * @param {Object} option\r\n         * @param {Array} options\r\n         */\r\n        setOption: function (option, options) {\r\n            var copyOptionsTree;\r\n\r\n            options = options || this.cacheOptions.tree;\r\n\r\n            _.each(options, function (opt) {\r\n                if (opt.value == option.parent) { //eslint-disable-line eqeqeq\r\n                    delete  option.parent;\r\n                    opt[this.separator] ? opt[this.separator].push(option) : opt[this.separator] = [option];\r\n                    copyOptionsTree = JSON.parse(JSON.stringify(this.cacheOptions.tree));\r\n                    this.cacheOptions.plain = flattenCollection(copyOptionsTree, this.separator);\r\n                    this.options(this.cacheOptions.tree);\r\n                } else if (opt[this.separator]) {\r\n                    this.setOption(option, opt[this.separator]);\r\n                }\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Handler outerClick event. Closed options list\r\n         */\r\n        outerClick: function () {\r\n            this.listVisible() ? this.listVisible(false) : false;\r\n\r\n            if (isTouchDevice) {\r\n                this.multiselectFocus(false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler keydown event to filter options input\r\n         *\r\n         * @returns {Boolean} Returned true for emersion events\r\n         */\r\n        filterOptionsKeydown: function (data, event) {\r\n            var key = keyCodes[event.keyCode];\r\n\r\n            !this.isTabKey(event) ? event.stopPropagation() : false;\r\n\r\n            if (key === 'pageDownKey' || key === 'pageUpKey') {\r\n                event.preventDefault();\r\n                this.filterOptionsFocus(false);\r\n                this.cacheUiSelect.focus();\r\n            }\r\n\r\n            this.keydownSwitcher(data, event);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Filtered options list by value from filter options list\r\n         */\r\n        filterOptionsList: function () {\r\n            var value = this.filterInputValue().trim().toLowerCase(),\r\n                array = [];\r\n\r\n            if (this.searchOptions) {\r\n                return this.loadOptions(value);\r\n            }\r\n\r\n            this.cleanHoveredElement();\r\n\r\n            if (!value) {\r\n                this.renderPath = false;\r\n                this.options(this.cacheOptions.tree);\r\n                this._setItemsQuantity(false);\r\n\r\n                return false;\r\n            }\r\n\r\n            this.showPath ? this.renderPath = true : false;\r\n\r\n            if (this.filterInputValue()) {\r\n\r\n                array = this.selectType === 'optgroup' ?\r\n                    this._getFilteredArray(this.cacheOptions.lastOptions, value) :\r\n                    this._getFilteredArray(this.cacheOptions.plain, value);\r\n\r\n                if (!value.length) {\r\n                    this.options(this.cacheOptions.plain);\r\n                    this._setItemsQuantity(this.cacheOptions.plain.length);\r\n                } else {\r\n                    this.options(array);\r\n                    this._setItemsQuantity(array.length);\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            this.options(this.cacheOptions.plain);\r\n        },\r\n\r\n        /**\r\n         * Filtered options list by value from filter options list\r\n         *\r\n         * @param {Array} list - option list\r\n         * @param {String} value\r\n         *\r\n         * @returns {Array} filters result\r\n         */\r\n        _getFilteredArray: function (list, value) {\r\n            var i = 0,\r\n                array = [],\r\n                curOption;\r\n\r\n            for (i; i < list.length; i++) {\r\n                curOption = list[i].label.toLowerCase();\r\n\r\n                if (curOption.indexOf(value) > -1) {\r\n                    array.push(list[i]); /*eslint max-depth: [2, 4]*/\r\n                }\r\n            }\r\n\r\n            return array;\r\n        },\r\n\r\n        /**\r\n         * Get path to current option\r\n         *\r\n         * @param {Object} data - option data\r\n         * @returns {String} path\r\n         */\r\n        getPath: function (data) {\r\n            var pathParts,\r\n                createdPath = '';\r\n\r\n            if (this.renderPath) {\r\n                pathParts = data.path.split('.');\r\n                _.each(pathParts, function (curData) {\r\n                    createdPath = createdPath ? createdPath + ' / ' + curData : curData;\r\n                });\r\n\r\n                return createdPath;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set filtered items quantity\r\n         *\r\n         * @param {Object} data - option data\r\n         */\r\n        _setItemsQuantity: function (data) {\r\n            if (this.showFilteredQuantity) {\r\n                data || parseInt(data, 10) === 0 ?\r\n                    this.itemsQuantity(this.getItemsPlaceholder(data)) :\r\n                    this.itemsQuantity('');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Return formatted items placeholder.\r\n         *\r\n         * @param {Object} data - option data\r\n         * @returns {String}\r\n         */\r\n        getItemsPlaceholder: function (data) {\r\n            return data + ' ' + this.quantityPlaceholder;\r\n        },\r\n\r\n        /**\r\n         * Remove element from selected array\r\n         */\r\n        removeSelected: function (value, data, event) {\r\n            event ? event.stopPropagation() : false;\r\n            this.value.remove(value);\r\n        },\r\n\r\n        /**\r\n         * Checked key name\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isTabKey: function (event) {\r\n            return keyCodes[event.keyCode] === 'tabKey';\r\n        },\r\n\r\n        /**\r\n         * Clean hoveredElement variable\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        cleanHoveredElement: function () {\r\n            if (this.hoveredElement) {\r\n                $(this.hoveredElement)\r\n                    .children(this.actionTargetSelector)\r\n                    .removeClass(this.hoverClass);\r\n\r\n                this.hoveredElement = null;\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check selected option\r\n         *\r\n         * @param {String} value - option value\r\n         * @return {Boolean}\r\n         */\r\n        isSelected: function (value) {\r\n            return this.multiple ? _.contains(this.value(), value) : this.value() === value;\r\n        },\r\n\r\n        /**\r\n         * Check selected option\r\n         *\r\n         * @param {Object} option - option value\r\n         * @return {Boolean}\r\n         */\r\n        isSelectedValue: function (option) {\r\n            if (_.isUndefined(option)) {\r\n                return false;\r\n            }\r\n\r\n            return this.isSelected(option.value);\r\n        },\r\n\r\n        /**\r\n         * Check optgroup label\r\n         *\r\n         * @param {Object} data - element data\r\n         * @return {Boolean}\r\n         */\r\n        isOptgroupLabels: function (data) {\r\n            return data.hasOwnProperty(this.separator) && this.optgroupLabels;\r\n        },\r\n\r\n        /**\r\n         * Check hovered option\r\n         *\r\n         * @param {Object} data - element data\r\n         * @return {Boolean}\r\n         */\r\n        isHovered: function (data) {\r\n            var element = this.hoveredElement,\r\n                elementData;\r\n\r\n            if (!element) {\r\n                return false;\r\n            }\r\n\r\n            elementData = ko.dataFor(this.hoveredElement);\r\n\r\n            if (_.isUndefined(elementData)) {\r\n                return false;\r\n            }\r\n\r\n            return data.value === elementData.value;\r\n        },\r\n\r\n        /**\r\n         * Toggle list visibility\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        toggleListVisible: function () {\r\n            this.listVisible(!this.disabled() && !this.listVisible());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get selected element labels\r\n         *\r\n         * @returns {Array} array labels\r\n         */\r\n        getSelected: function () {\r\n            var selected = this.value();\r\n\r\n            return this.cacheOptions.plain.filter(function (opt) {\r\n                return _.isArray(selected) ?\r\n                    _.contains(selected, opt.value) :\r\n                selected == opt.value;//eslint-disable-line eqeqeq\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Toggle activity list element\r\n         *\r\n         * @param {Object} data - selected option data\r\n         * @returns {Object} Chainable\r\n         */\r\n        toggleOptionSelected: function (data) {\r\n            var isSelected = this.isSelected(data.value);\r\n\r\n            if (this.lastSelectable && data.hasOwnProperty(this.separator)) {\r\n                return this;\r\n            }\r\n\r\n            if (!this.multiple) {\r\n                if (!isSelected) {\r\n                    this.value(data.value);\r\n                }\r\n                this.listVisible(false);\r\n            } else {\r\n                if (!isSelected) { /*eslint no-lonely-if: 0*/\r\n                    this.value.push(data.value);\r\n                } else {\r\n                    this.value(_.without(this.value(), data.value));\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Change visibility to child level\r\n         *\r\n         * @param {Object} data - element data\r\n         */\r\n        openChildLevel: function (data) {\r\n            var contextElement = data,\r\n                isVisible;\r\n\r\n            if (\r\n                this.openLevelsAction &&\r\n                data.hasOwnProperty(this.separator) && _.isBoolean(this.levelsVisibility) ||\r\n                this.openLevelsAction &&\r\n                data.hasOwnProperty(this.separator) && parseInt(this.levelsVisibility, 10) <= data.level\r\n            ) {\r\n                isVisible = !contextElement.visible();\r\n\r\n                if (isVisible && !contextElement.isVisited) {\r\n                    contextElement.isVisited = true;\r\n                }\r\n\r\n                contextElement.visible(isVisible);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check selected elements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasData: function () {\r\n            if (!this.value()) {\r\n                this.value([]);\r\n            }\r\n\r\n            return this.value() ? !!this.value().length : false;\r\n        },\r\n\r\n        /**\r\n         * Handles hover on list items.\r\n         *\r\n         * @param {Object} event - mousemove event\r\n         */\r\n        onDelegatedMouseMove: function (event) {\r\n            var target = $(event.currentTarget).closest(this.visibleOptionSelector)[0];\r\n\r\n            if (this.isCursorPositionChange(event) || this.hoveredElement === target) {\r\n                return;\r\n            }\r\n\r\n            this._hoverTo(target);\r\n            this.setCursorPosition(event);\r\n        },\r\n\r\n        /**\r\n         * Get option index\r\n         *\r\n         * @param {Object} data - object with data about this element\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getOptionIndex: function (data) {\r\n            var index;\r\n\r\n            _.each(this.cacheOptions.plain, function (opt, id) {\r\n                if (data.value === opt.value) {\r\n                    index = id;\r\n                }\r\n            });\r\n\r\n            return index;\r\n        },\r\n\r\n        /**\r\n         * Set X and Y cursor position\r\n         *\r\n         * @param {Object} event - mousemove event\r\n         */\r\n        setCursorPosition: function (event) {\r\n            this.cursorPosition = {\r\n                x: event.pageX,\r\n                y: event.pageY\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check previous and current cursor position\r\n         *\r\n         * @param {Object} event - mousemove event\r\n         * @returns {Boolean}\r\n         */\r\n        isCursorPositionChange: function (event) {\r\n            return this.cursorPosition &&\r\n                this.cursorPosition.x === event.pageX &&\r\n                this.cursorPosition.y === event.pageY;\r\n        },\r\n\r\n        /**\r\n         * Set true to observable variable multiselectFocus\r\n         * @param {Object} ctx\r\n         * @param {Object} event - focus event\r\n         */\r\n        onFocusIn: function (ctx, event) {\r\n            !this.cacheUiSelect ? this.cacheUiSelect = event.target : false;\r\n            this.multiselectFocus(true);\r\n        },\r\n\r\n        /**\r\n         * Set false to observable variable multiselectFocus\r\n         * and close list\r\n         */\r\n        onFocusOut: function () {\r\n            this.multiselectFocus(false);\r\n        },\r\n\r\n        /**\r\n         * Handler enter key, if select list is closed - open select,\r\n         * if select list is open toggle selected current option\r\n         */\r\n        enterKeyHandler: function () {\r\n\r\n            if (this.filterOptionsFocus()) {\r\n                return false;\r\n            }\r\n\r\n            if (this.listVisible()) {\r\n                if (this.hoveredElement) {\r\n                    this.toggleOptionSelected(ko.dataFor(this.hoveredElement));\r\n                }\r\n            } else {\r\n                this.setListVisible(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler escape key, if select list is open - closes it,\r\n         */\r\n        escapeKeyHandler: function () {\r\n            this.listVisible() ? this.setListVisible(false) : false;\r\n        },\r\n\r\n        /**\r\n         * Handler pageDown key, selected next option in list, if current option is last\r\n         * selected first option in list\r\n         */\r\n        pageDownKeyHandler: function () {\r\n            this._setHoverToElement(1);\r\n        },\r\n\r\n        /**\r\n         * Get jQuery element by option data\r\n         *\r\n         * @param {Object} data - option data\r\n         *\r\n         * @returns {Object} jQuery element\r\n         */\r\n        _getElemByData: function (data) {\r\n            var i = 0,\r\n                list = $(this.cacheUiSelect).find('li'),\r\n                length = this.options().length,\r\n                result;\r\n\r\n            for (i; i < length; i++) {\r\n                if (this.options()[i].value === data.value) {\r\n                    result = $(list[i]);\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Set hover to visible element\r\n         *\r\n         * @param {Number} direction - iterator\r\n         */\r\n        _setHoverToElement: function (direction) {\r\n            var element;\r\n\r\n            if (direction ===  1) {\r\n                element = this._getNextElement();\r\n            } else if (direction === -1) {\r\n                element = this._getPreviousElement();\r\n            }\r\n\r\n            if (element) {\r\n                this._hoverTo(element);\r\n                this._scrollTo(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Find current hovered element\r\n         * and change scroll position\r\n         *\r\n         * @param {Number} element - element index\r\n         */\r\n        _scrollTo: function (element) {\r\n            var curEl = $(element).children(this.actionTargetSelector),\r\n                wrapper = $(this.rootList),\r\n                curElPos = {},\r\n                wrapperPos = {};\r\n\r\n            curElPos.start = curEl.offset().top;\r\n            curElPos.end = curElPos.start + curEl.outerHeight();\r\n\r\n            wrapperPos.start = wrapper.offset().top;\r\n            wrapperPos.end = wrapperPos.start + wrapper.height();\r\n\r\n            if (curElPos.start < wrapperPos.start) {\r\n                wrapper.scrollTop(wrapper.scrollTop() - (wrapperPos.start - curElPos.start));\r\n            } else if (curElPos.end > wrapperPos.end) {\r\n                wrapper.scrollTop(wrapper.scrollTop() + curElPos.end - wrapperPos.end);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler pageUp key, selected previous option in list, if current option is first -\r\n         * selected last option in list\r\n         */\r\n        pageUpKeyHandler: function () {\r\n            this._setHoverToElement(-1);\r\n        },\r\n\r\n        /**\r\n         * Switcher to parse keydown event and delegate event to needful method\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {Object} event - keydown event\r\n         * @returns {Boolean} if handler for this event doesn't found return true\r\n         */\r\n        keydownSwitcher: function (data, event) {\r\n            var keyName = keyCodes[event.keyCode];\r\n\r\n            if (this.isTabKey(event)) {\r\n                if (!this.filterOptionsFocus() && this.listVisible() && this.filterOptions) {\r\n                    this.cacheUiSelect.trigger('blur');\r\n                    this.filterOptionsFocus(true);\r\n                    this.cleanHoveredElement();\r\n\r\n                    return false;\r\n                }\r\n                this.listVisible(false);\r\n\r\n                return true;\r\n            }\r\n\r\n            if (this.keyDownHandlers().hasOwnProperty(keyName)) {\r\n                this.keyDownHandlers()[keyName].apply(this, arguments);\r\n            } else {\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set caption\r\n         */\r\n        setCaption: function () {\r\n            var length, caption = '';\r\n\r\n            if (!_.isArray(this.value()) && this.value()) {\r\n                length = 1;\r\n            } else if (this.value()) {\r\n                length = this.value().length;\r\n            } else {\r\n                this.value([]);\r\n                length = 0;\r\n            }\r\n            this.warn(caption);\r\n\r\n            //check if option was removed\r\n            if (this.isDisplayMissingValuePlaceholder && length && !this.getSelected().length) {\r\n                caption = this.missingValuePlaceholder.replace('%s', this.value());\r\n                this.placeholder(caption);\r\n                this.warn(caption);\r\n\r\n                return this.placeholder();\r\n            }\r\n\r\n            if (length > 1) {\r\n                this.placeholder(length + ' ' + this.selectedPlaceholders.lotPlaceholders);\r\n            } else if (length && this.getSelected().length) {\r\n                this.placeholder(this.getSelected()[0].label);\r\n            } else {\r\n                this.placeholder(this.selectedPlaceholders.defaultPlaceholder);\r\n            }\r\n\r\n            return this.placeholder();\r\n        },\r\n\r\n        /**\r\n         * Set list status, open or close\r\n         *\r\n         * @param {Boolean} value - variable for set list visible status\r\n         */\r\n        setListVisible: function (value) {\r\n            this.listVisible(value);\r\n        },\r\n\r\n        /**\r\n         * Processes preview for option by it's value, and sets the result\r\n         * to 'preview' observable\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getPreview: function () {\r\n            var selected = this.getSelected();\r\n\r\n            return selected.map(function (option) {\r\n                return option.label;\r\n            }).join(', ');\r\n        },\r\n\r\n        /**\r\n         * Defines previous option element to\r\n         * the one that is currently hovered.\r\n         *\r\n         * @returns {Element}\r\n         */\r\n        _getPreviousElement: function () {\r\n            var currentElement = this.hoveredElement,\r\n                lastElement    = this._getLastIn(this.rootList),\r\n                previousElement;\r\n\r\n            if (!currentElement) {\r\n                return lastElement;\r\n            }\r\n\r\n            previousElement = $(currentElement).prev()[0];\r\n\r\n            return this._getLastIn(previousElement) ||\r\n                previousElement ||\r\n                this._getFirstParentOf(currentElement) ||\r\n                lastElement;\r\n        },\r\n\r\n        /**\r\n         * Defines next option element to\r\n         * the one that is currently hovered.\r\n         *\r\n         * @returns {Element}\r\n         */\r\n        _getNextElement: function () {\r\n            var currentElement = this.hoveredElement,\r\n                firstElement   = this._getFirstIn(this.rootList);\r\n\r\n            if (!currentElement) {\r\n                return firstElement;\r\n            }\r\n\r\n            return this._getFirstIn(currentElement) ||\r\n                $(currentElement).next()[0] ||\r\n                this._getParentsOf(currentElement).next()[0] ||\r\n                firstElement;\r\n        },\r\n\r\n        /**\r\n         * Returns first option element in provided scope.\r\n         *\r\n         * @param {Element} scope\r\n         * @returns {Element}\r\n         */\r\n        _getFirstIn: function (scope) {\r\n            return $(scope).find(this.visibleOptionSelector)[0];\r\n        },\r\n\r\n        /**\r\n         * Returns last descendant option element in provided scope.\r\n         *\r\n         * @param {Element} scope\r\n         * @returns {Element}\r\n         */\r\n        _getLastIn: function (scope) {\r\n            return $(scope).find(this.visibleOptionSelector).last()[0];\r\n        },\r\n\r\n        /**\r\n         * Returns a collection of parent option elements.\r\n         *\r\n         * @param {Element} scope\r\n         * @returns {jQueryCollection}\r\n         */\r\n        _getParentsOf: function (scope) {\r\n            return $(scope).parents(this.visibleOptionSelector);\r\n        },\r\n\r\n        /**\r\n         * Returns first parent option element.\r\n         *\r\n         * @param {Element} scope\r\n         * @returns {Element}\r\n         */\r\n        _getFirstParentOf: function (scope) {\r\n            return this._getParentsOf(scope)[0];\r\n        },\r\n\r\n        /**\r\n         * Sets hover class to provided option element.\r\n         *\r\n         * @param {Element} element\r\n         */\r\n        _hoverTo: function (element) {\r\n            if (this.hoveredElement) {\r\n                $(this.hoveredElement)\r\n                    .children(this.actionTargetSelector)\r\n                    .removeClass(this.hoverClass);\r\n            }\r\n\r\n            $(element)\r\n                .children(this.actionTargetSelector)\r\n                .addClass(this.hoverClass);\r\n\r\n            this.hoveredElement = element;\r\n        },\r\n\r\n        /**\r\n         * Callback which fires when root list element is rendered.\r\n         *\r\n         * @param {Element} element\r\n         */\r\n        onRootListRender: function (element) {\r\n            var targetSelector = 'li > ' + this.actionTargetSelector;\r\n\r\n            this.rootList = element;\r\n\r\n            $(this.rootList).on(\r\n                'mousemove',\r\n                targetSelector,\r\n                this.onDelegatedMouseMove.bind(this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Returns options from cache or send request\r\n         *\r\n         * @param {String} searchKey\r\n         */\r\n        loadOptions: function (searchKey) {\r\n            var currentPage = searchKey === this.lastSearchKey ? this.lastSearchPage + 1 : 1,\r\n                cachedSearchResult;\r\n\r\n            this.renderPath = !!this.showPath;\r\n\r\n            if (this.isSearchKeyCached(searchKey)) {\r\n                cachedSearchResult = this.getCachedSearchResults(searchKey);\r\n                this.cacheOptions.plain = cachedSearchResult.options;\r\n                this.options(cachedSearchResult.options);\r\n                this.afterLoadOptions(searchKey, cachedSearchResult.lastPage, cachedSearchResult.total);\r\n\r\n                return;\r\n            }\r\n\r\n            if (currentPage === 1) {\r\n                this.options([]);\r\n            }\r\n            this.processRequest(searchKey, currentPage);\r\n        },\r\n\r\n        /**\r\n         * Load more options on scroll down\r\n         * @param {Object} data\r\n         * @param {Event} event\r\n         */\r\n        onScrollDown: function (data, event) {\r\n            var clientHight = event.target.scrollTop + event.target.clientHeight,\r\n                scrollHeight = event.target.scrollHeight;\r\n\r\n            if (!this.searchOptions) {\r\n                return;\r\n            }\r\n\r\n            if (clientHight > scrollHeight - this.deviation && !this.isSearchKeyCached(data.filterInputValue())) {\r\n                this.loadOptions(data.filterInputValue());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns cached search result by search key\r\n         *\r\n         * @param {String} searchKey\r\n         * @return {Object}\r\n         */\r\n        getCachedSearchResults: function (searchKey) {\r\n            if (this.cachedSearchResults.hasOwnProperty(searchKey)) {\r\n                return this.cachedSearchResults[searchKey];\r\n            }\r\n\r\n            return {\r\n                options: [],\r\n                lastPage: 1,\r\n                total: 0\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Cache loaded data\r\n         *\r\n         * @param {String} searchKey\r\n         * @param {Array} optionsArray\r\n         * @param {Number} page\r\n         * @param {Number} total\r\n         */\r\n        setCachedSearchResults: function (searchKey, optionsArray, page, total) {\r\n            var cachedData = {};\r\n\r\n            cachedData.options = optionsArray;\r\n            cachedData.lastPage = page;\r\n            cachedData.total = total;\r\n            this.cachedSearchResults[searchKey] = cachedData;\r\n        },\r\n\r\n        /**\r\n         * Check if search key cached\r\n         *\r\n         * @param {String} searchKey\r\n         * @return {Boolean}\r\n         */\r\n        isSearchKeyCached: function (searchKey) {\r\n            var totalCached = this.cachedSearchResults.hasOwnProperty(searchKey) ?\r\n                this.deviation * this.cachedSearchResults[searchKey].lastPage :\r\n                0;\r\n\r\n            return totalCached > 0 && totalCached >= this.cachedSearchResults[searchKey].total;\r\n        },\r\n\r\n        /**\r\n         * Submit request to load data\r\n         *\r\n         * @param {String} searchKey\r\n         * @param {Number} page\r\n         */\r\n        processRequest: function (searchKey, page) {\r\n            this.loading(true);\r\n            this.currentSearchKey = searchKey;\r\n            $.ajax({\r\n                url: this.searchUrl,\r\n                type: 'get',\r\n                dataType: 'json',\r\n                context: this,\r\n                data: {\r\n                    searchKey: searchKey,\r\n                    page: page,\r\n                    limit: this.pageLimit\r\n                },\r\n                success: $.proxy(this.success, this),\r\n                error: $.proxy(this.error, this),\r\n                beforeSend: $.proxy(this.beforeSend, this),\r\n                complete: $.proxy(this.complete, this, searchKey, page)\r\n            });\r\n        },\r\n\r\n        /** @param {Object} response */\r\n        success: function (response) {\r\n            var existingOptions = this.options();\r\n\r\n            _.each(response.options, function (opt) {\r\n                existingOptions.push(opt);\r\n            });\r\n\r\n            this.total = response.total;\r\n            this.cacheOptions.plain = existingOptions;\r\n            this.options(existingOptions);\r\n        },\r\n\r\n        /** add actions before ajax request */\r\n        beforeSend: function () {\r\n\r\n        },\r\n\r\n        /** set empty array if error occurs */\r\n        error: function () {\r\n            this.options([]);\r\n        },\r\n\r\n        /** cache options and stop loading*/\r\n        complete: function (searchKey, page) {\r\n            this.setCachedSearchResults(searchKey, this.options(), page, this.total);\r\n            this.afterLoadOptions(searchKey, page, this.total);\r\n        },\r\n\r\n        /**\r\n         * Stop loading and update data after options were updated\r\n         *\r\n         * @param {String} searchKey\r\n         * @param {Number} page\r\n         * @param {Number} total\r\n         */\r\n        afterLoadOptions: function (searchKey, page, total) {\r\n            this.lastSearchKey = searchKey;\r\n            this.lastSearchPage = page;\r\n            this._setItemsQuantity(total);\r\n            this.loading(false);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/url-input.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiLayout',\r\n    'mage/translate',\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (_, layout, $t, Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            linkedElement: {},\r\n            settingTemplate: 'ui/form/element/urlInput/setting',\r\n            typeSelectorTemplate: 'ui/form/element/urlInput/typeSelector',\r\n            options: [],\r\n            linkedElementInstances: {},\r\n            //checkbox\r\n            isDisplayAdditionalSettings: true,\r\n            settingValue: false,\r\n            settingLabel: $t('Open in new tab'),\r\n            tracks: {\r\n                linkedElement: true\r\n            },\r\n            baseLinkSetting: {\r\n                namePrefix: '${$.name}.',\r\n                dataScopePrefix: '${$.dataScope}.',\r\n                provider: '${$.provider}'\r\n            },\r\n            urlTypes: {},\r\n            listens: {\r\n                settingValue: 'checked',\r\n                disabled: 'hideLinkedElement',\r\n                linkType: 'createChildUrlInputComponent'\r\n            },\r\n            links: {\r\n                linkType: '${$.provider}:${$.dataScope}.type',\r\n                settingValue: '${$.provider}:${$.dataScope}.setting'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var processedLinkTypes = {},\r\n                baseLinkType = this.constructor.defaults.baseLinkSetting;\r\n\r\n            _.each(config.urlTypes, function (linkSettingsArray, linkName) {\r\n                //add link name by link type\r\n                linkSettingsArray.name = baseLinkType.namePrefix + linkName;\r\n                linkSettingsArray.dataScope = baseLinkType.dataScopePrefix + linkName;\r\n                linkSettingsArray.type = linkName;\r\n                linkSettingsArray.disabled = config.disabled;\r\n                linkSettingsArray.visible = config.visible;\r\n                processedLinkTypes[linkName] = {};\r\n                _.extend(processedLinkTypes[linkName], baseLinkType, linkSettingsArray);\r\n            });\r\n            _.extend(this.constructor.defaults.urlTypes, processedLinkTypes);\r\n\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Abstract} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('componentTemplate options value linkType settingValue checked isDisplayAdditionalSettings')\r\n                .setOptions();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set options to select based on link types configuration\r\n         *\r\n         * @return {Object}\r\n         */\r\n        setOptions: function () {\r\n            var result = [];\r\n\r\n            _.each(this.urlTypes, function (option, key) {\r\n                result.push({\r\n                    value: key,\r\n                    label: option.label,\r\n                    sortOrder: option.sortOrder || 0\r\n                });\r\n            });\r\n\r\n            //sort options by sortOrder\r\n            result.sort(function (a, b) {\r\n                return a.sortOrder > b.sortOrder ? 1 : -1;\r\n            });\r\n\r\n            this.options(result);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        setPreview: function (visible) {\r\n            this.linkedElement().visible(visible);\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @param {Boolean} disabled\r\n         */\r\n        hideLinkedElement: function (disabled) {\r\n            this.linkedElement().disabled(disabled);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            _.each(this.linkedElementInstances, function (value) {\r\n                value().destroy();\r\n            });\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Create child component by value\r\n         *\r\n         * @param {String} value\r\n         * @return void\r\n         */\r\n        createChildUrlInputComponent: function (value) {\r\n            var elementConfig;\r\n\r\n            if (!_.isEmpty(value) && _.isUndefined(this.linkedElementInstances[value])) {\r\n                elementConfig = this.urlTypes[value];\r\n                layout([elementConfig]);\r\n                this.linkedElementInstances[value] = this.requestModule(elementConfig.name);\r\n            }\r\n            this.linkedElement = this.linkedElementInstances[value];\r\n\r\n        },\r\n\r\n        /**\r\n         * Returns linked element to display related field in template\r\n         * @return String\r\n         */\r\n        getLinkedElementName: function () {\r\n            return this.linkedElement;\r\n        },\r\n\r\n        /**\r\n         * Add ability to choose check box by clicking on label\r\n         */\r\n        checkboxClick: function () {\r\n            if (!this.disabled()) {\r\n                this.settingValue(!this.settingValue());\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/website.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    './select'\r\n], function (_, registry, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            customerId: null,\r\n            isGlobalScope: 0\r\n        },\r\n\r\n        /**\r\n         * Website component constructor.\r\n         * @returns {exports}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/element/wysiwyg.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'wysiwygAdapter',\r\n    'Magento_Ui/js/lib/view/utils/async',\r\n    'underscore',\r\n    'ko',\r\n    './abstract',\r\n    'mage/adminhtml/events',\r\n    'Magento_Variable/variables'\r\n], function (wysiwyg, $, _, ko, Abstract, varienGlobalEvents) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        currentWysiwyg: undefined,\r\n        defaults: {\r\n            elementSelector: 'textarea',\r\n            suffixRegExpPattern: '${ $.wysiwygUniqueSuffix }',\r\n            $wysiwygEditorButton: '',\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope }'\r\n            },\r\n            template: 'ui/form/field',\r\n            elementTmpl: 'ui/form/element/wysiwyg',\r\n            content:        '',\r\n            showSpinner:    false,\r\n            loading:        false,\r\n            listens: {\r\n                disabled: 'setDisabled'\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initNodeListener();\r\n\r\n            $.async({\r\n                component: this,\r\n                selector: 'button'\r\n            }, function (element) {\r\n                this.$wysiwygEditorButton = this.$wysiwygEditorButton ?\r\n                    this.$wysiwygEditorButton.add($(element)) : $(element);\r\n            }.bind(this));\r\n\r\n            // disable editor completely after initialization is field is disabled\r\n            varienGlobalEvents.attachEventHandler('wysiwygEditorInitialized', function () {\r\n                if (!_.isUndefined(window.tinyMceEditors)) {\r\n                    this.currentWysiwyg = window.tinyMceEditors[this.wysiwygId];\r\n                }\r\n\r\n                if (this.disabled()) {\r\n                    this.setDisabled(true);\r\n                }\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var pattern = config.suffixRegExpPattern || this.constructor.defaults.suffixRegExpPattern;\r\n\r\n            pattern = pattern.replace(/\\$/g, '\\\\$&');\r\n            config.content = config.content.replace(new RegExp(pattern, 'g'), this.getUniqueSuffix(config));\r\n            this._super();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Build unique id based on name, underscore separated.\r\n         *\r\n         * @param {Object} config\r\n         */\r\n        getUniqueSuffix: function (config) {\r\n            return config.name.replace(/(\\.|-)/g, '_');\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        destroy: function () {\r\n            this._super();\r\n            wysiwyg.removeEvents(this.wysiwygId);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['value', 'content']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {} Chainable.\r\n         */\r\n        initNodeListener: function () {\r\n            $.async({\r\n                component: this,\r\n                selector: this.elementSelector\r\n            }, this.setElementNode.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {HTMLElement} node\r\n         */\r\n        setElementNode: function (node) {\r\n            $(node).bindings({\r\n                value: this.value\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to wysiwyg component\r\n         *\r\n         * @param {Boolean} disabled\r\n         */\r\n        setDisabled: function (disabled) {\r\n            if (this.$wysiwygEditorButton && disabled) {\r\n                this.$wysiwygEditorButton.prop('disabled', 'disabled');\r\n            } else if (this.$wysiwygEditorButton) {\r\n                this.$wysiwygEditorButton.prop('disabled', false);\r\n            }\r\n\r\n            /* eslint-disable no-undef */\r\n            if (!_.isUndefined(this.currentWysiwyg) && this.currentWysiwyg.activeEditor()) {\r\n                this.currentWysiwyg.setEnabledStatus(!disabled);\r\n                this.currentWysiwyg.getPluginButtons().prop('disabled', disabled);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Content getter\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getContentUnsanitizedHtml: function () {\r\n            return this.content();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/data-storage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiClass'\r\n], function ($, _, utils, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            cacheRequests: true,\r\n            cachedRequestDelay: 50,\r\n            indexField: 'entity_id',\r\n            requestConfig: {\r\n                url: '${ $.updateUrl }',\r\n                method: 'GET',\r\n                dataType: 'json'\r\n            },\r\n            dataScope: '',\r\n            data: {}\r\n        },\r\n\r\n        /**\r\n         * Initializes dataStorage configuration.\r\n         *\r\n         * @returns {DataStorage} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            var scope;\r\n\r\n            this._super();\r\n\r\n            scope = this.dataScope;\r\n\r\n            if (typeof scope === 'string') {\r\n                this.dataScope = scope ? [scope] : [];\r\n            }\r\n\r\n            this._requests = [];\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extracts data which matches specified set of identifiers.\r\n         *\r\n         * @param {Array} ids - Records identifiers.\r\n         * @returns {Array|Boolean}\r\n         */\r\n        getByIds: function (ids) {\r\n            var result = [],\r\n                hasData;\r\n\r\n            hasData = ids.every(function (id) {\r\n                var item = this.data[id];\r\n\r\n                return item ? result.push(item) : false;\r\n            }, this);\r\n\r\n            return hasData ? result : false;\r\n        },\r\n\r\n        /**\r\n         * Extracts identifiers of provided records.\r\n         * If no records were provided then full list of\r\n         * current data id's will be returned.\r\n         *\r\n         * @param {Object|Array} [data=this.data]\r\n         * @returns {Array}\r\n         */\r\n        getIds: function (data) {\r\n            data = data || this.data;\r\n\r\n            return _.pluck(data, this.indexField);\r\n        },\r\n\r\n        /**\r\n         * Extracts data which matches specified parameters.\r\n         *\r\n         * @param {Object} params - Request parameters.\r\n         * @param {Object} [options={}]\r\n         * @returns {jQueryPromise}\r\n         */\r\n        getData: function (params, options) {\r\n            var cachedRequest;\r\n\r\n            if (this.hasScopeChanged(params)) {\r\n                this.clearRequests();\r\n            } else {\r\n                cachedRequest = this.getRequest(params);\r\n            }\r\n\r\n            options = options || {};\r\n\r\n            return !options.refresh && cachedRequest ?\r\n                this.getRequestData(cachedRequest) :\r\n                this.requestData(params);\r\n        },\r\n\r\n        /**\r\n         * Tells whether one of the parameters defined in the \"dataScope\" has\r\n         * changed since the last request.\r\n         *\r\n         * @param {Object} params - Request parameters.\r\n         * @returns {Boolean}\r\n         */\r\n        hasScopeChanged: function (params) {\r\n            var lastRequest = _.last(this._requests),\r\n                keys,\r\n                diff;\r\n\r\n            if (!lastRequest) {\r\n                return false;\r\n            }\r\n\r\n            diff = utils.compare(lastRequest.params, params);\r\n\r\n            keys = _.pluck(diff.changes, 'path');\r\n            keys = keys.concat(Object.keys(diff.containers));\r\n\r\n            return _.intersection(this.dataScope, keys).length > 0;\r\n        },\r\n\r\n        /**\r\n         * Extends records of current data object\r\n         * with the provided records collection.\r\n         *\r\n         * @param {Array} data - An array of records.\r\n         * @returns {DataStorage} Chainable.\r\n         */\r\n        updateData: function (data) {\r\n            var records = _.indexBy(data || [], this.indexField);\r\n\r\n            _.extend(this.data, records);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sends request to the server with provided parameters.\r\n         *\r\n         * @param {Object} params - Request parameters.\r\n         * @returns {jQueryPromise}\r\n         */\r\n        requestData: function (params) {\r\n            var query = utils.copy(params),\r\n                handler = this.onRequestComplete.bind(this, query),\r\n                request;\r\n\r\n            this.requestConfig.data = query;\r\n            request = $.ajax(this.requestConfig).done(handler);\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Returns request's instance which\r\n         * contains provided parameters.\r\n         *\r\n         * @param {Object} params - Request parameters.\r\n         * @returns {Object} Instance of request.\r\n         */\r\n        getRequest: function (params) {\r\n            return _.find(this._requests, function (request) {\r\n                return _.isEqual(params, request.params);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Forms data object associated with provided request.\r\n         *\r\n         * @param {Object} request - Request object.\r\n         * @returns {jQueryPromise}\r\n         */\r\n        getRequestData: function (request) {\r\n            var defer = $.Deferred(),\r\n                resolve = defer.resolve.bind(defer),\r\n                delay = this.cachedRequestDelay,\r\n                result;\r\n\r\n            if (request.showTotalRecords === undefined) {\r\n                request.showTotalRecords = true;\r\n            }\r\n\r\n            result = {\r\n                items: this.getByIds(request.ids),\r\n                totalRecords: request.totalRecords,\r\n                showTotalRecords: request.showTotalRecords,\r\n                errorMessage: request.errorMessage\r\n            };\r\n\r\n            delay ?\r\n                _.delay(resolve, delay, result) :\r\n                resolve(result);\r\n\r\n            return defer.promise();\r\n        },\r\n\r\n        /**\r\n         * Caches requests object with provided parameters\r\n         * and data object associated with it.\r\n         *\r\n         * @param {Object} data - Data associated with request.\r\n         * @param {Object} params - Request parameters.\r\n         * @returns {DataStorage} Chainable.\r\n         */\r\n        cacheRequest: function (data, params) {\r\n            var cached = this.getRequest(params);\r\n\r\n            if (cached) {\r\n                this.removeRequest(cached);\r\n            }\r\n\r\n            if (data.showTotalRecords === undefined) {\r\n                data.showTotalRecords = true;\r\n            }\r\n\r\n            this._requests.push({\r\n                ids: this.getIds(data.items),\r\n                params: params,\r\n                totalRecords: data.totalRecords,\r\n                showTotalRecords: data.showTotalRecords,\r\n                errorMessage: data.errorMessage\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Clears all cached requests.\r\n         *\r\n         * @returns {DataStorage} Chainable.\r\n         */\r\n        clearRequests: function () {\r\n            this._requests.splice(0);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Removes provided request object from cached requests list.\r\n         *\r\n         * @param {Object} request - Request object.\r\n         * @returns {DataStorage} Chainable.\r\n         */\r\n        removeRequest: function (request) {\r\n            var requests = this._requests,\r\n                index = requests.indexOf(request);\r\n\r\n            if (~index) {\r\n                requests.splice(index, 1);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks if request with a specified parameters was cached.\r\n         *\r\n         * @param {Object} params - Parameters of the request.\r\n         * @returns {Boolean}\r\n         */\r\n        wasRequested: function (params) {\r\n            return !!this.getRequest(params);\r\n        },\r\n\r\n        /**\r\n         * Handles successful data request.\r\n         *\r\n         * @param {Object} params - Request parameters.\r\n         * @param {Object} data - Response data.\r\n         */\r\n        onRequestComplete: function (params, data) {\r\n            this.updateData(data.items);\r\n\r\n            if (this.cacheRequests) {\r\n                this.cacheRequest(data, params);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/dnd.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'Magento_Ui/js/lib/view/utils/async',\r\n    'underscore',\r\n    'uiRegistry',\r\n    'uiClass'\r\n], function (ko, $, _, registry, Class) {\r\n    'use strict';\r\n\r\n    var isTouchDevice = typeof document.ontouchstart !== 'undefined',\r\n        transformProp;\r\n\r\n    /**\r\n     * Defines supported css 'transform' property.\r\n     *\r\n     * @returns {String|Undefined}\r\n     */\r\n    transformProp = (function () {\r\n        var style = document.body.style,\r\n            base = 'Transform',\r\n            vendors = ['webkit', 'moz', 'ms', 'o'],\r\n            vi = vendors.length,\r\n            property;\r\n\r\n        if (typeof style.transform != 'undefined') {\r\n            return 'transform';\r\n        }\r\n\r\n        while (vi--) {\r\n            property = vendors[vi] + base;\r\n\r\n            if (typeof style[property] != 'undefined') {\r\n                return property;\r\n            }\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * Returns first touch data if it's available.\r\n     *\r\n     * @param {(MouseEvent|TouchEvent)} e - Event object.\r\n     * @returns {Object}\r\n     */\r\n    function getTouch(e) {\r\n        return e.touches ? e.touches[0] : e;\r\n    }\r\n\r\n    /**\r\n     * Moves specified DOM element to the x and y coordinates.\r\n     *\r\n     * @param {HTMLElement} elem - Element to be relocated.\r\n     * @param {Number} x - X coordinate.\r\n     * @param {Number} y - Y coordinate.\r\n     */\r\n    function locate(elem, x, y) {\r\n        var value = 'translate(' + x + 'px,' + y + 'px)';\r\n\r\n        elem.style[transformProp] = value;\r\n    }\r\n\r\n    /*eslint-disable no-extra-parens*/\r\n    /**\r\n     * Checks if specified coordinate is inside of the provided area.\r\n     *\r\n     * @param {Number} x - X coordinate.\r\n     * @param {Number} y - Y coordinate.\r\n     * @param {Object} area - Object which represents area.\r\n     * @returns {Boolean}\r\n     */\r\n    function isInside(x, y, area) {\r\n        return (\r\n            area &&\r\n            x >= area.left && x <= area.right &&\r\n            y >= area.top && y <= area.bottom\r\n        );\r\n    }\r\n\r\n    /*eslint-enable no-extra-parens*/\r\n\r\n    /**\r\n     * Calculates distance between two points.\r\n     *\r\n     * @param {Number} x1 - X coordinate of a first point.\r\n     * @param {Number} y1 - Y coordinate of a first point.\r\n     * @param {Number} x2 - X coordinate of a second point.\r\n     * @param {Number} y2 - Y coordinate of a second point.\r\n     * @returns {Number} Distance between points.\r\n     */\r\n    function distance(x1, y1, x2, y2) {\r\n        var dx = x2 - x1,\r\n            dy = y2 - y1;\r\n\r\n        dx *= dx;\r\n        dy *= dy;\r\n\r\n        return Math.sqrt(dx + dy);\r\n    }\r\n\r\n    /**\r\n     * Returns viewModel associated with a provided DOM element.\r\n     *\r\n     * @param {HTMLElement} elem\r\n     * @returns {Object|Array}\r\n     */\r\n    function getModel(elem) {\r\n        return ko.dataFor(elem);\r\n    }\r\n\r\n    /**\r\n     * Checks whether cols are identical\r\n     *\r\n     * @param {HTMLElement} c1\r\n     * @param {HTMLElement} c2\r\n     * @returns {Boolean}\r\n     */\r\n    function compareCols(c1, c2) {\r\n        return c1.cellIndex === c2.cellIndex;\r\n    }\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            rootSelector: '${ $.columnsProvider }:.admin__data-grid-wrap',\r\n            tableSelector: '${ $.rootSelector } -> table.data-grid',\r\n            mainTableSelector: '[data-role=\"grid\"]',\r\n            columnSelector: '${ $.tableSelector } thead tr th',\r\n            noSelectClass: '_no-select',\r\n            hiddenClass: '_hidden',\r\n            fixedX: false,\r\n            fixedY: true,\r\n            minDistance: 2,\r\n            columns: []\r\n        },\r\n\r\n        /**\r\n         * Initializes Dnd component.\r\n         *\r\n         * @returns {Dnd} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(\r\n                this,\r\n                'initTable',\r\n                'initColumn',\r\n                'removeColumn',\r\n                'onMouseMove',\r\n                'onMouseUp',\r\n                'onMouseDown'\r\n            );\r\n\r\n            this.$body = $('body');\r\n\r\n            this._super()\r\n                .initListeners();\r\n\r\n            $.async(this.tableSelector, this.initTable);\r\n            $.async(this.columnSelector, this.initColumn);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Binds necessary events listeners.\r\n         *\r\n         * @returns {Dnd} Chainbale.\r\n         */\r\n        initListeners: function () {\r\n            if (isTouchDevice) {\r\n                $(document).on({\r\n                    touchmove: this.onMouseMove,\r\n                    touchend: this.onMouseUp,\r\n                    touchleave: this.onMouseUp\r\n                });\r\n            } else {\r\n                $(document).on({\r\n                    mousemove: this.onMouseMove,\r\n                    mouseup: this.onMouseUp\r\n                });\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Defines specified table element as a main container.\r\n         *\r\n         * @param {HTMLTableElement} table\r\n         * @returns {Dnd} Chainable.\r\n         */\r\n        initTable: function (table) {\r\n            this.table =  $(table).is(this.mainTableSelector) ?  table : this.table;\r\n\r\n            $(table).addClass('data-grid-draggable');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets specified column as a draggable element.\r\n         *\r\n         * @param {HTMLTableHeaderCellElement} column - Columns header element.\r\n         * @returns {Dnd} Chainable.\r\n         */\r\n        initColumn: function (column) {\r\n            var model = getModel(column),\r\n                eventName;\r\n\r\n            if (!model || !model.draggable) {\r\n                return this;\r\n            }\r\n\r\n            if (!ko.es5.isTracked(model, 'dragover')) {\r\n                model.track('dragover');\r\n            }\r\n\r\n            this.columns.push(column);\r\n\r\n            $(column).bindings({\r\n                css: {\r\n                    '_dragover-left': ko.computed(function () {\r\n                        return model.dragover === 'right';\r\n                    }),\r\n                    '_dragover-right': ko.computed(function () {\r\n                        return model.dragover === 'left';\r\n                    })\r\n                }\r\n            });\r\n\r\n            eventName = isTouchDevice ?\r\n                'touchstart' :\r\n                'mousedown';\r\n\r\n            $(column).on(eventName, this.onMouseDown);\r\n            $.async.remove(column, this.removeColumn);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Removes specified column element from the columns array.\r\n         *\r\n         * @param {HTMLTableHeaderCellElement} column - Columns header element.\r\n         * @returns {Dnd} Chainable.\r\n         */\r\n        removeColumn: function (column) {\r\n            var columns = this.columns,\r\n                index = columns.indexOf(column);\r\n\r\n            if (~index) {\r\n                columns.splice(index, 1);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns index of column.\r\n         *\r\n         * @param {HTMLTableHeaderCellElement} elem\r\n         * @returns {Number}\r\n         */\r\n        _getColumnIndex: function (elem) {\r\n            return _.toArray(elem.parentNode.cells).indexOf(elem);\r\n        },\r\n\r\n        /**\r\n         * Calculates coordinates of draggable elements.\r\n         *\r\n         * @returns {Dnd} Chainbale.\r\n         */\r\n        _cacheCoords: function () {\r\n            var container   = this.table.getBoundingClientRect(),\r\n                bodyRect    = document.body.getBoundingClientRect(),\r\n                grabbed     = this.grabbed,\r\n                dragElem    = grabbed.elem,\r\n                cells       = _.toArray(dragElem.parentNode.cells),\r\n                rect;\r\n\r\n            this.coords = this.columns.map(function (column) {\r\n                var data,\r\n                    colIndex = _.findIndex(cells, function (cell) {\r\n                        return compareCols(cell, column);\r\n                    });\r\n\r\n                rect = column.getBoundingClientRect();\r\n\r\n                data = {\r\n                    index: colIndex,\r\n                    target: column,\r\n                    orig: rect,\r\n                    left: rect.left - bodyRect.left,\r\n                    right: rect.right - bodyRect.left,\r\n                    top: rect.top - bodyRect.top,\r\n                    bottom: container.bottom - bodyRect.top\r\n                };\r\n\r\n                if (column === dragElem) {\r\n                    this.dragArea = data;\r\n\r\n                    grabbed.shiftX = rect.left - grabbed.x;\r\n                    grabbed.shiftY = rect.top - grabbed.y;\r\n                }\r\n\r\n                return data;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates clone of a target table with only specified column visible.\r\n         *\r\n         * @param {HTMLTableHeaderCellElement} elem - Dragging column.\r\n         * @returns {Dnd} Chainbale.\r\n         */\r\n        _cloneTable: function (elem) {\r\n            var clone       = this.table.cloneNode(true),\r\n                columnIndex = this._getColumnIndex(elem),\r\n                headRow     = clone.tHead.firstElementChild,\r\n                headCells   = _.toArray(headRow.cells),\r\n                tableBody   = clone.tBodies[0],\r\n                bodyRows    = _.toArray(tableBody.children),\r\n                origTrs     = this.table.tBodies[0].children;\r\n\r\n            clone.style.width = elem.offsetWidth + 'px';\r\n\r\n            headCells.forEach(function (th, index) {\r\n                if (index !== columnIndex) {\r\n                    headRow.removeChild(th);\r\n                }\r\n            });\r\n\r\n            headRow.cells[0].style.height = elem.offsetHeight + 'px';\r\n\r\n            bodyRows.forEach(function (row, rowIndex) {\r\n                var cells = row.cells,\r\n                    cell;\r\n\r\n                if (cells.length !== headCells.length) {\r\n                    tableBody.removeChild(row);\r\n\r\n                    return;\r\n                }\r\n\r\n                cell = row.cells[columnIndex].cloneNode(true);\r\n\r\n                while (row.firstElementChild) {\r\n                    row.removeChild(row.firstElementChild);\r\n                }\r\n\r\n                cell.style.height = origTrs[rowIndex].cells[columnIndex].offsetHeight + 'px';\r\n\r\n                row.appendChild(cell);\r\n            });\r\n\r\n            this.dragTable = clone;\r\n\r\n            $(clone)\r\n                .addClass('_dragging-copy')\r\n                .appendTo('body');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Matches provided coordinates to available areas.\r\n         *\r\n         * @param {Number} x - X coordinate of a mouse pointer.\r\n         * @param {Number} y - Y coordinate of a mouse pointer.\r\n         * @returns {Object|Undefined} Matched area.\r\n         */\r\n        _getDropArea: function (x, y) {\r\n            return _.find(this.coords, function (area) {\r\n                return isInside(x, y, area);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Updates state of hovered areas.\r\n         *\r\n         * @param {Number} x - X coordinate of a mouse pointer.\r\n         * @param {Number} y - Y coordinate of a mouse pointer.\r\n         */\r\n        _updateAreas: function (x, y) {\r\n            var leavedArea = this.dropArea,\r\n                area = this.dropArea = this._getDropArea(x, y);\r\n\r\n            if (leavedArea) {\r\n                this.dragleave(leavedArea);\r\n            }\r\n\r\n            if (area && !compareCols(area.target, this.dragArea.target)) {\r\n                this.dragenter(area);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Grab action handler.\r\n         *\r\n         * @param {Number} x - X coordinate of a grabbed point.\r\n         * @param {Number} y - Y coordinate of a grabbed point.\r\n         * @param {HTMLElement} elem - Grabbed element.\r\n         */\r\n        grab: function (x, y, elem) {\r\n            this.initDrag = true;\r\n\r\n            this.grabbed = {\r\n                x: x,\r\n                y: y,\r\n                elem: elem\r\n            };\r\n\r\n            this.$body.addClass(this.noSelectClass);\r\n        },\r\n\r\n        /**\r\n         * Dragstart action handler.\r\n         *\r\n         * @param {HTMLTableHeaderCellElement} elem - Element which is dragging.\r\n         */\r\n        dragstart: function (elem) {\r\n            this.initDrag = false;\r\n            this.dropArea = false;\r\n            this.dragging = true;\r\n\r\n            getModel(elem).dragging(true);\r\n\r\n            this._cacheCoords()\r\n                ._cloneTable(elem);\r\n        },\r\n\r\n        /**\r\n         * Drag action handler. Locates draggable\r\n         * grid at a specified coordinates.\r\n         *\r\n         * @param {Number} x - X coordinate.\r\n         * @param {Number} y - Y coordinate.\r\n         */\r\n        drag: function (x, y) {\r\n            var grabbed  = this.grabbed,\r\n                dragArea = this.dragArea,\r\n                posX     = x + grabbed.shiftX,\r\n                posY     = y + grabbed.shiftY;\r\n\r\n            if (this.fixedX) {\r\n                x    = dragArea.left;\r\n                posX = dragArea.orig.left;\r\n            }\r\n\r\n            if (this.fixedY) {\r\n                y    = dragArea.top;\r\n                posY = dragArea.orig.top;\r\n            }\r\n\r\n            locate(this.dragTable, posX, posY);\r\n\r\n            if (!isInside(x, y, this.dropArea)) {\r\n                this._updateAreas(x, y);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Dragenter action handler.\r\n         *\r\n         * @param {Object} dropArea\r\n         */\r\n        dragenter: function (dropArea) {\r\n            var direction = this.dragArea.index < dropArea.index ?\r\n                'left' :\r\n                'right';\r\n\r\n            getModel(dropArea.target).dragover = direction;\r\n        },\r\n\r\n        /**\r\n         * Dragleave action handler.\r\n         *\r\n         * @param {Object} dropArea\r\n         */\r\n        dragleave: function (dropArea) {\r\n            getModel(dropArea.target).dragover = false;\r\n        },\r\n\r\n        /**\r\n         * Dragend action handler.\r\n         *\r\n         * @param {Object} dragArea\r\n         */\r\n        dragend: function (dragArea) {\r\n            var dropArea = this.dropArea,\r\n                dragElem = dragArea.target;\r\n\r\n            this.dragging = false;\r\n\r\n            document.body.removeChild(this.dragTable);\r\n\r\n            getModel(dragElem).dragging(false);\r\n\r\n            if (dropArea && !compareCols(dropArea.target, dragElem)) {\r\n                this.drop(dropArea, dragArea);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Drop action handler.\r\n         *\r\n         * @param {Object} dropArea\r\n         * @param {Object} dragArea\r\n         */\r\n        drop: function (dropArea, dragArea) {\r\n            var dropModel = getModel(dropArea.target),\r\n                dragModel = getModel(dragArea.target);\r\n\r\n            getModel(this.table).insertChild(dragModel, dropModel);\r\n            dropModel.dragover = false;\r\n        },\r\n\r\n        /**\r\n         * Documents' 'mousemove' event handler.\r\n         *\r\n         * @param {(MouseEvent|TouchEvent)} e - Event object.\r\n         */\r\n        onMouseMove: function (e) {\r\n            var grab    = this.grabbed,\r\n                touch   = getTouch(e),\r\n                x       = touch.pageX,\r\n                y       = touch.pageY;\r\n\r\n            if (this.initDrag || this.dragging) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (this.initDrag && distance(x, y, grab.x, grab.y) >= this.minDistance) {\r\n                this.dragstart(grab.elem);\r\n            }\r\n\r\n            if (this.dragging) {\r\n                this.drag(x, y);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Documents' 'mouseup' event handler.\r\n         */\r\n        onMouseUp: function () {\r\n            if (this.initDrag || this.dragging) {\r\n                this.initDrag = false;\r\n                this.$body.removeClass(this.noSelectClass);\r\n            }\r\n\r\n            if (this.dragging) {\r\n                this.dragend(this.dragArea);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Columns' 'mousedown' event handler.\r\n         *\r\n         * @param {(MouseEvent|TouchEvent)} e - Event object.\r\n         */\r\n        onMouseDown: function (e) {\r\n            var touch = getTouch(e);\r\n\r\n            this.grab(touch.pageX, touch.pageY, e.currentTarget);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/export.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiElement'\r\n], function ($, _, Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            template: 'ui/grid/exportButton',\r\n            selectProvider: 'ns = ${ $.ns }, index = ids',\r\n            checked: '',\r\n            additionalParams: [],\r\n            modules: {\r\n                selections: '${ $.selectProvider }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChecked();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            _.each(this.additionalParams, function (value, key) {\r\n                key = 'additionalParams.' + key;\r\n                this.imports[key] = value;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('checked');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks first option if checked not defined.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initChecked: function () {\r\n            if (!this.checked()) {\r\n                this.checked(\r\n                    this.options[0].value\r\n                );\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Compose params object that will be added to request.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getParams: function () {\r\n            var selections = this.selections(),\r\n                data = selections ? selections.getSelections() : null,\r\n                itemsType,\r\n                result = {};\r\n\r\n            if (data) {\r\n                itemsType = data.excludeMode ? 'excluded' : 'selected';\r\n                result.filters = data.params.filters;\r\n                result.search = data.params.search;\r\n                result.namespace = data.params.namespace;\r\n                result[itemsType] = data[itemsType];\r\n                _.each(this.additionalParams, function (param, key) {\r\n                    result[key] = param;\r\n                });\r\n\r\n                if (!result[itemsType].length) {\r\n                    result[itemsType] = false;\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Find checked option.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getActiveOption: function () {\r\n            return _.findWhere(this.options, {\r\n                value: this.checked()\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Build option url.\r\n         *\r\n         * @param {Object} option\r\n         * @returns {String}\r\n         */\r\n        buildOptionUrl: function (option) {\r\n            var params = this.getParams();\r\n\r\n            if (!params) {\r\n                return 'javascript:void(0);';\r\n            }\r\n\r\n            return option.url + '?' + $.param(params);\r\n            //TODO: MAGETWO-40250\r\n        },\r\n\r\n        /**\r\n         * Redirect to built option url.\r\n         */\r\n        applyOption: function () {\r\n            var option = this.getActiveOption(),\r\n                url = this.buildOptionUrl(option);\r\n\r\n            location.href = url;\r\n\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/listing.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/lib/spinner',\r\n    'rjsResolver',\r\n    'uiLayout',\r\n    'uiCollection'\r\n], function (ko, _, loader, resolver, layout, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            template: 'ui/grid/listing',\r\n            listTemplate: 'ui/list/listing',\r\n            stickyTmpl: 'ui/grid/sticky/listing',\r\n            viewSwitcherTmpl: 'ui/grid/view-switcher',\r\n            positions: false,\r\n            displayMode: 'grid',\r\n            displayModes: {\r\n                grid: {\r\n                    value: 'grid',\r\n                    label: 'Grid',\r\n                    template: '${ $.template }'\r\n                },\r\n                list: {\r\n                    value: 'list',\r\n                    label: 'List',\r\n                    template: '${ $.listTemplate }'\r\n                }\r\n            },\r\n            dndConfig: {\r\n                name: '${ $.name }_dnd',\r\n                component: 'Magento_Ui/js/grid/dnd',\r\n                columnsProvider: '${ $.name }',\r\n                enabled: true\r\n            },\r\n            editorConfig: {\r\n                name: '${ $.name }_editor',\r\n                component: 'Magento_Ui/js/grid/editing/editor',\r\n                columnsProvider: '${ $.name }',\r\n                dataProvider: '${ $.provider }',\r\n                enabled: false\r\n            },\r\n            resizeConfig: {\r\n                name: '${ $.name }_resize',\r\n                columnsProvider: '${ $.name }',\r\n                component: 'Magento_Ui/js/grid/resize',\r\n                enabled: false\r\n            },\r\n            imports: {\r\n                rows: '${ $.provider }:data.items'\r\n            },\r\n            listens: {\r\n                elems: 'updatePositions updateVisible',\r\n                '${ $.provider }:reload': 'onBeforeReload',\r\n                '${ $.provider }:reloaded': 'onDataReloaded'\r\n            },\r\n            modules: {\r\n                dnd: '${ $.dndConfig.name }',\r\n                resize: '${ $.resizeConfig.name }'\r\n            },\r\n            tracks: {\r\n                displayMode: true\r\n            },\r\n            statefull: {\r\n                displayMode: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes Listing component.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'updateVisible');\r\n\r\n            this._super()\r\n                .initDnd()\r\n                .initEditor()\r\n                .initResize();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track({\r\n                    rows: [],\r\n                    visibleColumns: []\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates drag&drop widget instance.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initDnd: function () {\r\n            if (this.dndConfig.enabled) {\r\n                layout([this.dndConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes resize component.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initResize: function () {\r\n            if (this.resizeConfig.enabled) {\r\n                layout([this.resizeConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates inline editing component.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initEditor: function () {\r\n            if (this.editorConfig.enabled) {\r\n                layout([this.editorConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Called when another element was added to current component.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initElement: function (element) {\r\n            var currentCount = this.elems().length,\r\n                totalCount = this.initChildCount;\r\n\r\n            if (totalCount === currentCount) {\r\n                this.initPositions();\r\n            }\r\n\r\n            element.on('visible', this.updateVisible);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Defines initial order of child elements.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        initPositions: function () {\r\n            this.on('positions', this.applyPositions.bind(this));\r\n\r\n            this.setStatefull('positions');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Updates current state of child positions.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        updatePositions: function () {\r\n            var positions = {};\r\n\r\n            this.elems.each(function (elem, index) {\r\n                positions[elem.index] = index;\r\n            });\r\n\r\n            this.set('positions', positions);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Resorts child elements array according to provided positions.\r\n         *\r\n         * @param {Object} positions - Object where key represents child\r\n         *      index and value is its' position.\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        applyPositions: function (positions) {\r\n            var sorting;\r\n\r\n            sorting = this.elems.map(function (elem) {\r\n                return {\r\n                    elem: elem,\r\n                    position: positions[elem.index]\r\n                };\r\n            });\r\n\r\n            this.insertChild(sorting);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns reference to 'visibleColumns' array.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getVisible: function () {\r\n            var observable = ko.getObservable(this, 'visibleColumns');\r\n\r\n            return observable || this.visibleColumns;\r\n        },\r\n\r\n        /**\r\n         * Returns path to the template\r\n         * defined for a current display mode.\r\n         *\r\n         * @returns {String} Path to the template.\r\n         */\r\n        getTemplate: function () {\r\n            var mode = this.displayModes[this.displayMode];\r\n\r\n            return mode.template;\r\n        },\r\n\r\n        /**\r\n         * Returns an array of available display modes.\r\n         *\r\n         * @returns {Array<Object>}\r\n         */\r\n        getDisplayModes: function () {\r\n            var modes = this.displayModes;\r\n\r\n            return _.values(modes);\r\n        },\r\n\r\n        /**\r\n         * Sets display mode to provided value.\r\n         *\r\n         * @param {String} index\r\n         * @returns {Listing} Chainable\r\n         */\r\n        setDisplayMode: function (index) {\r\n            this.displayMode = index;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns total number of displayed columns in grid.\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        countVisible: function () {\r\n            return this.visibleColumns.length;\r\n        },\r\n\r\n        /**\r\n         * Updates array of visible columns.\r\n         *\r\n         * @returns {Listing} Chainable.\r\n         */\r\n        updateVisible: function () {\r\n            this.visibleColumns = this.elems.filter('visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks if grid has data.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasData: function () {\r\n            return !!this.rows && !!this.rows.length;\r\n        },\r\n\r\n        /**\r\n         * Hides loader.\r\n         */\r\n        hideLoader: function () {\r\n            loader.get(this.name).hide();\r\n        },\r\n\r\n        /**\r\n         * Shows loader.\r\n         */\r\n        showLoader: function () {\r\n            loader.get(this.name).show();\r\n        },\r\n\r\n        /**\r\n         * Handler of the data providers' 'reload' event.\r\n         */\r\n        onBeforeReload: function () {\r\n            this.showLoader();\r\n        },\r\n\r\n        /**\r\n         * Handler of the data providers' 'reloaded' event.\r\n         */\r\n        onDataReloaded: function () {\r\n            resolver(this.hideLoader, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/masonry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/listing',\r\n    'Magento_Ui/js/lib/view/utils/raf',\r\n    'jquery',\r\n    'ko',\r\n    'underscore'\r\n], function (Listing, raf, $, ko, _) {\r\n    'use strict';\r\n\r\n    return Listing.extend({\r\n        defaults: {\r\n            template: 'ui/grid/masonry',\r\n            imports: {\r\n                rows: '${ $.provider }:data.items',\r\n                errorMessage: '${ $.provider }:data.errorMessage'\r\n            },\r\n            listens: {\r\n                rows: 'initComponent'\r\n            },\r\n\r\n            /**\r\n             * Images container id\r\n             * @param string\r\n             */\r\n            containerId: null,\r\n\r\n            /**\r\n             * Minimum aspect ratio for each image\r\n             * @param int\r\n             */\r\n            minRatio: null,\r\n\r\n            /**\r\n             * Container width\r\n             * @param int\r\n             */\r\n            containerWidth: window.innerWidth,\r\n\r\n            /**\r\n             * Margin between images\r\n             * @param int\r\n             */\r\n            imageMargin: 20,\r\n\r\n            /**\r\n             * Maximum image height value\r\n             * @param int\r\n             */\r\n            maxImageHeight: 240,\r\n\r\n            /**\r\n             * The value is minimum image width to height ratio when container width is less than the key\r\n             * @param {Object}\r\n             */\r\n            containerWidthToMinRatio: {\r\n                640: 3,\r\n                1280: 5,\r\n                1920: 8\r\n            },\r\n\r\n            /**\r\n             * Default minimal image width to height ratio.\r\n             * Applied when container width is greater than max width in the containerWidthToMinRatio matrix.\r\n             * @param int\r\n             */\r\n            defaultMinRatio: 10,\r\n\r\n            /**\r\n             * Layout update FPS during window resizing\r\n             */\r\n            refreshFPS: 60\r\n        },\r\n\r\n        /**\r\n         * Init observable variables\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'rows',\r\n                    'errorMessage'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component handler\r\n         * @param {Object} rows\r\n         * @return {Object}\r\n         */\r\n        initComponent: function (rows) {\r\n            if (!rows.length) {\r\n                return;\r\n            }\r\n            this.imageMargin = parseInt(this.imageMargin, 10);\r\n            this.container = $('[data-id=\"' + this.containerId + '\"]')[0];\r\n\r\n            this.setLayoutStyles();\r\n            this.setEventListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set event listener to track resize event\r\n         */\r\n        setEventListener: function () {\r\n            window.addEventListener('resize', function () {\r\n                this.updateStyles();\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Updates styles for component.\r\n         */\r\n        updateStyles: function () {\r\n            raf(function () {\r\n                this.containerWidth = window.innerWidth;\r\n                this.setLayoutStyles();\r\n            }.bind(this), this.refreshFPS);\r\n        },\r\n\r\n        /**\r\n         * Set layout styles inside the container\r\n         */\r\n        setLayoutStyles: function () {\r\n            var containerWidth = parseInt(this.container.clientWidth, 10),\r\n                rowImages = [],\r\n                ratio = 0,\r\n                rowHeight = 0,\r\n                calcHeight = 0,\r\n                isLastRow = false,\r\n                rowNumber = 1;\r\n\r\n            this.setMinRatio();\r\n\r\n            this.rows().forEach(function (image, index) {\r\n                ratio += parseFloat((image.width / image.height).toFixed(2));\r\n                rowImages.push(image);\r\n\r\n                if (ratio < this.minRatio && index + 1 !== this.rows().length) {\r\n                    // Row has more space for images and the image is not the last one - proceed to the next iteration\r\n                    return;\r\n                }\r\n\r\n                ratio = Math.max(ratio, this.minRatio);\r\n                calcHeight = (containerWidth - this.imageMargin * rowImages.length) / ratio;\r\n                rowHeight = calcHeight < this.maxImageHeight ? calcHeight : this.maxImageHeight;\r\n                isLastRow = index + 1 === this.rows().length;\r\n\r\n                this.assignImagesToRow(rowImages, rowNumber, rowHeight, isLastRow);\r\n\r\n                rowImages = [];\r\n                ratio = 0;\r\n                rowNumber++;\r\n\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Apply styles, css classes and add properties for images in the row\r\n         *\r\n         * @param {Object[]} images\r\n         * @param {Number} rowNumber\r\n         * @param {Number} rowHeight\r\n         * @param {Boolean} isLastRow\r\n         */\r\n        assignImagesToRow: function (images, rowNumber, rowHeight, isLastRow) {\r\n            var imageWidth;\r\n\r\n            images.forEach(function (img) {\r\n                imageWidth = rowHeight * (img.width / img.height).toFixed(2);\r\n                this.setImageStyles(img, imageWidth, rowHeight);\r\n                this.setImageClass(img, {\r\n                    bottom: isLastRow\r\n                });\r\n                img.rowNumber = rowNumber;\r\n            }.bind(this));\r\n\r\n            images[0].firstInRow = true;\r\n            images[images.length - 1].lastInRow = true;\r\n        },\r\n\r\n        /**\r\n         * Wait for container to initialize\r\n         */\r\n        waitForContainer: function (callback) {\r\n            if (typeof this.container === 'undefined') {\r\n                setTimeout(function () {\r\n                    this.waitForContainer(callback);\r\n                }.bind(this), 500);\r\n            } else {\r\n                setTimeout(callback, 0);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set layout styles when container element is loaded.\r\n         */\r\n        setLayoutStylesWhenLoaded: function () {\r\n            this.waitForContainer(function () {\r\n                this.setLayoutStyles();\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set styles for every image in layout\r\n         *\r\n         * @param {Object} img\r\n         * @param {Number} width\r\n         * @param {Number} height\r\n         */\r\n        setImageStyles: function (img, width, height) {\r\n            if (!img.styles) {\r\n                img.styles = ko.observable();\r\n            }\r\n            img.styles({\r\n                width: parseInt(width, 10) + 'px',\r\n                height: parseInt(height, 10) + 'px'\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set css classes to and an image\r\n         *\r\n         * @param {Object} image\r\n         * @param {Object} classes\r\n         */\r\n        setImageClass: function (image, classes) {\r\n            if (!image.css) {\r\n                image.css = ko.observable(classes);\r\n            }\r\n            image.css(classes);\r\n        },\r\n\r\n        /**\r\n         * Set min ratio for images in layout\r\n         */\r\n        setMinRatio: function () {\r\n            var minRatio = _.find(\r\n                this.containerWidthToMinRatio,\r\n\r\n                /**\r\n                 * Find the minimal ratio for container width in the matrix\r\n                 *\r\n                 * @param {Number} ratio\r\n                 * @param {Number} width\r\n                 * @returns {Boolean}\r\n                 */\r\n                function (ratio, width) {\r\n                    return this.containerWidth <= width;\r\n                },\r\n                this\r\n            );\r\n\r\n            this.minRatio = minRatio ? minRatio : this.defaultMinRatio;\r\n        },\r\n\r\n        /**\r\n         * Checks if grid has data.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasData: function () {\r\n            return !!this.rows() && !!this.rows().length;\r\n        },\r\n\r\n        /**\r\n         * Returns error message returned by the data provider\r\n         *\r\n         * @returns {String|null}\r\n         */\r\n        getErrorMessageUnsanitizedHtml: function () {\r\n            return this.errorMessage();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/massactions.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'mageUtils',\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/translate'\r\n], function (_, registry, utils, Collapsible, confirm, alert, $t) {\r\n    'use strict';\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            template: 'ui/grid/actions',\r\n            stickyTmpl: 'ui/grid/sticky/actions',\r\n            selectProvider: 'ns = ${ $.ns }, index = ids',\r\n            actions: [],\r\n            noItemsMsg: $t('You haven\\'t selected any items!'),\r\n            modules: {\r\n                selections: '${ $.selectProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties.\r\n         *\r\n         * @returns {Massactions} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('actions');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Applies specified action.\r\n         *\r\n         * @param {String} actionIndex - Actions' identifier.\r\n         * @returns {Massactions} Chainable.\r\n         */\r\n        applyAction: function (actionIndex) {\r\n            var data = this.getSelections(),\r\n                action,\r\n                callback;\r\n\r\n            if (!data.total) {\r\n                alert({\r\n                    content: this.noItemsMsg\r\n                });\r\n\r\n                return this;\r\n            }\r\n\r\n            action = this.getAction(actionIndex);\r\n            callback = this._getCallback(action, data);\r\n\r\n            action.confirm ?\r\n                this._confirm(action, callback) :\r\n                callback();\r\n\r\n            this.close();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Retrieves selections data from the selections provider.\r\n         *\r\n         * @returns {Object|Undefined}\r\n         */\r\n        getSelections: function () {\r\n            var provider = this.selections(),\r\n                selections = provider && provider.getSelections();\r\n\r\n            return selections;\r\n        },\r\n\r\n        /**\r\n         * Retrieves action object associated with a specified index.\r\n         *\r\n         * @param {String} actionIndex - Actions' identifier.\r\n         * @returns {Object} Action object.\r\n         */\r\n        getAction: function (actionIndex) {\r\n            return _.findWhere(this.actions(), {\r\n                type: actionIndex\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Adds new action. If action with a specified identifier\r\n         * already exists, than the original one will be overrided.\r\n         *\r\n         * @param {Object} action - Action object.\r\n         * @returns {Massactions} Chainable.\r\n         */\r\n        addAction: function (action) {\r\n            var actions = this.actions(),\r\n                index = _.findIndex(actions, {\r\n                    type: action.type\r\n                });\r\n\r\n            ~index ?\r\n                actions[index] = action :\r\n                actions.push(action);\r\n\r\n            this.actions(actions);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates action callback based on its' data. If action doesn't spicify\r\n         * a callback function than the default one will be used.\r\n         *\r\n         * @private\r\n         * @param {Object} action - Actions' object.\r\n         * @param {Object} selections - Selections data.\r\n         * @returns {Function} Callback function.\r\n         */\r\n        _getCallback: function (action, selections) {\r\n            var callback = action.callback,\r\n                args = [action, selections];\r\n\r\n            if (utils.isObject(callback)) {\r\n                args.unshift(callback.target);\r\n\r\n                callback = registry.async(callback.provider);\r\n            } else if (typeof callback != 'function') {\r\n                callback = this.defaultCallback.bind(this);\r\n            }\r\n\r\n            return function () {\r\n                callback.apply(null, args);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Default action callback. Sends selections data\r\n         * via POST request.\r\n         *\r\n         * @param {Object} action - Action data.\r\n         * @param {Object} data - Selections data.\r\n         */\r\n        defaultCallback: function (action, data) {\r\n            var itemsType = data.excludeMode ? 'excluded' : 'selected',\r\n                selections = {};\r\n\r\n            selections[itemsType] = data[itemsType];\r\n\r\n            if (!selections[itemsType].length) {\r\n                selections[itemsType] = false;\r\n            }\r\n\r\n            _.extend(selections, data.params || {});\r\n\r\n            utils.submit({\r\n                url: action.url,\r\n                data: selections\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Shows actions' confirmation window.\r\n         *\r\n         * @param {Object} action - Actions' data.\r\n         * @param {Function} callback - Callback that will be\r\n         *      invoked if action is confirmed.\r\n         */\r\n        _confirm: function (action, callback) {\r\n            var confirmData = action.confirm,\r\n                data = this.getSelections(),\r\n                total = data.total ? data.total : 0,\r\n                confirmMessage = confirmData.message + (data.showTotalRecords || data.showTotalRecords === undefined ?\r\n                    ' (' + total + ' record' + (total > 1 ? 's' : '') + ')'\r\n                    : '');\r\n\r\n            confirm({\r\n                title: confirmData.title,\r\n                content: confirmMessage,\r\n                actions: {\r\n                    confirm: callback\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'rjsResolver',\r\n    'uiLayout',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/translate',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/grid/data-storage'\r\n], function ($, _, utils, resolver, layout, alert, $t, Element, registry) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            firstLoad: true,\r\n            lastError: false,\r\n            storageConfig: {\r\n                component: 'Magento_Ui/js/grid/data-storage',\r\n                provider: '${ $.storageConfig.name }',\r\n                name: '${ $.name }_storage',\r\n                updateUrl: '${ $.update_url }'\r\n            },\r\n            listens: {\r\n                params: 'onParamsChange',\r\n                requestConfig: 'updateRequestConfig'\r\n            },\r\n            ignoreTmpls: {\r\n                data: true\r\n            },\r\n            triggerDataReload: false\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initialize: function () {\r\n            utils.limit(this, 'onParamsChange', 5);\r\n            _.bindAll(this, 'onReload');\r\n\r\n            this._super()\r\n                .initStorage()\r\n                .clearData();\r\n\r\n            // Load data when there will\r\n            // be no more pending assets.\r\n            resolver(this.reload, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes storage component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initStorage: function () {\r\n            layout([this.storageConfig]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Clears provider's data properties.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        clearData: function () {\r\n            this.setData({\r\n                items: [],\r\n                totalRecords: 0,\r\n                showTotalRecords: true\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Overrides current data with a provided one.\r\n         *\r\n         * @param {Object} data - New data object.\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        setData: function (data) {\r\n            data = this.processData(data);\r\n\r\n            this.set('data', data);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Processes data before applying it.\r\n         *\r\n         * @param {Object} data - Data to be processed.\r\n         * @returns {Object}\r\n         */\r\n        processData: function (data) {\r\n            var items = data.items;\r\n\r\n            _.each(items, function (record, index) {\r\n                record._rowIndex = index;\r\n            });\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Reloads data with current parameters.\r\n         *\r\n         * @returns {Promise} Reload promise object.\r\n         */\r\n        reload: function (options) {\r\n            var request = this.storage().getData(this.params, options);\r\n\r\n            this.trigger('reload');\r\n\r\n            request\r\n                .done(this.onReload)\r\n                .fail(this.onError.bind(this));\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Handles changes of 'params' object.\r\n         */\r\n        onParamsChange: function () {\r\n            // It's necessary to make a reload only\r\n            // after the initial loading has been made.\r\n            if (!this.firstLoad) {\r\n                this.reload();\r\n            } else {\r\n                this.triggerDataReload = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles reload error.\r\n         */\r\n        onError: function (xhr) {\r\n            if (xhr.statusText === 'abort') {\r\n                return;\r\n            }\r\n            this.trigger('reloaded');\r\n            this.set('lastError', true);\r\n            this.firstLoad = false;\r\n            this.triggerDataReload = false;\r\n\r\n            alert({\r\n                content: $t('Something went wrong.')\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handles successful data reload.\r\n         *\r\n         * @param {Object} data - Retrieved data object.\r\n         */\r\n        onReload: function (data) {\r\n            this.firstLoad = false;\r\n            this.set('lastError', false);\r\n            this.setData(data)\r\n                .trigger('reloaded');\r\n\r\n            if (this.triggerDataReload) {\r\n                this.triggerDataReload = false;\r\n                this.reload();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Updates storage's request configuration\r\n         *\r\n         * @param {Object} requestConfig\r\n         */\r\n        updateRequestConfig: function (requestConfig) {\r\n            registry.get(this.storageConfig.provider, function (storage) {\r\n                _.extend(storage.requestConfig, requestConfig);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/resize.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/lib/view/utils/async',\r\n    'ko',\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/lib/knockout/extender/bound-nodes',\r\n    'uiElement'\r\n], function ($, ko, _, utils, registry, boundedNodes, Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            rootSelector: '${ $.columnsProvider }:.admin__data-grid-wrap',\r\n            tableSelector: '${ $.rootSelector } -> table.data-grid',\r\n            mainTableSelector: '[data-role=\"grid\"]',\r\n            columnSelector: '${ $.tableSelector } thead tr th',\r\n            fieldSelector: '${ $.tableSelector } tbody tr td',\r\n\r\n            imports: {\r\n                storageColumnsData: '${ $.storageConfig.path }.storageColumnsData'\r\n            },\r\n            storageColumnsData: {},\r\n            columnsElements: {},\r\n            tableWidth: 0,\r\n            sumColumnsWidth: 0,\r\n            showLines: 4,\r\n            resizableElementClass: 'shadow-div',\r\n            resizingColumnClass: '_resizing',\r\n            fixedLayoutClass: '_layout-fixed',\r\n            inResizeClass: '_in-resize',\r\n            visibleClass: '_resize-visible',\r\n            cellContentElement: 'div.data-grid-cell-content',\r\n            minColumnWidth: 40,\r\n            layoutFixedPolyfillIterator: 0,\r\n            windowResize: false,\r\n            resizable: false,\r\n            resizeConfig: {\r\n                maxRowsHeight: [],\r\n                curResizeElem: {},\r\n                depResizeElem: {},\r\n                previousWidth: null\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize application -\r\n         * binding functions context,\r\n         * set handlers for table elements\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(\r\n                this,\r\n                'initTable',\r\n                'initColumn',\r\n                'mousedownHandler',\r\n                'mousemoveHandler',\r\n                'mouseupHandler',\r\n                'refreshLastColumn',\r\n                'refreshMaxRowHeight',\r\n                'preprocessingWidth',\r\n                '_eventProxy',\r\n                'checkAfterResize'\r\n            );\r\n\r\n            this._super();\r\n            this.observe(['maxRowsHeight']);\r\n            this.maxRowsHeight([]);\r\n\r\n            $.async(this.tableSelector, this.initTable);\r\n            $.async(this.columnSelector, this.initColumn);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set table element and adds handler to mousedown on headers\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        initTable: function (table) {\r\n            if ($(table).is(this.mainTableSelector)) {\r\n                this.table = table;\r\n                this.tableWidth = $(table).outerWidth();\r\n                $(window).on('resize', this.checkAfterResize);\r\n            }\r\n\r\n            //TODO - Must be deleted when Firefox fixed problem with table-layout: fixed\r\n            //ticket to Firefox: https://bugs.webkit.org/show_bug.cgi?id=90068\r\n            if (navigator.userAgent.search(/Firefox/) > -1) {\r\n                this._layoutFixedPolyfill();\r\n            }\r\n\r\n            $(table).addClass(this.fixedLayoutClass);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Window resize handler,\r\n         * check changes on table width and\r\n         * set new width to variable\r\n         * after window resize start preprocessingWidth method\r\n         */\r\n        checkAfterResize: function () {\r\n            var tableWidth,\r\n                self = this;\r\n\r\n            setTimeout(function () {\r\n                tableWidth = $(self.table).outerWidth();\r\n\r\n                if (self.tableWidth !== tableWidth) {\r\n                    self.tableWidth = tableWidth;\r\n                } else {\r\n                    self.preprocessingWidth();\r\n                }\r\n            }, 300);\r\n        },\r\n\r\n        /**\r\n         * Check conditions to set minimal width\r\n         */\r\n        checkSumColumnsWidth: function () {\r\n            var table = $(this.table),\r\n                elems = table.find('th:not([style*=\"width: auto\"]):visible'),\r\n                elemsWidthMin = table.find('th[style*=\"width: ' + (this.minColumnWidth - 1) + 'px\"]:visible'),\r\n                elemsWidthAuto = table.find('th[style*=\"width: auto\"]:visible'),\r\n                model;\r\n\r\n            this.sumColumnsWidth = 0;\r\n            _.each(elems, function (elem) {\r\n                model = ko.dataFor(elem);\r\n                model.width && model.width !== 'auto' ? this.sumColumnsWidth += model.width : false;\r\n            }, this);\r\n\r\n            if (\r\n                    this.sumColumnsWidth + elemsWidthAuto.length *\r\n                    this.minColumnWidth + elemsWidthMin.length *\r\n                    this.minColumnWidth > this.tableWidth\r\n            ) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Set minimal width to element with \"auto\" width\r\n         */\r\n        setWidthToColumnsWidthAuto: function () {\r\n            var elemsWidthAuto = $(this.table).find('th[style*=\"width: auto\"]:visible');\r\n\r\n            _.each(elemsWidthAuto, function (elem) {\r\n                $(elem).outerWidth(this.minColumnWidth - 1);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Check conditions to set auto width\r\n         */\r\n        hasMinimal: function () {\r\n            var table = $(this.table),\r\n                elemsWidthMin = table.find('th[style*=\"width: ' + (this.minColumnWidth - 1) + 'px\"]:visible'),\r\n                elemsWidthAuto = table.find('th[style*=\"width: auto\"]:visible');\r\n\r\n            if (\r\n                    elemsWidthAuto && this.sumColumnsWidth + elemsWidthAuto.length *\r\n                    this.minColumnWidth + elemsWidthMin.length * this.minColumnWidth + 5 < this.tableWidth\r\n            ) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Set \"auto\" width to element with minimal width\r\n         */\r\n        setAuto: function () {\r\n            var elemsWidthAuto = $(this.table).find('th[style*=\"width: ' + (this.minColumnWidth - 1) + 'px\"]:visible');\r\n\r\n            _.each(elemsWidthAuto, function (elem) {\r\n                $(elem).outerWidth('auto');\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Check columns width and preprocessing\r\n         */\r\n        preprocessingWidth: function () {\r\n            if (this.checkSumColumnsWidth()) {\r\n                this.setWidthToColumnsWidthAuto();\r\n            } else if (this.hasMinimal()) {\r\n                this.setAuto();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init columns elements,\r\n         * set width to current column element,\r\n         * add resizable element to columns header,\r\n         * check and add no-resize class to last column,\r\n         * stop parents events,\r\n         * add handler to visibility column\r\n         *\r\n         * @param {Object} column - columns header element (th)\r\n         */\r\n        initColumn: function (column) {\r\n            var model = ko.dataFor(column),\r\n                ctxIndex = this.getCtxIndex(ko.contextFor(column));\r\n\r\n            model.width = this.getDefaultWidth(column);\r\n\r\n            if (!this.hasColumn(model, ctxIndex, false)) {\r\n                this.columnsElements[model.index] = this.columnsElements[model.index] || {};\r\n                this.columnsElements[model.index][ctxIndex] = column;\r\n                this.initResizableElement(column);\r\n                this.setStopPropagationHandler(column);\r\n                $(column).outerWidth(model.width);\r\n            }\r\n\r\n            this.refreshLastColumn(column);\r\n            this.preprocessingWidth();\r\n\r\n            model.on('visible', this.refreshLastColumn.bind(this, column));\r\n            model.on('visible', this.preprocessingWidth.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Hack for mozilla firefox\r\n         */\r\n        _layoutFixedPolyfill: function () {\r\n            var self = this;\r\n\r\n            setTimeout(function () {\r\n                if (self.layoutFixedPolyfillIterator < 20) {\r\n                    $(window).trigger('resize');\r\n                    self.layoutFixedPolyfillIterator++;\r\n                    self._layoutFixedPolyfill();\r\n                } else {\r\n                    return false;\r\n                }\r\n            }, 500);\r\n        },\r\n\r\n        /**\r\n         * Check element is resizable or not\r\n         * and append resizable element to DOM\r\n         *\r\n         * @param {Object} column - columns header element (th)\r\n         * @returns {Boolean}\r\n         */\r\n        initResizableElement: function (column) {\r\n            var model = ko.dataFor(column),\r\n                templateDragElement = '<div class=\"' + this.resizableElementClass + '\"></div>';\r\n\r\n            if (_.isUndefined(model.resizeEnabled) || model.resizeEnabled) {\r\n                $(column).append(templateDragElement);\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Check event target and if need stop parents event,\r\n         *\r\n         * @param {Object} column - columns header element (th)\r\n         * @returns {Boolean}\r\n         */\r\n        setStopPropagationHandler: function (column) {\r\n            var events,\r\n                click,\r\n                mousedown;\r\n\r\n            $(column).on('click', this._eventProxy);\r\n            $(column).on('mousedown', this._eventProxy);\r\n\r\n            events = $._data(column, 'events');\r\n\r\n            click = events.click;\r\n            mousedown = events.mousedown;\r\n            click.unshift(click.pop());\r\n            mousedown.unshift(mousedown.pop());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check event target and stop event if need\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        _eventProxy: function (event) {\r\n            if ($(event.target).is('.' + this.resizableElementClass)) {\r\n\r\n                if (event.type === 'click') {\r\n                    event.stopImmediatePropagation();\r\n                } else if (event.type === 'mousedown') {\r\n                    this.mousedownHandler(event);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check visible columns and set disable class to resizable elements,\r\n         *\r\n         * @param {Object} column - columns header element (th)\r\n         */\r\n        refreshLastColumn: function (column) {\r\n            var i = 0,\r\n                columns = $(column).parent().children().not(':hidden'),\r\n                length = columns.length;\r\n\r\n            $('.' + this.visibleClass).removeClass(this.visibleClass);\r\n\r\n            $(column).parent().children().not(':hidden').last().addClass(this.visibleClass);\r\n\r\n            for (i; i < length; i++) {\r\n\r\n                if (!columns.eq(i).find('.' + this.resizableElementClass).length && i) {\r\n                    columns.eq(i - 1).addClass(this.visibleClass);\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Refresh max height to row elements,\r\n         *\r\n         * @param {Object} elem - (td)\r\n         */\r\n        refreshMaxRowHeight: function (elem) {\r\n            var rowsH = this.maxRowsHeight(),\r\n                curEL = $(elem).find('div'),\r\n                height,\r\n                obj = this.hasRow($(elem).parent()[0], true);\r\n\r\n            curEL.css('white-space', 'nowrap');\r\n            height = curEL.height() * this.showLines;\r\n            curEL.css('white-space', 'normal');\r\n\r\n            if (obj) {\r\n                if (obj.maxHeight < height) {\r\n                    rowsH[_.indexOf(rowsH, obj)].maxHeight = height;\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                rowsH.push({\r\n                    elem: $(elem).parent()[0],\r\n                    maxHeight: height\r\n                });\r\n            }\r\n\r\n            $(elem).parent().children().find(this.cellContentElement).css('max-height', height + 'px');\r\n            this.maxRowsHeight(rowsH);\r\n        },\r\n\r\n        /**\r\n         * Set resize class to elements when resizable\r\n         */\r\n        _setResizeClass: function () {\r\n            var rowElements = $(this.table).find('tr');\r\n\r\n            rowElements\r\n                .find('td:eq(' + this.resizeConfig.curResizeElem.ctx.$index() + ')')\r\n                .addClass(this.resizingColumnClass);\r\n            rowElements\r\n                .find('td:eq(' + this.resizeConfig.depResizeElem.ctx.$index() + ')')\r\n                .addClass(this.resizingColumnClass);\r\n        },\r\n\r\n        /**\r\n         * Remove resize class to elements when resizable\r\n         */\r\n        _removeResizeClass: function () {\r\n            var rowElements = $(this.table).find('tr');\r\n\r\n            rowElements\r\n                .find('td:eq(' + this.resizeConfig.curResizeElem.ctx.$index() + ')')\r\n                .removeClass(this.resizingColumnClass);\r\n            rowElements\r\n                .find('td:eq(' + this.resizeConfig.depResizeElem.ctx.$index() + ')')\r\n                .removeClass(this.resizingColumnClass);\r\n        },\r\n\r\n        /**\r\n         * Check conditions to resize\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        _canResize: function (column) {\r\n            if (\r\n                $(column).hasClass(this.visibleClass) ||\r\n                !$(this.resizeConfig.depResizeElem.elems[0]).find('.' + this.resizableElementClass).length\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Mouse down event handler,\r\n         * find current and dep column to resize\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        mousedownHandler: function (event) {\r\n            var target = event.target,\r\n                column = $(target).parent()[0],\r\n                cfg = this.resizeConfig,\r\n                body = $('body');\r\n\r\n            event.stopImmediatePropagation();\r\n            cfg.curResizeElem.model = ko.dataFor(column);\r\n            cfg.curResizeElem.ctx = ko.contextFor(column);\r\n            cfg.curResizeElem.elems = this.hasColumn(cfg.curResizeElem.model, false, true);\r\n            cfg.curResizeElem.position = event.pageX;\r\n            cfg.depResizeElem.elems = this.getNextElements(cfg.curResizeElem.elems[0]);\r\n            cfg.depResizeElem.model = ko.dataFor(cfg.depResizeElem.elems[0]);\r\n            cfg.depResizeElem.ctx = ko.contextFor(cfg.depResizeElem.elems[0]);\r\n\r\n            this._setResizeClass();\r\n\r\n            if (!this._canResize(column)) {\r\n                return false;\r\n            }\r\n\r\n            event.stopPropagation();\r\n            this.resizable = true;\r\n            cfg.curResizeElem.model.width = $(cfg.curResizeElem.elems[0]).outerWidth();\r\n            cfg.depResizeElem.model.width = $(cfg.depResizeElem.elems[0]).outerWidth();\r\n            body.addClass(this.inResizeClass);\r\n            body.on('mousemove', this.mousemoveHandler);\r\n            $(window).on('mouseup', this.mouseupHandler);\r\n        },\r\n\r\n        /**\r\n         * Mouse move event handler,\r\n         * change columns width\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        mousemoveHandler: function (event) {\r\n            var cfg = this.resizeConfig,\r\n                width = event.pageX - cfg.curResizeElem.position,\r\n                self = this;\r\n\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n\r\n            if (\r\n                this.resizable &&\r\n                this.minColumnWidth < cfg.curResizeElem.model.width + width &&\r\n                this.minColumnWidth < cfg.depResizeElem.model.width - width &&\r\n                cfg.previousWidth !== width\r\n            ) {\r\n                cfg.curResizeElem.model.width += width;\r\n                cfg.depResizeElem.model.width -= width;\r\n\r\n                cfg.curResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(cfg.curResizeElem.model.width);\r\n                });\r\n                cfg.depResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(cfg.depResizeElem.model.width);\r\n                });\r\n\r\n                cfg.previousWidth = width;\r\n                cfg.curResizeElem.position = event.pageX;\r\n            } else if (width <= -(cfg.curResizeElem.model.width - this.minColumnWidth)) {\r\n\r\n                cfg.curResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(self.minColumnWidth);\r\n                });\r\n                cfg.depResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(\r\n                    cfg.depResizeElem.model.width +\r\n                    cfg.curResizeElem.model.width -\r\n                    self.minColumnWidth);\r\n                });\r\n\r\n            } else if (width >= cfg.depResizeElem.model.width - this.minColumnWidth) {\r\n\r\n                cfg.depResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(self.minColumnWidth);\r\n                });\r\n                cfg.curResizeElem.elems.forEach(function (el) {\r\n                    $(el).outerWidth(\r\n                        cfg.curResizeElem.model.width +\r\n                        cfg.depResizeElem.model.width -\r\n                        self.minColumnWidth\r\n                    );\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mouse up event handler,\r\n         * change columns width\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        mouseupHandler: function (event) {\r\n            var cfg = this.resizeConfig,\r\n                body = $('body');\r\n\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n\r\n            this._removeResizeClass();\r\n            this.storageColumnsData[cfg.curResizeElem.model.index] = cfg.curResizeElem.model.width;\r\n            this.storageColumnsData[cfg.depResizeElem.model.index] = cfg.depResizeElem.model.width;\r\n            this.resizable = false;\r\n\r\n            this.store('storageColumnsData');\r\n\r\n            body.removeClass(this.inResizeClass);\r\n            body.off('mousemove', this.mousemoveHandler);\r\n            $(window).off('mouseup', this.mouseupHandler);\r\n        },\r\n\r\n        /**\r\n         * Find dependency element\r\n         *\r\n         * @param {Object} element - current element\r\n         * @returns {Object} next element data\r\n         */\r\n        getNextElements: function (element) {\r\n            var nextElem = $(element).next()[0],\r\n                nextElemModel = ko.dataFor(nextElem),\r\n                nextElemData = this.hasColumn(nextElemModel, false, true);\r\n\r\n            if (nextElemData) {\r\n                if (nextElemModel.visible) {\r\n                    return nextElemData;\r\n                }\r\n\r\n                return this.getNextElements(nextElem);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get default width\r\n         *\r\n         * @param {Object} column - (th) element\r\n         * @return {String} width for current column\r\n         */\r\n        getDefaultWidth: function (column) {\r\n            var model = ko.dataFor(column);\r\n\r\n            if (this.storageColumnsData[model.index]) {\r\n                return this.storageColumnsData[model.index];\r\n            }\r\n\r\n            if (model.resizeDefaultWidth) {\r\n                return parseInt(model.resizeDefaultWidth, 10);\r\n            }\r\n\r\n            return 'auto';\r\n        },\r\n\r\n        /**\r\n         * Check column is render or not\r\n         *\r\n         * @param {Object} model - cur column model\r\n         * @param {String|Boolean} ctxIndex - index of context, or false, if want to get cols from all ctx\r\n         * @param {Boolean} returned - need return column object or not\r\n         * @return {Boolean} if returned param is false, returned boolean value, else return current object data\r\n         */\r\n        hasColumn: function (model, ctxIndex, returned) {\r\n            var colElem = this.columnsElements[model.index] || {},\r\n                getFromAllCtx = ctxIndex === false;\r\n\r\n            if (colElem && (getFromAllCtx || colElem.hasOwnProperty(ctxIndex))) {\r\n\r\n                if (returned) {\r\n                    return getFromAllCtx ?\r\n                        _.values(colElem) :\r\n                        colElem[ctxIndex];\r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Check row is render or not\r\n         *\r\n         * @param {Object} elem - cur column element\r\n         * @param {Boolean} returned - need return column object or not\r\n         * @return {Boolean|Object} if returned param is false, returned boolean value, else return current object data\r\n         */\r\n        hasRow: function (elem, returned) {\r\n            var i = 0,\r\n                el = this.maxRowsHeight(),\r\n                length = el.length;\r\n\r\n            for (i; i < length; i++) {\r\n                if (this.maxRowsHeight()[i].elem === elem) {\r\n                    if (returned) {//eslint-disable-line max-depth\r\n                        return this.maxRowsHeight()[i];\r\n                    }\r\n\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Generate index that will identify context\r\n         *\r\n         * @param {Object} ctx\r\n         * @return {String}\r\n         */\r\n        getCtxIndex: function (ctx) {\r\n            return ctx ? ctx.$parents.reduce(function (pv, cv) {\r\n                return (pv.index || pv) + (cv || {}).index;\r\n            }) : ctx;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/grid/sortBy.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiElement'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            template: 'ui/grid/sortBy',\r\n            options: [],\r\n            applied: {},\r\n            sorting: 'asc',\r\n            columnsProvider: 'ns = ${ $.ns }, componentType = columns',\r\n            selectedOption: '',\r\n            isVisible: true,\r\n            listens: {\r\n                'selectedOption': 'applyChanges'\r\n            },\r\n            statefull: {\r\n                selectedOption: true,\r\n                applied: true\r\n            },\r\n            exports: {\r\n                applied: '${ $.provider }:params.sorting'\r\n            },\r\n            imports: {\r\n                preparedOptions: '${ $.columnsProvider }:elems'\r\n            },\r\n            modules: {\r\n                columns: '${ $.columnsProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'applied',\r\n                    'selectedOption',\r\n                    'isVisible'\r\n                ]);\r\n        },\r\n\r\n        /**\r\n         * Prepared sort order options\r\n         */\r\n        preparedOptions: function (columns) {\r\n            if (columns && columns.length > 0) {\r\n                columns.map(function (column) {\r\n                    if (column.sortable === true) {\r\n                        this.options.push({\r\n                            value: column.index,\r\n                            label: column.label\r\n                        });\r\n                        this.isVisible(true);\r\n                    } else {\r\n                        this.isVisible(false);\r\n                    }\r\n                }.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Apply changes\r\n         */\r\n        applyChanges: function () {\r\n            this.applied({\r\n                field: this.selectedOption(),\r\n                direction: this.sorting\r\n            });\r\n        }\r\n    });\r\n});\r\n"}
}});
